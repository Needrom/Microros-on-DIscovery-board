ARM GAS  /tmp/ccsCUhT2.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sockets.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.bss.sockets,"aw",%nobits
  18              		.align	2
  21              	sockets:
  22 0000 00000000 		.space	64
  22      00000000 
  22      00000000 
  22      00000000 
  22      00000000 
  23              		.section	.bss.select_cb_list,"aw",%nobits
  24              		.align	2
  27              	select_cb_list:
  28 0000 00000000 		.space	4
  29              		.section	.text.lwip_socket_thread_init,"ax",%progbits
  30              		.align	1
  31              		.global	lwip_socket_thread_init
  32              		.arch armv7e-m
  33              		.syntax unified
  34              		.thumb
  35              		.thumb_func
  36              		.fpu fpv4-sp-d16
  38              	lwip_socket_thread_init:
  39              	.LFB137:
  40              		.file 1 "Middlewares/Third_Party/LwIP/src/api/sockets.c"
   1:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Sockets BSD-Like API module
   4:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
   5:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
   6:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /*
   7:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   8:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * All rights reserved.
   9:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  10:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Redistribution and use in source and binary forms, with or without modification,
  11:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * are permitted provided that the following conditions are met:
  12:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  13:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  14:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer.
  15:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  16:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    this list of conditions and the following disclaimer in the documentation
  17:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    and/or other materials provided with the distribution.
  18:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * 3. The name of the author may not be used to endorse or promote products
ARM GAS  /tmp/ccsCUhT2.s 			page 2


  19:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *    derived from this software without specific prior written permission.
  20:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  21:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  22:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  23:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  24:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  25:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  26:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  27:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  28:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  29:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  30:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * OF SUCH DAMAGE.
  31:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  32:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This file is part of the lwIP TCP/IP stack.
  33:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  34:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Author: Adam Dunkels <adam@sics.se>
  35:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  36:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Improved by Marc Boucher <marc@mbsi.ca> and David Haas <dhaas@alum.rpi.edu>
  37:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
  38:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
  39:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  40:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/opt.h"
  41:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  42:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET /* don't build if not configured for use in lwipopts.h */
  43:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  44:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/sockets.h"
  45:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/priv/sockets_priv.h"
  46:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/api.h"
  47:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/igmp.h"
  48:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet.h"
  49:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/tcp.h"
  50:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/raw.h"
  51:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/udp.h"
  52:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/memp.h"
  53:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/pbuf.h"
  54:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/netif.h"
  55:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/priv/tcpip_priv.h"
  56:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/mld6.h"
  57:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
  58:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "lwip/inet_chksum.h"
  59:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  60:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  61:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_COMPAT_SOCKETS == 2 && LWIP_POSIX_SOCKETS_IO_NAMES
  62:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include <stdarg.h>
  63:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  64:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  65:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include <string.h>
  66:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  67:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifdef LWIP_HOOK_FILENAME
  68:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include LWIP_HOOK_FILENAME
  69:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  70:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  71:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* If the netconn API is not required publicly, then we include the necessary
  72:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    files here to get the implementation */
  73:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_NETCONN
  74:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  75:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 1
ARM GAS  /tmp/ccsCUhT2.s 			page 3


  76:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_msg.c"
  77:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "api_lib.c"
  78:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #include "netbuf.c"
  79:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #undef LWIP_NETCONN
  80:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_NETCONN 0
  81:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
  82:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  83:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define API_SELECT_CB_VAR_REF(name)               API_VAR_REF(name)
  84:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define API_SELECT_CB_VAR_DECLARE(name)           API_VAR_DECLARE(struct lwip_select_cb, name)
  85:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define API_SELECT_CB_VAR_ALLOC(name, retblock)   API_VAR_ALLOC_EXT(struct lwip_select_cb, MEMP_SEL
  86:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define API_SELECT_CB_VAR_FREE(name)              API_VAR_FREE(MEMP_SELECT_CB, name)
  87:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
  88:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
  89:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP4ADDR_PORT_TO_SOCKADDR(sin, ipaddr, port) do { \
  90:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_len = sizeof(struct sockaddr_in); \
  91:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_family = AF_INET; \
  92:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin)->sin_port = lwip_htons((port)); \
  93:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet_addr_from_ip4addr(&(sin)->sin_addr, ipaddr); \
  94:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       memset((sin)->sin_zero, 0, SIN_ZERO_LEN); }while(0)
  95:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR4_TO_IP4ADDR_PORT(sin, ipaddr, port) do { \
  96:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet_addr_to_ip4addr(ip_2_ip4(ipaddr), &((sin)->sin_addr)); \
  97:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin)->sin_port); }while(0)
  98:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
  99:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 100:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
 101:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IP6ADDR_PORT_TO_SOCKADDR(sin6, ipaddr, port) do { \
 102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_len = sizeof(struct sockaddr_in6); \
 103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_family = AF_INET6; \
 104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_port = lwip_htons((port)); \
 105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_flowinfo = 0; \
 106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       inet6_addr_from_ip6addr(&(sin6)->sin6_addr, ipaddr); \
 107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       (sin6)->sin6_scope_id = ip6_addr_zone(ipaddr); }while(0)
 108:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR6_TO_IP6ADDR_PORT(sin6, ipaddr, port) do { \
 109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     inet6_addr_to_ip6addr(ip_2_ip6(ipaddr), &((sin6)->sin6_addr)); \
 110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (ip6_addr_has_scope(ip_2_ip6(ipaddr), IP6_UNKNOWN)) { \
 111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ip6_addr_set_zone(ip_2_ip6(ipaddr), (u8_t)((sin6)->sin6_scope_id)); \
 112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } \
 113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     (port) = lwip_ntohs((sin6)->sin6_port); }while(0)
 114:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 115:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 116:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 117:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void sockaddr_to_ipaddr_port(const struct sockaddr *sockaddr, ip_addr_t *ipaddr, u16_t *port
 118:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 119:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  (((namelen) == sizeof(struct sockaddr_in)) || \
 120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((namelen) == sizeof(struct sockaddr_in6)))
 121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    (((name)->sa_family == AF_INET) || \
 122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                          ((name)->sa_family == AF_INET6))
 123:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) \
 124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        ((((name)->sa_family == AF_INET) && !(NETCONNTYPE_ISIPV6((sock)->conn->type))) || \
 125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        (((name)->sa_family == AF_INET6) && (NETCONNTYPE_ISIPV6((sock)->conn->type))))
 126:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) do { \
 127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_ANY_TYPE_VAL(*ipaddr) || IP_IS_V6_VAL(*ipaddr)) { \
 128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port); \
 129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else { \
 130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port); \
 131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } } while(0)
 132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) sockaddr_to_ipaddr_port(sockaddr, ipaddr, &
ARM GAS  /tmp/ccsCUhT2.s 			page 4


 133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, type) (((domain) == AF_INET) ? \
 134:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   (type) : (enum netconn_type)((type) | NETCONN_TYPE_IPV6))
 135:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #elif LWIP_IPV6 /* LWIP_IPV4 && LWIP_IPV6 */
 136:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in6))
 137:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET6)
 138:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 139:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP6ADDR_PORT_TO_SOCKADDR((struct sockaddr_in6*)(void*)(sockaddr), ip_2_ip6(ipaddr), port)
 141:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6*)(const void*)(sockaddr), ipaddr, port
 143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 144:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /*-> LWIP_IPV4: LWIP_IPV4 && LWIP_IPV6 */
 145:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_LEN_VALID(namelen)  ((namelen) == sizeof(struct sockaddr_in))
 146:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID(name)    ((name)->sa_family == AF_INET)
 147:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH(name, sock) 1
 148:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IPADDR_PORT_TO_SOCKADDR(sockaddr, ipaddr, port) \
 149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP4ADDR_PORT_TO_SOCKADDR((struct sockaddr_in*)(void*)(sockaddr), ip_2_ip4(ipaddr), port)
 150:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCKADDR_TO_IPADDR_PORT(sockaddr, ipaddr, port) \
 151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in*)(const void*)(sockaddr), ipaddr, port)
 152:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DOMAIN_TO_NETCONN_TYPE(domain, netconn_type) (netconn_type)
 153:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 154:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 155:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name)    (((name)->sa_family == AF_UNSPEC) || \
 156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     IS_SOCK_ADDR_TYPE_VALID(name))
 157:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock) (((name)->sa_family == AF_UNSPEC) || \
 158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                                     SOCK_ADDR_TYPE_MATCH(name, sock))
 159:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define IS_SOCK_ADDR_ALIGNED(name)      ((((mem_ptr_t)(name)) % 4) == 0)
 160:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 161:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 162:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN(sock, optlen, opttype) do { if ((optlen) < sizeof(opttype)) { don
 163:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, opttype) do { \
 164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(sock, optlen, opttype); \
 165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sock)->conn == NULL) { done_socket(sock); return EINVAL; } }while(0)
 166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype) do { \
 167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN(sock, optlen, opttype); \
 168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (((sock)->conn == NULL) || ((sock)->conn->pcb.tcp == NULL)) { done_socket(sock); return EINVAL
 169:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, opttype, netconntype) do { \
 170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, opttype); \
 171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type((sock)->conn)) != netconntype) { done_socket(sock); return ENO
 172:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 173:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_REF(name)     API_VAR_REF(name)
 175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(name) API_VAR_DECLARE(struct lwip_setgetsockopt_data, n
 176:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_FREE(name)    API_VAR_FREE(MEMP_SOCKET_SETGETSOCKOPT_DATA, name
 177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
 178:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock) do { \
 179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   name = (struct lwip_setgetsockopt_data *)memp_malloc(MEMP_SOCKET_SETGETSOCKOPT_DATA); \
 180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name == NULL) { \
 181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOMEM); \
 182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock); \
 183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1; \
 184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } }while(0)
 185:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
 186:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(name, sock)
 187:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
 188:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 189:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDRCVTIMEO_NONSTANDARD
ARM GAS  /tmp/ccsCUhT2.s 			page 5


 190:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE int
 191:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val) (*(int *)(optval) = (val))
 192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval)   ((long)*(const int*)(optval))
 193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
 194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_OPTTYPE struct timeval
 195:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_SET(optval, val)  do { \
 196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t loc = (val); \
 197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_sec = (long)((loc) / 1000U); \
 198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ((struct timeval *)(optval))->tv_usec = (long)(((loc) % 1000U) * 1000U); }while(0)
 199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SO_SNDRCVTIMEO_GET_MS(optval) ((((const struct timeval *)(optval))->tv_sec * 1000) + (
 200:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 202:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 203:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A struct sockaddr replacement that has the same alignment as sockaddr_in/
 204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *  sockaddr_in6 if instantiated.
 205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 206:Middlewares/Third_Party/LwIP/src/api/sockets.c **** union sockaddr_aligned {
 207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct sockaddr sa;
 208:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
 209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct sockaddr_in6 sin6;
 210:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
 211:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
 212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct sockaddr_in sin;
 213:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
 214:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 215:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 216:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Define the number of IPv4 multicast memberships, default is one per socket */
 217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifndef LWIP_SOCKET_MAX_MEMBERSHIPS
 218:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_MAX_MEMBERSHIPS NUM_SOCKETS
 219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 220:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 221:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
 222:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* This is to keep track of IP_ADD_MEMBERSHIP calls to drop the membership when
 223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    a socket is closed */
 224:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_pair {
 225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the socket */
 226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the interface address */
 228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t if_addr;
 229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the group address */
 230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip4_addr_t multi_addr;
 231:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 232:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 233:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_socket_multicast_pair socket_ipv4_multicast_memberships[LWIP_SOCKET_MAX_MEMBERSH
 234:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 235:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int  lwip_socket_register_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *mul
 236:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_unregister_membership(int s, const ip4_addr_t *if_addr, const ip4_addr_t *m
 237:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_drop_registered_memberships(int s);
 238:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 240:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6_MLD
 241:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* This is to keep track of IP_JOIN_GROUP calls to drop the membership when
 242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    a socket is closed */
 243:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_socket_multicast_mld6_pair {
 244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the socket */
 245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the interface index */
ARM GAS  /tmp/ccsCUhT2.s 			page 6


 247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t if_idx;
 248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** the group address */
 249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip6_addr_t multi_addr;
 250:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
 251:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_socket_multicast_mld6_pair socket_ipv6_multicast_memberships[LWIP_SOCKET_MAX_MEM
 253:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int  lwip_socket_register_mld6_membership(int s, unsigned int if_idx, const ip6_addr_t *mult
 255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_unregister_mld6_membership(int s, unsigned int if_idx, const ip6_addr_t *mu
 256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_socket_drop_registered_mld6_memberships(int s);
 257:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6_MLD */
 258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global array of available sockets */
 260:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock sockets[NUM_SOCKETS];
 261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 262:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL
 263:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
 264:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* protect the select_cb_list using core lock */
 265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_SELECT_DECL_PROTECT(lev)
 266:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_SELECT_PROTECT(lev)   LOCK_TCPIP_CORE()
 267:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_SELECT_UNPROTECT(lev) UNLOCK_TCPIP_CORE()
 268:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
 269:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* protect the select_cb_list using SYS_LIGHTWEIGHT_PROT */
 270:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_SELECT_DECL_PROTECT(lev)  SYS_ARCH_DECL_PROTECT(lev)
 271:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_SELECT_PROTECT(lev)       SYS_ARCH_PROTECT(lev)
 272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define LWIP_SOCKET_SELECT_UNPROTECT(lev)     SYS_ARCH_UNPROTECT(lev)
 273:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** This counter is increased from lwip_select when the list is changed
 274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     and checked in select_check_waiters to see if it has changed. */
 275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static volatile int select_cb_ctr;
 276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** The global list of tasks waiting for select */
 278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_select_cb *select_cb_list;
 279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL */
 280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define sock_set_errno(sk, e) do { \
 282:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   const int sockerr = (e); \
 283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(sockerr); \
 284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** } while (0)
 285:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Forward declaration of some functions */
 287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL
 288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len);
 289:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DEFAULT_SOCKET_EVENTCB event_callback
 290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void select_check_waiters(int s, int has_recvevent, int has_sendevent, int has_errevent);
 291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
 292:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define DEFAULT_SOCKET_EVENTCB NULL
 293:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 294:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
 295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_getsockopt_callback(void *arg);
 296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void lwip_setsockopt_callback(void *arg);
 297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen);
 299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optlen
 300:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int free_socket_locked(struct lwip_sock *sock, int is_tcp, struct netconn **conn,
 301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               union lwip_sock_lastdata *lastdata);
 302:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void free_socket_free_elements(int is_tcp, struct netconn *conn, union lwip_sock_lastdata *l
 303:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  /tmp/ccsCUhT2.s 			page 7


 304:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 305:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 306:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sockaddr_to_ipaddr_port(const struct sockaddr *sockaddr, ip_addr_t *ipaddr, u16_t *port)
 307:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((sockaddr->sa_family) == AF_INET6) {
 309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR6_TO_IP6ADDR_PORT((const struct sockaddr_in6 *)(const void *)(sockaddr), ipaddr, *port)
 310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V6;
 311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR4_TO_IP4ADDR_PORT((const struct sockaddr_in *)(const void *)(sockaddr), ipaddr, *port);
 313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ipaddr->type = IPADDR_TYPE_V4;
 314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 315:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 318:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: initialize thread-local semaphore */
 319:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
 320:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_init(void)
 321:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
  41              		.loc 1 321 1
  42              		.cfi_startproc
  43              		@ args = 0, pretend = 0, frame = 0
  44              		@ frame_needed = 1, uses_anonymous_args = 0
  45              		@ link register save eliminated.
  46 0000 80B4     		push	{r7}
  47              	.LCFI0:
  48              		.cfi_def_cfa_offset 4
  49              		.cfi_offset 7, -4
  50 0002 00AF     		add	r7, sp, #0
  51              	.LCFI1:
  52              		.cfi_def_cfa_register 7
 322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netconn_thread_init();
 323:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
  53              		.loc 1 323 1
  54 0004 00BF     		nop
  55 0006 BD46     		mov	sp, r7
  56              	.LCFI2:
  57              		.cfi_def_cfa_register 13
  58              		@ sp needed
  59 0008 5DF8047B 		ldr	r7, [sp], #4
  60              	.LCFI3:
  61              		.cfi_restore 7
  62              		.cfi_def_cfa_offset 0
  63 000c 7047     		bx	lr
  64              		.cfi_endproc
  65              	.LFE137:
  67              		.section	.text.lwip_socket_thread_cleanup,"ax",%progbits
  68              		.align	1
  69              		.global	lwip_socket_thread_cleanup
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  73              		.fpu fpv4-sp-d16
  75              	lwip_socket_thread_cleanup:
  76              	.LFB138:
 324:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 325:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** LWIP_NETCONN_SEM_PER_THREAD==1: destroy thread-local semaphore */
 326:Middlewares/Third_Party/LwIP/src/api/sockets.c **** void
ARM GAS  /tmp/ccsCUhT2.s 			page 8


 327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_thread_cleanup(void)
 328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
  77              		.loc 1 328 1
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 1, uses_anonymous_args = 0
  81              		@ link register save eliminated.
  82 0000 80B4     		push	{r7}
  83              	.LCFI4:
  84              		.cfi_def_cfa_offset 4
  85              		.cfi_offset 7, -4
  86 0002 00AF     		add	r7, sp, #0
  87              	.LCFI5:
  88              		.cfi_def_cfa_register 7
 329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netconn_thread_cleanup();
 330:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
  89              		.loc 1 330 1
  90 0004 00BF     		nop
  91 0006 BD46     		mov	sp, r7
  92              	.LCFI6:
  93              		.cfi_def_cfa_register 13
  94              		@ sp needed
  95 0008 5DF8047B 		ldr	r7, [sp], #4
  96              	.LCFI7:
  97              		.cfi_restore 7
  98              		.cfi_def_cfa_offset 0
  99 000c 7047     		bx	lr
 100              		.cfi_endproc
 101              	.LFE138:
 103              		.section	.text.tryget_socket_unconn_nouse,"ax",%progbits
 104              		.align	1
 105              		.syntax unified
 106              		.thumb
 107              		.thumb_func
 108              		.fpu fpv4-sp-d16
 110              	tryget_socket_unconn_nouse:
 111              	.LFB139:
 331:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 332:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_FULLDUPLEX
 333:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Thread-safe increment of sock->fd_used, with overflow check */
 334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 335:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sock_inc_used(struct lwip_sock *sock)
 336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int ret;
 338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 339:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("sock != NULL", sock != NULL);
 341:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->fd_free_pending) {
 344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* prevent new usage of this socket if free is pending */
 345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = 0;
 346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ++sock->fd_used;
 348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = 1;
 349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("sock->fd_used != 0", sock->fd_used != 0);
 350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  /tmp/ccsCUhT2.s 			page 9


 351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
 353:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 354:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 355:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Like sock_inc_used(), but called under SYS_ARCH_PROTECT lock. */
 356:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 357:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sock_inc_used_locked(struct lwip_sock *sock)
 358:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("sock != NULL", sock != NULL);
 360:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->fd_free_pending) {
 362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("sock->fd_used != 0", sock->fd_used != 0);
 363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
 364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 365:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ++sock->fd_used;
 367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("sock->fd_used != 0", sock->fd_used != 0);
 368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 1;
 369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 370:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 371:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* In full-duplex mode,sock->fd_used != 0 prevents a socket descriptor from being
 372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * released (and possibly reused) when used from more than one thread
 373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * (e.g. read-while-write or close-while-write, etc)
 374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This function is called at the end of functions using (try)get_socket*().
 375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 376:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 377:Middlewares/Third_Party/LwIP/src/api/sockets.c **** done_socket(struct lwip_sock *sock)
 378:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int freed = 0;
 380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int is_tcp = 0;
 381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn = NULL;
 382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union lwip_sock_lastdata lastdata;
 383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("sock != NULL", sock != NULL);
 385:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("sock->fd_used > 0", sock->fd_used > 0);
 388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (--sock->fd_used == 0) {
 389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->fd_free_pending) {
 390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* free the socket */
 391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->fd_used = 1;
 392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       is_tcp = sock->fd_free_pending & LWIP_SOCK_FD_FREE_TCP;
 393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       freed = free_socket_locked(sock, is_tcp, &conn, &lastdata);
 394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 397:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (freed) {
 399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     free_socket_free_elements(is_tcp, conn, &lastdata);
 400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 401:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 402:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 403:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
 404:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define sock_inc_used(sock)         1
 405:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define sock_inc_used_locked(sock)  1
 406:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define done_socket(sock)
 407:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
ARM GAS  /tmp/ccsCUhT2.s 			page 10


 408:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 409:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Translate a socket 'int' into a pointer (only fails if the index is invalid) */
 410:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 411:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket_unconn_nouse(int fd)
 412:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 112              		.loc 1 412 1
 113              		.cfi_startproc
 114              		@ args = 0, pretend = 0, frame = 16
 115              		@ frame_needed = 1, uses_anonymous_args = 0
 116              		@ link register save eliminated.
 117 0000 80B4     		push	{r7}
 118              	.LCFI8:
 119              		.cfi_def_cfa_offset 4
 120              		.cfi_offset 7, -4
 121 0002 85B0     		sub	sp, sp, #20
 122              	.LCFI9:
 123              		.cfi_def_cfa_offset 24
 124 0004 00AF     		add	r7, sp, #0
 125              	.LCFI10:
 126              		.cfi_def_cfa_register 7
 127 0006 7860     		str	r0, [r7, #4]
 413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s = fd - LWIP_SOCKET_OFFSET;
 128              		.loc 1 413 7
 129 0008 7B68     		ldr	r3, [r7, #4]
 130 000a FB60     		str	r3, [r7, #12]
 414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((s < 0) || (s >= NUM_SOCKETS)) {
 131              		.loc 1 414 6
 132 000c FB68     		ldr	r3, [r7, #12]
 133 000e 002B     		cmp	r3, #0
 134 0010 02DB     		blt	.L4
 135              		.loc 1 414 15 discriminator 1
 136 0012 FB68     		ldr	r3, [r7, #12]
 137 0014 032B     		cmp	r3, #3
 138 0016 01DD     		ble	.L5
 139              	.L4:
 415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("tryget_socket_unconn(%d): invalid\n", fd));
 416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 140              		.loc 1 416 12
 141 0018 0023     		movs	r3, #0
 142 001a 03E0     		b	.L6
 143              	.L5:
 417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return &sockets[s];
 144              		.loc 1 418 10
 145 001c FB68     		ldr	r3, [r7, #12]
 146 001e 1B01     		lsls	r3, r3, #4
 147 0020 034A     		ldr	r2, .L7
 148 0022 1344     		add	r3, r3, r2
 149              	.L6:
 419:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 150              		.loc 1 419 1
 151 0024 1846     		mov	r0, r3
 152 0026 1437     		adds	r7, r7, #20
 153              	.LCFI11:
 154              		.cfi_def_cfa_offset 4
 155 0028 BD46     		mov	sp, r7
 156              	.LCFI12:
ARM GAS  /tmp/ccsCUhT2.s 			page 11


 157              		.cfi_def_cfa_register 13
 158              		@ sp needed
 159 002a 5DF8047B 		ldr	r7, [sp], #4
 160              	.LCFI13:
 161              		.cfi_restore 7
 162              		.cfi_def_cfa_offset 0
 163 002e 7047     		bx	lr
 164              	.L8:
 165              		.align	2
 166              	.L7:
 167 0030 00000000 		.word	sockets
 168              		.cfi_endproc
 169              	.LFE139:
 171              		.section	.text.lwip_socket_dbg_get_socket,"ax",%progbits
 172              		.align	1
 173              		.global	lwip_socket_dbg_get_socket
 174              		.syntax unified
 175              		.thumb
 176              		.thumb_func
 177              		.fpu fpv4-sp-d16
 179              	lwip_socket_dbg_get_socket:
 180              	.LFB140:
 420:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 421:Middlewares/Third_Party/LwIP/src/api/sockets.c **** struct lwip_sock *
 422:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket_dbg_get_socket(int fd)
 423:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 181              		.loc 1 423 1
 182              		.cfi_startproc
 183              		@ args = 0, pretend = 0, frame = 8
 184              		@ frame_needed = 1, uses_anonymous_args = 0
 185 0000 80B5     		push	{r7, lr}
 186              	.LCFI14:
 187              		.cfi_def_cfa_offset 8
 188              		.cfi_offset 7, -8
 189              		.cfi_offset 14, -4
 190 0002 82B0     		sub	sp, sp, #8
 191              	.LCFI15:
 192              		.cfi_def_cfa_offset 16
 193 0004 00AF     		add	r7, sp, #0
 194              	.LCFI16:
 195              		.cfi_def_cfa_register 7
 196 0006 7860     		str	r0, [r7, #4]
 424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return tryget_socket_unconn_nouse(fd);
 197              		.loc 1 424 10
 198 0008 7868     		ldr	r0, [r7, #4]
 199 000a FFF7FEFF 		bl	tryget_socket_unconn_nouse
 200 000e 0346     		mov	r3, r0
 425:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 201              		.loc 1 425 1
 202 0010 1846     		mov	r0, r3
 203 0012 0837     		adds	r7, r7, #8
 204              	.LCFI17:
 205              		.cfi_def_cfa_offset 8
 206 0014 BD46     		mov	sp, r7
 207              	.LCFI18:
 208              		.cfi_def_cfa_register 13
 209              		@ sp needed
ARM GAS  /tmp/ccsCUhT2.s 			page 12


 210 0016 80BD     		pop	{r7, pc}
 211              		.cfi_endproc
 212              	.LFE140:
 214              		.section	.text.tryget_socket_unconn,"ax",%progbits
 215              		.align	1
 216              		.syntax unified
 217              		.thumb
 218              		.thumb_func
 219              		.fpu fpv4-sp-d16
 221              	tryget_socket_unconn:
 222              	.LFB141:
 426:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Translate a socket 'int' into a pointer (only fails if the index is invalid) */
 428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 429:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket_unconn(int fd)
 430:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 223              		.loc 1 430 1
 224              		.cfi_startproc
 225              		@ args = 0, pretend = 0, frame = 16
 226              		@ frame_needed = 1, uses_anonymous_args = 0
 227 0000 80B5     		push	{r7, lr}
 228              	.LCFI19:
 229              		.cfi_def_cfa_offset 8
 230              		.cfi_offset 7, -8
 231              		.cfi_offset 14, -4
 232 0002 84B0     		sub	sp, sp, #16
 233              	.LCFI20:
 234              		.cfi_def_cfa_offset 24
 235 0004 00AF     		add	r7, sp, #0
 236              	.LCFI21:
 237              		.cfi_def_cfa_register 7
 238 0006 7860     		str	r0, [r7, #4]
 431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *ret = tryget_socket_unconn_nouse(fd);
 239              		.loc 1 431 27
 240 0008 7868     		ldr	r0, [r7, #4]
 241 000a FFF7FEFF 		bl	tryget_socket_unconn_nouse
 242 000e F860     		str	r0, [r7, #12]
 432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (ret != NULL) {
 433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock_inc_used(ret)) {
 434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return NULL;
 435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
 243              		.loc 1 437 10
 244 0010 FB68     		ldr	r3, [r7, #12]
 438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 245              		.loc 1 438 1
 246 0012 1846     		mov	r0, r3
 247 0014 1037     		adds	r7, r7, #16
 248              	.LCFI22:
 249              		.cfi_def_cfa_offset 8
 250 0016 BD46     		mov	sp, r7
 251              	.LCFI23:
 252              		.cfi_def_cfa_register 13
 253              		@ sp needed
 254 0018 80BD     		pop	{r7, pc}
 255              		.cfi_endproc
ARM GAS  /tmp/ccsCUhT2.s 			page 13


 256              	.LFE141:
 258              		.section	.text.tryget_socket_unconn_locked,"ax",%progbits
 259              		.align	1
 260              		.syntax unified
 261              		.thumb
 262              		.thumb_func
 263              		.fpu fpv4-sp-d16
 265              	tryget_socket_unconn_locked:
 266              	.LFB142:
 439:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 440:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Like tryget_socket_unconn(), but called under SYS_ARCH_PROTECT lock. */
 441:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 442:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket_unconn_locked(int fd)
 443:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 267              		.loc 1 443 1
 268              		.cfi_startproc
 269              		@ args = 0, pretend = 0, frame = 16
 270              		@ frame_needed = 1, uses_anonymous_args = 0
 271 0000 80B5     		push	{r7, lr}
 272              	.LCFI24:
 273              		.cfi_def_cfa_offset 8
 274              		.cfi_offset 7, -8
 275              		.cfi_offset 14, -4
 276 0002 84B0     		sub	sp, sp, #16
 277              	.LCFI25:
 278              		.cfi_def_cfa_offset 24
 279 0004 00AF     		add	r7, sp, #0
 280              	.LCFI26:
 281              		.cfi_def_cfa_register 7
 282 0006 7860     		str	r0, [r7, #4]
 444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *ret = tryget_socket_unconn_nouse(fd);
 283              		.loc 1 444 27
 284 0008 7868     		ldr	r0, [r7, #4]
 285 000a FFF7FEFF 		bl	tryget_socket_unconn_nouse
 286 000e F860     		str	r0, [r7, #12]
 445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (ret != NULL) {
 446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock_inc_used_locked(ret)) {
 447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return NULL;
 448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
 287              		.loc 1 450 10
 288 0010 FB68     		ldr	r3, [r7, #12]
 451:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 289              		.loc 1 451 1
 290 0012 1846     		mov	r0, r3
 291 0014 1037     		adds	r7, r7, #16
 292              	.LCFI27:
 293              		.cfi_def_cfa_offset 8
 294 0016 BD46     		mov	sp, r7
 295              	.LCFI28:
 296              		.cfi_def_cfa_register 13
 297              		@ sp needed
 298 0018 80BD     		pop	{r7, pc}
 299              		.cfi_endproc
 300              	.LFE142:
 302              		.section	.text.tryget_socket,"ax",%progbits
ARM GAS  /tmp/ccsCUhT2.s 			page 14


 303              		.align	1
 304              		.syntax unified
 305              		.thumb
 306              		.thumb_func
 307              		.fpu fpv4-sp-d16
 309              	tryget_socket:
 310              	.LFB143:
 452:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 453:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Same as get_socket but doesn't set errno
 455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param fd externally used socket index
 457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 459:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 460:Middlewares/Third_Party/LwIP/src/api/sockets.c **** tryget_socket(int fd)
 461:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 311              		.loc 1 461 1
 312              		.cfi_startproc
 313              		@ args = 0, pretend = 0, frame = 16
 314              		@ frame_needed = 1, uses_anonymous_args = 0
 315 0000 80B5     		push	{r7, lr}
 316              	.LCFI29:
 317              		.cfi_def_cfa_offset 8
 318              		.cfi_offset 7, -8
 319              		.cfi_offset 14, -4
 320 0002 84B0     		sub	sp, sp, #16
 321              	.LCFI30:
 322              		.cfi_def_cfa_offset 24
 323 0004 00AF     		add	r7, sp, #0
 324              	.LCFI31:
 325              		.cfi_def_cfa_register 7
 326 0006 7860     		str	r0, [r7, #4]
 462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket_unconn(fd);
 327              		.loc 1 462 28
 328 0008 7868     		ldr	r0, [r7, #4]
 329 000a FFF7FEFF 		bl	tryget_socket_unconn
 330 000e F860     		str	r0, [r7, #12]
 463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock != NULL) {
 331              		.loc 1 463 6
 332 0010 FB68     		ldr	r3, [r7, #12]
 333 0012 002B     		cmp	r3, #0
 334 0014 05D0     		beq	.L16
 464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->conn) {
 335              		.loc 1 464 13
 336 0016 FB68     		ldr	r3, [r7, #12]
 337 0018 1B68     		ldr	r3, [r3]
 338              		.loc 1 464 8
 339 001a 002B     		cmp	r3, #0
 340 001c 01D0     		beq	.L16
 465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return sock;
 341              		.loc 1 465 14
 342 001e FB68     		ldr	r3, [r7, #12]
 343 0020 00E0     		b	.L17
 344              	.L16:
 466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
ARM GAS  /tmp/ccsCUhT2.s 			page 15


 468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return NULL;
 345              		.loc 1 469 10
 346 0022 0023     		movs	r3, #0
 347              	.L17:
 470:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 348              		.loc 1 470 1
 349 0024 1846     		mov	r0, r3
 350 0026 1037     		adds	r7, r7, #16
 351              	.LCFI32:
 352              		.cfi_def_cfa_offset 8
 353 0028 BD46     		mov	sp, r7
 354              	.LCFI33:
 355              		.cfi_def_cfa_register 13
 356              		@ sp needed
 357 002a 80BD     		pop	{r7, pc}
 358              		.cfi_endproc
 359              	.LFE143:
 361              		.section	.text.get_socket,"ax",%progbits
 362              		.align	1
 363              		.syntax unified
 364              		.thumb
 365              		.thumb_func
 366              		.fpu fpv4-sp-d16
 368              	get_socket:
 369              	.LFB144:
 471:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 472:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Map a externally used socket index to the internal socket representation.
 474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param fd externally used socket index
 476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return struct lwip_sock for the socket or NULL if not found
 477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 478:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static struct lwip_sock *
 479:Middlewares/Third_Party/LwIP/src/api/sockets.c **** get_socket(int fd)
 480:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 370              		.loc 1 480 1
 371              		.cfi_startproc
 372              		@ args = 0, pretend = 0, frame = 16
 373              		@ frame_needed = 1, uses_anonymous_args = 0
 374 0000 80B5     		push	{r7, lr}
 375              	.LCFI34:
 376              		.cfi_def_cfa_offset 8
 377              		.cfi_offset 7, -8
 378              		.cfi_offset 14, -4
 379 0002 84B0     		sub	sp, sp, #16
 380              	.LCFI35:
 381              		.cfi_def_cfa_offset 24
 382 0004 00AF     		add	r7, sp, #0
 383              	.LCFI36:
 384              		.cfi_def_cfa_register 7
 385 0006 7860     		str	r0, [r7, #4]
 481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(fd);
 386              		.loc 1 481 28
 387 0008 7868     		ldr	r0, [r7, #4]
 388 000a FFF7FEFF 		bl	tryget_socket
 389 000e F860     		str	r0, [r7, #12]
ARM GAS  /tmp/ccsCUhT2.s 			page 16


 482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 390              		.loc 1 482 6
 391 0010 FB68     		ldr	r3, [r7, #12]
 392 0012 002B     		cmp	r3, #0
 393 0014 04D1     		bne	.L19
 483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((fd < LWIP_SOCKET_OFFSET) || (fd >= (LWIP_SOCKET_OFFSET + NUM_SOCKETS))) {
 484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("get_socket(%d): invalid\n", fd));
 485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 394              		.loc 1 486 5 discriminator 1
 395 0016 054B     		ldr	r3, .L21
 396 0018 0922     		movs	r2, #9
 397 001a 1A60     		str	r2, [r3]
 487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 398              		.loc 1 487 12 discriminator 1
 399 001c 0023     		movs	r3, #0
 400 001e 00E0     		b	.L20
 401              	.L19:
 488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return sock;
 402              		.loc 1 489 10
 403 0020 FB68     		ldr	r3, [r7, #12]
 404              	.L20:
 490:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 405              		.loc 1 490 1
 406 0022 1846     		mov	r0, r3
 407 0024 1037     		adds	r7, r7, #16
 408              	.LCFI37:
 409              		.cfi_def_cfa_offset 8
 410 0026 BD46     		mov	sp, r7
 411              	.LCFI38:
 412              		.cfi_def_cfa_register 13
 413              		@ sp needed
 414 0028 80BD     		pop	{r7, pc}
 415              	.L22:
 416 002a 00BF     		.align	2
 417              	.L21:
 418 002c 00000000 		.word	errno
 419              		.cfi_endproc
 420              	.LFE144:
 422              		.section	.rodata
 423              		.align	2
 424              	.LC0:
 425 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/sockets.c\000"
 425      6C657761 
 425      7265732F 
 425      54686972 
 425      645F5061 
 426 002f 00       		.align	2
 427              	.LC1:
 428 0030 736F636B 		.ascii	"sockets[i].select_waiting == 0\000"
 428      6574735B 
 428      695D2E73 
 428      656C6563 
 428      745F7761 
 429 004f 00       		.align	2
 430              	.LC2:
ARM GAS  /tmp/ccsCUhT2.s 			page 17


 431 0050 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 431      7274696F 
 431      6E202225 
 431      73222066 
 431      61696C65 
 432              		.section	.text.alloc_socket,"ax",%progbits
 433              		.align	1
 434              		.syntax unified
 435              		.thumb
 436              		.thumb_func
 437              		.fpu fpv4-sp-d16
 439              	alloc_socket:
 440              	.LFB145:
 491:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 492:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Allocate a new socket for a given netconn.
 494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param newconn the netconn for which to allocate a socket
 496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param accepted 1 if socket has been created by accept(),
 497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *                 0 if socket has been created by socket()
 498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return the index of the new socket; -1 on error
 499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 500:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 501:Middlewares/Third_Party/LwIP/src/api/sockets.c **** alloc_socket(struct netconn *newconn, int accepted)
 502:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 441              		.loc 1 502 1
 442              		.cfi_startproc
 443              		@ args = 0, pretend = 0, frame = 16
 444              		@ frame_needed = 1, uses_anonymous_args = 0
 445 0000 80B5     		push	{r7, lr}
 446              	.LCFI39:
 447              		.cfi_def_cfa_offset 8
 448              		.cfi_offset 7, -8
 449              		.cfi_offset 14, -4
 450 0002 84B0     		sub	sp, sp, #16
 451              	.LCFI40:
 452              		.cfi_def_cfa_offset 24
 453 0004 00AF     		add	r7, sp, #0
 454              	.LCFI41:
 455              		.cfi_def_cfa_register 7
 456 0006 7860     		str	r0, [r7, #4]
 457 0008 3960     		str	r1, [r7]
 503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
 504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(accepted);
 506:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* allocate a new socket identifier */
 508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = 0; i < NUM_SOCKETS; ++i) {
 458              		.loc 1 508 10
 459 000a 0023     		movs	r3, #0
 460 000c FB60     		str	r3, [r7, #12]
 461              		.loc 1 508 3
 462 000e 52E0     		b	.L24
 463              	.L31:
 509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
 464              		.loc 1 510 5
ARM GAS  /tmp/ccsCUhT2.s 			page 18


 465 0010 FFF7FEFF 		bl	sys_arch_protect
 466 0014 B860     		str	r0, [r7, #8]
 511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sockets[i].conn) {
 467              		.loc 1 511 20
 468 0016 2C4A     		ldr	r2, .L32
 469 0018 FB68     		ldr	r3, [r7, #12]
 470 001a 1B01     		lsls	r3, r3, #4
 471 001c 1344     		add	r3, r3, r2
 472 001e 1B68     		ldr	r3, [r3]
 473              		.loc 1 511 8
 474 0020 002B     		cmp	r3, #0
 475 0022 42D1     		bne	.L25
 512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_FULLDUPLEX
 513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sockets[i].fd_used) {
 514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
 515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         continue;
 516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].fd_used    = 1;
 518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].fd_free_pending = 0;
 519:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
 520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].conn       = newconn;
 476              		.loc 1 520 29
 477 0024 284A     		ldr	r2, .L32
 478 0026 FB68     		ldr	r3, [r7, #12]
 479 0028 1B01     		lsls	r3, r3, #4
 480 002a 1344     		add	r3, r3, r2
 481 002c 7A68     		ldr	r2, [r7, #4]
 482 002e 1A60     		str	r2, [r3]
 521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* The socket is not yet known to anyone, so no need to protect
 522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          after having marked it as used. */
 523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 483              		.loc 1 523 7
 484 0030 B868     		ldr	r0, [r7, #8]
 485 0032 FFF7FEFF 		bl	sys_arch_unprotect
 524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].lastdata.pbuf = NULL;
 486              		.loc 1 524 32
 487 0036 244A     		ldr	r2, .L32
 488 0038 FB68     		ldr	r3, [r7, #12]
 489 003a 1B01     		lsls	r3, r3, #4
 490 003c 1344     		add	r3, r3, r2
 491 003e 0433     		adds	r3, r3, #4
 492 0040 0022     		movs	r2, #0
 493 0042 1A60     		str	r2, [r3]
 525:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL
 526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("sockets[i].select_waiting == 0", sockets[i].select_waiting == 0);
 494              		.loc 1 526 7
 495 0044 204A     		ldr	r2, .L32
 496 0046 FB68     		ldr	r3, [r7, #12]
 497 0048 1B01     		lsls	r3, r3, #4
 498 004a 1344     		add	r3, r3, r2
 499 004c 0E33     		adds	r3, r3, #14
 500 004e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 501 0050 002B     		cmp	r3, #0
 502 0052 06D0     		beq	.L26
 503              		.loc 1 526 7 is_stmt 0 discriminator 1
 504 0054 1D4B     		ldr	r3, .L32+4
 505 0056 40F20E22 		movw	r2, #526
ARM GAS  /tmp/ccsCUhT2.s 			page 19


 506 005a 1D49     		ldr	r1, .L32+8
 507 005c 1D48     		ldr	r0, .L32+12
 508 005e FFF7FEFF 		bl	printf
 509              	.L26:
 527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].rcvevent   = 0;
 510              		.loc 1 527 29 is_stmt 1
 511 0062 194A     		ldr	r2, .L32
 512 0064 FB68     		ldr	r3, [r7, #12]
 513 0066 1B01     		lsls	r3, r3, #4
 514 0068 1344     		add	r3, r3, r2
 515 006a 0833     		adds	r3, r3, #8
 516 006c 0022     		movs	r2, #0
 517 006e 1A80     		strh	r2, [r3]	@ movhi
 528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* TCP sendbuf is empty, but the socket is not yet writable until connected
 529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * (unless it has been created by accept()). */
 530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].sendevent  = (NETCONNTYPE_GROUP(newconn->type) == NETCONN_TCP ? (accepted != 0) : 
 518              		.loc 1 530 32
 519 0070 7B68     		ldr	r3, [r7, #4]
 520 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 521 0074 03F0F003 		and	r3, r3, #240
 522              		.loc 1 530 98
 523 0078 102B     		cmp	r3, #16
 524 007a 02D1     		bne	.L27
 525              		.loc 1 530 98 is_stmt 0 discriminator 2
 526 007c 3B68     		ldr	r3, [r7]
 527 007e 002B     		cmp	r3, #0
 528 0080 01D0     		beq	.L28
 529              	.L27:
 530              		.loc 1 530 98 discriminator 3
 531 0082 0123     		movs	r3, #1
 532 0084 00E0     		b	.L29
 533              	.L28:
 534              		.loc 1 530 98 discriminator 4
 535 0086 0023     		movs	r3, #0
 536              	.L29:
 537              		.loc 1 530 29 is_stmt 1 discriminator 6
 538 0088 99B2     		uxth	r1, r3
 539 008a 0F4A     		ldr	r2, .L32
 540 008c FB68     		ldr	r3, [r7, #12]
 541 008e 1B01     		lsls	r3, r3, #4
 542 0090 1344     		add	r3, r3, r2
 543 0092 0A33     		adds	r3, r3, #10
 544 0094 0A46     		mov	r2, r1	@ movhi
 545 0096 1A80     		strh	r2, [r3]	@ movhi
 531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sockets[i].errevent   = 0;
 546              		.loc 1 531 29 discriminator 6
 547 0098 0B4A     		ldr	r2, .L32
 548 009a FB68     		ldr	r3, [r7, #12]
 549 009c 1B01     		lsls	r3, r3, #4
 550 009e 1344     		add	r3, r3, r2
 551 00a0 0C33     		adds	r3, r3, #12
 552 00a2 0022     		movs	r2, #0
 553 00a4 1A80     		strh	r2, [r3]	@ movhi
 532:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL */
 533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return i + LWIP_SOCKET_OFFSET;
 554              		.loc 1 533 16 discriminator 6
 555 00a6 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsCUhT2.s 			page 20


 556 00a8 0AE0     		b	.L30
 557              	.L25:
 534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 558              		.loc 1 535 5 discriminator 2
 559 00aa B868     		ldr	r0, [r7, #8]
 560 00ac FFF7FEFF 		bl	sys_arch_unprotect
 508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 561              		.loc 1 508 32 discriminator 2
 562 00b0 FB68     		ldr	r3, [r7, #12]
 563 00b2 0133     		adds	r3, r3, #1
 564 00b4 FB60     		str	r3, [r7, #12]
 565              	.L24:
 508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Protect socket array */
 566              		.loc 1 508 3 discriminator 1
 567 00b6 FB68     		ldr	r3, [r7, #12]
 568 00b8 032B     		cmp	r3, #3
 569 00ba A9DD     		ble	.L31
 536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 570              		.loc 1 537 10
 571 00bc 4FF0FF33 		mov	r3, #-1
 572              	.L30:
 538:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 573              		.loc 1 538 1
 574 00c0 1846     		mov	r0, r3
 575 00c2 1037     		adds	r7, r7, #16
 576              	.LCFI42:
 577              		.cfi_def_cfa_offset 8
 578 00c4 BD46     		mov	sp, r7
 579              	.LCFI43:
 580              		.cfi_def_cfa_register 13
 581              		@ sp needed
 582 00c6 80BD     		pop	{r7, pc}
 583              	.L33:
 584              		.align	2
 585              	.L32:
 586 00c8 00000000 		.word	sockets
 587 00cc 00000000 		.word	.LC0
 588 00d0 30000000 		.word	.LC1
 589 00d4 50000000 		.word	.LC2
 590              		.cfi_endproc
 591              	.LFE145:
 593              		.section	.text.free_socket_locked,"ax",%progbits
 594              		.align	1
 595              		.syntax unified
 596              		.thumb
 597              		.thumb_func
 598              		.fpu fpv4-sp-d16
 600              	free_socket_locked:
 601              	.LFB146:
 539:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 540:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Free a socket (under lock)
 541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param sock the socket to free
 543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param is_tcp != 0 for TCP sockets, used to free lastdata
 544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param conn the socekt's netconn is stored here, must be freed externally
ARM GAS  /tmp/ccsCUhT2.s 			page 21


 545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param lastdata lastdata is stored here, must be freed externally
 546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 547:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
 548:Middlewares/Third_Party/LwIP/src/api/sockets.c **** free_socket_locked(struct lwip_sock *sock, int is_tcp, struct netconn **conn,
 549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                    union lwip_sock_lastdata *lastdata)
 550:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 602              		.loc 1 550 1
 603              		.cfi_startproc
 604              		@ args = 0, pretend = 0, frame = 16
 605              		@ frame_needed = 1, uses_anonymous_args = 0
 606              		@ link register save eliminated.
 607 0000 80B4     		push	{r7}
 608              	.LCFI44:
 609              		.cfi_def_cfa_offset 4
 610              		.cfi_offset 7, -4
 611 0002 85B0     		sub	sp, sp, #20
 612              	.LCFI45:
 613              		.cfi_def_cfa_offset 24
 614 0004 00AF     		add	r7, sp, #0
 615              	.LCFI46:
 616              		.cfi_def_cfa_register 7
 617 0006 F860     		str	r0, [r7, #12]
 618 0008 B960     		str	r1, [r7, #8]
 619 000a 7A60     		str	r2, [r7, #4]
 620 000c 3B60     		str	r3, [r7]
 551:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_FULLDUPLEX
 552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("sock->fd_used > 0", sock->fd_used > 0);
 553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->fd_used--;
 554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->fd_used > 0) {
 555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock->fd_free_pending = LWIP_SOCK_FD_FREE_FREE | (is_tcp ? LWIP_SOCK_FD_FREE_TCP : 0);
 556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
 557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 558:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
 559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(is_tcp);
 560:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
 561:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *lastdata = sock->lastdata;
 621              		.loc 1 562 13
 622 000e 3B68     		ldr	r3, [r7]
 623 0010 FA68     		ldr	r2, [r7, #12]
 624 0012 5268     		ldr	r2, [r2, #4]
 625 0014 1A60     		str	r2, [r3]
 563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->lastdata.pbuf = NULL;
 626              		.loc 1 563 23
 627 0016 FB68     		ldr	r3, [r7, #12]
 628 0018 0022     		movs	r2, #0
 629 001a 5A60     		str	r2, [r3, #4]
 564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *conn = sock->conn;
 630              		.loc 1 564 15
 631 001c FB68     		ldr	r3, [r7, #12]
 632 001e 1A68     		ldr	r2, [r3]
 633              		.loc 1 564 9
 634 0020 7B68     		ldr	r3, [r7, #4]
 635 0022 1A60     		str	r2, [r3]
 565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock->conn = NULL;
 636              		.loc 1 565 14
 637 0024 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccsCUhT2.s 			page 22


 638 0026 0022     		movs	r2, #0
 639 0028 1A60     		str	r2, [r3]
 566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 1;
 640              		.loc 1 566 10
 641 002a 0123     		movs	r3, #1
 567:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 642              		.loc 1 567 1
 643 002c 1846     		mov	r0, r3
 644 002e 1437     		adds	r7, r7, #20
 645              	.LCFI47:
 646              		.cfi_def_cfa_offset 4
 647 0030 BD46     		mov	sp, r7
 648              	.LCFI48:
 649              		.cfi_def_cfa_register 13
 650              		@ sp needed
 651 0032 5DF8047B 		ldr	r7, [sp], #4
 652              	.LCFI49:
 653              		.cfi_restore 7
 654              		.cfi_def_cfa_offset 0
 655 0036 7047     		bx	lr
 656              		.cfi_endproc
 657              	.LFE146:
 659              		.section	.text.free_socket_free_elements,"ax",%progbits
 660              		.align	1
 661              		.syntax unified
 662              		.thumb
 663              		.thumb_func
 664              		.fpu fpv4-sp-d16
 666              	free_socket_free_elements:
 667              	.LFB147:
 568:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 569:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Free a socket's leftover members.
 570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 571:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 572:Middlewares/Third_Party/LwIP/src/api/sockets.c **** free_socket_free_elements(int is_tcp, struct netconn *conn, union lwip_sock_lastdata *lastdata)
 573:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 668              		.loc 1 573 1
 669              		.cfi_startproc
 670              		@ args = 0, pretend = 0, frame = 16
 671              		@ frame_needed = 1, uses_anonymous_args = 0
 672 0000 80B5     		push	{r7, lr}
 673              	.LCFI50:
 674              		.cfi_def_cfa_offset 8
 675              		.cfi_offset 7, -8
 676              		.cfi_offset 14, -4
 677 0002 84B0     		sub	sp, sp, #16
 678              	.LCFI51:
 679              		.cfi_def_cfa_offset 24
 680 0004 00AF     		add	r7, sp, #0
 681              	.LCFI52:
 682              		.cfi_def_cfa_register 7
 683 0006 F860     		str	r0, [r7, #12]
 684 0008 B960     		str	r1, [r7, #8]
 685 000a 7A60     		str	r2, [r7, #4]
 574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (lastdata->pbuf != NULL) {
 686              		.loc 1 574 15
 687 000c 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 23


 688 000e 1B68     		ldr	r3, [r3]
 689              		.loc 1 574 6
 690 0010 002B     		cmp	r3, #0
 691 0012 0DD0     		beq	.L37
 575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (is_tcp) {
 692              		.loc 1 575 8
 693 0014 FB68     		ldr	r3, [r7, #12]
 694 0016 002B     		cmp	r3, #0
 695 0018 05D0     		beq	.L38
 576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       pbuf_free(lastdata->pbuf);
 696              		.loc 1 576 7
 697 001a 7B68     		ldr	r3, [r7, #4]
 698 001c 1B68     		ldr	r3, [r3]
 699 001e 1846     		mov	r0, r3
 700 0020 FFF7FEFF 		bl	pbuf_free
 701 0024 04E0     		b	.L37
 702              	.L38:
 577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_delete(lastdata->netbuf);
 703              		.loc 1 578 7
 704 0026 7B68     		ldr	r3, [r7, #4]
 705 0028 1B68     		ldr	r3, [r3]
 706 002a 1846     		mov	r0, r3
 707 002c FFF7FEFF 		bl	netbuf_delete
 708              	.L37:
 579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (conn != NULL) {
 709              		.loc 1 581 6
 710 0030 BB68     		ldr	r3, [r7, #8]
 711 0032 002B     		cmp	r3, #0
 712 0034 02D0     		beq	.L40
 582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* netconn_prepare_delete() has already been called, here we only free the conn */
 583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
 713              		.loc 1 583 5
 714 0036 B868     		ldr	r0, [r7, #8]
 715 0038 FFF7FEFF 		bl	netconn_delete
 716              	.L40:
 584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 717              		.loc 1 585 1
 718 003c 00BF     		nop
 719 003e 1037     		adds	r7, r7, #16
 720              	.LCFI53:
 721              		.cfi_def_cfa_offset 8
 722 0040 BD46     		mov	sp, r7
 723              	.LCFI54:
 724              		.cfi_def_cfa_register 13
 725              		@ sp needed
 726 0042 80BD     		pop	{r7, pc}
 727              		.cfi_endproc
 728              	.LFE147:
 730              		.section	.text.free_socket,"ax",%progbits
 731              		.align	1
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
ARM GAS  /tmp/ccsCUhT2.s 			page 24


 735              		.fpu fpv4-sp-d16
 737              	free_socket:
 738              	.LFB148:
 586:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 587:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Free a socket. The socket's netconn must have been
 588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * delete before!
 589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param sock the socket to free
 591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param is_tcp != 0 for TCP sockets, used to free lastdata
 592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 593:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
 594:Middlewares/Third_Party/LwIP/src/api/sockets.c **** free_socket(struct lwip_sock *sock, int is_tcp)
 595:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 739              		.loc 1 595 1
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 24
 742              		@ frame_needed = 1, uses_anonymous_args = 0
 743 0000 80B5     		push	{r7, lr}
 744              	.LCFI55:
 745              		.cfi_def_cfa_offset 8
 746              		.cfi_offset 7, -8
 747              		.cfi_offset 14, -4
 748 0002 86B0     		sub	sp, sp, #24
 749              	.LCFI56:
 750              		.cfi_def_cfa_offset 32
 751 0004 00AF     		add	r7, sp, #0
 752              	.LCFI57:
 753              		.cfi_def_cfa_register 7
 754 0006 7860     		str	r0, [r7, #4]
 755 0008 3960     		str	r1, [r7]
 596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int freed;
 597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
 598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union lwip_sock_lastdata lastdata;
 599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 600:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Protect socket array */
 602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 756              		.loc 1 602 3
 757 000a FFF7FEFF 		bl	sys_arch_protect
 758 000e 7861     		str	r0, [r7, #20]
 603:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   freed = free_socket_locked(sock, is_tcp, &conn, &lastdata);
 759              		.loc 1 604 11
 760 0010 07F10803 		add	r3, r7, #8
 761 0014 07F10C02 		add	r2, r7, #12
 762 0018 3968     		ldr	r1, [r7]
 763 001a 7868     		ldr	r0, [r7, #4]
 764 001c FFF7FEFF 		bl	free_socket_locked
 765 0020 3861     		str	r0, [r7, #16]
 605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 766              		.loc 1 605 3
 767 0022 7869     		ldr	r0, [r7, #20]
 768 0024 FFF7FEFF 		bl	sys_arch_unprotect
 606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* don't use 'sock' after this line, as another task might have allocated it */
 607:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (freed) {
 769              		.loc 1 608 6
ARM GAS  /tmp/ccsCUhT2.s 			page 25


 770 0028 3B69     		ldr	r3, [r7, #16]
 771 002a 002B     		cmp	r3, #0
 772 002c 06D0     		beq	.L43
 609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     free_socket_free_elements(is_tcp, conn, &lastdata);
 773              		.loc 1 609 5
 774 002e FB68     		ldr	r3, [r7, #12]
 775 0030 07F10802 		add	r2, r7, #8
 776 0034 1946     		mov	r1, r3
 777 0036 3868     		ldr	r0, [r7]
 778 0038 FFF7FEFF 		bl	free_socket_free_elements
 779              	.L43:
 610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 611:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 780              		.loc 1 611 1
 781 003c 00BF     		nop
 782 003e 1837     		adds	r7, r7, #24
 783              	.LCFI58:
 784              		.cfi_def_cfa_offset 8
 785 0040 BD46     		mov	sp, r7
 786              	.LCFI59:
 787              		.cfi_def_cfa_register 13
 788              		@ sp needed
 789 0042 80BD     		pop	{r7, pc}
 790              		.cfi_endproc
 791              	.LFE148:
 793              		.section	.rodata
 794              		.align	2
 795              	.LC3:
 796 0078 6E657763 		.ascii	"newconn != NULL\000"
 796      6F6E6E20 
 796      213D204E 
 796      554C4C00 
 797              		.align	2
 798              	.LC4:
 799 0088 696E7661 		.ascii	"invalid socket index\000"
 799      6C696420 
 799      736F636B 
 799      65742069 
 799      6E646578 
 800              		.section	.text.lwip_accept,"ax",%progbits
 801              		.align	1
 802              		.global	lwip_accept
 803              		.syntax unified
 804              		.thumb
 805              		.thumb_func
 806              		.fpu fpv4-sp-d16
 808              	lwip_accept:
 809              	.LFB149:
 612:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 613:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Below this, the well-known socket functions are implemented.
 614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Use google.com or opengroup.org to get a good description :-)
 615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Exceptions are documented!
 617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 618:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 619:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 620:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_accept(int s, struct sockaddr *addr, socklen_t *addrlen)
ARM GAS  /tmp/ccsCUhT2.s 			page 26


 621:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 810              		.loc 1 621 1
 811              		.cfi_startproc
 812              		@ args = 0, pretend = 0, frame = 96
 813              		@ frame_needed = 1, uses_anonymous_args = 0
 814 0000 90B5     		push	{r4, r7, lr}
 815              	.LCFI60:
 816              		.cfi_def_cfa_offset 12
 817              		.cfi_offset 4, -12
 818              		.cfi_offset 7, -8
 819              		.cfi_offset 14, -4
 820 0002 99B0     		sub	sp, sp, #100
 821              	.LCFI61:
 822              		.cfi_def_cfa_offset 112
 823 0004 00AF     		add	r7, sp, #0
 824              	.LCFI62:
 825              		.cfi_def_cfa_register 7
 826 0006 F860     		str	r0, [r7, #12]
 827 0008 B960     		str	r1, [r7, #8]
 828 000a 7A60     		str	r2, [r7, #4]
 622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock, *nsock;
 623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *newconn;
 624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
 625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port = 0;
 829              		.loc 1 625 9
 830 000c 0023     		movs	r3, #0
 831 000e FB84     		strh	r3, [r7, #38]	@ movhi
 626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int newsock;
 627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int recvevent;
 629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
 630:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d)...\n", s));
 632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 832              		.loc 1 632 10
 833 0010 F868     		ldr	r0, [r7, #12]
 834 0012 FFF7FEFF 		bl	get_socket
 835 0016 B865     		str	r0, [r7, #88]
 633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 836              		.loc 1 633 6
 837 0018 BB6D     		ldr	r3, [r7, #88]
 838 001a 002B     		cmp	r3, #0
 839 001c 02D1     		bne	.L45
 634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 840              		.loc 1 634 12
 841 001e 4FF0FF33 		mov	r3, #-1
 842 0022 F8E0     		b	.L66
 843              	.L45:
 635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 636:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* wait for a new connection */
 638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_accept(sock->conn, &newconn);
 844              		.loc 1 638 9
 845 0024 BB6D     		ldr	r3, [r7, #88]
 846 0026 1B68     		ldr	r3, [r3]
 847 0028 07F12C02 		add	r2, r7, #44
 848 002c 1146     		mov	r1, r2
ARM GAS  /tmp/ccsCUhT2.s 			page 27


 849 002e 1846     		mov	r0, r3
 850 0030 FFF7FEFF 		bl	netconn_accept
 851 0034 0346     		mov	r3, r0
 852 0036 87F85730 		strb	r3, [r7, #87]
 639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 853              		.loc 1 639 6
 854 003a 97F95730 		ldrsb	r3, [r7, #87]
 855 003e 002B     		cmp	r3, #0
 856 0040 2CD0     		beq	.L47
 640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_acept failed, err=%d\n", s, err));
 641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 857              		.loc 1 641 9
 858 0042 BB6D     		ldr	r3, [r7, #88]
 859 0044 1B68     		ldr	r3, [r3]
 860 0046 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 861 0048 03F0F003 		and	r3, r3, #240
 862              		.loc 1 641 8
 863 004c 102B     		cmp	r3, #16
 864 004e 08D0     		beq	.L48
 865              	.LBB2:
 642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 866              		.loc 1 642 7
 867 0050 5F23     		movs	r3, #95
 868 0052 3B65     		str	r3, [r7, #80]
 869 0054 3B6D     		ldr	r3, [r7, #80]
 870 0056 002B     		cmp	r3, #0
 871 0058 1DD0     		beq	.L50
 872              		.loc 1 642 7 is_stmt 0 discriminator 1
 873 005a 714A     		ldr	r2, .L67
 874 005c 3B6D     		ldr	r3, [r7, #80]
 875 005e 1360     		str	r3, [r2]
 876 0060 19E0     		b	.L50
 877              	.L48:
 878              	.LBE2:
 643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else if (err == ERR_CLSD) {
 879              		.loc 1 643 15 is_stmt 1
 880 0062 97F95730 		ldrsb	r3, [r7, #87]
 881 0066 13F10F0F 		cmn	r3, #15
 882 006a 08D1     		bne	.L51
 883              	.LBB3:
 644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EINVAL);
 884              		.loc 1 644 7
 885 006c 1623     		movs	r3, #22
 886 006e FB64     		str	r3, [r7, #76]
 887 0070 FB6C     		ldr	r3, [r7, #76]
 888 0072 002B     		cmp	r3, #0
 889 0074 0FD0     		beq	.L50
 890              		.loc 1 644 7 is_stmt 0 discriminator 1
 891 0076 6A4A     		ldr	r2, .L67
 892 0078 FB6C     		ldr	r3, [r7, #76]
 893 007a 1360     		str	r3, [r2]
 894 007c 0BE0     		b	.L50
 895              	.L51:
 896              	.LBE3:
 897              	.LBB4:
 645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
ARM GAS  /tmp/ccsCUhT2.s 			page 28


 898              		.loc 1 646 7 is_stmt 1
 899 007e 97F95730 		ldrsb	r3, [r7, #87]
 900 0082 1846     		mov	r0, r3
 901 0084 FFF7FEFF 		bl	err_to_errno
 902 0088 B864     		str	r0, [r7, #72]
 903 008a BB6C     		ldr	r3, [r7, #72]
 904 008c 002B     		cmp	r3, #0
 905 008e 02D0     		beq	.L50
 906              		.loc 1 646 7 is_stmt 0 discriminator 1
 907 0090 634A     		ldr	r2, .L67
 908 0092 BB6C     		ldr	r3, [r7, #72]
 909 0094 1360     		str	r3, [r2]
 910              	.L50:
 911              	.LBE4:
 647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 912              		.loc 1 649 12 is_stmt 1
 913 0096 4FF0FF33 		mov	r3, #-1
 914 009a BCE0     		b	.L66
 915              	.L47:
 650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("newconn != NULL", newconn != NULL);
 916              		.loc 1 651 3
 917 009c FB6A     		ldr	r3, [r7, #44]
 918 009e 002B     		cmp	r3, #0
 919 00a0 06D1     		bne	.L53
 920              		.loc 1 651 3 is_stmt 0 discriminator 1
 921 00a2 604B     		ldr	r3, .L67+4
 922 00a4 40F28B22 		movw	r2, #651
 923 00a8 5F49     		ldr	r1, .L67+8
 924 00aa 6048     		ldr	r0, .L67+12
 925 00ac FFF7FEFF 		bl	printf
 926              	.L53:
 652:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newsock = alloc_socket(newconn, 1);
 927              		.loc 1 653 13 is_stmt 1
 928 00b0 FB6A     		ldr	r3, [r7, #44]
 929 00b2 0121     		movs	r1, #1
 930 00b4 1846     		mov	r0, r3
 931 00b6 FFF7FEFF 		bl	alloc_socket
 932 00ba 7864     		str	r0, [r7, #68]
 654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newsock == -1) {
 933              		.loc 1 654 6
 934 00bc 7B6C     		ldr	r3, [r7, #68]
 935 00be B3F1FF3F 		cmp	r3, #-1
 936 00c2 0ED1     		bne	.L54
 655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(newconn);
 937              		.loc 1 655 5
 938 00c4 FB6A     		ldr	r3, [r7, #44]
 939 00c6 1846     		mov	r0, r3
 940 00c8 FFF7FEFF 		bl	netconn_delete
 941              	.LBB5:
 656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENFILE);
 942              		.loc 1 656 5
 943 00cc 1723     		movs	r3, #23
 944 00ce 3B64     		str	r3, [r7, #64]
ARM GAS  /tmp/ccsCUhT2.s 			page 29


 945 00d0 3B6C     		ldr	r3, [r7, #64]
 946 00d2 002B     		cmp	r3, #0
 947 00d4 02D0     		beq	.L55
 948              		.loc 1 656 5 is_stmt 0 discriminator 1
 949 00d6 524A     		ldr	r2, .L67
 950 00d8 3B6C     		ldr	r3, [r7, #64]
 951 00da 1360     		str	r3, [r2]
 952              	.L55:
 953              	.LBE5:
 657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 954              		.loc 1 658 12 is_stmt 1
 955 00dc 4FF0FF33 		mov	r3, #-1
 956 00e0 99E0     		b	.L66
 957              	.L54:
 659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("invalid socket index", (newsock >= LWIP_SOCKET_OFFSET) && (newsock < NUM_SOCKETS + L
 958              		.loc 1 660 3
 959 00e2 7B6C     		ldr	r3, [r7, #68]
 960 00e4 002B     		cmp	r3, #0
 961 00e6 02DB     		blt	.L56
 962              		.loc 1 660 3 is_stmt 0 discriminator 2
 963 00e8 7B6C     		ldr	r3, [r7, #68]
 964 00ea 032B     		cmp	r3, #3
 965 00ec 06DD     		ble	.L57
 966              	.L56:
 967              		.loc 1 660 3 discriminator 3
 968 00ee 4D4B     		ldr	r3, .L67+4
 969 00f0 4FF42572 		mov	r2, #660
 970 00f4 4E49     		ldr	r1, .L67+16
 971 00f6 4D48     		ldr	r0, .L67+12
 972 00f8 FFF7FEFF 		bl	printf
 973              	.L57:
 661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nsock = &sockets[newsock - LWIP_SOCKET_OFFSET];
 974              		.loc 1 661 9 is_stmt 1
 975 00fc 7B6C     		ldr	r3, [r7, #68]
 976 00fe 1B01     		lsls	r3, r3, #4
 977 0100 4C4A     		ldr	r2, .L67+20
 978 0102 1344     		add	r3, r3, r2
 979 0104 FB63     		str	r3, [r7, #60]
 662:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* See event_callback: If data comes in right away after an accept, even
 664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * though the server task might not have created a new socket yet.
 665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * In that case, newconn->socket is counted down (newconn->socket--),
 666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * so nsock->rcvevent is >= 1 here!
 667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 980              		.loc 1 668 3
 981 0106 FFF7FEFF 		bl	sys_arch_protect
 982 010a B863     		str	r0, [r7, #56]
 669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   recvevent = (s16_t)(-1 - newconn->socket);
 983              		.loc 1 669 35
 984 010c FB6A     		ldr	r3, [r7, #44]
 985 010e 9B69     		ldr	r3, [r3, #24]
 986              		.loc 1 669 26
 987 0110 1BB2     		sxth	r3, r3
 988              		.loc 1 669 15
ARM GAS  /tmp/ccsCUhT2.s 			page 30


 989 0112 DB43     		mvns	r3, r3
 990 0114 1BB2     		sxth	r3, r3
 991              		.loc 1 669 13
 992 0116 FB65     		str	r3, [r7, #92]
 670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   newconn->socket = newsock;
 993              		.loc 1 670 10
 994 0118 FB6A     		ldr	r3, [r7, #44]
 995              		.loc 1 670 19
 996 011a 7A6C     		ldr	r2, [r7, #68]
 997 011c 9A61     		str	r2, [r3, #24]
 671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
 998              		.loc 1 671 3
 999 011e B86B     		ldr	r0, [r7, #56]
 1000 0120 FFF7FEFF 		bl	sys_arch_unprotect
 672:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (newconn->callback) {
 1001              		.loc 1 673 14
 1002 0124 FB6A     		ldr	r3, [r7, #44]
 1003 0126 5B6A     		ldr	r3, [r3, #36]
 1004              		.loc 1 673 6
 1005 0128 002B     		cmp	r3, #0
 1006 012a 12D0     		beq	.L58
 674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LOCK_TCPIP_CORE();
 1007              		.loc 1 674 5
 1008 012c 4248     		ldr	r0, .L67+24
 1009 012e FFF7FEFF 		bl	sys_mutex_lock
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     while (recvevent > 0) {
 1010              		.loc 1 675 11
 1011 0132 08E0     		b	.L59
 1012              	.L60:
 676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       recvevent--;
 1013              		.loc 1 676 16
 1014 0134 FB6D     		ldr	r3, [r7, #92]
 1015 0136 013B     		subs	r3, r3, #1
 1016 0138 FB65     		str	r3, [r7, #92]
 677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       newconn->callback(newconn, NETCONN_EVT_RCVPLUS, 0);
 1017              		.loc 1 677 14
 1018 013a FB6A     		ldr	r3, [r7, #44]
 1019 013c 5B6A     		ldr	r3, [r3, #36]
 1020              		.loc 1 677 7
 1021 013e F86A     		ldr	r0, [r7, #44]
 1022 0140 0022     		movs	r2, #0
 1023 0142 0021     		movs	r1, #0
 1024 0144 9847     		blx	r3
 1025              	.LVL0:
 1026              	.L59:
 675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     while (recvevent > 0) {
 1027              		.loc 1 675 11
 1028 0146 FB6D     		ldr	r3, [r7, #92]
 1029 0148 002B     		cmp	r3, #0
 1030 014a F3DC     		bgt	.L60
 678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     UNLOCK_TCPIP_CORE();
 1031              		.loc 1 679 5
 1032 014c 3A48     		ldr	r0, .L67+24
 1033 014e FFF7FEFF 		bl	sys_mutex_unlock
 1034              	.L58:
ARM GAS  /tmp/ccsCUhT2.s 			page 31


 680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 681:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Note that POSIX only requires us to check addr is non-NULL. addrlen must
 683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * not be NULL if addr is valid.
 684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
 685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((addr != NULL) && (addrlen != NULL)) {
 1035              		.loc 1 685 6
 1036 0152 BB68     		ldr	r3, [r7, #8]
 1037 0154 002B     		cmp	r3, #0
 1038 0156 55D0     		beq	.L61
 1039              		.loc 1 685 22 discriminator 1
 1040 0158 7B68     		ldr	r3, [r7, #4]
 1041 015a 002B     		cmp	r3, #0
 1042 015c 52D0     		beq	.L61
 1043              	.LBB6:
 686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     union sockaddr_aligned tempaddr;
 687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* get the IP address and port of the remote host */
 688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_peer(newconn, &naddr, &port);
 1044              		.loc 1 688 11
 1045 015e F86A     		ldr	r0, [r7, #44]
 1046 0160 07F12602 		add	r2, r7, #38
 1047 0164 07F12801 		add	r1, r7, #40
 1048 0168 0023     		movs	r3, #0
 1049 016a FFF7FEFF 		bl	netconn_getaddr
 1050 016e 0346     		mov	r3, r0
 1051 0170 87F85730 		strb	r3, [r7, #87]
 689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 1052              		.loc 1 689 8
 1053 0174 97F95730 		ldrsb	r3, [r7, #87]
 1054 0178 002B     		cmp	r3, #0
 1055 017a 16D0     		beq	.L62
 690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d): netconn_peer failed, err=%d\n", s, err));
 691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_delete(newconn);
 1056              		.loc 1 691 7
 1057 017c FB6A     		ldr	r3, [r7, #44]
 1058 017e 1846     		mov	r0, r3
 1059 0180 FFF7FEFF 		bl	netconn_delete
 692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       free_socket(nsock, 1);
 1060              		.loc 1 692 7
 1061 0184 0121     		movs	r1, #1
 1062 0186 F86B     		ldr	r0, [r7, #60]
 1063 0188 FFF7FEFF 		bl	free_socket
 1064              	.LBB7:
 693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 1065              		.loc 1 693 7
 1066 018c 97F95730 		ldrsb	r3, [r7, #87]
 1067 0190 1846     		mov	r0, r3
 1068 0192 FFF7FEFF 		bl	err_to_errno
 1069 0196 7863     		str	r0, [r7, #52]
 1070 0198 7B6B     		ldr	r3, [r7, #52]
 1071 019a 002B     		cmp	r3, #0
 1072 019c 02D0     		beq	.L63
 1073              		.loc 1 693 7 is_stmt 0 discriminator 1
 1074 019e 204A     		ldr	r2, .L67
 1075 01a0 7B6B     		ldr	r3, [r7, #52]
 1076 01a2 1360     		str	r3, [r2]
 1077              	.L63:
ARM GAS  /tmp/ccsCUhT2.s 			page 32


 1078              	.LBE7:
 694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
 695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 1079              		.loc 1 695 14 is_stmt 1
 1080 01a4 4FF0FF33 		mov	r3, #-1
 1081 01a8 35E0     		b	.L66
 1082              	.L62:
 696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 697:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 698:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IPADDR_PORT_TO_SOCKADDR(&tempaddr, &naddr, port);
 1083              		.loc 1 698 5
 1084 01aa 07F11403 		add	r3, r7, #20
 1085 01ae 1022     		movs	r2, #16
 1086 01b0 1A70     		strb	r2, [r3]
 1087 01b2 07F11403 		add	r3, r7, #20
 1088 01b6 0222     		movs	r2, #2
 1089 01b8 5A70     		strb	r2, [r3, #1]
 1090 01ba FB8C     		ldrh	r3, [r7, #38]
 1091 01bc 07F11404 		add	r4, r7, #20
 1092 01c0 1846     		mov	r0, r3
 1093 01c2 FFF7FEFF 		bl	lwip_htons
 1094 01c6 0346     		mov	r3, r0
 1095 01c8 6380     		strh	r3, [r4, #2]	@ movhi
 1096 01ca 07F11403 		add	r3, r7, #20
 1097 01ce BA6A     		ldr	r2, [r7, #40]
 1098 01d0 5A60     		str	r2, [r3, #4]
 1099 01d2 07F11403 		add	r3, r7, #20
 1100 01d6 0833     		adds	r3, r3, #8
 1101 01d8 0822     		movs	r2, #8
 1102 01da 0021     		movs	r1, #0
 1103 01dc 1846     		mov	r0, r3
 1104 01de FFF7FEFF 		bl	memset
 699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (*addrlen > tempaddr.sa.sa_len) {
 1105              		.loc 1 699 9
 1106 01e2 7B68     		ldr	r3, [r7, #4]
 1107 01e4 1B68     		ldr	r3, [r3]
 1108              		.loc 1 699 31
 1109 01e6 3A7D     		ldrb	r2, [r7, #20]	@ zero_extendqisi2
 1110              		.loc 1 699 8
 1111 01e8 9342     		cmp	r3, r2
 1112 01ea 03D9     		bls	.L64
 700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *addrlen = tempaddr.sa.sa_len;
 1113              		.loc 1 700 29
 1114 01ec 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 1115 01ee 1A46     		mov	r2, r3
 1116              		.loc 1 700 16
 1117 01f0 7B68     		ldr	r3, [r7, #4]
 1118 01f2 1A60     		str	r2, [r3]
 1119              	.L64:
 701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     MEMCPY(addr, &tempaddr, *addrlen);
 1120              		.loc 1 702 5
 1121 01f4 7B68     		ldr	r3, [r7, #4]
 1122 01f6 1A68     		ldr	r2, [r3]
 1123 01f8 07F11403 		add	r3, r7, #20
 1124 01fc 1946     		mov	r1, r3
 1125 01fe B868     		ldr	r0, [r7, #8]
ARM GAS  /tmp/ccsCUhT2.s 			page 33


 1126 0200 FFF7FEFF 		bl	memcpy
 1127              	.L61:
 1128              	.LBE6:
 1129              	.LBB8:
 703:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d addr=", s, newsock));
 705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
 706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", port));
 707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_accept(%d) returning new sock=%d", s, newsock));
 709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 710:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 1130              		.loc 1 711 3
 1131 0204 0023     		movs	r3, #0
 1132 0206 3B63     		str	r3, [r7, #48]
 1133 0208 3B6B     		ldr	r3, [r7, #48]
 1134 020a 002B     		cmp	r3, #0
 1135 020c 02D0     		beq	.L65
 1136              		.loc 1 711 3 is_stmt 0 discriminator 1
 1137 020e 044A     		ldr	r2, .L67
 1138 0210 3B6B     		ldr	r3, [r7, #48]
 1139 0212 1360     		str	r3, [r2]
 1140              	.L65:
 1141              	.LBE8:
 712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
 713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(nsock);
 714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return newsock;
 1142              		.loc 1 714 10 is_stmt 1
 1143 0214 7B6C     		ldr	r3, [r7, #68]
 1144              	.L66:
 715:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1145              		.loc 1 715 1 discriminator 2
 1146 0216 1846     		mov	r0, r3
 1147 0218 6437     		adds	r7, r7, #100
 1148              	.LCFI63:
 1149              		.cfi_def_cfa_offset 12
 1150 021a BD46     		mov	sp, r7
 1151              	.LCFI64:
 1152              		.cfi_def_cfa_register 13
 1153              		@ sp needed
 1154 021c 90BD     		pop	{r4, r7, pc}
 1155              	.L68:
 1156 021e 00BF     		.align	2
 1157              	.L67:
 1158 0220 00000000 		.word	errno
 1159 0224 00000000 		.word	.LC0
 1160 0228 78000000 		.word	.LC3
 1161 022c 50000000 		.word	.LC2
 1162 0230 88000000 		.word	.LC4
 1163 0234 00000000 		.word	sockets
 1164 0238 00000000 		.word	lock_tcpip_core
 1165              		.cfi_endproc
 1166              	.LFE149:
 1168              		.section	.rodata
 1169 009d 000000   		.align	2
 1170              	.LC5:
ARM GAS  /tmp/ccsCUhT2.s 			page 34


 1171 00a0 6C776970 		.ascii	"lwip_bind: invalid address\000"
 1171      5F62696E 
 1171      643A2069 
 1171      6E76616C 
 1171      69642061 
 1172              		.section	.text.lwip_bind,"ax",%progbits
 1173              		.align	1
 1174              		.global	lwip_bind
 1175              		.syntax unified
 1176              		.thumb
 1177              		.thumb_func
 1178              		.fpu fpv4-sp-d16
 1180              	lwip_bind:
 1181              	.LFB150:
 716:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 717:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 718:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_bind(int s, const struct sockaddr *name, socklen_t namelen)
 719:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 1182              		.loc 1 719 1
 1183              		.cfi_startproc
 1184              		@ args = 0, pretend = 0, frame = 40
 1185              		@ frame_needed = 1, uses_anonymous_args = 0
 1186 0000 80B5     		push	{r7, lr}
 1187              	.LCFI65:
 1188              		.cfi_def_cfa_offset 8
 1189              		.cfi_offset 7, -8
 1190              		.cfi_offset 14, -4
 1191 0002 8AB0     		sub	sp, sp, #40
 1192              	.LCFI66:
 1193              		.cfi_def_cfa_offset 48
 1194 0004 00AF     		add	r7, sp, #0
 1195              	.LCFI67:
 1196              		.cfi_def_cfa_register 7
 1197 0006 F860     		str	r0, [r7, #12]
 1198 0008 B960     		str	r1, [r7, #8]
 1199 000a 7A60     		str	r2, [r7, #4]
 720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t local_addr;
 722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t local_port;
 723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 724:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 1200              		.loc 1 725 10
 1201 000c F868     		ldr	r0, [r7, #12]
 1202 000e FFF7FEFF 		bl	get_socket
 1203 0012 7862     		str	r0, [r7, #36]
 726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1204              		.loc 1 726 6
 1205 0014 7B6A     		ldr	r3, [r7, #36]
 1206 0016 002B     		cmp	r3, #0
 1207 0018 02D1     		bne	.L70
 727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1208              		.loc 1 727 12
 1209 001a 4FF0FF33 		mov	r3, #-1
 1210 001e 51E0     		b	.L78
 1211              	.L70:
 728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  /tmp/ccsCUhT2.s 			page 35


 729:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH(name, sock)) {
 731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 736:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* check size, family and alignment of 'name' */
 738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_bind: invalid address", (IS_SOCK_ADDR_LEN_VALID(namelen) &&
 1212              		.loc 1 738 3
 1213 0020 7B68     		ldr	r3, [r7, #4]
 1214 0022 102B     		cmp	r3, #16
 1215 0024 08D1     		bne	.L72
 1216              		.loc 1 738 3 is_stmt 0 discriminator 2
 1217 0026 BB68     		ldr	r3, [r7, #8]
 1218 0028 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1219 002a 022B     		cmp	r3, #2
 1220 002c 04D1     		bne	.L72
 1221              		.loc 1 738 3 discriminator 4
 1222 002e BB68     		ldr	r3, [r7, #8]
 1223 0030 03F00303 		and	r3, r3, #3
 1224 0034 002B     		cmp	r3, #0
 1225 0036 14D0     		beq	.L73
 1226              	.L72:
 1227              		.loc 1 738 3 discriminator 5
 1228 0038 244B     		ldr	r3, .L79
 1229 003a 4FF43972 		mov	r2, #740
 1230 003e 2449     		ldr	r1, .L79+4
 1231 0040 2448     		ldr	r0, .L79+8
 1232 0042 FFF7FEFF 		bl	printf
 1233              	.LBB9:
 1234 0046 6FF00F00 		mvn	r0, #15
 1235 004a FFF7FEFF 		bl	err_to_errno
 1236 004e 7861     		str	r0, [r7, #20]
 1237 0050 7B69     		ldr	r3, [r7, #20]
 1238 0052 002B     		cmp	r3, #0
 1239 0054 02D0     		beq	.L74
 1240              		.loc 1 738 3 discriminator 6
 1241 0056 204A     		ldr	r2, .L79+12
 1242 0058 7B69     		ldr	r3, [r7, #20]
 1243 005a 1360     		str	r3, [r2]
 1244              	.L74:
 1245              	.LBE9:
 1246              		.loc 1 738 3 discriminator 8
 1247 005c 4FF0FF33 		mov	r3, #-1
 1248 0060 30E0     		b	.L78
 1249              	.L73:
 739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              IS_SOCK_ADDR_TYPE_VALID(name) && IS_SOCK_ADDR_ALIGNED(name)),
 740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); done_socket(sock); return -1;);
 741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 742:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SOCKADDR_TO_IPADDR_PORT(name, &local_addr, local_port);
 1250              		.loc 1 743 3 is_stmt 1
 1251 0062 BB68     		ldr	r3, [r7, #8]
 1252 0064 5B68     		ldr	r3, [r3, #4]
 1253 0066 3B61     		str	r3, [r7, #16]
ARM GAS  /tmp/ccsCUhT2.s 			page 36


 1254 0068 BB68     		ldr	r3, [r7, #8]
 1255 006a 5B88     		ldrh	r3, [r3, #2]
 1256 006c 1846     		mov	r0, r3
 1257 006e FFF7FEFF 		bl	lwip_htons
 1258 0072 0346     		mov	r3, r0
 1259 0074 7B84     		strh	r3, [r7, #34]	@ movhi
 744:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d, addr=", s));
 745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, local_addr);
 746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", local_port));
 747:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 748:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
 750:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (IP_IS_V6_VAL(local_addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&local_addr))) {
 751:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     unmap_ipv4_mapped_ipv6(ip_2_ip4(&local_addr), ip_2_ip6(&local_addr));
 752:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE_VAL(local_addr, IPADDR_TYPE_V4);
 753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 754:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 755:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_bind(sock->conn, &local_addr, local_port);
 1260              		.loc 1 756 9
 1261 0076 7B6A     		ldr	r3, [r7, #36]
 1262 0078 1B68     		ldr	r3, [r3]
 1263 007a 7A8C     		ldrh	r2, [r7, #34]
 1264 007c 07F11001 		add	r1, r7, #16
 1265 0080 1846     		mov	r0, r3
 1266 0082 FFF7FEFF 		bl	netconn_bind
 1267 0086 0346     		mov	r3, r0
 1268 0088 87F82130 		strb	r3, [r7, #33]
 757:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1269              		.loc 1 758 6
 1270 008c 97F92130 		ldrsb	r3, [r7, #33]
 1271 0090 002B     		cmp	r3, #0
 1272 0092 0ED0     		beq	.L75
 1273              	.LBB10:
 759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) failed, err=%d\n", s, err));
 760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 1274              		.loc 1 760 5
 1275 0094 97F92130 		ldrsb	r3, [r7, #33]
 1276 0098 1846     		mov	r0, r3
 1277 009a FFF7FEFF 		bl	err_to_errno
 1278 009e F861     		str	r0, [r7, #28]
 1279 00a0 FB69     		ldr	r3, [r7, #28]
 1280 00a2 002B     		cmp	r3, #0
 1281 00a4 02D0     		beq	.L76
 1282              		.loc 1 760 5 is_stmt 0 discriminator 1
 1283 00a6 0C4A     		ldr	r2, .L79+12
 1284 00a8 FB69     		ldr	r3, [r7, #28]
 1285 00aa 1360     		str	r3, [r2]
 1286              	.L76:
 1287              	.LBE10:
 761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1288              		.loc 1 762 12 is_stmt 1
 1289 00ac 4FF0FF33 		mov	r3, #-1
 1290 00b0 08E0     		b	.L78
 1291              	.L75:
ARM GAS  /tmp/ccsCUhT2.s 			page 37


 1292              	.LBB11:
 763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 764:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_bind(%d) succeeded\n", s));
 766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 1293              		.loc 1 766 3
 1294 00b2 0023     		movs	r3, #0
 1295 00b4 BB61     		str	r3, [r7, #24]
 1296 00b6 BB69     		ldr	r3, [r7, #24]
 1297 00b8 002B     		cmp	r3, #0
 1298 00ba 02D0     		beq	.L77
 1299              		.loc 1 766 3 is_stmt 0 discriminator 1
 1300 00bc 064A     		ldr	r2, .L79+12
 1301 00be BB69     		ldr	r3, [r7, #24]
 1302 00c0 1360     		str	r3, [r2]
 1303              	.L77:
 1304              	.LBE11:
 767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
 768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 1305              		.loc 1 768 10 is_stmt 1
 1306 00c2 0023     		movs	r3, #0
 1307              	.L78:
 769:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1308              		.loc 1 769 1 discriminator 1
 1309 00c4 1846     		mov	r0, r3
 1310 00c6 2837     		adds	r7, r7, #40
 1311              	.LCFI68:
 1312              		.cfi_def_cfa_offset 8
 1313 00c8 BD46     		mov	sp, r7
 1314              	.LCFI69:
 1315              		.cfi_def_cfa_register 13
 1316              		@ sp needed
 1317 00ca 80BD     		pop	{r7, pc}
 1318              	.L80:
 1319              		.align	2
 1320              	.L79:
 1321 00cc 00000000 		.word	.LC0
 1322 00d0 A0000000 		.word	.LC5
 1323 00d4 50000000 		.word	.LC2
 1324 00d8 00000000 		.word	errno
 1325              		.cfi_endproc
 1326              	.LFE150:
 1328              		.section	.rodata
 1329 00bb 00       		.align	2
 1330              	.LC6:
 1331 00bc 736F636B 		.ascii	"sock->lastdata == NULL\000"
 1331      2D3E6C61 
 1331      73746461 
 1331      7461203D 
 1331      3D204E55 
 1332              		.section	.text.lwip_close,"ax",%progbits
 1333              		.align	1
 1334              		.global	lwip_close
 1335              		.syntax unified
 1336              		.thumb
 1337              		.thumb_func
 1338              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccsCUhT2.s 			page 38


 1340              	lwip_close:
 1341              	.LFB151:
 770:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 771:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 772:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_close(int s)
 773:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 1342              		.loc 1 773 1
 1343              		.cfi_startproc
 1344              		@ args = 0, pretend = 0, frame = 24
 1345              		@ frame_needed = 1, uses_anonymous_args = 0
 1346 0000 80B5     		push	{r7, lr}
 1347              	.LCFI70:
 1348              		.cfi_def_cfa_offset 8
 1349              		.cfi_offset 7, -8
 1350              		.cfi_offset 14, -4
 1351 0002 86B0     		sub	sp, sp, #24
 1352              	.LCFI71:
 1353              		.cfi_def_cfa_offset 32
 1354 0004 00AF     		add	r7, sp, #0
 1355              	.LCFI72:
 1356              		.cfi_def_cfa_register 7
 1357 0006 7860     		str	r0, [r7, #4]
 774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int is_tcp = 0;
 1358              		.loc 1 775 7
 1359 0008 0023     		movs	r3, #0
 1360 000a 7B61     		str	r3, [r7, #20]
 776:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 777:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_close(%d)\n", s));
 779:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 1361              		.loc 1 780 10
 1362 000c 7868     		ldr	r0, [r7, #4]
 1363 000e FFF7FEFF 		bl	get_socket
 1364 0012 3861     		str	r0, [r7, #16]
 781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1365              		.loc 1 781 6
 1366 0014 3B69     		ldr	r3, [r7, #16]
 1367 0016 002B     		cmp	r3, #0
 1368 0018 02D1     		bne	.L82
 782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1369              		.loc 1 782 12
 1370 001a 4FF0FF33 		mov	r3, #-1
 1371 001e 39E0     		b	.L83
 1372              	.L82:
 783:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
 1373              		.loc 1 785 11
 1374 0020 3B69     		ldr	r3, [r7, #16]
 1375 0022 1B68     		ldr	r3, [r3]
 1376              		.loc 1 785 6
 1377 0024 002B     		cmp	r3, #0
 1378 0026 0BD0     		beq	.L84
 786:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     is_tcp = NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP;
 1379              		.loc 1 786 14
ARM GAS  /tmp/ccsCUhT2.s 			page 39


 1380 0028 3B69     		ldr	r3, [r7, #16]
 1381 002a 1B68     		ldr	r3, [r3]
 1382 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1383 002e 03F0F003 		and	r3, r3, #240
 1384              		.loc 1 786 58
 1385 0032 102B     		cmp	r3, #16
 1386 0034 0CBF     		ite	eq
 1387 0036 0123     		moveq	r3, #1
 1388 0038 0023     		movne	r3, #0
 1389 003a DBB2     		uxtb	r3, r3
 1390              		.loc 1 786 12
 1391 003c 7B61     		str	r3, [r7, #20]
 1392 003e 0AE0     		b	.L85
 1393              	.L84:
 787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("sock->lastdata == NULL", sock->lastdata.pbuf == NULL);
 1394              		.loc 1 788 5
 1395 0040 3B69     		ldr	r3, [r7, #16]
 1396 0042 5B68     		ldr	r3, [r3, #4]
 1397 0044 002B     		cmp	r3, #0
 1398 0046 06D0     		beq	.L85
 1399              		.loc 1 788 5 is_stmt 0 discriminator 1
 1400 0048 144B     		ldr	r3, .L88
 1401 004a 4FF44572 		mov	r2, #788
 1402 004e 1449     		ldr	r1, .L88+4
 1403 0050 1448     		ldr	r0, .L88+8
 1404 0052 FFF7FEFF 		bl	printf
 1405              	.L85:
 789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 790:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 791:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
 792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* drop all possibly joined IGMP memberships */
 793:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_socket_drop_registered_memberships(s);
 794:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
 795:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6_MLD
 796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* drop all possibly joined MLD6 memberships */
 797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_socket_drop_registered_mld6_memberships(s);
 798:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6_MLD */
 799:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_prepare_delete(sock->conn);
 1406              		.loc 1 800 9 is_stmt 1
 1407 0056 3B69     		ldr	r3, [r7, #16]
 1408 0058 1B68     		ldr	r3, [r3]
 1409 005a 1846     		mov	r0, r3
 1410 005c FFF7FEFF 		bl	netconn_prepare_delete
 1411 0060 0346     		mov	r3, r0
 1412 0062 FB73     		strb	r3, [r7, #15]
 801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1413              		.loc 1 801 6
 1414 0064 97F90F30 		ldrsb	r3, [r7, #15]
 1415 0068 002B     		cmp	r3, #0
 1416 006a 0ED0     		beq	.L86
 1417              	.LBB12:
 802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 1418              		.loc 1 802 5
 1419 006c 97F90F30 		ldrsb	r3, [r7, #15]
 1420 0070 1846     		mov	r0, r3
ARM GAS  /tmp/ccsCUhT2.s 			page 40


 1421 0072 FFF7FEFF 		bl	err_to_errno
 1422 0076 B860     		str	r0, [r7, #8]
 1423 0078 BB68     		ldr	r3, [r7, #8]
 1424 007a 002B     		cmp	r3, #0
 1425 007c 02D0     		beq	.L87
 1426              		.loc 1 802 5 is_stmt 0 discriminator 1
 1427 007e 0A4A     		ldr	r2, .L88+12
 1428 0080 BB68     		ldr	r3, [r7, #8]
 1429 0082 1360     		str	r3, [r2]
 1430              	.L87:
 1431              	.LBE12:
 803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1432              		.loc 1 804 12 is_stmt 1
 1433 0084 4FF0FF33 		mov	r3, #-1
 1434 0088 04E0     		b	.L83
 1435              	.L86:
 805:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 806:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   free_socket(sock, is_tcp);
 1436              		.loc 1 807 3
 1437 008a 7969     		ldr	r1, [r7, #20]
 1438 008c 3869     		ldr	r0, [r7, #16]
 1439 008e FFF7FEFF 		bl	free_socket
 808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
 809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 1440              		.loc 1 809 10
 1441 0092 0023     		movs	r3, #0
 1442              	.L83:
 810:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1443              		.loc 1 810 1
 1444 0094 1846     		mov	r0, r3
 1445 0096 1837     		adds	r7, r7, #24
 1446              	.LCFI73:
 1447              		.cfi_def_cfa_offset 8
 1448 0098 BD46     		mov	sp, r7
 1449              	.LCFI74:
 1450              		.cfi_def_cfa_register 13
 1451              		@ sp needed
 1452 009a 80BD     		pop	{r7, pc}
 1453              	.L89:
 1454              		.align	2
 1455              	.L88:
 1456 009c 00000000 		.word	.LC0
 1457 00a0 BC000000 		.word	.LC6
 1458 00a4 50000000 		.word	.LC2
 1459 00a8 00000000 		.word	errno
 1460              		.cfi_endproc
 1461              	.LFE151:
 1463              		.section	.rodata
 1464 00d3 00       		.align	2
 1465              	.LC7:
 1466 00d4 6C776970 		.ascii	"lwip_connect: invalid address\000"
 1466      5F636F6E 
 1466      6E656374 
 1466      3A20696E 
 1466      76616C69 
ARM GAS  /tmp/ccsCUhT2.s 			page 41


 1467              		.section	.text.lwip_connect,"ax",%progbits
 1468              		.align	1
 1469              		.global	lwip_connect
 1470              		.syntax unified
 1471              		.thumb
 1472              		.thumb_func
 1473              		.fpu fpv4-sp-d16
 1475              	lwip_connect:
 1476              	.LFB152:
 811:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 812:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 813:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_connect(int s, const struct sockaddr *name, socklen_t namelen)
 814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 1477              		.loc 1 814 1
 1478              		.cfi_startproc
 1479              		@ args = 0, pretend = 0, frame = 48
 1480              		@ frame_needed = 1, uses_anonymous_args = 0
 1481 0000 80B5     		push	{r7, lr}
 1482              	.LCFI75:
 1483              		.cfi_def_cfa_offset 8
 1484              		.cfi_offset 7, -8
 1485              		.cfi_offset 14, -4
 1486 0002 8CB0     		sub	sp, sp, #48
 1487              	.LCFI76:
 1488              		.cfi_def_cfa_offset 56
 1489 0004 00AF     		add	r7, sp, #0
 1490              	.LCFI77:
 1491              		.cfi_def_cfa_register 7
 1492 0006 F860     		str	r0, [r7, #12]
 1493 0008 B960     		str	r1, [r7, #8]
 1494 000a 7A60     		str	r2, [r7, #4]
 815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 817:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 1495              		.loc 1 818 10
 1496 000c F868     		ldr	r0, [r7, #12]
 1497 000e FFF7FEFF 		bl	get_socket
 1498 0012 B862     		str	r0, [r7, #40]
 819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1499              		.loc 1 819 6
 1500 0014 BB6A     		ldr	r3, [r7, #40]
 1501 0016 002B     		cmp	r3, #0
 1502 0018 02D1     		bne	.L91
 820:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1503              		.loc 1 820 12
 1504 001a 4FF0FF33 		mov	r3, #-1
 1505 001e 62E0     		b	.L92
 1506              	.L91:
 821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 822:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!SOCK_ADDR_TYPE_MATCH_OR_UNSPEC(name, sock)) {
 824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* sockaddr does not match socket type (IPv4/IPv6) */
 825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_VAL));
 826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 827:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  /tmp/ccsCUhT2.s 			page 42


 829:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(namelen);
 831:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (name->sa_family == AF_UNSPEC) {
 1507              		.loc 1 831 11
 1508 0020 BB68     		ldr	r3, [r7, #8]
 1509 0022 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1510              		.loc 1 831 6
 1511 0024 002B     		cmp	r3, #0
 1512 0026 08D1     		bne	.L93
 832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, AF_UNSPEC)\n", s));
 833:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_disconnect(sock->conn);
 1513              		.loc 1 833 11
 1514 0028 BB6A     		ldr	r3, [r7, #40]
 1515 002a 1B68     		ldr	r3, [r3]
 1516 002c 1846     		mov	r0, r3
 1517 002e FFF7FEFF 		bl	netconn_disconnect
 1518 0032 0346     		mov	r3, r0
 1519 0034 87F82F30 		strb	r3, [r7, #47]
 1520 0038 39E0     		b	.L94
 1521              	.L93:
 1522              	.LBB13:
 834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
 835:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_t remote_addr;
 836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t remote_port;
 837:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* check size, family and alignment of 'name' */
 839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_connect: invalid address", IS_SOCK_ADDR_LEN_VALID(namelen) &&
 1523              		.loc 1 839 5
 1524 003a 7B68     		ldr	r3, [r7, #4]
 1525 003c 102B     		cmp	r3, #16
 1526 003e 0CD1     		bne	.L95
 1527              		.loc 1 839 5 is_stmt 0 discriminator 2
 1528 0040 BB68     		ldr	r3, [r7, #8]
 1529 0042 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1530 0044 002B     		cmp	r3, #0
 1531 0046 03D0     		beq	.L96
 1532              		.loc 1 839 5 discriminator 3
 1533 0048 BB68     		ldr	r3, [r7, #8]
 1534 004a 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1535 004c 022B     		cmp	r3, #2
 1536 004e 04D1     		bne	.L95
 1537              	.L96:
 1538              		.loc 1 839 5 discriminator 6
 1539 0050 BB68     		ldr	r3, [r7, #8]
 1540 0052 03F00303 		and	r3, r3, #3
 1541 0056 002B     		cmp	r3, #0
 1542 0058 14D0     		beq	.L97
 1543              	.L95:
 1544              		.loc 1 839 5 discriminator 7
 1545 005a 254B     		ldr	r3, .L102
 1546 005c 40F24932 		movw	r2, #841
 1547 0060 2449     		ldr	r1, .L102+4
 1548 0062 2548     		ldr	r0, .L102+8
 1549 0064 FFF7FEFF 		bl	printf
 1550              	.LBB14:
 1551 0068 6FF00F00 		mvn	r0, #15
 1552 006c FFF7FEFF 		bl	err_to_errno
ARM GAS  /tmp/ccsCUhT2.s 			page 43


 1553 0070 3862     		str	r0, [r7, #32]
 1554 0072 3B6A     		ldr	r3, [r7, #32]
 1555 0074 002B     		cmp	r3, #0
 1556 0076 02D0     		beq	.L98
 1557              		.loc 1 839 5 discriminator 8
 1558 0078 204A     		ldr	r2, .L102+12
 1559 007a 3B6A     		ldr	r3, [r7, #32]
 1560 007c 1360     		str	r3, [r2]
 1561              	.L98:
 1562              	.LBE14:
 1563              		.loc 1 839 5 discriminator 10
 1564 007e 4FF0FF33 		mov	r3, #-1
 1565 0082 30E0     		b	.L92
 1566              	.L97:
 840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_TYPE_VALID_OR_UNSPEC(name) && IS_SOCK_ADDR_ALIGNED(name),
 841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); done_socket(sock); return -1;);
 842:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(name, &remote_addr, remote_port);
 1567              		.loc 1 843 5 is_stmt 1
 1568 0084 BB68     		ldr	r3, [r7, #8]
 1569 0086 5B68     		ldr	r3, [r3, #4]
 1570 0088 7B61     		str	r3, [r7, #20]
 1571 008a BB68     		ldr	r3, [r7, #8]
 1572 008c 5B88     		ldrh	r3, [r3, #2]
 1573 008e 1846     		mov	r0, r3
 1574 0090 FFF7FEFF 		bl	lwip_htons
 1575 0094 0346     		mov	r3, r0
 1576 0096 FB84     		strh	r3, [r7, #38]	@ movhi
 844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d, addr=", s));
 845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, remote_addr);
 846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", remote_port));
 847:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 848:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
 849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
 850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6_VAL(remote_addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&remote_addr))) {
 851:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       unmap_ipv4_mapped_ipv6(ip_2_ip4(&remote_addr), ip_2_ip6(&remote_addr));
 852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_SET_TYPE_VAL(remote_addr, IPADDR_TYPE_V4);
 853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 854:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
 855:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_connect(sock->conn, &remote_addr, remote_port);
 1577              		.loc 1 856 11
 1578 0098 BB6A     		ldr	r3, [r7, #40]
 1579 009a 1B68     		ldr	r3, [r3]
 1580 009c FA8C     		ldrh	r2, [r7, #38]
 1581 009e 07F11401 		add	r1, r7, #20
 1582 00a2 1846     		mov	r0, r3
 1583 00a4 FFF7FEFF 		bl	netconn_connect
 1584 00a8 0346     		mov	r3, r0
 1585 00aa 87F82F30 		strb	r3, [r7, #47]
 1586              	.L94:
 1587              	.LBE13:
 857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1588              		.loc 1 859 6
 1589 00ae 97F92F30 		ldrsb	r3, [r7, #47]
ARM GAS  /tmp/ccsCUhT2.s 			page 44


 1590 00b2 002B     		cmp	r3, #0
 1591 00b4 0ED0     		beq	.L99
 1592              	.LBB15:
 860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) failed, err=%d\n", s, err));
 861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 1593              		.loc 1 861 5
 1594 00b6 97F92F30 		ldrsb	r3, [r7, #47]
 1595 00ba 1846     		mov	r0, r3
 1596 00bc FFF7FEFF 		bl	err_to_errno
 1597 00c0 F861     		str	r0, [r7, #28]
 1598 00c2 FB69     		ldr	r3, [r7, #28]
 1599 00c4 002B     		cmp	r3, #0
 1600 00c6 02D0     		beq	.L100
 1601              		.loc 1 861 5 is_stmt 0 discriminator 1
 1602 00c8 0C4A     		ldr	r2, .L102+12
 1603 00ca FB69     		ldr	r3, [r7, #28]
 1604 00cc 1360     		str	r3, [r2]
 1605              	.L100:
 1606              	.LBE15:
 862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1607              		.loc 1 863 12 is_stmt 1
 1608 00ce 4FF0FF33 		mov	r3, #-1
 1609 00d2 08E0     		b	.L92
 1610              	.L99:
 1611              	.LBB16:
 864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 865:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 866:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_connect(%d) succeeded\n", s));
 867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 1612              		.loc 1 867 3
 1613 00d4 0023     		movs	r3, #0
 1614 00d6 BB61     		str	r3, [r7, #24]
 1615 00d8 BB69     		ldr	r3, [r7, #24]
 1616 00da 002B     		cmp	r3, #0
 1617 00dc 02D0     		beq	.L101
 1618              		.loc 1 867 3 is_stmt 0 discriminator 1
 1619 00de 074A     		ldr	r2, .L102+12
 1620 00e0 BB69     		ldr	r3, [r7, #24]
 1621 00e2 1360     		str	r3, [r2]
 1622              	.L101:
 1623              	.LBE16:
 868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
 869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 1624              		.loc 1 869 10 is_stmt 1
 1625 00e4 0023     		movs	r3, #0
 1626              	.L92:
 870:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1627              		.loc 1 870 1
 1628 00e6 1846     		mov	r0, r3
 1629 00e8 3037     		adds	r7, r7, #48
 1630              	.LCFI78:
 1631              		.cfi_def_cfa_offset 8
 1632 00ea BD46     		mov	sp, r7
 1633              	.LCFI79:
 1634              		.cfi_def_cfa_register 13
 1635              		@ sp needed
ARM GAS  /tmp/ccsCUhT2.s 			page 45


 1636 00ec 80BD     		pop	{r7, pc}
 1637              	.L103:
 1638 00ee 00BF     		.align	2
 1639              	.L102:
 1640 00f0 00000000 		.word	.LC0
 1641 00f4 D4000000 		.word	.LC7
 1642 00f8 50000000 		.word	.LC2
 1643 00fc 00000000 		.word	errno
 1644              		.cfi_endproc
 1645              	.LFE152:
 1647              		.section	.text.lwip_listen,"ax",%progbits
 1648              		.align	1
 1649              		.global	lwip_listen
 1650              		.syntax unified
 1651              		.thumb
 1652              		.thumb_func
 1653              		.fpu fpv4-sp-d16
 1655              	lwip_listen:
 1656              	.LFB153:
 871:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 872:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
 873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Set a socket into listen mode.
 874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * The socket may not have been used for another connection previously.
 875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
 876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param s the socket to set to listening mode
 877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param backlog (ATTENTION: needs TCP_LISTEN_BACKLOG=1)
 878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return 0 on success, non-zero on failure
 879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 880:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
 881:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_listen(int s, int backlog)
 882:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 1657              		.loc 1 882 1
 1658              		.cfi_startproc
 1659              		@ args = 0, pretend = 0, frame = 32
 1660              		@ frame_needed = 1, uses_anonymous_args = 0
 1661 0000 80B5     		push	{r7, lr}
 1662              	.LCFI80:
 1663              		.cfi_def_cfa_offset 8
 1664              		.cfi_offset 7, -8
 1665              		.cfi_offset 14, -4
 1666 0002 88B0     		sub	sp, sp, #32
 1667              	.LCFI81:
 1668              		.cfi_def_cfa_offset 40
 1669 0004 00AF     		add	r7, sp, #0
 1670              	.LCFI82:
 1671              		.cfi_def_cfa_register 7
 1672 0006 7860     		str	r0, [r7, #4]
 1673 0008 3960     		str	r1, [r7]
 883:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
 884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
 885:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d, backlog=%d)\n", s, backlog));
 887:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 1674              		.loc 1 888 10
 1675 000a 7868     		ldr	r0, [r7, #4]
 1676 000c FFF7FEFF 		bl	get_socket
ARM GAS  /tmp/ccsCUhT2.s 			page 46


 1677 0010 F861     		str	r0, [r7, #28]
 889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 1678              		.loc 1 889 6
 1679 0012 FB69     		ldr	r3, [r7, #28]
 1680 0014 002B     		cmp	r3, #0
 1681 0016 02D1     		bne	.L105
 890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1682              		.loc 1 890 12
 1683 0018 4FF0FF33 		mov	r3, #-1
 1684 001c 3EE0     		b	.L106
 1685              	.L105:
 891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 892:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* limit the "backlog" parameter to fit in an u8_t */
 894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   backlog = LWIP_MIN(LWIP_MAX(backlog, 0), 0xff);
 1686              		.loc 1 894 13
 1687 001e 3B68     		ldr	r3, [r7]
 1688 0020 FE2B     		cmp	r3, #254
 1689 0022 03DC     		bgt	.L107
 1690              		.loc 1 894 13 is_stmt 0 discriminator 1
 1691 0024 3B68     		ldr	r3, [r7]
 1692 0026 23EAE373 		bic	r3, r3, r3, asr #31
 1693 002a 00E0     		b	.L108
 1694              	.L107:
 1695              		.loc 1 894 13 discriminator 2
 1696 002c FF23     		movs	r3, #255
 1697              	.L108:
 1698              		.loc 1 894 11 is_stmt 1 discriminator 4
 1699 002e 3B60     		str	r3, [r7]
 895:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_listen_with_backlog(sock->conn, (u8_t)backlog);
 1700              		.loc 1 896 9 discriminator 4
 1701 0030 FB69     		ldr	r3, [r7, #28]
 1702 0032 1B68     		ldr	r3, [r3]
 1703 0034 3A68     		ldr	r2, [r7]
 1704 0036 D2B2     		uxtb	r2, r2
 1705 0038 1146     		mov	r1, r2
 1706 003a 1846     		mov	r0, r3
 1707 003c FFF7FEFF 		bl	netconn_listen_with_backlog
 1708 0040 0346     		mov	r3, r0
 1709 0042 FB76     		strb	r3, [r7, #27]
 897:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 1710              		.loc 1 898 6 discriminator 4
 1711 0044 97F91B30 		ldrsb	r3, [r7, #27]
 1712 0048 002B     		cmp	r3, #0
 1713 004a 1ED0     		beq	.L109
 899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_listen(%d) failed, err=%d\n", s, err));
 900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 1714              		.loc 1 900 9
 1715 004c FB69     		ldr	r3, [r7, #28]
 1716 004e 1B68     		ldr	r3, [r3]
 1717 0050 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1718 0052 03F0F003 		and	r3, r3, #240
 1719              		.loc 1 900 8
 1720 0056 102B     		cmp	r3, #16
 1721 0058 08D0     		beq	.L110
ARM GAS  /tmp/ccsCUhT2.s 			page 47


 1722              	.LBB17:
 901:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 1723              		.loc 1 901 7
 1724 005a 5F23     		movs	r3, #95
 1725 005c 7B61     		str	r3, [r7, #20]
 1726 005e 7B69     		ldr	r3, [r7, #20]
 1727 0060 002B     		cmp	r3, #0
 1728 0062 0FD0     		beq	.L112
 1729              		.loc 1 901 7 is_stmt 0 discriminator 1
 1730 0064 0F4A     		ldr	r2, .L114
 1731 0066 7B69     		ldr	r3, [r7, #20]
 1732 0068 1360     		str	r3, [r2]
 1733 006a 0BE0     		b	.L112
 1734              	.L110:
 1735              	.LBE17:
 1736              	.LBB18:
 902:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 1737              		.loc 1 903 7 is_stmt 1
 1738 006c 97F91B30 		ldrsb	r3, [r7, #27]
 1739 0070 1846     		mov	r0, r3
 1740 0072 FFF7FEFF 		bl	err_to_errno
 1741 0076 3861     		str	r0, [r7, #16]
 1742 0078 3B69     		ldr	r3, [r7, #16]
 1743 007a 002B     		cmp	r3, #0
 1744 007c 02D0     		beq	.L112
 1745              		.loc 1 903 7 is_stmt 0 discriminator 1
 1746 007e 094A     		ldr	r2, .L114
 1747 0080 3B69     		ldr	r3, [r7, #16]
 1748 0082 1360     		str	r3, [r2]
 1749              	.L112:
 1750              	.LBE18:
 904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
 906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 1751              		.loc 1 906 12 is_stmt 1
 1752 0084 4FF0FF33 		mov	r3, #-1
 1753 0088 08E0     		b	.L106
 1754              	.L109:
 1755              	.LBB19:
 907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 908:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 1756              		.loc 1 909 3
 1757 008a 0023     		movs	r3, #0
 1758 008c FB60     		str	r3, [r7, #12]
 1759 008e FB68     		ldr	r3, [r7, #12]
 1760 0090 002B     		cmp	r3, #0
 1761 0092 02D0     		beq	.L113
 1762              		.loc 1 909 3 is_stmt 0 discriminator 1
 1763 0094 034A     		ldr	r2, .L114
 1764 0096 FB68     		ldr	r3, [r7, #12]
 1765 0098 1360     		str	r3, [r2]
 1766              	.L113:
 1767              	.LBE19:
 910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
 911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
ARM GAS  /tmp/ccsCUhT2.s 			page 48


 1768              		.loc 1 911 10 is_stmt 1
 1769 009a 0023     		movs	r3, #0
 1770              	.L106:
 912:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 1771              		.loc 1 912 1
 1772 009c 1846     		mov	r0, r3
 1773 009e 2037     		adds	r7, r7, #32
 1774              	.LCFI83:
 1775              		.cfi_def_cfa_offset 8
 1776 00a0 BD46     		mov	sp, r7
 1777              	.LCFI84:
 1778              		.cfi_def_cfa_register 13
 1779              		@ sp needed
 1780 00a2 80BD     		pop	{r7, pc}
 1781              	.L115:
 1782              		.align	2
 1783              	.L114:
 1784 00a4 00000000 		.word	errno
 1785              		.cfi_endproc
 1786              	.LFE153:
 1788              		.section	.rodata
 1789 00f2 0000     		.align	2
 1790              	.LC8:
 1791 00f4 6E6F2073 		.ascii	"no socket given\000"
 1791      6F636B65 
 1791      74206769 
 1791      76656E00 
 1792              		.align	2
 1793              	.LC9:
 1794 0104 74686973 		.ascii	"this should be checked internally\000"
 1794      2073686F 
 1794      756C6420 
 1794      62652063 
 1794      6865636B 
 1795 0126 0000     		.align	2
 1796              	.LC10:
 1797 0128 7020213D 		.ascii	"p != NULL\000"
 1797      204E554C 
 1797      4C00
 1798 0132 0000     		.align	2
 1799              	.LC11:
 1800 0134 696E7661 		.ascii	"invalid copylen, len would underflow\000"
 1800      6C696420 
 1800      636F7079 
 1800      6C656E2C 
 1800      206C656E 
 1801 0159 000000   		.align	2
 1802              	.LC12:
 1803 015c 696E7661 		.ascii	"invalid copylen\000"
 1803      6C696420 
 1803      636F7079 
 1803      6C656E00 
 1804              		.section	.text.lwip_recv_tcp,"ax",%progbits
 1805              		.align	1
 1806              		.syntax unified
 1807              		.thumb
 1808              		.thumb_func
ARM GAS  /tmp/ccsCUhT2.s 			page 49


 1809              		.fpu fpv4-sp-d16
 1811              	lwip_recv_tcp:
 1812              	.LFB154:
 913:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 914:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
 915:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Helper function to loop over receiving pbufs from netconn
 916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * until "len" bytes are received or we're otherwise done.
 917:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Keeps sock->lastdata for peeking or partly copying.
 918:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
 919:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static ssize_t
 920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv_tcp(struct lwip_sock *sock, void *mem, size_t len, int flags)
 921:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 1813              		.loc 1 921 1
 1814              		.cfi_startproc
 1815              		@ args = 0, pretend = 0, frame = 48
 1816              		@ frame_needed = 1, uses_anonymous_args = 0
 1817 0000 80B5     		push	{r7, lr}
 1818              	.LCFI85:
 1819              		.cfi_def_cfa_offset 8
 1820              		.cfi_offset 7, -8
 1821              		.cfi_offset 14, -4
 1822 0002 8CB0     		sub	sp, sp, #48
 1823              	.LCFI86:
 1824              		.cfi_def_cfa_offset 56
 1825 0004 00AF     		add	r7, sp, #0
 1826              	.LCFI87:
 1827              		.cfi_def_cfa_register 7
 1828 0006 F860     		str	r0, [r7, #12]
 1829 0008 B960     		str	r1, [r7, #8]
 1830 000a 7A60     		str	r2, [r7, #4]
 1831 000c 3B60     		str	r3, [r7]
 922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t apiflags = NETCONN_NOAUTORCVD;
 1832              		.loc 1 922 8
 1833 000e 0823     		movs	r3, #8
 1834 0010 87F82F30 		strb	r3, [r7, #47]
 923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ssize_t recvd = 0;
 1835              		.loc 1 923 11
 1836 0014 0023     		movs	r3, #0
 1837 0016 BB62     		str	r3, [r7, #40]
 924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ssize_t recv_left = (len <= SSIZE_MAX) ? (ssize_t)len : SSIZE_MAX;
 1838              		.loc 1 924 28
 1839 0018 7B68     		ldr	r3, [r7, #4]
 1840              		.loc 1 924 57
 1841 001a 002B     		cmp	r3, #0
 1842 001c 01DB     		blt	.L117
 1843              		.loc 1 924 57 is_stmt 0 discriminator 1
 1844 001e 7B68     		ldr	r3, [r7, #4]
 1845 0020 01E0     		b	.L118
 1846              	.L117:
 1847              		.loc 1 924 57 discriminator 2
 1848 0022 6FF00043 		mvn	r3, #-2147483648
 1849              	.L118:
 1850              		.loc 1 924 11 is_stmt 1 discriminator 4
 1851 0026 7B62     		str	r3, [r7, #36]
 925:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 926:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("no socket given", sock != NULL);
 1852              		.loc 1 926 3 discriminator 4
ARM GAS  /tmp/ccsCUhT2.s 			page 50


 1853 0028 FB68     		ldr	r3, [r7, #12]
 1854 002a 002B     		cmp	r3, #0
 1855 002c 06D1     		bne	.L119
 1856              		.loc 1 926 3 is_stmt 0 discriminator 1
 1857 002e 744B     		ldr	r3, .L145
 1858 0030 40F29E32 		movw	r2, #926
 1859 0034 7349     		ldr	r1, .L145+4
 1860 0036 7448     		ldr	r0, .L145+8
 1861 0038 FFF7FEFF 		bl	printf
 1862              	.L119:
 927:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("this should be checked internally", NETCONNTYPE_GROUP(netconn_type(sock->conn)) == N
 1863              		.loc 1 927 3 is_stmt 1
 1864 003c FB68     		ldr	r3, [r7, #12]
 1865 003e 1B68     		ldr	r3, [r3]
 1866 0040 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1867 0042 03F0F003 		and	r3, r3, #240
 1868 0046 102B     		cmp	r3, #16
 1869 0048 06D0     		beq	.L120
 1870              		.loc 1 927 3 is_stmt 0 discriminator 1
 1871 004a 6D4B     		ldr	r3, .L145
 1872 004c 40F29F32 		movw	r2, #927
 1873 0050 6E49     		ldr	r1, .L145+12
 1874 0052 6D48     		ldr	r0, .L145+8
 1875 0054 FFF7FEFF 		bl	printf
 1876              	.L120:
 928:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (flags & MSG_DONTWAIT) {
 1877              		.loc 1 929 13 is_stmt 1
 1878 0058 3B68     		ldr	r3, [r7]
 1879 005a 03F00803 		and	r3, r3, #8
 1880              		.loc 1 929 6
 1881 005e 002B     		cmp	r3, #0
 1882 0060 05D0     		beq	.L140
 930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     apiflags |= NETCONN_DONTBLOCK;
 1883              		.loc 1 930 14
 1884 0062 97F82F30 		ldrb	r3, [r7, #47]
 1885 0066 43F00403 		orr	r3, r3, #4
 1886 006a 87F82F30 		strb	r3, [r7, #47]
 1887              	.L140:
 1888              	.LBB20:
 931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 932:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   do {
 934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct pbuf *p;
 935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err_t err;
 936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t copylen;
 937:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recv_tcp: top while sock->lastdata=%p\n", (void *)sock->lastd
 939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if there is data left from the last recv operation. */
 940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock->lastdata.pbuf) {
 1889              		.loc 1 940 23
 1890 006e FB68     		ldr	r3, [r7, #12]
 1891 0070 5B68     		ldr	r3, [r3, #4]
 1892              		.loc 1 940 8
 1893 0072 002B     		cmp	r3, #0
 1894 0074 03D0     		beq	.L122
 941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = sock->lastdata.pbuf;
ARM GAS  /tmp/ccsCUhT2.s 			page 51


 1895              		.loc 1 941 25
 1896 0076 FB68     		ldr	r3, [r7, #12]
 1897 0078 5B68     		ldr	r3, [r3, #4]
 1898              		.loc 1 941 9
 1899 007a 7B61     		str	r3, [r7, #20]
 1900 007c 36E0     		b	.L123
 1901              	.L122:
 942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 943:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* No data was left from the previous operation, so we try to get
 944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          some from the network. */
 945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_recv_tcp_pbuf_flags(sock->conn, &p, apiflags);
 1902              		.loc 1 945 13
 1903 007e FB68     		ldr	r3, [r7, #12]
 1904 0080 1B68     		ldr	r3, [r3]
 1905 0082 97F82F20 		ldrb	r2, [r7, #47]	@ zero_extendqisi2
 1906 0086 07F11401 		add	r1, r7, #20
 1907 008a 1846     		mov	r0, r3
 1908 008c FFF7FEFF 		bl	netconn_recv_tcp_pbuf_flags
 1909 0090 0346     		mov	r3, r0
 1910 0092 87F82130 		strb	r3, [r7, #33]
 946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recv_tcp: netconn_recv err=%d, pbuf=%p\n",
 947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   err, (void *)p));
 948:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err != ERR_OK) {
 1911              		.loc 1 949 10
 1912 0096 97F92130 		ldrsb	r3, [r7, #33]
 1913 009a 002B     		cmp	r3, #0
 1914 009c 19D0     		beq	.L124
 950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (recvd > 0) {
 1915              		.loc 1 950 12
 1916 009e BB6A     		ldr	r3, [r7, #40]
 1917 00a0 002B     		cmp	r3, #0
 1918 00a2 00F38D80 		bgt	.L143
 1919              	.LBB21:
 951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* already received data, return that (this trusts in getting the same error from
 952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              netconn layer again next time netconn_recv is called) */
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           goto lwip_recv_tcp_done;
 954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* We should really do some error checking here. */
 956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recv_tcp: p == NULL, error is \"%s\"!\n",
 957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                     lwip_strerr(err)));
 958:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, err_to_errno(err));
 1920              		.loc 1 958 9
 1921 00a6 97F92130 		ldrsb	r3, [r7, #33]
 1922 00aa 1846     		mov	r0, r3
 1923 00ac FFF7FEFF 		bl	err_to_errno
 1924 00b0 F861     		str	r0, [r7, #28]
 1925 00b2 FB69     		ldr	r3, [r7, #28]
 1926 00b4 002B     		cmp	r3, #0
 1927 00b6 02D0     		beq	.L127
 1928              		.loc 1 958 9 is_stmt 0 discriminator 1
 1929 00b8 554A     		ldr	r2, .L145+16
 1930 00ba FB69     		ldr	r3, [r7, #28]
 1931 00bc 1360     		str	r3, [r2]
 1932              	.L127:
 1933              	.LBE21:
 959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (err == ERR_CLSD) {
ARM GAS  /tmp/ccsCUhT2.s 			page 52


 1934              		.loc 1 959 12 is_stmt 1
 1935 00be 97F92130 		ldrsb	r3, [r7, #33]
 1936 00c2 13F10F0F 		cmn	r3, #15
 1937 00c6 01D1     		bne	.L128
 960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return 0;
 1938              		.loc 1 960 18
 1939 00c8 0023     		movs	r3, #0
 1940 00ca 94E0     		b	.L139
 1941              	.L128:
 961:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
 962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           return -1;
 1942              		.loc 1 962 18
 1943 00cc 4FF0FF33 		mov	r3, #-1
 1944 00d0 91E0     		b	.L139
 1945              	.L124:
 963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 964:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("p != NULL", p != NULL);
 1946              		.loc 1 965 7
 1947 00d2 7B69     		ldr	r3, [r7, #20]
 1948 00d4 002B     		cmp	r3, #0
 1949 00d6 06D1     		bne	.L130
 1950              		.loc 1 965 7 is_stmt 0 discriminator 1
 1951 00d8 494B     		ldr	r3, .L145
 1952 00da 40F2C532 		movw	r2, #965
 1953 00de 4D49     		ldr	r1, .L145+20
 1954 00e0 4948     		ldr	r0, .L145+8
 1955 00e2 FFF7FEFF 		bl	printf
 1956              	.L130:
 966:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->lastdata.pbuf = p;
 1957              		.loc 1 966 27 is_stmt 1
 1958 00e6 7A69     		ldr	r2, [r7, #20]
 1959 00e8 FB68     		ldr	r3, [r7, #12]
 1960 00ea 5A60     		str	r2, [r3, #4]
 1961              	.L123:
 967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 968:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recv_tcp: buflen=%"U16_F" recv_left=%d off=%d\n",
 970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                 p->tot_len, (int)recv_left, (int)recvd));
 971:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 972:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (recv_left > p->tot_len) {
 1962              		.loc 1 972 22
 1963 00ec 7B69     		ldr	r3, [r7, #20]
 1964 00ee 1B89     		ldrh	r3, [r3, #8]
 1965 00f0 1A46     		mov	r2, r3
 1966              		.loc 1 972 8
 1967 00f2 7B6A     		ldr	r3, [r7, #36]
 1968 00f4 9342     		cmp	r3, r2
 1969 00f6 03DD     		ble	.L131
 973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = p->tot_len;
 1970              		.loc 1 973 18
 1971 00f8 7B69     		ldr	r3, [r7, #20]
 1972              		.loc 1 973 15
 1973 00fa 1B89     		ldrh	r3, [r3, #8]	@ movhi
 1974 00fc 7B84     		strh	r3, [r7, #34]	@ movhi
 1975 00fe 01E0     		b	.L132
 1976              	.L131:
ARM GAS  /tmp/ccsCUhT2.s 			page 53


 974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
 975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = (u16_t)recv_left;
 1977              		.loc 1 975 15
 1978 0100 7B6A     		ldr	r3, [r7, #36]
 1979 0102 7B84     		strh	r3, [r7, #34]	@ movhi
 1980              	.L132:
 976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (recvd + copylen < recvd) {
 1981              		.loc 1 977 15
 1982 0104 7A8C     		ldrh	r2, [r7, #34]
 1983 0106 BB6A     		ldr	r3, [r7, #40]
 1984 0108 1344     		add	r3, r3, r2
 1985              		.loc 1 977 8
 1986 010a BA6A     		ldr	r2, [r7, #40]
 1987 010c 9A42     		cmp	r2, r3
 1988 010e 03DD     		ble	.L133
 978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* overflow */
 979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = (u16_t)(SSIZE_MAX - recvd);
 1989              		.loc 1 979 17
 1990 0110 BB6A     		ldr	r3, [r7, #40]
 1991 0112 9BB2     		uxth	r3, r3
 1992              		.loc 1 979 15
 1993 0114 DB43     		mvns	r3, r3
 1994 0116 7B84     		strh	r3, [r7, #34]	@ movhi
 1995              	.L133:
 980:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 981:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* copy the contents of the received buffer into
 983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     the supplied memory pointer mem */
 984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     pbuf_copy_partial(p, (u8_t *)mem + recvd, copylen, 0);
 1996              		.loc 1 984 5
 1997 0118 7869     		ldr	r0, [r7, #20]
 1998 011a BB6A     		ldr	r3, [r7, #40]
 1999 011c BA68     		ldr	r2, [r7, #8]
 2000 011e D118     		adds	r1, r2, r3
 2001 0120 7A8C     		ldrh	r2, [r7, #34]
 2002 0122 0023     		movs	r3, #0
 2003 0124 FFF7FEFF 		bl	pbuf_copy_partial
 985:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     recvd += copylen;
 2004              		.loc 1 986 11
 2005 0128 7B8C     		ldrh	r3, [r7, #34]
 2006 012a BA6A     		ldr	r2, [r7, #40]
 2007 012c 1344     		add	r3, r3, r2
 2008 012e BB62     		str	r3, [r7, #40]
 987:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* TCP combines multiple pbufs for one recv */
 989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("invalid copylen, len would underflow", recv_left >= copylen);
 2009              		.loc 1 989 5
 2010 0130 7B8C     		ldrh	r3, [r7, #34]
 2011 0132 7A6A     		ldr	r2, [r7, #36]
 2012 0134 9A42     		cmp	r2, r3
 2013 0136 06DA     		bge	.L134
 2014              		.loc 1 989 5 is_stmt 0 discriminator 1
 2015 0138 314B     		ldr	r3, .L145
 2016 013a 40F2DD32 		movw	r2, #989
 2017 013e 3649     		ldr	r1, .L145+24
ARM GAS  /tmp/ccsCUhT2.s 			page 54


 2018 0140 3148     		ldr	r0, .L145+8
 2019 0142 FFF7FEFF 		bl	printf
 2020              	.L134:
 990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     recv_left -= copylen;
 2021              		.loc 1 990 15 is_stmt 1
 2022 0146 7B8C     		ldrh	r3, [r7, #34]
 2023 0148 7A6A     		ldr	r2, [r7, #36]
 2024 014a D31A     		subs	r3, r2, r3
 2025 014c 7B62     		str	r3, [r7, #36]
 991:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
 992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Unless we peek the incoming message... */
 993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((flags & MSG_PEEK) == 0) {
 2026              		.loc 1 993 16
 2027 014e 3B68     		ldr	r3, [r7]
 2028 0150 03F00103 		and	r3, r3, #1
 2029              		.loc 1 993 8
 2030 0154 002B     		cmp	r3, #0
 2031 0156 23D1     		bne	.L135
 994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* ... check if there is data left in the pbuf */
 995:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("invalid copylen", p->tot_len >= copylen);
 2032              		.loc 1 995 7
 2033 0158 7B69     		ldr	r3, [r7, #20]
 2034 015a 1B89     		ldrh	r3, [r3, #8]
 2035 015c 7A8C     		ldrh	r2, [r7, #34]
 2036 015e 9A42     		cmp	r2, r3
 2037 0160 06D9     		bls	.L136
 2038              		.loc 1 995 7 is_stmt 0 discriminator 1
 2039 0162 274B     		ldr	r3, .L145
 2040 0164 40F2E332 		movw	r2, #995
 2041 0168 2C49     		ldr	r1, .L145+28
 2042 016a 2748     		ldr	r0, .L145+8
 2043 016c FFF7FEFF 		bl	printf
 2044              	.L136:
 996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p->tot_len - copylen > 0) {
 2045              		.loc 1 996 12 is_stmt 1
 2046 0170 7B69     		ldr	r3, [r7, #20]
 2047 0172 1B89     		ldrh	r3, [r3, #8]
 2048 0174 1A46     		mov	r2, r3
 2049              		.loc 1 996 22
 2050 0176 7B8C     		ldrh	r3, [r7, #34]
 2051 0178 D31A     		subs	r3, r2, r3
 2052              		.loc 1 996 10
 2053 017a 002B     		cmp	r3, #0
 2054 017c 09DD     		ble	.L137
 997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* If so, it should be saved in the sock structure for the next recv call.
 998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            We store the pbuf but hide/free the consumed data: */
 999:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata.pbuf = pbuf_free_header(p, copylen);
 2055              		.loc 1 999 31
 2056 017e 7B69     		ldr	r3, [r7, #20]
 2057 0180 7A8C     		ldrh	r2, [r7, #34]
 2058 0182 1146     		mov	r1, r2
 2059 0184 1846     		mov	r0, r3
 2060 0186 FFF7FEFF 		bl	pbuf_free_header
 2061 018a 0246     		mov	r2, r0
 2062              		.loc 1 999 29
 2063 018c FB68     		ldr	r3, [r7, #12]
 2064 018e 5A60     		str	r2, [r3, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 55


 2065 0190 06E0     		b	.L135
 2066              	.L137:
1000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recv_tcp: lastdata now pbuf=%p\n", (void *)sock->lastdata
1001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock->lastdata.pbuf = NULL;
 2067              		.loc 1 1002 29
 2068 0192 FB68     		ldr	r3, [r7, #12]
 2069 0194 0022     		movs	r2, #0
 2070 0196 5A60     		str	r2, [r3, #4]
1003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recv_tcp: deleting pbuf=%p\n", (void *)p));
1004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         pbuf_free(p);
 2071              		.loc 1 1004 9
 2072 0198 7B69     		ldr	r3, [r7, #20]
 2073 019a 1846     		mov	r0, r3
 2074 019c FFF7FEFF 		bl	pbuf_free
 2075              	.L135:
1005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* once we have some data to return, only add more if we don't need to wait */
1008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     apiflags |= NETCONN_DONTBLOCK | NETCONN_NOFIN;
 2076              		.loc 1 1008 14
 2077 01a0 97F82F30 		ldrb	r3, [r7, #47]
 2078 01a4 43F01403 		orr	r3, r3, #20
 2079 01a8 87F82F30 		strb	r3, [r7, #47]
 2080              	.LBE20:
1009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* @todo: do we need to support peeking more than one pbuf? */
1010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } while ((recv_left > 0) && !(flags & MSG_PEEK));
 2081              		.loc 1 1010 3
 2082 01ac 7B6A     		ldr	r3, [r7, #36]
 2083 01ae 002B     		cmp	r3, #0
 2084 01b0 08DD     		ble	.L144
 2085              		.loc 1 1010 39 discriminator 1
 2086 01b2 3B68     		ldr	r3, [r7]
 2087 01b4 03F00103 		and	r3, r3, #1
 2088              		.loc 1 1010 28 discriminator 1
 2089 01b8 002B     		cmp	r3, #0
 2090 01ba 3FF458AF 		beq	.L140
1011:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv_tcp_done:
 2091              		.loc 1 1011 1
 2092 01be 01E0     		b	.L144
 2093              	.L143:
 2094              	.LBB22:
 953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
 2095              		.loc 1 953 11
 2096 01c0 00BF     		nop
 2097 01c2 00E0     		b	.L126
 2098              	.L144:
 2099              	.LBE22:
 2100              		.loc 1 1011 1
 2101 01c4 00BF     		nop
 2102              	.L126:
1012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((recvd > 0) && !(flags & MSG_PEEK)) {
 2103              		.loc 1 1012 6
 2104 01c6 BB6A     		ldr	r3, [r7, #40]
 2105 01c8 002B     		cmp	r3, #0
 2106 01ca 0BDD     		ble	.L141
 2107              		.loc 1 1012 30 discriminator 1
ARM GAS  /tmp/ccsCUhT2.s 			page 56


 2108 01cc 3B68     		ldr	r3, [r7]
 2109 01ce 03F00103 		and	r3, r3, #1
 2110              		.loc 1 1012 19 discriminator 1
 2111 01d2 002B     		cmp	r3, #0
 2112 01d4 06D1     		bne	.L141
1013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* ensure window update after copying all data */
1014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_tcp_recvd(sock->conn, (size_t)recvd);
 2113              		.loc 1 1014 5
 2114 01d6 FB68     		ldr	r3, [r7, #12]
 2115 01d8 1B68     		ldr	r3, [r3]
 2116 01da BA6A     		ldr	r2, [r7, #40]
 2117 01dc 1146     		mov	r1, r2
 2118 01de 1846     		mov	r0, r3
 2119 01e0 FFF7FEFF 		bl	netconn_tcp_recvd
 2120              	.L141:
 2121              	.LBB23:
1015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 2122              		.loc 1 1016 3
 2123 01e4 0023     		movs	r3, #0
 2124 01e6 BB61     		str	r3, [r7, #24]
 2125 01e8 BB69     		ldr	r3, [r7, #24]
 2126 01ea 002B     		cmp	r3, #0
 2127 01ec 02D0     		beq	.L142
 2128              		.loc 1 1016 3 is_stmt 0 discriminator 1
 2129 01ee 084A     		ldr	r2, .L145+16
 2130 01f0 BB69     		ldr	r3, [r7, #24]
 2131 01f2 1360     		str	r3, [r2]
 2132              	.L142:
 2133              	.LBE23:
1017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return recvd;
 2134              		.loc 1 1017 10 is_stmt 1
 2135 01f4 BB6A     		ldr	r3, [r7, #40]
 2136              	.L139:
1018:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2137              		.loc 1 1018 1
 2138 01f6 1846     		mov	r0, r3
 2139 01f8 3037     		adds	r7, r7, #48
 2140              	.LCFI88:
 2141              		.cfi_def_cfa_offset 8
 2142 01fa BD46     		mov	sp, r7
 2143              	.LCFI89:
 2144              		.cfi_def_cfa_register 13
 2145              		@ sp needed
 2146 01fc 80BD     		pop	{r7, pc}
 2147              	.L146:
 2148 01fe 00BF     		.align	2
 2149              	.L145:
 2150 0200 00000000 		.word	.LC0
 2151 0204 F4000000 		.word	.LC8
 2152 0208 50000000 		.word	.LC2
 2153 020c 04010000 		.word	.LC9
 2154 0210 00000000 		.word	errno
 2155 0214 28010000 		.word	.LC10
 2156 0218 34010000 		.word	.LC11
 2157 021c 5C010000 		.word	.LC12
 2158              		.cfi_endproc
ARM GAS  /tmp/ccsCUhT2.s 			page 57


 2159              	.LFE154:
 2161              		.section	.rodata
 2162              		.align	2
 2163              	.LC13:
 2164 016c 66726F6D 		.ascii	"fromaddr != NULL\000"
 2164      61646472 
 2164      20213D20 
 2164      4E554C4C 
 2164      00
 2165 017d 000000   		.align	2
 2166              	.LC14:
 2167 0180 66726F6D 		.ascii	"from != NULL\000"
 2167      20213D20 
 2167      4E554C4C 
 2167      00
 2168 018d 000000   		.align	2
 2169              	.LC15:
 2170 0190 66726F6D 		.ascii	"fromlen != NULL\000"
 2170      6C656E20 
 2170      213D204E 
 2170      554C4C00 
 2171              		.section	.text.lwip_sock_make_addr,"ax",%progbits
 2172              		.align	1
 2173              		.syntax unified
 2174              		.thumb
 2175              		.thumb_func
 2176              		.fpu fpv4-sp-d16
 2178              	lwip_sock_make_addr:
 2179              	.LFB155:
1019:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1020:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1021:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Convert a netbuf's address data to struct sockaddr */
1022:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1023:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sock_make_addr(struct netconn *conn, ip_addr_t *fromaddr, u16_t port,
1024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                     struct sockaddr *from, socklen_t *fromlen)
1025:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 2180              		.loc 1 1025 1
 2181              		.cfi_startproc
 2182              		@ args = 4, pretend = 0, frame = 40
 2183              		@ frame_needed = 1, uses_anonymous_args = 0
 2184 0000 90B5     		push	{r4, r7, lr}
 2185              	.LCFI90:
 2186              		.cfi_def_cfa_offset 12
 2187              		.cfi_offset 4, -12
 2188              		.cfi_offset 7, -8
 2189              		.cfi_offset 14, -4
 2190 0002 8BB0     		sub	sp, sp, #44
 2191              	.LCFI91:
 2192              		.cfi_def_cfa_offset 56
 2193 0004 00AF     		add	r7, sp, #0
 2194              	.LCFI92:
 2195              		.cfi_def_cfa_register 7
 2196 0006 F860     		str	r0, [r7, #12]
 2197 0008 B960     		str	r1, [r7, #8]
 2198 000a 3B60     		str	r3, [r7]
 2199 000c 1346     		mov	r3, r2	@ movhi
 2200 000e FB80     		strh	r3, [r7, #6]	@ movhi
ARM GAS  /tmp/ccsCUhT2.s 			page 58


1026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int truncated = 0;
 2201              		.loc 1 1026 7
 2202 0010 0023     		movs	r3, #0
 2203 0012 7B62     		str	r3, [r7, #36]
1027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union sockaddr_aligned saddr;
1028:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(conn);
1030:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("fromaddr != NULL", fromaddr != NULL);
 2204              		.loc 1 1031 3
 2205 0014 BB68     		ldr	r3, [r7, #8]
 2206 0016 002B     		cmp	r3, #0
 2207 0018 06D1     		bne	.L148
 2208              		.loc 1 1031 3 is_stmt 0 discriminator 1
 2209 001a 2B4B     		ldr	r3, .L154
 2210 001c 40F20742 		movw	r2, #1031
 2211 0020 2A49     		ldr	r1, .L154+4
 2212 0022 2B48     		ldr	r0, .L154+8
 2213 0024 FFF7FEFF 		bl	printf
 2214              	.L148:
1032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("from != NULL", from != NULL);
 2215              		.loc 1 1032 3 is_stmt 1
 2216 0028 3B68     		ldr	r3, [r7]
 2217 002a 002B     		cmp	r3, #0
 2218 002c 06D1     		bne	.L149
 2219              		.loc 1 1032 3 is_stmt 0 discriminator 1
 2220 002e 264B     		ldr	r3, .L154
 2221 0030 4FF48162 		mov	r2, #1032
 2222 0034 2749     		ldr	r1, .L154+12
 2223 0036 2648     		ldr	r0, .L154+8
 2224 0038 FFF7FEFF 		bl	printf
 2225              	.L149:
1033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("fromlen != NULL", fromlen != NULL);
 2226              		.loc 1 1033 3 is_stmt 1
 2227 003c BB6B     		ldr	r3, [r7, #56]
 2228 003e 002B     		cmp	r3, #0
 2229 0040 06D1     		bne	.L150
 2230              		.loc 1 1033 3 is_stmt 0 discriminator 1
 2231 0042 214B     		ldr	r3, .L154
 2232 0044 40F20942 		movw	r2, #1033
 2233 0048 2349     		ldr	r1, .L154+16
 2234 004a 2148     		ldr	r0, .L154+8
 2235 004c FFF7FEFF 		bl	printf
 2236              	.L150:
1034:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1035:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Map IPv4 addresses to IPv4 mapped IPv6 */
1037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_ISIPV6(netconn_type(conn)) && IP_IS_V4(fromaddr)) {
1038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip4_2_ipv4_mapped_ipv6(ip_2_ip6(fromaddr), ip_2_ip4(fromaddr));
1039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE(fromaddr, IPADDR_TYPE_V6);
1040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1041:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1042:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   IPADDR_PORT_TO_SOCKADDR(&saddr, fromaddr, port);
 2237              		.loc 1 1043 3 is_stmt 1
 2238 0050 07F11403 		add	r3, r7, #20
 2239 0054 1022     		movs	r2, #16
ARM GAS  /tmp/ccsCUhT2.s 			page 59


 2240 0056 1A70     		strb	r2, [r3]
 2241 0058 07F11403 		add	r3, r7, #20
 2242 005c 0222     		movs	r2, #2
 2243 005e 5A70     		strb	r2, [r3, #1]
 2244 0060 07F11404 		add	r4, r7, #20
 2245 0064 FB88     		ldrh	r3, [r7, #6]
 2246 0066 1846     		mov	r0, r3
 2247 0068 FFF7FEFF 		bl	lwip_htons
 2248 006c 0346     		mov	r3, r0
 2249 006e 6380     		strh	r3, [r4, #2]	@ movhi
 2250 0070 07F11403 		add	r3, r7, #20
 2251 0074 BA68     		ldr	r2, [r7, #8]
 2252 0076 1268     		ldr	r2, [r2]
 2253 0078 5A60     		str	r2, [r3, #4]
 2254 007a 07F11403 		add	r3, r7, #20
 2255 007e 0833     		adds	r3, r3, #8
 2256 0080 0822     		movs	r2, #8
 2257 0082 0021     		movs	r1, #0
 2258 0084 1846     		mov	r0, r3
 2259 0086 FFF7FEFF 		bl	memset
1044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*fromlen < saddr.sa.sa_len) {
 2260              		.loc 1 1044 7
 2261 008a BB6B     		ldr	r3, [r7, #56]
 2262 008c 1B68     		ldr	r3, [r3]
 2263              		.loc 1 1044 26
 2264 008e 3A7D     		ldrb	r2, [r7, #20]	@ zero_extendqisi2
 2265              		.loc 1 1044 6
 2266 0090 9342     		cmp	r3, r2
 2267 0092 02D2     		bcs	.L151
1045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     truncated = 1;
 2268              		.loc 1 1045 15
 2269 0094 0123     		movs	r3, #1
 2270 0096 7B62     		str	r3, [r7, #36]
 2271 0098 08E0     		b	.L152
 2272              	.L151:
1046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (*fromlen > saddr.sa.sa_len) {
 2273              		.loc 1 1046 14
 2274 009a BB6B     		ldr	r3, [r7, #56]
 2275 009c 1B68     		ldr	r3, [r3]
 2276              		.loc 1 1046 33
 2277 009e 3A7D     		ldrb	r2, [r7, #20]	@ zero_extendqisi2
 2278              		.loc 1 1046 13
 2279 00a0 9342     		cmp	r3, r2
 2280 00a2 03D9     		bls	.L152
1047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *fromlen = saddr.sa.sa_len;
 2281              		.loc 1 1047 24
 2282 00a4 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 2283 00a6 1A46     		mov	r2, r3
 2284              		.loc 1 1047 14
 2285 00a8 BB6B     		ldr	r3, [r7, #56]
 2286 00aa 1A60     		str	r2, [r3]
 2287              	.L152:
1048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(from, &saddr, *fromlen);
 2288              		.loc 1 1049 3
 2289 00ac BB6B     		ldr	r3, [r7, #56]
 2290 00ae 1A68     		ldr	r2, [r3]
ARM GAS  /tmp/ccsCUhT2.s 			page 60


 2291 00b0 07F11403 		add	r3, r7, #20
 2292 00b4 1946     		mov	r1, r3
 2293 00b6 3868     		ldr	r0, [r7]
 2294 00b8 FFF7FEFF 		bl	memcpy
1050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return truncated;
 2295              		.loc 1 1050 10
 2296 00bc 7B6A     		ldr	r3, [r7, #36]
1051:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2297              		.loc 1 1051 1
 2298 00be 1846     		mov	r0, r3
 2299 00c0 2C37     		adds	r7, r7, #44
 2300              	.LCFI93:
 2301              		.cfi_def_cfa_offset 12
 2302 00c2 BD46     		mov	sp, r7
 2303              	.LCFI94:
 2304              		.cfi_def_cfa_register 13
 2305              		@ sp needed
 2306 00c4 90BD     		pop	{r4, r7, pc}
 2307              	.L155:
 2308 00c6 00BF     		.align	2
 2309              	.L154:
 2310 00c8 00000000 		.word	.LC0
 2311 00cc 6C010000 		.word	.LC13
 2312 00d0 50000000 		.word	.LC2
 2313 00d4 80010000 		.word	.LC14
 2314 00d8 90010000 		.word	.LC15
 2315              		.cfi_endproc
 2316              	.LFE155:
 2318              		.section	.text.lwip_recv_tcp_from,"ax",%progbits
 2319              		.align	1
 2320              		.syntax unified
 2321              		.thumb
 2322              		.thumb_func
 2323              		.fpu fpv4-sp-d16
 2325              	lwip_recv_tcp_from:
 2326              	.LFB156:
1052:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1053:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1054:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Helper function to get a tcp socket's remote address info */
1055:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1056:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv_tcp_from(struct lwip_sock *sock, struct sockaddr *from, socklen_t *fromlen, const char *d
1057:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 2327              		.loc 1 1057 1
 2328              		.cfi_startproc
 2329              		@ args = 8, pretend = 0, frame = 24
 2330              		@ frame_needed = 1, uses_anonymous_args = 0
 2331 0000 80B5     		push	{r7, lr}
 2332              	.LCFI95:
 2333              		.cfi_def_cfa_offset 8
 2334              		.cfi_offset 7, -8
 2335              		.cfi_offset 14, -4
 2336 0002 88B0     		sub	sp, sp, #32
 2337              	.LCFI96:
 2338              		.cfi_def_cfa_offset 40
 2339 0004 02AF     		add	r7, sp, #8
 2340              	.LCFI97:
 2341              		.cfi_def_cfa 7, 32
ARM GAS  /tmp/ccsCUhT2.s 			page 61


 2342 0006 F860     		str	r0, [r7, #12]
 2343 0008 B960     		str	r1, [r7, #8]
 2344 000a 7A60     		str	r2, [r7, #4]
 2345 000c 3B60     		str	r3, [r7]
1058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock == NULL) {
 2346              		.loc 1 1058 6
 2347 000e FB68     		ldr	r3, [r7, #12]
 2348 0010 002B     		cmp	r3, #0
 2349 0012 01D1     		bne	.L157
1059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
 2350              		.loc 1 1059 12
 2351 0014 0023     		movs	r3, #0
 2352 0016 21E0     		b	.L158
 2353              	.L157:
1060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(dbg_fn);
1062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(dbg_s);
1063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(dbg_ret);
1064:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1065:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
1066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (from && fromlen)
 2354              		.loc 1 1066 6
 2355 0018 BB68     		ldr	r3, [r7, #8]
 2356 001a 002B     		cmp	r3, #0
 2357 001c 1DD0     		beq	.L159
 2358              		.loc 1 1066 12 discriminator 1
 2359 001e 7B68     		ldr	r3, [r7, #4]
 2360 0020 002B     		cmp	r3, #0
 2361 0022 1AD0     		beq	.L159
 2362              	.LBB24:
1067:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
1068:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* get remote addr/port from tcp_pcb */
1070:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t port;
1071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_t tmpaddr;
1072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_getaddr(sock->conn, &tmpaddr, &port, 0);
 2363              		.loc 1 1072 5
 2364 0024 FB68     		ldr	r3, [r7, #12]
 2365 0026 1868     		ldr	r0, [r3]
 2366 0028 07F11602 		add	r2, r7, #22
 2367 002c 07F11001 		add	r1, r7, #16
 2368 0030 0023     		movs	r3, #0
 2369 0032 FFF7FEFF 		bl	netconn_getaddr
1073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("%s(%d):  addr=", dbg_fn, dbg_s));
1074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, tmpaddr);
1075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F" len=%d\n", port, (int)dbg_ret));
1076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (from && fromlen) {
 2370              		.loc 1 1076 8
 2371 0036 BB68     		ldr	r3, [r7, #8]
 2372 0038 002B     		cmp	r3, #0
 2373 003a 0ED0     		beq	.L159
 2374              		.loc 1 1076 14 discriminator 1
 2375 003c 7B68     		ldr	r3, [r7, #4]
 2376 003e 002B     		cmp	r3, #0
 2377 0040 0BD0     		beq	.L159
1077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return lwip_sock_make_addr(sock->conn, &tmpaddr, port, from, fromlen);
 2378              		.loc 1 1077 14
ARM GAS  /tmp/ccsCUhT2.s 			page 62


 2379 0042 FB68     		ldr	r3, [r7, #12]
 2380 0044 1868     		ldr	r0, [r3]
 2381 0046 FA8A     		ldrh	r2, [r7, #22]
 2382 0048 07F11001 		add	r1, r7, #16
 2383 004c 7B68     		ldr	r3, [r7, #4]
 2384 004e 0093     		str	r3, [sp]
 2385 0050 BB68     		ldr	r3, [r7, #8]
 2386 0052 FFF7FEFF 		bl	lwip_sock_make_addr
 2387 0056 0346     		mov	r3, r0
 2388 0058 00E0     		b	.L158
 2389              	.L159:
 2390              	.LBE24:
1078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 2391              		.loc 1 1080 10
 2392 005a 0023     		movs	r3, #0
 2393              	.L158:
1081:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2394              		.loc 1 1081 1
 2395 005c 1846     		mov	r0, r3
 2396 005e 1837     		adds	r7, r7, #24
 2397              	.LCFI98:
 2398              		.cfi_def_cfa_offset 8
 2399 0060 BD46     		mov	sp, r7
 2400              	.LCFI99:
 2401              		.cfi_def_cfa_register 13
 2402              		@ sp needed
 2403 0062 80BD     		pop	{r7, pc}
 2404              		.cfi_endproc
 2405              	.LFE156:
 2407              		.section	.rodata
 2408              		.align	2
 2409              	.LC16:
 2410 01a0 6C776970 		.ascii	"lwip_recvfrom_udp_raw: invalid arguments\000"
 2410      5F726563 
 2410      7666726F 
 2410      6D5F7564 
 2410      705F7261 
 2411 01c9 000000   		.align	2
 2412              	.LC17:
 2413 01cc 62756620 		.ascii	"buf != NULL\000"
 2413      213D204E 
 2413      554C4C00 
 2414              		.section	.text.lwip_recvfrom_udp_raw,"ax",%progbits
 2415              		.align	1
 2416              		.syntax unified
 2417              		.thumb
 2418              		.thumb_func
 2419              		.fpu fpv4-sp-d16
 2421              	lwip_recvfrom_udp_raw:
 2422              	.LFB157:
1082:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1083:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1084:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Helper function to receive a netbuf from a udp or raw netconn.
1085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Keeps sock->lastdata for peeking.
1086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
ARM GAS  /tmp/ccsCUhT2.s 			page 63


1087:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static err_t
1088:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recvfrom_udp_raw(struct lwip_sock *sock, int flags, struct msghdr *msg, u16_t *datagram_len, i
1089:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 2423              		.loc 1 1089 1
 2424              		.cfi_startproc
 2425              		@ args = 4, pretend = 0, frame = 40
 2426              		@ frame_needed = 1, uses_anonymous_args = 0
 2427 0000 90B5     		push	{r4, r7, lr}
 2428              	.LCFI100:
 2429              		.cfi_def_cfa_offset 12
 2430              		.cfi_offset 4, -12
 2431              		.cfi_offset 7, -8
 2432              		.cfi_offset 14, -4
 2433 0002 8DB0     		sub	sp, sp, #52
 2434              	.LCFI101:
 2435              		.cfi_def_cfa_offset 64
 2436 0004 02AF     		add	r7, sp, #8
 2437              	.LCFI102:
 2438              		.cfi_def_cfa 7, 56
 2439 0006 F860     		str	r0, [r7, #12]
 2440 0008 B960     		str	r1, [r7, #8]
 2441 000a 7A60     		str	r2, [r7, #4]
 2442 000c 3B60     		str	r3, [r7]
1090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netbuf *buf;
1091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t apiflags;
1092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t buflen, copylen, copied;
1094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1095:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(dbg_s);
1097:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_recvfrom_udp_raw: invalid arguments", (msg->msg_iov != NULL) || (msg->msg_iovlen
 2443              		.loc 1 1097 3
 2444 000e 7B68     		ldr	r3, [r7, #4]
 2445 0010 9B68     		ldr	r3, [r3, #8]
 2446 0012 002B     		cmp	r3, #0
 2447 0014 0DD1     		bne	.L162
 2448              		.loc 1 1097 3 is_stmt 0 discriminator 1
 2449 0016 7B68     		ldr	r3, [r7, #4]
 2450 0018 DB68     		ldr	r3, [r3, #12]
 2451 001a 002B     		cmp	r3, #0
 2452 001c 09DD     		ble	.L162
 2453              		.loc 1 1097 3 discriminator 2
 2454 001e 5E4B     		ldr	r3, .L179
 2455 0020 40F24942 		movw	r2, #1097
 2456 0024 5D49     		ldr	r1, .L179+4
 2457 0026 5E48     		ldr	r0, .L179+8
 2458 0028 FFF7FEFF 		bl	printf
 2459 002c 6FF00F03 		mvn	r3, #15
 2460 0030 ADE0     		b	.L178
 2461              	.L162:
1098:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (flags & MSG_DONTWAIT) {
 2462              		.loc 1 1099 13 is_stmt 1
 2463 0032 BB68     		ldr	r3, [r7, #8]
 2464 0034 03F00803 		and	r3, r3, #8
 2465              		.loc 1 1099 6
 2466 0038 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 64


 2467 003a 03D0     		beq	.L164
1100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     apiflags = NETCONN_DONTBLOCK;
 2468              		.loc 1 1100 14
 2469 003c 0423     		movs	r3, #4
 2470 003e 87F82730 		strb	r3, [r7, #39]
 2471 0042 02E0     		b	.L165
 2472              	.L164:
1101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     apiflags = 0;
 2473              		.loc 1 1102 14
 2474 0044 0023     		movs	r3, #0
 2475 0046 87F82730 		strb	r3, [r7, #39]
 2476              	.L165:
1103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1104:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom_udp_raw[UDP/RAW]: top sock->lastdata=%p\n", (void *)so
1106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Check if there is data left from the last recv operation. */
1107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf = sock->lastdata.netbuf;
 2477              		.loc 1 1107 23
 2478 004a FB68     		ldr	r3, [r7, #12]
 2479 004c 5B68     		ldr	r3, [r3, #4]
 2480              		.loc 1 1107 7
 2481 004e 3B61     		str	r3, [r7, #16]
1108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (buf == NULL) {
 2482              		.loc 1 1108 11
 2483 0050 3B69     		ldr	r3, [r7, #16]
 2484              		.loc 1 1108 6
 2485 0052 002B     		cmp	r3, #0
 2486 0054 1ED1     		bne	.L166
1109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* No data was left from the previous operation, so we try to get
1110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         some from the network. */
1111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_recv_udp_raw_netbuf_flags(sock->conn, &buf, apiflags);
 2487              		.loc 1 1111 11
 2488 0056 FB68     		ldr	r3, [r7, #12]
 2489 0058 1B68     		ldr	r3, [r3]
 2490 005a 97F82720 		ldrb	r2, [r7, #39]	@ zero_extendqisi2
 2491 005e 07F11001 		add	r1, r7, #16
 2492 0062 1846     		mov	r0, r3
 2493 0064 FFF7FEFF 		bl	netconn_recv_udp_raw_netbuf_flags
 2494 0068 0346     		mov	r3, r0
 2495 006a FB76     		strb	r3, [r7, #27]
1112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom_udp_raw[UDP/RAW]: netconn_recv err=%d, netbuf=%p\n",
1113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                 err, (void *)buf));
1114:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1115:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 2496              		.loc 1 1115 8
 2497 006c 97F91B30 		ldrsb	r3, [r7, #27]
 2498 0070 002B     		cmp	r3, #0
 2499 0072 02D0     		beq	.L167
1116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return err;
 2500              		.loc 1 1116 14
 2501 0074 97F91B30 		ldrsb	r3, [r7, #27]
 2502 0078 89E0     		b	.L178
 2503              	.L167:
1117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("buf != NULL", buf != NULL);
 2504              		.loc 1 1118 5
ARM GAS  /tmp/ccsCUhT2.s 			page 65


 2505 007a 3B69     		ldr	r3, [r7, #16]
 2506 007c 002B     		cmp	r3, #0
 2507 007e 06D1     		bne	.L168
 2508              		.loc 1 1118 5 is_stmt 0 discriminator 1
 2509 0080 454B     		ldr	r3, .L179
 2510 0082 40F25E42 		movw	r2, #1118
 2511 0086 4749     		ldr	r1, .L179+12
 2512 0088 4548     		ldr	r0, .L179+8
 2513 008a FFF7FEFF 		bl	printf
 2514              	.L168:
1119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock->lastdata.netbuf = buf;
 2515              		.loc 1 1119 27 is_stmt 1
 2516 008e 3A69     		ldr	r2, [r7, #16]
 2517 0090 FB68     		ldr	r3, [r7, #12]
 2518 0092 5A60     		str	r2, [r3, #4]
 2519              	.L166:
1120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1121:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buflen = buf->p->tot_len;
 2520              		.loc 1 1121 15
 2521 0094 3B69     		ldr	r3, [r7, #16]
 2522 0096 1B68     		ldr	r3, [r3]
 2523              		.loc 1 1121 10
 2524 0098 1B89     		ldrh	r3, [r3, #8]	@ movhi
 2525 009a 3B83     		strh	r3, [r7, #24]	@ movhi
1122:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom_udp_raw: buflen=%"U16_F"\n", buflen));
1123:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   copied = 0;
 2526              		.loc 1 1124 10
 2527 009c 0023     		movs	r3, #0
 2528 009e 7B84     		strh	r3, [r7, #34]	@ movhi
1125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* copy the pbuf payload into the iovs */
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = 0; (i < msg->msg_iovlen) && (copied < buflen); i++) {
 2529              		.loc 1 1126 10
 2530 00a0 0023     		movs	r3, #0
 2531 00a2 FB61     		str	r3, [r7, #28]
 2532              		.loc 1 1126 3
 2533 00a4 29E0     		b	.L169
 2534              	.L173:
 2535              	.LBB25:
1127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t len_left = (u16_t)(buflen - copied);
 2536              		.loc 1 1127 11
 2537 00a6 3A8B     		ldrh	r2, [r7, #24]	@ movhi
 2538 00a8 7B8C     		ldrh	r3, [r7, #34]	@ movhi
 2539 00aa D31A     		subs	r3, r2, r3
 2540 00ac FB82     		strh	r3, [r7, #22]	@ movhi
1128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (msg->msg_iov[i].iov_len > len_left) {
 2541              		.loc 1 1128 12
 2542 00ae 7B68     		ldr	r3, [r7, #4]
 2543 00b0 9A68     		ldr	r2, [r3, #8]
 2544              		.loc 1 1128 21
 2545 00b2 FB69     		ldr	r3, [r7, #28]
 2546 00b4 DB00     		lsls	r3, r3, #3
 2547 00b6 1344     		add	r3, r3, r2
 2548              		.loc 1 1128 24
 2549 00b8 5A68     		ldr	r2, [r3, #4]
 2550              		.loc 1 1128 33
 2551 00ba FB8A     		ldrh	r3, [r7, #22]
ARM GAS  /tmp/ccsCUhT2.s 			page 66


 2552              		.loc 1 1128 8
 2553 00bc 9A42     		cmp	r2, r3
 2554 00be 02D9     		bls	.L170
1129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = len_left;
 2555              		.loc 1 1129 15
 2556 00c0 FB8A     		ldrh	r3, [r7, #22]	@ movhi
 2557 00c2 BB84     		strh	r3, [r7, #36]	@ movhi
 2558 00c4 06E0     		b	.L171
 2559              	.L170:
1130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       copylen = (u16_t)msg->msg_iov[i].iov_len;
 2560              		.loc 1 1131 27
 2561 00c6 7B68     		ldr	r3, [r7, #4]
 2562 00c8 9A68     		ldr	r2, [r3, #8]
 2563              		.loc 1 1131 36
 2564 00ca FB69     		ldr	r3, [r7, #28]
 2565 00cc DB00     		lsls	r3, r3, #3
 2566 00ce 1344     		add	r3, r3, r2
 2567              		.loc 1 1131 39
 2568 00d0 5B68     		ldr	r3, [r3, #4]
 2569              		.loc 1 1131 15
 2570 00d2 BB84     		strh	r3, [r7, #36]	@ movhi
 2571              	.L171:
1132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1133:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1134:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* copy the contents of the received buffer into
1135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         the supplied memory buffer */
1136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     pbuf_copy_partial(buf->p, (u8_t *)msg->msg_iov[i].iov_base, copylen, copied);
 2572              		.loc 1 1136 26 discriminator 2
 2573 00d4 3B69     		ldr	r3, [r7, #16]
 2574 00d6 1868     		ldr	r0, [r3]
 2575              		.loc 1 1136 42 discriminator 2
 2576 00d8 7B68     		ldr	r3, [r7, #4]
 2577 00da 9A68     		ldr	r2, [r3, #8]
 2578              		.loc 1 1136 51 discriminator 2
 2579 00dc FB69     		ldr	r3, [r7, #28]
 2580 00de DB00     		lsls	r3, r3, #3
 2581 00e0 1344     		add	r3, r3, r2
 2582              		.loc 1 1136 5 discriminator 2
 2583 00e2 1968     		ldr	r1, [r3]
 2584 00e4 7B8C     		ldrh	r3, [r7, #34]
 2585 00e6 BA8C     		ldrh	r2, [r7, #36]
 2586 00e8 FFF7FEFF 		bl	pbuf_copy_partial
1137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     copied = (u16_t)(copied + copylen);
 2587              		.loc 1 1137 12 discriminator 2
 2588 00ec 7A8C     		ldrh	r2, [r7, #34]	@ movhi
 2589 00ee BB8C     		ldrh	r3, [r7, #36]	@ movhi
 2590 00f0 1344     		add	r3, r3, r2
 2591 00f2 7B84     		strh	r3, [r7, #34]	@ movhi
 2592              	.LBE25:
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t len_left = (u16_t)(buflen - copied);
 2593              		.loc 1 1126 60 discriminator 2
 2594 00f4 FB69     		ldr	r3, [r7, #28]
 2595 00f6 0133     		adds	r3, r3, #1
 2596 00f8 FB61     		str	r3, [r7, #28]
 2597              	.L169:
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t len_left = (u16_t)(buflen - copied);
ARM GAS  /tmp/ccsCUhT2.s 			page 67


 2598              		.loc 1 1126 23 discriminator 1
 2599 00fa 7B68     		ldr	r3, [r7, #4]
 2600 00fc DB68     		ldr	r3, [r3, #12]
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t len_left = (u16_t)(buflen - copied);
 2601              		.loc 1 1126 3 discriminator 1
 2602 00fe FA69     		ldr	r2, [r7, #28]
 2603 0100 9A42     		cmp	r2, r3
 2604 0102 03DA     		bge	.L172
1126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t len_left = (u16_t)(buflen - copied);
 2605              		.loc 1 1126 37 discriminator 3
 2606 0104 7A8C     		ldrh	r2, [r7, #34]
 2607 0106 3B8B     		ldrh	r3, [r7, #24]
 2608 0108 9A42     		cmp	r2, r3
 2609 010a CCD3     		bcc	.L173
 2610              	.L172:
1138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1139:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1140:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Check to see from where the data was.*/
1141:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !SOCKETS_DEBUG
1142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (msg->msg_name && msg->msg_namelen)
 2611              		.loc 1 1142 10
 2612 010c 7B68     		ldr	r3, [r7, #4]
 2613 010e 1B68     		ldr	r3, [r3]
 2614              		.loc 1 1142 6
 2615 0110 002B     		cmp	r3, #0
 2616 0112 1AD0     		beq	.L174
 2617              		.loc 1 1142 27 discriminator 1
 2618 0114 7B68     		ldr	r3, [r7, #4]
 2619 0116 5B68     		ldr	r3, [r3, #4]
 2620              		.loc 1 1142 21 discriminator 1
 2621 0118 002B     		cmp	r3, #0
 2622 011a 16D0     		beq	.L174
1143:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !SOCKETS_DEBUG */
1144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom_udp_raw(%d):  addr=", dbg_s));
1146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_debug_print_val(SOCKETS_DEBUG, *netbuf_fromaddr(buf));
1147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F" len=%d\n", netbuf_fromport(buf), copied));
1148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (msg->msg_name && msg->msg_namelen) {
 2623              		.loc 1 1148 12
 2624 011c 7B68     		ldr	r3, [r7, #4]
 2625 011e 1B68     		ldr	r3, [r3]
 2626              		.loc 1 1148 8
 2627 0120 002B     		cmp	r3, #0
 2628 0122 12D0     		beq	.L174
 2629              		.loc 1 1148 29 discriminator 1
 2630 0124 7B68     		ldr	r3, [r7, #4]
 2631 0126 5B68     		ldr	r3, [r3, #4]
 2632              		.loc 1 1148 23 discriminator 1
 2633 0128 002B     		cmp	r3, #0
 2634 012a 0ED0     		beq	.L174
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       lwip_sock_make_addr(sock->conn, netbuf_fromaddr(buf), netbuf_fromport(buf),
 2635              		.loc 1 1149 7
 2636 012c FB68     		ldr	r3, [r7, #12]
 2637 012e 1868     		ldr	r0, [r3]
 2638              		.loc 1 1149 39
 2639 0130 3B69     		ldr	r3, [r7, #16]
 2640              		.loc 1 1149 7
ARM GAS  /tmp/ccsCUhT2.s 			page 68


 2641 0132 03F10801 		add	r1, r3, #8
 2642              		.loc 1 1149 61
 2643 0136 3B69     		ldr	r3, [r7, #16]
 2644              		.loc 1 1149 7
 2645 0138 9A89     		ldrh	r2, [r3, #12]
1150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                           (struct sockaddr *)msg->msg_name, &msg->msg_namelen);
 2646              		.loc 1 1150 49
 2647 013a 7B68     		ldr	r3, [r7, #4]
 2648 013c 1C68     		ldr	r4, [r3]
1149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       lwip_sock_make_addr(sock->conn, netbuf_fromaddr(buf), netbuf_fromport(buf),
 2649              		.loc 1 1149 7
 2650 013e 7B68     		ldr	r3, [r7, #4]
 2651 0140 0433     		adds	r3, r3, #4
 2652 0142 0093     		str	r3, [sp]
 2653 0144 2346     		mov	r3, r4
 2654 0146 FFF7FEFF 		bl	lwip_sock_make_addr
 2655              	.L174:
1151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1153:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Initialize flag output */
1155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg->msg_flags = 0;
 2656              		.loc 1 1155 18
 2657 014a 7B68     		ldr	r3, [r7, #4]
 2658 014c 0022     		movs	r2, #0
 2659 014e 9A61     		str	r2, [r3, #24]
1156:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (msg->msg_control) {
 2660              		.loc 1 1157 10
 2661 0150 7B68     		ldr	r3, [r7, #4]
 2662 0152 1B69     		ldr	r3, [r3, #16]
 2663              		.loc 1 1157 6
 2664 0154 002B     		cmp	r3, #0
 2665 0156 07D0     		beq	.L175
 2666              	.LBB26:
1158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u8_t wrote_msg = 0;
 2667              		.loc 1 1158 10
 2668 0158 0023     		movs	r3, #0
 2669 015a 7B75     		strb	r3, [r7, #21]
1159:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETBUF_RECVINFO
1160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check if packet info was recorded */
1161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (buf->flags & NETBUF_FLAG_DESTADDR) {
1162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (IP_IS_V4(&buf->toaddr)) {
1163:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
1164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (msg->msg_controllen >= CMSG_SPACE(sizeof(struct in_pktinfo))) {
1165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct cmsghdr *chdr = CMSG_FIRSTHDR(msg); /* This will always return a header!! */
1166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct in_pktinfo *pkti = (struct in_pktinfo *)CMSG_DATA(chdr);
1167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           chdr->cmsg_level = IPPROTO_IP;
1168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           chdr->cmsg_type = IP_PKTINFO;
1169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           chdr->cmsg_len = CMSG_LEN(sizeof(struct in_pktinfo));
1170:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pkti->ipi_ifindex = buf->p->if_idx;
1171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           inet_addr_from_ip4addr(&pkti->ipi_addr, ip_2_ip4(netbuf_destaddr(buf)));
1172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msg->msg_controllen = CMSG_SPACE(sizeof(struct in_pktinfo));
1173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           wrote_msg = 1;
1174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
1175:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           msg->msg_flags |= MSG_CTRUNC;
1176:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
ARM GAS  /tmp/ccsCUhT2.s 			page 69


1177:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 */
1178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1180:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETBUF_RECVINFO */
1181:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!wrote_msg) {
 2670              		.loc 1 1182 8
 2671 015c 7B7D     		ldrb	r3, [r7, #21]	@ zero_extendqisi2
 2672 015e 002B     		cmp	r3, #0
 2673 0160 02D1     		bne	.L175
1183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       msg->msg_controllen = 0;
 2674              		.loc 1 1183 27
 2675 0162 7B68     		ldr	r3, [r7, #4]
 2676 0164 0022     		movs	r2, #0
 2677 0166 5A61     		str	r2, [r3, #20]
 2678              	.L175:
 2679              	.LBE26:
1184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1186:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* If we don't peek the incoming message: zero lastdata pointer and free the netbuf */
1188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((flags & MSG_PEEK) == 0) {
 2680              		.loc 1 1188 14
 2681 0168 BB68     		ldr	r3, [r7, #8]
 2682 016a 03F00103 		and	r3, r3, #1
 2683              		.loc 1 1188 6
 2684 016e 002B     		cmp	r3, #0
 2685 0170 06D1     		bne	.L176
1189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock->lastdata.netbuf = NULL;
 2686              		.loc 1 1189 27
 2687 0172 FB68     		ldr	r3, [r7, #12]
 2688 0174 0022     		movs	r2, #0
 2689 0176 5A60     		str	r2, [r3, #4]
1190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netbuf_delete(buf);
 2690              		.loc 1 1190 5
 2691 0178 3B69     		ldr	r3, [r7, #16]
 2692 017a 1846     		mov	r0, r3
 2693 017c FFF7FEFF 		bl	netbuf_delete
 2694              	.L176:
1191:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (datagram_len) {
 2695              		.loc 1 1192 6
 2696 0180 3B68     		ldr	r3, [r7]
 2697 0182 002B     		cmp	r3, #0
 2698 0184 02D0     		beq	.L177
1193:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *datagram_len = buflen;
 2699              		.loc 1 1193 19
 2700 0186 3B68     		ldr	r3, [r7]
 2701 0188 3A8B     		ldrh	r2, [r7, #24]	@ movhi
 2702 018a 1A80     		strh	r2, [r3]	@ movhi
 2703              	.L177:
1194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1195:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ERR_OK;
 2704              		.loc 1 1195 10
 2705 018c 0023     		movs	r3, #0
 2706              	.L178:
1196:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
ARM GAS  /tmp/ccsCUhT2.s 			page 70


 2707              		.loc 1 1196 1 discriminator 1
 2708 018e 1846     		mov	r0, r3
 2709 0190 2C37     		adds	r7, r7, #44
 2710              	.LCFI103:
 2711              		.cfi_def_cfa_offset 12
 2712 0192 BD46     		mov	sp, r7
 2713              	.LCFI104:
 2714              		.cfi_def_cfa_register 13
 2715              		@ sp needed
 2716 0194 90BD     		pop	{r4, r7, pc}
 2717              	.L180:
 2718 0196 00BF     		.align	2
 2719              	.L179:
 2720 0198 00000000 		.word	.LC0
 2721 019c A0010000 		.word	.LC16
 2722 01a0 50000000 		.word	.LC2
 2723 01a4 CC010000 		.word	.LC17
 2724              		.cfi_endproc
 2725              	.LFE157:
 2727              		.section	.rodata
 2728              		.align	2
 2729              	.LC18:
 2730 01d8 6C776970 		.ascii	"lwip_recvfrom\000"
 2730      5F726563 
 2730      7666726F 
 2730      6D00
 2731              		.section	.text.lwip_recvfrom,"ax",%progbits
 2732              		.align	1
 2733              		.global	lwip_recvfrom
 2734              		.syntax unified
 2735              		.thumb
 2736              		.thumb_func
 2737              		.fpu fpv4-sp-d16
 2739              	lwip_recvfrom:
 2740              	.LFB158:
1197:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1198:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recvfrom(int s, void *mem, size_t len, int flags,
1200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               struct sockaddr *from, socklen_t *fromlen)
1201:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 2741              		.loc 1 1201 1
 2742              		.cfi_startproc
 2743              		@ args = 8, pretend = 0, frame = 80
 2744              		@ frame_needed = 1, uses_anonymous_args = 0
 2745 0000 80B5     		push	{r7, lr}
 2746              	.LCFI105:
 2747              		.cfi_def_cfa_offset 8
 2748              		.cfi_offset 7, -8
 2749              		.cfi_offset 14, -4
 2750 0002 96B0     		sub	sp, sp, #88
 2751              	.LCFI106:
 2752              		.cfi_def_cfa_offset 96
 2753 0004 02AF     		add	r7, sp, #8
 2754              	.LCFI107:
 2755              		.cfi_def_cfa 7, 88
 2756 0006 F860     		str	r0, [r7, #12]
 2757 0008 B960     		str	r1, [r7, #8]
ARM GAS  /tmp/ccsCUhT2.s 			page 71


 2758 000a 7A60     		str	r2, [r7, #4]
 2759 000c 3B60     		str	r3, [r7]
1202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ssize_t ret;
1204:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1205:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom(%d, %p, %"SZT_F", 0x%x, ..)\n", s, mem, len, flags));
1206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 2760              		.loc 1 1206 10
 2761 000e F868     		ldr	r0, [r7, #12]
 2762 0010 FFF7FEFF 		bl	get_socket
 2763 0014 F864     		str	r0, [r7, #76]
1207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 2764              		.loc 1 1207 6
 2765 0016 FB6C     		ldr	r3, [r7, #76]
 2766 0018 002B     		cmp	r3, #0
 2767 001a 02D1     		bne	.L182
1208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 2768              		.loc 1 1208 12
 2769 001c 4FF0FF33 		mov	r3, #-1
 2770 0020 77E0     		b	.L183
 2771              	.L182:
1209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1210:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 2772              		.loc 1 1211 7
 2773 0022 FB6C     		ldr	r3, [r7, #76]
 2774 0024 1B68     		ldr	r3, [r3]
 2775 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2776 0028 03F0F003 		and	r3, r3, #240
 2777              		.loc 1 1211 6
 2778 002c 102B     		cmp	r3, #16
 2779 002e 12D1     		bne	.L184
1212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = lwip_recv_tcp(sock, mem, len, flags);
 2780              		.loc 1 1212 11
 2781 0030 3B68     		ldr	r3, [r7]
 2782 0032 7A68     		ldr	r2, [r7, #4]
 2783 0034 B968     		ldr	r1, [r7, #8]
 2784 0036 F86C     		ldr	r0, [r7, #76]
 2785 0038 FFF7FEFF 		bl	lwip_recv_tcp
 2786 003c B864     		str	r0, [r7, #72]
1213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     lwip_recv_tcp_from(sock, from, fromlen, "lwip_recvfrom", s, ret);
 2787              		.loc 1 1213 5
 2788 003e BB6C     		ldr	r3, [r7, #72]
 2789 0040 0193     		str	r3, [sp, #4]
 2790 0042 FB68     		ldr	r3, [r7, #12]
 2791 0044 0093     		str	r3, [sp]
 2792 0046 354B     		ldr	r3, .L193
 2793 0048 FA6D     		ldr	r2, [r7, #92]
 2794 004a B96D     		ldr	r1, [r7, #88]
 2795 004c F86C     		ldr	r0, [r7, #76]
 2796 004e FFF7FEFF 		bl	lwip_recv_tcp_from
1214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return ret;
 2797              		.loc 1 1215 12
 2798 0052 BB6C     		ldr	r3, [r7, #72]
 2799 0054 5DE0     		b	.L183
 2800              	.L184:
ARM GAS  /tmp/ccsCUhT2.s 			page 72


 2801              	.LBB27:
1216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else
1217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1219:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t datagram_len = 0;
 2802              		.loc 1 1219 11
 2803 0056 0023     		movs	r3, #0
 2804 0058 7B87     		strh	r3, [r7, #58]	@ movhi
1220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct iovec vec;
1221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct msghdr msg;
1222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err_t err;
1223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     vec.iov_base = mem;
 2805              		.loc 1 1223 18
 2806 005a BB68     		ldr	r3, [r7, #8]
 2807 005c 3B63     		str	r3, [r7, #48]
1224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     vec.iov_len = len;
 2808              		.loc 1 1224 17
 2809 005e 7B68     		ldr	r3, [r7, #4]
 2810 0060 7B63     		str	r3, [r7, #52]
1225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_control = NULL;
 2811              		.loc 1 1225 21
 2812 0062 0023     		movs	r3, #0
 2813 0064 7B62     		str	r3, [r7, #36]
1226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_controllen = 0;
 2814              		.loc 1 1226 24
 2815 0066 0023     		movs	r3, #0
 2816 0068 BB62     		str	r3, [r7, #40]
1227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_flags = 0;
 2817              		.loc 1 1227 19
 2818 006a 0023     		movs	r3, #0
 2819 006c FB62     		str	r3, [r7, #44]
1228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_iov = &vec;
 2820              		.loc 1 1228 17
 2821 006e 07F13003 		add	r3, r7, #48
 2822 0072 FB61     		str	r3, [r7, #28]
1229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_iovlen = 1;
 2823              		.loc 1 1229 20
 2824 0074 0123     		movs	r3, #1
 2825 0076 3B62     		str	r3, [r7, #32]
1230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_name = from;
 2826              		.loc 1 1230 18
 2827 0078 BB6D     		ldr	r3, [r7, #88]
 2828 007a 7B61     		str	r3, [r7, #20]
1231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     msg.msg_namelen = (fromlen ? *fromlen : 0);
 2829              		.loc 1 1231 43
 2830 007c FB6D     		ldr	r3, [r7, #92]
 2831 007e 002B     		cmp	r3, #0
 2832 0080 02D0     		beq	.L185
 2833              		.loc 1 1231 43 is_stmt 0 discriminator 1
 2834 0082 FB6D     		ldr	r3, [r7, #92]
 2835 0084 1B68     		ldr	r3, [r3]
 2836 0086 00E0     		b	.L186
 2837              	.L185:
 2838              		.loc 1 1231 43 discriminator 2
 2839 0088 0023     		movs	r3, #0
 2840              	.L186:
 2841              		.loc 1 1231 21 is_stmt 1 discriminator 4
ARM GAS  /tmp/ccsCUhT2.s 			page 73


 2842 008a BB61     		str	r3, [r7, #24]
1232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = lwip_recvfrom_udp_raw(sock, flags, &msg, &datagram_len, s);
 2843              		.loc 1 1232 11 discriminator 4
 2844 008c 07F13A01 		add	r1, r7, #58
 2845 0090 07F11402 		add	r2, r7, #20
 2846 0094 FB68     		ldr	r3, [r7, #12]
 2847 0096 0093     		str	r3, [sp]
 2848 0098 0B46     		mov	r3, r1
 2849 009a 3968     		ldr	r1, [r7]
 2850 009c F86C     		ldr	r0, [r7, #76]
 2851 009e FFF7FEFF 		bl	lwip_recvfrom_udp_raw
 2852 00a2 0346     		mov	r3, r0
 2853 00a4 87F84730 		strb	r3, [r7, #71]
1233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 2854              		.loc 1 1233 8 discriminator 4
 2855 00a8 97F94730 		ldrsb	r3, [r7, #71]
 2856 00ac 002B     		cmp	r3, #0
 2857 00ae 0ED0     		beq	.L187
 2858              	.LBB28:
1234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvfrom[UDP/RAW](%d): buf == NULL, error is \"%s\"!\n",
1235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, lwip_strerr(err)));
1236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 2859              		.loc 1 1236 7
 2860 00b0 97F94730 		ldrsb	r3, [r7, #71]
 2861 00b4 1846     		mov	r0, r3
 2862 00b6 FFF7FEFF 		bl	err_to_errno
 2863 00ba 3864     		str	r0, [r7, #64]
 2864 00bc 3B6C     		ldr	r3, [r7, #64]
 2865 00be 002B     		cmp	r3, #0
 2866 00c0 02D0     		beq	.L188
 2867              		.loc 1 1236 7 is_stmt 0 discriminator 1
 2868 00c2 174A     		ldr	r2, .L193+4
 2869 00c4 3B6C     		ldr	r3, [r7, #64]
 2870 00c6 1360     		str	r3, [r2]
 2871              	.L188:
 2872              	.LBE28:
1237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
1238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 2873              		.loc 1 1238 14 is_stmt 1
 2874 00c8 4FF0FF33 		mov	r3, #-1
 2875 00cc 21E0     		b	.L183
 2876              	.L187:
1239:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ret = (ssize_t)LWIP_MIN(LWIP_MIN(len, datagram_len), SSIZE_MAX);
 2877              		.loc 1 1240 20
 2878 00ce 7B8F     		ldrh	r3, [r7, #58]
 2879 00d0 1A46     		mov	r2, r3
 2880 00d2 7B68     		ldr	r3, [r7, #4]
 2881 00d4 9342     		cmp	r3, r2
 2882 00d6 28BF     		it	cs
 2883 00d8 1346     		movcs	r3, r2
 2884              		.loc 1 1240 11
 2885 00da 124A     		ldr	r2, .L193+8
 2886 00dc 9342     		cmp	r3, r2
 2887 00de 06D8     		bhi	.L189
 2888              		.loc 1 1240 20 discriminator 1
 2889 00e0 7B8F     		ldrh	r3, [r7, #58]
ARM GAS  /tmp/ccsCUhT2.s 			page 74


 2890 00e2 1A46     		mov	r2, r3
 2891 00e4 7B68     		ldr	r3, [r7, #4]
 2892 00e6 9342     		cmp	r3, r2
 2893 00e8 28BF     		it	cs
 2894 00ea 1346     		movcs	r3, r2
 2895 00ec 01E0     		b	.L190
 2896              	.L189:
 2897              		.loc 1 1240 11 discriminator 2
 2898 00ee 6FF00043 		mvn	r3, #-2147483648
 2899              	.L190:
 2900              		.loc 1 1240 9 discriminator 4
 2901 00f2 BB64     		str	r3, [r7, #72]
1241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (fromlen) {
 2902              		.loc 1 1241 8 discriminator 4
 2903 00f4 FB6D     		ldr	r3, [r7, #92]
 2904 00f6 002B     		cmp	r3, #0
 2905 00f8 02D0     		beq	.L191
1242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *fromlen = msg.msg_namelen;
 2906              		.loc 1 1242 21
 2907 00fa BA69     		ldr	r2, [r7, #24]
 2908              		.loc 1 1242 16
 2909 00fc FB6D     		ldr	r3, [r7, #92]
 2910 00fe 1A60     		str	r2, [r3]
 2911              	.L191:
 2912              	.LBE27:
 2913              	.LBB29:
1243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1245:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
 2914              		.loc 1 1246 3
 2915 0100 0023     		movs	r3, #0
 2916 0102 FB63     		str	r3, [r7, #60]
 2917 0104 FB6B     		ldr	r3, [r7, #60]
 2918 0106 002B     		cmp	r3, #0
 2919 0108 02D0     		beq	.L192
 2920              		.loc 1 1246 3 is_stmt 0 discriminator 1
 2921 010a 054A     		ldr	r2, .L193+4
 2922 010c FB6B     		ldr	r3, [r7, #60]
 2923 010e 1360     		str	r3, [r2]
 2924              	.L192:
 2925              	.LBE29:
1247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
1248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
 2926              		.loc 1 1248 10 is_stmt 1
 2927 0110 BB6C     		ldr	r3, [r7, #72]
 2928              	.L183:
1249:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2929              		.loc 1 1249 1
 2930 0112 1846     		mov	r0, r3
 2931 0114 5037     		adds	r7, r7, #80
 2932              	.LCFI108:
 2933              		.cfi_def_cfa_offset 8
 2934 0116 BD46     		mov	sp, r7
 2935              	.LCFI109:
 2936              		.cfi_def_cfa_register 13
 2937              		@ sp needed
ARM GAS  /tmp/ccsCUhT2.s 			page 75


 2938 0118 80BD     		pop	{r7, pc}
 2939              	.L194:
 2940 011a 00BF     		.align	2
 2941              	.L193:
 2942 011c D8010000 		.word	.LC18
 2943 0120 00000000 		.word	errno
 2944 0124 FEFFFF7F 		.word	2147483646
 2945              		.cfi_endproc
 2946              	.LFE158:
 2948              		.section	.text.lwip_read,"ax",%progbits
 2949              		.align	1
 2950              		.global	lwip_read
 2951              		.syntax unified
 2952              		.thumb
 2953              		.thumb_func
 2954              		.fpu fpv4-sp-d16
 2956              	lwip_read:
 2957              	.LFB159:
1250:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1251:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_read(int s, void *mem, size_t len)
1253:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 2958              		.loc 1 1253 1
 2959              		.cfi_startproc
 2960              		@ args = 0, pretend = 0, frame = 16
 2961              		@ frame_needed = 1, uses_anonymous_args = 0
 2962 0000 80B5     		push	{r7, lr}
 2963              	.LCFI110:
 2964              		.cfi_def_cfa_offset 8
 2965              		.cfi_offset 7, -8
 2966              		.cfi_offset 14, -4
 2967 0002 86B0     		sub	sp, sp, #24
 2968              	.LCFI111:
 2969              		.cfi_def_cfa_offset 32
 2970 0004 02AF     		add	r7, sp, #8
 2971              	.LCFI112:
 2972              		.cfi_def_cfa 7, 24
 2973 0006 F860     		str	r0, [r7, #12]
 2974 0008 B960     		str	r1, [r7, #8]
 2975 000a 7A60     		str	r2, [r7, #4]
1254:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, 0, NULL, NULL);
 2976              		.loc 1 1254 10
 2977 000c 0023     		movs	r3, #0
 2978 000e 0193     		str	r3, [sp, #4]
 2979 0010 0023     		movs	r3, #0
 2980 0012 0093     		str	r3, [sp]
 2981 0014 0023     		movs	r3, #0
 2982 0016 7A68     		ldr	r2, [r7, #4]
 2983 0018 B968     		ldr	r1, [r7, #8]
 2984 001a F868     		ldr	r0, [r7, #12]
 2985 001c FFF7FEFF 		bl	lwip_recvfrom
 2986 0020 0346     		mov	r3, r0
1255:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 2987              		.loc 1 1255 1
 2988 0022 1846     		mov	r0, r3
 2989 0024 1037     		adds	r7, r7, #16
 2990              	.LCFI113:
ARM GAS  /tmp/ccsCUhT2.s 			page 76


 2991              		.cfi_def_cfa_offset 8
 2992 0026 BD46     		mov	sp, r7
 2993              	.LCFI114:
 2994              		.cfi_def_cfa_register 13
 2995              		@ sp needed
 2996 0028 80BD     		pop	{r7, pc}
 2997              		.cfi_endproc
 2998              	.LFE159:
 3000              		.section	.text.lwip_readv,"ax",%progbits
 3001              		.align	1
 3002              		.global	lwip_readv
 3003              		.syntax unified
 3004              		.thumb
 3005              		.thumb_func
 3006              		.fpu fpv4-sp-d16
 3008              	lwip_readv:
 3009              	.LFB160:
1256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1257:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1258:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_readv(int s, const struct iovec *iov, int iovcnt)
1259:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 3010              		.loc 1 1259 1
 3011              		.cfi_startproc
 3012              		@ args = 0, pretend = 0, frame = 48
 3013              		@ frame_needed = 1, uses_anonymous_args = 0
 3014 0000 80B5     		push	{r7, lr}
 3015              	.LCFI115:
 3016              		.cfi_def_cfa_offset 8
 3017              		.cfi_offset 7, -8
 3018              		.cfi_offset 14, -4
 3019 0002 8CB0     		sub	sp, sp, #48
 3020              	.LCFI116:
 3021              		.cfi_def_cfa_offset 56
 3022 0004 00AF     		add	r7, sp, #0
 3023              	.LCFI117:
 3024              		.cfi_def_cfa_register 7
 3025 0006 F860     		str	r0, [r7, #12]
 3026 0008 B960     		str	r1, [r7, #8]
 3027 000a 7A60     		str	r2, [r7, #4]
1260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
1261:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_name = NULL;
 3028              		.loc 1 1262 16
 3029 000c 0023     		movs	r3, #0
 3030 000e 7B61     		str	r3, [r7, #20]
1263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
 3031              		.loc 1 1263 19
 3032 0010 0023     		movs	r3, #0
 3033 0012 BB61     		str	r3, [r7, #24]
1264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
1265:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      Blame the opengroup standard for this inconsistency. */
1266:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iov = LWIP_CONST_CAST(struct iovec *, iov);
 3034              		.loc 1 1266 15
 3035 0014 BB68     		ldr	r3, [r7, #8]
 3036 0016 FB61     		str	r3, [r7, #28]
1267:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
 3037              		.loc 1 1267 18
ARM GAS  /tmp/ccsCUhT2.s 			page 77


 3038 0018 7B68     		ldr	r3, [r7, #4]
 3039 001a 3B62     		str	r3, [r7, #32]
1268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
 3040              		.loc 1 1268 19
 3041 001c 0023     		movs	r3, #0
 3042 001e 7B62     		str	r3, [r7, #36]
1269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
 3043              		.loc 1 1269 22
 3044 0020 0023     		movs	r3, #0
 3045 0022 BB62     		str	r3, [r7, #40]
1270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
 3046              		.loc 1 1270 17
 3047 0024 0023     		movs	r3, #0
 3048 0026 FB62     		str	r3, [r7, #44]
1271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvmsg(s, &msg, 0);
 3049              		.loc 1 1271 10
 3050 0028 07F11403 		add	r3, r7, #20
 3051 002c 0022     		movs	r2, #0
 3052 002e 1946     		mov	r1, r3
 3053 0030 F868     		ldr	r0, [r7, #12]
 3054 0032 FFF7FEFF 		bl	lwip_recvmsg
 3055 0036 0346     		mov	r3, r0
1272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3056              		.loc 1 1272 1
 3057 0038 1846     		mov	r0, r3
 3058 003a 3037     		adds	r7, r7, #48
 3059              	.LCFI118:
 3060              		.cfi_def_cfa_offset 8
 3061 003c BD46     		mov	sp, r7
 3062              	.LCFI119:
 3063              		.cfi_def_cfa_register 13
 3064              		@ sp needed
 3065 003e 80BD     		pop	{r7, pc}
 3066              		.cfi_endproc
 3067              	.LFE160:
 3069              		.section	.text.lwip_recv,"ax",%progbits
 3070              		.align	1
 3071              		.global	lwip_recv
 3072              		.syntax unified
 3073              		.thumb
 3074              		.thumb_func
 3075              		.fpu fpv4-sp-d16
 3077              	lwip_recv:
 3078              	.LFB161:
1273:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1274:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recv(int s, void *mem, size_t len, int flags)
1276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 3079              		.loc 1 1276 1
 3080              		.cfi_startproc
 3081              		@ args = 0, pretend = 0, frame = 16
 3082              		@ frame_needed = 1, uses_anonymous_args = 0
 3083 0000 80B5     		push	{r7, lr}
 3084              	.LCFI120:
 3085              		.cfi_def_cfa_offset 8
 3086              		.cfi_offset 7, -8
 3087              		.cfi_offset 14, -4
ARM GAS  /tmp/ccsCUhT2.s 			page 78


 3088 0002 86B0     		sub	sp, sp, #24
 3089              	.LCFI121:
 3090              		.cfi_def_cfa_offset 32
 3091 0004 02AF     		add	r7, sp, #8
 3092              	.LCFI122:
 3093              		.cfi_def_cfa 7, 24
 3094 0006 F860     		str	r0, [r7, #12]
 3095 0008 B960     		str	r1, [r7, #8]
 3096 000a 7A60     		str	r2, [r7, #4]
 3097 000c 3B60     		str	r3, [r7]
1277:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_recvfrom(s, mem, len, flags, NULL, NULL);
 3098              		.loc 1 1277 10
 3099 000e 0023     		movs	r3, #0
 3100 0010 0193     		str	r3, [sp, #4]
 3101 0012 0023     		movs	r3, #0
 3102 0014 0093     		str	r3, [sp]
 3103 0016 3B68     		ldr	r3, [r7]
 3104 0018 7A68     		ldr	r2, [r7, #4]
 3105 001a B968     		ldr	r1, [r7, #8]
 3106 001c F868     		ldr	r0, [r7, #12]
 3107 001e FFF7FEFF 		bl	lwip_recvfrom
 3108 0022 0346     		mov	r3, r0
1278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3109              		.loc 1 1278 1
 3110 0024 1846     		mov	r0, r3
 3111 0026 1037     		adds	r7, r7, #16
 3112              	.LCFI123:
 3113              		.cfi_def_cfa_offset 8
 3114 0028 BD46     		mov	sp, r7
 3115              	.LCFI124:
 3116              		.cfi_def_cfa_register 13
 3117              		@ sp needed
 3118 002a 80BD     		pop	{r7, pc}
 3119              		.cfi_endproc
 3120              	.LFE161:
 3122              		.section	.rodata
 3123 01e6 0000     		.align	2
 3124              	.LC19:
 3125 01e8 6C776970 		.ascii	"lwip_recvmsg: invalid message pointer\000"
 3125      5F726563 
 3125      766D7367 
 3125      3A20696E 
 3125      76616C69 
 3126 020e 0000     		.align	2
 3127              	.LC20:
 3128 0210 6C776970 		.ascii	"lwip_recvmsg: unsupported flags\000"
 3128      5F726563 
 3128      766D7367 
 3128      3A20756E 
 3128      73757070 
 3129              		.section	.text.lwip_recvmsg,"ax",%progbits
 3130              		.align	1
 3131              		.global	lwip_recvmsg
 3132              		.syntax unified
 3133              		.thumb
 3134              		.thumb_func
 3135              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccsCUhT2.s 			page 79


 3137              	lwip_recvmsg:
 3138              	.LFB162:
1279:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_recvmsg(int s, struct msghdr *message, int flags)
1282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 3139              		.loc 1 1282 1
 3140              		.cfi_startproc
 3141              		@ args = 0, pretend = 0, frame = 64
 3142              		@ frame_needed = 1, uses_anonymous_args = 0
 3143 0000 80B5     		push	{r7, lr}
 3144              	.LCFI125:
 3145              		.cfi_def_cfa_offset 8
 3146              		.cfi_offset 7, -8
 3147              		.cfi_offset 14, -4
 3148 0002 92B0     		sub	sp, sp, #72
 3149              	.LCFI126:
 3150              		.cfi_def_cfa_offset 80
 3151 0004 02AF     		add	r7, sp, #8
 3152              	.LCFI127:
 3153              		.cfi_def_cfa 7, 72
 3154 0006 F860     		str	r0, [r7, #12]
 3155 0008 B960     		str	r1, [r7, #8]
 3156 000a 7A60     		str	r2, [r7, #4]
1283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ssize_t buflen;
1286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvmsg(%d, message=%p, flags=0x%x)\n", s, (void *)message, fla
1288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_recvmsg: invalid message pointer", message != NULL, return ERR_ARG;);
 3157              		.loc 1 1288 3
 3158 000c BB68     		ldr	r3, [r7, #8]
 3159 000e 002B     		cmp	r3, #0
 3160 0010 09D1     		bne	.L202
 3161              		.loc 1 1288 3 is_stmt 0 discriminator 1
 3162 0012 854B     		ldr	r3, .L228
 3163 0014 4FF4A162 		mov	r2, #1288
 3164 0018 8449     		ldr	r1, .L228+4
 3165 001a 8548     		ldr	r0, .L228+8
 3166 001c FFF7FEFF 		bl	printf
 3167 0020 6FF00F03 		mvn	r3, #15
 3168 0024 FCE0     		b	.L203
 3169              	.L202:
1289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_recvmsg: unsupported flags", (flags & ~(MSG_PEEK|MSG_DONTWAIT)) == 0,
 3170              		.loc 1 1289 3 is_stmt 1
 3171 0026 7B68     		ldr	r3, [r7, #4]
 3172 0028 23F00903 		bic	r3, r3, #9
 3173 002c 002B     		cmp	r3, #0
 3174 002e 0CD0     		beq	.L204
 3175              		.loc 1 1289 3 is_stmt 0 discriminator 1
 3176 0030 7D4B     		ldr	r3, .L228
 3177 0032 40F20A52 		movw	r2, #1290
 3178 0036 7F49     		ldr	r1, .L228+12
 3179 0038 7D48     		ldr	r0, .L228+8
 3180 003a FFF7FEFF 		bl	printf
 3181 003e 7E4B     		ldr	r3, .L228+16
 3182 0040 5F22     		movs	r2, #95
ARM GAS  /tmp/ccsCUhT2.s 			page 80


 3183 0042 1A60     		str	r2, [r3]
 3184 0044 4FF0FF33 		mov	r3, #-1
 3185 0048 EAE0     		b	.L203
 3186              	.L204:
1290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              set_errno(EOPNOTSUPP); return -1;);
1291:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((message->msg_iovlen <= 0) || (message->msg_iovlen > IOV_MAX)) {
 3187              		.loc 1 1292 15 is_stmt 1
 3188 004a BB68     		ldr	r3, [r7, #8]
 3189 004c DB68     		ldr	r3, [r3, #12]
 3190              		.loc 1 1292 6
 3191 004e 002B     		cmp	r3, #0
 3192 0050 04DD     		ble	.L205
 3193              		.loc 1 1292 45 discriminator 1
 3194 0052 BB68     		ldr	r3, [r7, #8]
 3195 0054 DB68     		ldr	r3, [r3, #12]
 3196              		.loc 1 1292 34 discriminator 1
 3197 0056 B3F5806F 		cmp	r3, #1024
 3198 005a 05DD     		ble	.L206
 3199              	.L205:
1293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EMSGSIZE);
 3200              		.loc 1 1293 5 discriminator 1
 3201 005c 764B     		ldr	r3, .L228+16
 3202 005e 5A22     		movs	r2, #90
 3203 0060 1A60     		str	r2, [r3]
1294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3204              		.loc 1 1294 12 discriminator 1
 3205 0062 4FF0FF33 		mov	r3, #-1
 3206 0066 DBE0     		b	.L203
 3207              	.L206:
1295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1297:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 3208              		.loc 1 1297 10
 3209 0068 F868     		ldr	r0, [r7, #12]
 3210 006a FFF7FEFF 		bl	get_socket
 3211 006e 3863     		str	r0, [r7, #48]
1298:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3212              		.loc 1 1298 6
 3213 0070 3B6B     		ldr	r3, [r7, #48]
 3214 0072 002B     		cmp	r3, #0
 3215 0074 02D1     		bne	.L207
1299:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3216              		.loc 1 1299 12
 3217 0076 4FF0FF33 		mov	r3, #-1
 3218 007a D1E0     		b	.L203
 3219              	.L207:
1300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1301:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1302:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* check for valid vectors */
1303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buflen = 0;
 3220              		.loc 1 1303 10
 3221 007c 0023     		movs	r3, #0
 3222 007e BB63     		str	r3, [r7, #56]
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = 0; i < message->msg_iovlen; i++) {
 3223              		.loc 1 1304 10
 3224 0080 0023     		movs	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 81


 3225 0082 FB63     		str	r3, [r7, #60]
 3226              		.loc 1 1304 3
 3227 0084 35E0     		b	.L208
 3228              	.L212:
1305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((message->msg_iov[i].iov_base == NULL) || ((ssize_t)message->msg_iov[i].iov_len <= 0) ||
 3229              		.loc 1 1305 17
 3230 0086 BB68     		ldr	r3, [r7, #8]
 3231 0088 9A68     		ldr	r2, [r3, #8]
 3232              		.loc 1 1305 26
 3233 008a FB6B     		ldr	r3, [r7, #60]
 3234 008c DB00     		lsls	r3, r3, #3
 3235 008e 1344     		add	r3, r3, r2
 3236              		.loc 1 1305 29
 3237 0090 1B68     		ldr	r3, [r3]
 3238              		.loc 1 1305 8
 3239 0092 002B     		cmp	r3, #0
 3240 0094 12D0     		beq	.L209
 3241              		.loc 1 1305 68 discriminator 1
 3242 0096 BB68     		ldr	r3, [r7, #8]
 3243 0098 9A68     		ldr	r2, [r3, #8]
 3244              		.loc 1 1305 77 discriminator 1
 3245 009a FB6B     		ldr	r3, [r7, #60]
 3246 009c DB00     		lsls	r3, r3, #3
 3247 009e 1344     		add	r3, r3, r2
 3248              		.loc 1 1305 80 discriminator 1
 3249 00a0 5B68     		ldr	r3, [r3, #4]
 3250              		.loc 1 1305 95 discriminator 1
 3251 00a2 002B     		cmp	r3, #0
 3252 00a4 0ADD     		ble	.L209
1306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ((size_t)(ssize_t)message->msg_iov[i].iov_len != message->msg_iov[i].iov_len) ||
1307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ((ssize_t)(buflen + (ssize_t)message->msg_iov[i].iov_len) <= 0)) {
 3253              		.loc 1 1307 45
 3254 00a6 BB68     		ldr	r3, [r7, #8]
 3255 00a8 9A68     		ldr	r2, [r3, #8]
 3256              		.loc 1 1307 54
 3257 00aa FB6B     		ldr	r3, [r7, #60]
 3258 00ac DB00     		lsls	r3, r3, #3
 3259 00ae 1344     		add	r3, r3, r2
 3260              		.loc 1 1307 57
 3261 00b0 5B68     		ldr	r3, [r3, #4]
 3262              		.loc 1 1307 29
 3263 00b2 1A46     		mov	r2, r3
 3264              		.loc 1 1307 10
 3265 00b4 BB6B     		ldr	r3, [r7, #56]
 3266 00b6 1344     		add	r3, r3, r2
1306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ((size_t)(ssize_t)message->msg_iov[i].iov_len != message->msg_iov[i].iov_len) ||
 3267              		.loc 1 1306 87
 3268 00b8 002B     		cmp	r3, #0
 3269 00ba 0DDC     		bgt	.L210
 3270              	.L209:
 3271              	.LBB30:
1308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(ERR_VAL));
 3272              		.loc 1 1308 7
 3273 00bc 6FF00500 		mvn	r0, #5
 3274 00c0 FFF7FEFF 		bl	err_to_errno
 3275 00c4 F862     		str	r0, [r7, #44]
 3276 00c6 FB6A     		ldr	r3, [r7, #44]
ARM GAS  /tmp/ccsCUhT2.s 			page 82


 3277 00c8 002B     		cmp	r3, #0
 3278 00ca 02D0     		beq	.L211
 3279              		.loc 1 1308 7 is_stmt 0 discriminator 1
 3280 00cc 5A4A     		ldr	r2, .L228+16
 3281 00ce FB6A     		ldr	r3, [r7, #44]
 3282 00d0 1360     		str	r3, [r2]
 3283              	.L211:
 3284              	.LBE30:
1309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
1310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3285              		.loc 1 1310 14 is_stmt 1
 3286 00d2 4FF0FF33 		mov	r3, #-1
 3287 00d6 A3E0     		b	.L203
 3288              	.L210:
1311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen = (ssize_t)(buflen + (ssize_t)message->msg_iov[i].iov_len);
 3289              		.loc 1 1312 49 discriminator 2
 3290 00d8 BB68     		ldr	r3, [r7, #8]
 3291 00da 9A68     		ldr	r2, [r3, #8]
 3292              		.loc 1 1312 58 discriminator 2
 3293 00dc FB6B     		ldr	r3, [r7, #60]
 3294 00de DB00     		lsls	r3, r3, #3
 3295 00e0 1344     		add	r3, r3, r2
 3296              		.loc 1 1312 61 discriminator 2
 3297 00e2 5B68     		ldr	r3, [r3, #4]
 3298              		.loc 1 1312 33 discriminator 2
 3299 00e4 1A46     		mov	r2, r3
 3300              		.loc 1 1312 12 discriminator 2
 3301 00e6 BB6B     		ldr	r3, [r7, #56]
 3302 00e8 1344     		add	r3, r3, r2
 3303 00ea BB63     		str	r3, [r7, #56]
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((message->msg_iov[i].iov_base == NULL) || ((ssize_t)message->msg_iov[i].iov_len <= 0) ||
 3304              		.loc 1 1304 41 discriminator 2
 3305 00ec FB6B     		ldr	r3, [r7, #60]
 3306 00ee 0133     		adds	r3, r3, #1
 3307 00f0 FB63     		str	r3, [r7, #60]
 3308              	.L208:
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((message->msg_iov[i].iov_base == NULL) || ((ssize_t)message->msg_iov[i].iov_len <= 0) ||
 3309              		.loc 1 1304 26 discriminator 1
 3310 00f2 BB68     		ldr	r3, [r7, #8]
 3311 00f4 DB68     		ldr	r3, [r3, #12]
1304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((message->msg_iov[i].iov_base == NULL) || ((ssize_t)message->msg_iov[i].iov_len <= 0) ||
 3312              		.loc 1 1304 3 discriminator 1
 3313 00f6 FA6B     		ldr	r2, [r7, #60]
 3314 00f8 9A42     		cmp	r2, r3
 3315 00fa C4DB     		blt	.L212
1313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1314:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1315:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 3316              		.loc 1 1315 7
 3317 00fc 3B6B     		ldr	r3, [r7, #48]
 3318 00fe 1B68     		ldr	r3, [r3]
 3319 0100 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3320 0102 03F0F003 		and	r3, r3, #240
 3321              		.loc 1 1315 6
 3322 0106 102B     		cmp	r3, #16
 3323 0108 54D1     		bne	.L213
ARM GAS  /tmp/ccsCUhT2.s 			page 83


 3324              	.LBB31:
1316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     int recv_flags = flags;
 3325              		.loc 1 1317 9
 3326 010a 7B68     		ldr	r3, [r7, #4]
 3327 010c 7B63     		str	r3, [r7, #52]
1318:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     message->msg_flags = 0;
 3328              		.loc 1 1318 24
 3329 010e BB68     		ldr	r3, [r7, #8]
 3330 0110 0022     		movs	r2, #0
 3331 0112 9A61     		str	r2, [r3, #24]
1319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* recv the data */
1320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     buflen = 0;
 3332              		.loc 1 1320 12
 3333 0114 0023     		movs	r3, #0
 3334 0116 BB63     		str	r3, [r7, #56]
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < message->msg_iovlen; i++) {
 3335              		.loc 1 1321 12
 3336 0118 0023     		movs	r3, #0
 3337 011a FB63     		str	r3, [r7, #60]
 3338              		.loc 1 1321 5
 3339 011c 36E0     		b	.L214
 3340              	.L220:
 3341              	.LBB32:
1322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* try to receive into this vector's buffer */
1323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ssize_t recvd_local = lwip_recv_tcp(sock, message->msg_iov[i].iov_base, message->msg_iov[i].i
 3342              		.loc 1 1323 56
 3343 011e BB68     		ldr	r3, [r7, #8]
 3344 0120 9A68     		ldr	r2, [r3, #8]
 3345              		.loc 1 1323 65
 3346 0122 FB6B     		ldr	r3, [r7, #60]
 3347 0124 DB00     		lsls	r3, r3, #3
 3348 0126 1344     		add	r3, r3, r2
 3349              		.loc 1 1323 29
 3350 0128 1968     		ldr	r1, [r3]
 3351              		.loc 1 1323 86
 3352 012a BB68     		ldr	r3, [r7, #8]
 3353 012c 9A68     		ldr	r2, [r3, #8]
 3354              		.loc 1 1323 95
 3355 012e FB6B     		ldr	r3, [r7, #60]
 3356 0130 DB00     		lsls	r3, r3, #3
 3357 0132 1344     		add	r3, r3, r2
 3358              		.loc 1 1323 29
 3359 0134 5A68     		ldr	r2, [r3, #4]
 3360 0136 7B6B     		ldr	r3, [r7, #52]
 3361 0138 386B     		ldr	r0, [r7, #48]
 3362 013a FFF7FEFF 		bl	lwip_recv_tcp
 3363 013e B862     		str	r0, [r7, #40]
1324:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (recvd_local > 0) {
 3364              		.loc 1 1324 10
 3365 0140 BB6A     		ldr	r3, [r7, #40]
 3366 0142 002B     		cmp	r3, #0
 3367 0144 03DD     		ble	.L215
1325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* sum up received bytes */
1326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         buflen += recvd_local;
 3368              		.loc 1 1326 16
 3369 0146 BA6B     		ldr	r2, [r7, #56]
ARM GAS  /tmp/ccsCUhT2.s 			page 84


 3370 0148 BB6A     		ldr	r3, [r7, #40]
 3371 014a 1344     		add	r3, r3, r2
 3372 014c BB63     		str	r3, [r7, #56]
 3373              	.L215:
1327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((recvd_local < 0) || (recvd_local < (int)message->msg_iov[i].iov_len) ||
 3374              		.loc 1 1328 10
 3375 014e BB6A     		ldr	r3, [r7, #40]
 3376 0150 002B     		cmp	r3, #0
 3377 0152 0EDB     		blt	.L216
 3378              		.loc 1 1328 59 discriminator 1
 3379 0154 BB68     		ldr	r3, [r7, #8]
 3380 0156 9A68     		ldr	r2, [r3, #8]
 3381              		.loc 1 1328 68 discriminator 1
 3382 0158 FB6B     		ldr	r3, [r7, #60]
 3383 015a DB00     		lsls	r3, r3, #3
 3384 015c 1344     		add	r3, r3, r2
 3385              		.loc 1 1328 71 discriminator 1
 3386 015e 5B68     		ldr	r3, [r3, #4]
 3387              		.loc 1 1328 47 discriminator 1
 3388 0160 1A46     		mov	r2, r3
 3389              		.loc 1 1328 29 discriminator 1
 3390 0162 BB6A     		ldr	r3, [r7, #40]
 3391 0164 9342     		cmp	r3, r2
 3392 0166 04DB     		blt	.L216
1329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (flags & MSG_PEEK)) {
 3393              		.loc 1 1329 18 discriminator 2
 3394 0168 7B68     		ldr	r3, [r7, #4]
 3395 016a 03F00103 		and	r3, r3, #1
1328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           (flags & MSG_PEEK)) {
 3396              		.loc 1 1328 81 discriminator 2
 3397 016e 002B     		cmp	r3, #0
 3398 0170 05D0     		beq	.L217
 3399              	.L216:
1330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* returned prematurely (or peeking, which might actually be limitated to the first iov) */
1331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (buflen <= 0) {
 3400              		.loc 1 1331 12
 3401 0172 BB6B     		ldr	r3, [r7, #56]
 3402 0174 002B     		cmp	r3, #0
 3403 0176 0FDC     		bgt	.L227
1332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* nothing received at all, propagate the error */
1333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           buflen = recvd_local;
 3404              		.loc 1 1333 18
 3405 0178 BB6A     		ldr	r3, [r7, #40]
 3406 017a BB63     		str	r3, [r7, #56]
1334:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 3407              		.loc 1 1335 9
 3408 017c 0CE0     		b	.L227
 3409              	.L217:
1336:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* pass MSG_DONTWAIT to lwip_recv_tcp() to prevent waiting for more data */
1338:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       recv_flags |= MSG_DONTWAIT;
 3410              		.loc 1 1338 18 discriminator 2
 3411 017e 7B6B     		ldr	r3, [r7, #52]
 3412 0180 43F00803 		orr	r3, r3, #8
 3413 0184 7B63     		str	r3, [r7, #52]
ARM GAS  /tmp/ccsCUhT2.s 			page 85


 3414              	.LBE32:
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* try to receive into this vector's buffer */
 3415              		.loc 1 1321 43 discriminator 2
 3416 0186 FB6B     		ldr	r3, [r7, #60]
 3417 0188 0133     		adds	r3, r3, #1
 3418 018a FB63     		str	r3, [r7, #60]
 3419              	.L214:
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* try to receive into this vector's buffer */
 3420              		.loc 1 1321 28 discriminator 1
 3421 018c BB68     		ldr	r3, [r7, #8]
 3422 018e DB68     		ldr	r3, [r3, #12]
1321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* try to receive into this vector's buffer */
 3423              		.loc 1 1321 5 discriminator 1
 3424 0190 FA6B     		ldr	r2, [r7, #60]
 3425 0192 9A42     		cmp	r2, r3
 3426 0194 C3DB     		blt	.L220
 3427 0196 00E0     		b	.L219
 3428              	.L227:
 3429              	.LBB33:
1335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 3430              		.loc 1 1335 9
 3431 0198 00BF     		nop
 3432              	.L219:
 3433              	.LBE33:
1339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (buflen > 0) {
 3434              		.loc 1 1340 8
 3435 019a BB6B     		ldr	r3, [r7, #56]
 3436 019c 002B     		cmp	r3, #0
 3437 019e 07DD     		ble	.L221
 3438              	.LBB34:
1341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* reset socket error since we have received something */
1342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
 3439              		.loc 1 1342 7
 3440 01a0 0023     		movs	r3, #0
 3441 01a2 7B62     		str	r3, [r7, #36]
 3442 01a4 7B6A     		ldr	r3, [r7, #36]
 3443 01a6 002B     		cmp	r3, #0
 3444 01a8 02D0     		beq	.L221
 3445              		.loc 1 1342 7 is_stmt 0 discriminator 1
 3446 01aa 234A     		ldr	r2, .L228+16
 3447 01ac 7B6A     		ldr	r3, [r7, #36]
 3448 01ae 1360     		str	r3, [r2]
 3449              	.L221:
 3450              	.LBE34:
1343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* " If the socket is connected, the msg_name and msg_namelen members shall be ignored." */
1345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return buflen;
 3451              		.loc 1 1346 12 is_stmt 1
 3452 01b0 BB6B     		ldr	r3, [r7, #56]
 3453 01b2 35E0     		b	.L203
 3454              	.L213:
 3455              	.LBE31:
 3456              	.LBB35:
1347:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
ARM GAS  /tmp/ccsCUhT2.s 			page 86


1349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1351:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* else, UDP and RAW NETCONNs */
1354:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP || LWIP_RAW
1355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     u16_t datagram_len = 0;
 3457              		.loc 1 1356 11
 3458 01b4 0023     		movs	r3, #0
 3459 01b6 FB82     		strh	r3, [r7, #22]	@ movhi
1357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err_t err;
1358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = lwip_recvfrom_udp_raw(sock, flags, message, &datagram_len, s);
 3460              		.loc 1 1358 11
 3461 01b8 07F11602 		add	r2, r7, #22
 3462 01bc FB68     		ldr	r3, [r7, #12]
 3463 01be 0093     		str	r3, [sp]
 3464 01c0 1346     		mov	r3, r2
 3465 01c2 BA68     		ldr	r2, [r7, #8]
 3466 01c4 7968     		ldr	r1, [r7, #4]
 3467 01c6 386B     		ldr	r0, [r7, #48]
 3468 01c8 FFF7FEFF 		bl	lwip_recvfrom_udp_raw
 3469 01cc 0346     		mov	r3, r0
 3470 01ce 87F82330 		strb	r3, [r7, #35]
1359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err != ERR_OK) {
 3471              		.loc 1 1359 8
 3472 01d2 97F92330 		ldrsb	r3, [r7, #35]
 3473 01d6 002B     		cmp	r3, #0
 3474 01d8 0ED0     		beq	.L222
 3475              	.LBB36:
1360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_recvmsg[UDP/RAW](%d): buf == NULL, error is \"%s\"!\n",
1361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, lwip_strerr(err)));
1362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, err_to_errno(err));
 3476              		.loc 1 1362 7
 3477 01da 97F92330 		ldrsb	r3, [r7, #35]
 3478 01de 1846     		mov	r0, r3
 3479 01e0 FFF7FEFF 		bl	err_to_errno
 3480 01e4 F861     		str	r0, [r7, #28]
 3481 01e6 FB69     		ldr	r3, [r7, #28]
 3482 01e8 002B     		cmp	r3, #0
 3483 01ea 02D0     		beq	.L223
 3484              		.loc 1 1362 7 is_stmt 0 discriminator 1
 3485 01ec 124A     		ldr	r2, .L228+16
 3486 01ee FB69     		ldr	r3, [r7, #28]
 3487 01f0 1360     		str	r3, [r2]
 3488              	.L223:
 3489              	.LBE36:
1363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
1364:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 3490              		.loc 1 1364 14 is_stmt 1
 3491 01f2 4FF0FF33 		mov	r3, #-1
 3492 01f6 13E0     		b	.L203
 3493              	.L222:
1365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (datagram_len > buflen) {
 3494              		.loc 1 1366 22
 3495 01f8 FB8A     		ldrh	r3, [r7, #22]
ARM GAS  /tmp/ccsCUhT2.s 			page 87


 3496 01fa 1A46     		mov	r2, r3
 3497              		.loc 1 1366 8
 3498 01fc BB6B     		ldr	r3, [r7, #56]
 3499 01fe 9342     		cmp	r3, r2
 3500 0200 05DA     		bge	.L225
1367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       message->msg_flags |= MSG_TRUNC;
 3501              		.loc 1 1367 26
 3502 0202 BB68     		ldr	r3, [r7, #8]
 3503 0204 9B69     		ldr	r3, [r3, #24]
 3504 0206 43F00402 		orr	r2, r3, #4
 3505 020a BB68     		ldr	r3, [r7, #8]
 3506 020c 9A61     		str	r2, [r3, #24]
 3507              	.L225:
 3508              	.LBB37:
1368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1369:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, 0);
 3509              		.loc 1 1370 5
 3510 020e 0023     		movs	r3, #0
 3511 0210 BB61     		str	r3, [r7, #24]
 3512 0212 BB69     		ldr	r3, [r7, #24]
 3513 0214 002B     		cmp	r3, #0
 3514 0216 02D0     		beq	.L226
 3515              		.loc 1 1370 5 is_stmt 0 discriminator 1
 3516 0218 074A     		ldr	r2, .L228+16
 3517 021a BB69     		ldr	r3, [r7, #24]
 3518 021c 1360     		str	r3, [r2]
 3519              	.L226:
 3520              	.LBE37:
1371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (int)datagram_len;
 3521              		.loc 1 1372 12 is_stmt 1
 3522 021e FB8A     		ldrh	r3, [r7, #22]
 3523              	.L203:
 3524              	.LBE35:
1373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1374:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_UDP || LWIP_RAW */
1375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(ERR_ARG));
1376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
1377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
1378:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP || LWIP_RAW */
1379:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3525              		.loc 1 1379 1 discriminator 1
 3526 0220 1846     		mov	r0, r3
 3527 0222 4037     		adds	r7, r7, #64
 3528              	.LCFI128:
 3529              		.cfi_def_cfa_offset 8
 3530 0224 BD46     		mov	sp, r7
 3531              	.LCFI129:
 3532              		.cfi_def_cfa_register 13
 3533              		@ sp needed
 3534 0226 80BD     		pop	{r7, pc}
 3535              	.L229:
 3536              		.align	2
 3537              	.L228:
 3538 0228 00000000 		.word	.LC0
 3539 022c E8010000 		.word	.LC19
ARM GAS  /tmp/ccsCUhT2.s 			page 88


 3540 0230 50000000 		.word	.LC2
 3541 0234 10020000 		.word	.LC20
 3542 0238 00000000 		.word	errno
 3543              		.cfi_endproc
 3544              	.LFE162:
 3546              		.section	.text.lwip_send,"ax",%progbits
 3547              		.align	1
 3548              		.global	lwip_send
 3549              		.syntax unified
 3550              		.thumb
 3551              		.thumb_func
 3552              		.fpu fpv4-sp-d16
 3554              	lwip_send:
 3555              	.LFB163:
1380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1381:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1382:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_send(int s, const void *data, size_t size, int flags)
1383:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 3556              		.loc 1 1383 1
 3557              		.cfi_startproc
 3558              		@ args = 0, pretend = 0, frame = 32
 3559              		@ frame_needed = 1, uses_anonymous_args = 0
 3560 0000 80B5     		push	{r7, lr}
 3561              	.LCFI130:
 3562              		.cfi_def_cfa_offset 8
 3563              		.cfi_offset 7, -8
 3564              		.cfi_offset 14, -4
 3565 0002 8AB0     		sub	sp, sp, #40
 3566              	.LCFI131:
 3567              		.cfi_def_cfa_offset 48
 3568 0004 02AF     		add	r7, sp, #8
 3569              	.LCFI132:
 3570              		.cfi_def_cfa 7, 40
 3571 0006 F860     		str	r0, [r7, #12]
 3572 0008 B960     		str	r1, [r7, #8]
 3573 000a 7A60     		str	r2, [r7, #4]
 3574 000c 3B60     		str	r3, [r7]
1384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
1387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
1388:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d, data=%p, size=%"SZT_F", flags=0x%x)\n",
1390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               s, data, size, flags));
1391:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 3575              		.loc 1 1392 10
 3576 000e F868     		ldr	r0, [r7, #12]
 3577 0010 FFF7FEFF 		bl	get_socket
 3578 0014 F861     		str	r0, [r7, #28]
1393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3579              		.loc 1 1393 6
 3580 0016 FB69     		ldr	r3, [r7, #28]
 3581 0018 002B     		cmp	r3, #0
 3582 001a 02D1     		bne	.L231
1394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3583              		.loc 1 1394 12
ARM GAS  /tmp/ccsCUhT2.s 			page 89


 3584 001c 4FF0FF33 		mov	r3, #-1
 3585 0020 46E0     		b	.L239
 3586              	.L231:
1395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1396:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 3587              		.loc 1 1397 7
 3588 0022 FB69     		ldr	r3, [r7, #28]
 3589 0024 1B68     		ldr	r3, [r3]
 3590 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3591 0028 03F0F003 		and	r3, r3, #240
 3592              		.loc 1 1397 6
 3593 002c 102B     		cmp	r3, #16
 3594 002e 0BD0     		beq	.L233
1398:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if (LWIP_UDP || LWIP_RAW)
1399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_sendto(s, data, size, flags, NULL, 0);
 3595              		.loc 1 1400 12
 3596 0030 0023     		movs	r3, #0
 3597 0032 0193     		str	r3, [sp, #4]
 3598 0034 0023     		movs	r3, #0
 3599 0036 0093     		str	r3, [sp]
 3600 0038 3B68     		ldr	r3, [r7]
 3601 003a 7A68     		ldr	r2, [r7, #4]
 3602 003c B968     		ldr	r1, [r7, #8]
 3603 003e F868     		ldr	r0, [r7, #12]
 3604 0040 FFF7FEFF 		bl	lwip_sendto
 3605 0044 0346     		mov	r3, r0
 3606 0046 33E0     		b	.L239
 3607              	.L233:
1401:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* (LWIP_UDP || LWIP_RAW) */
1402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1403:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1405:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* (LWIP_UDP || LWIP_RAW) */
1406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1407:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   write_flags = (u8_t)(NETCONN_COPY |
1409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                        ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3608              		.loc 1 1409 32
 3609 0048 3B68     		ldr	r3, [r7]
 3610 004a 03F01003 		and	r3, r3, #16
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                        ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3611              		.loc 1 1408 37
 3612 004e 002B     		cmp	r3, #0
 3613 0050 01D0     		beq	.L234
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                        ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3614              		.loc 1 1408 37 is_stmt 0 discriminator 1
 3615 0052 0322     		movs	r2, #3
 3616 0054 00E0     		b	.L235
 3617              	.L234:
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                        ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3618              		.loc 1 1408 37 discriminator 2
 3619 0056 0122     		movs	r2, #1
 3620              	.L235:
 3621              		.loc 1 1409 73 is_stmt 1
 3622 0058 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccsCUhT2.s 			page 90


 3623 005a 5B10     		asrs	r3, r3, #1
 3624 005c 5BB2     		sxtb	r3, r3
 3625 005e 03F00403 		and	r3, r3, #4
 3626 0062 5BB2     		sxtb	r3, r3
 3627 0064 1343     		orrs	r3, r3, r2
 3628 0066 5BB2     		sxtb	r3, r3
1408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                        ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3629              		.loc 1 1408 15
 3630 0068 FB76     		strb	r3, [r7, #27]
1410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                        ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0));
1411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   written = 0;
 3631              		.loc 1 1411 11
 3632 006a 0023     		movs	r3, #0
 3633 006c 3B61     		str	r3, [r7, #16]
1412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_write_partly(sock->conn, data, size, write_flags, &written);
 3634              		.loc 1 1412 9
 3635 006e FB69     		ldr	r3, [r7, #28]
 3636 0070 1868     		ldr	r0, [r3]
 3637 0072 FA7E     		ldrb	r2, [r7, #27]	@ zero_extendqisi2
 3638 0074 07F11003 		add	r3, r7, #16
 3639 0078 0093     		str	r3, [sp]
 3640 007a 1346     		mov	r3, r2
 3641 007c 7A68     		ldr	r2, [r7, #4]
 3642 007e B968     		ldr	r1, [r7, #8]
 3643 0080 FFF7FEFF 		bl	netconn_write_partly
 3644 0084 0346     		mov	r3, r0
 3645 0086 BB76     		strb	r3, [r7, #26]
 3646              	.LBB38:
1413:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_send(%d) err=%d written=%"SZT_F"\n", s, err, written));
1415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
 3647              		.loc 1 1415 3
 3648 0088 97F91A30 		ldrsb	r3, [r7, #26]
 3649 008c 1846     		mov	r0, r3
 3650 008e FFF7FEFF 		bl	err_to_errno
 3651 0092 7861     		str	r0, [r7, #20]
 3652 0094 7B69     		ldr	r3, [r7, #20]
 3653 0096 002B     		cmp	r3, #0
 3654 0098 02D0     		beq	.L236
 3655              		.loc 1 1415 3 is_stmt 0 discriminator 1
 3656 009a 074A     		ldr	r2, .L240
 3657 009c 7B69     		ldr	r3, [r7, #20]
 3658 009e 1360     		str	r3, [r2]
 3659              	.L236:
 3660              	.LBE38:
1416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
1417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* casting 'written' to ssize_t is OK here since the netconn API limits it to SSIZE_MAX */
1418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? (ssize_t)written : -1);
 3661              		.loc 1 1418 44 is_stmt 1
 3662 00a0 97F91A30 		ldrsb	r3, [r7, #26]
 3663 00a4 002B     		cmp	r3, #0
 3664 00a6 01D1     		bne	.L237
 3665              		.loc 1 1418 44 is_stmt 0 discriminator 1
 3666 00a8 3B69     		ldr	r3, [r7, #16]
 3667 00aa 01E0     		b	.L239
 3668              	.L237:
 3669              		.loc 1 1418 44 discriminator 2
ARM GAS  /tmp/ccsCUhT2.s 			page 91


 3670 00ac 4FF0FF33 		mov	r3, #-1
 3671              	.L239:
1419:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 3672              		.loc 1 1419 1 is_stmt 1 discriminator 1
 3673 00b0 1846     		mov	r0, r3
 3674 00b2 2037     		adds	r7, r7, #32
 3675              	.LCFI133:
 3676              		.cfi_def_cfa_offset 8
 3677 00b4 BD46     		mov	sp, r7
 3678              	.LCFI134:
 3679              		.cfi_def_cfa_register 13
 3680              		@ sp needed
 3681 00b6 80BD     		pop	{r7, pc}
 3682              	.L241:
 3683              		.align	2
 3684              	.L240:
 3685 00b8 00000000 		.word	errno
 3686              		.cfi_endproc
 3687              	.LFE163:
 3689              		.section	.rodata
 3690              		.align	2
 3691              	.LC21:
 3692 0230 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr\000"
 3692      5F73656E 
 3692      646D7367 
 3692      3A20696E 
 3692      76616C69 
 3693 024d 000000   		.align	2
 3694              	.LC22:
 3695 0250 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr iov\000"
 3695      5F73656E 
 3695      646D7367 
 3695      3A20696E 
 3695      76616C69 
 3696 0271 000000   		.align	2
 3697              	.LC23:
 3698 0274 6C776970 		.ascii	"lwip_sendmsg: maximum iovs exceeded\000"
 3698      5F73656E 
 3698      646D7367 
 3698      3A206D61 
 3698      78696D75 
 3699              		.align	2
 3700              	.LC24:
 3701 0298 6C776970 		.ascii	"lwip_sendmsg: unsupported flags\000"
 3701      5F73656E 
 3701      646D7367 
 3701      3A20756E 
 3701      73757070 
 3702              		.align	2
 3703              	.LC25:
 3704 02b8 6C776970 		.ascii	"lwip_sendmsg: invalid msghdr name\000"
 3704      5F73656E 
 3704      646D7367 
 3704      3A20696E 
 3704      76616C69 
 3705              		.section	.text.lwip_sendmsg,"ax",%progbits
 3706              		.align	1
ARM GAS  /tmp/ccsCUhT2.s 			page 92


 3707              		.global	lwip_sendmsg
 3708              		.syntax unified
 3709              		.thumb
 3710              		.thumb_func
 3711              		.fpu fpv4-sp-d16
 3713              	lwip_sendmsg:
 3714              	.LFB164:
1420:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1421:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1422:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendmsg(int s, const struct msghdr *msg, int flags)
1423:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 3715              		.loc 1 1423 1
 3716              		.cfi_startproc
 3717              		@ args = 0, pretend = 0, frame = 96
 3718              		@ frame_needed = 1, uses_anonymous_args = 0
 3719 0000 90B5     		push	{r4, r7, lr}
 3720              	.LCFI135:
 3721              		.cfi_def_cfa_offset 12
 3722              		.cfi_offset 4, -12
 3723              		.cfi_offset 7, -8
 3724              		.cfi_offset 14, -4
 3725 0002 9BB0     		sub	sp, sp, #108
 3726              	.LCFI136:
 3727              		.cfi_def_cfa_offset 120
 3728 0004 02AF     		add	r7, sp, #8
 3729              	.LCFI137:
 3730              		.cfi_def_cfa 7, 112
 3731 0006 F860     		str	r0, [r7, #12]
 3732 0008 B960     		str	r1, [r7, #8]
 3733 000a 7A60     		str	r2, [r7, #4]
1424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1425:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t write_flags;
1427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   size_t written;
1428:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err = ERR_OK;
 3734              		.loc 1 1429 9
 3735 000c 0023     		movs	r3, #0
 3736 000e 87F85F30 		strb	r3, [r7, #95]
1430:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 3737              		.loc 1 1431 10
 3738 0012 F868     		ldr	r0, [r7, #12]
 3739 0014 FFF7FEFF 		bl	get_socket
 3740 0018 3865     		str	r0, [r7, #80]
1432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 3741              		.loc 1 1432 6
 3742 001a 3B6D     		ldr	r3, [r7, #80]
 3743 001c 002B     		cmp	r3, #0
 3744 001e 02D1     		bne	.L243
1433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 3745              		.loc 1 1433 12
 3746 0020 4FF0FF33 		mov	r3, #-1
 3747 0024 81E1     		b	.L280
 3748              	.L243:
1434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1435:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  /tmp/ccsCUhT2.s 			page 93


1436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr", msg != NULL,
 3749              		.loc 1 1436 3
 3750 0026 BB68     		ldr	r3, [r7, #8]
 3751 0028 002B     		cmp	r3, #0
 3752 002a 14D1     		bne	.L245
 3753              		.loc 1 1436 3 is_stmt 0 discriminator 1
 3754 002c 904B     		ldr	r3, .L282
 3755 002e 40F29D52 		movw	r2, #1437
 3756 0032 9049     		ldr	r1, .L282+4
 3757 0034 9048     		ldr	r0, .L282+8
 3758 0036 FFF7FEFF 		bl	printf
 3759              	.LBB39:
 3760 003a 6FF00F00 		mvn	r0, #15
 3761 003e FFF7FEFF 		bl	err_to_errno
 3762 0042 F864     		str	r0, [r7, #76]
 3763 0044 FB6C     		ldr	r3, [r7, #76]
 3764 0046 002B     		cmp	r3, #0
 3765 0048 02D0     		beq	.L246
 3766              		.loc 1 1436 3 discriminator 2
 3767 004a 8C4A     		ldr	r2, .L282+12
 3768 004c FB6C     		ldr	r3, [r7, #76]
 3769 004e 1360     		str	r3, [r2]
 3770              	.L246:
 3771              	.LBE39:
 3772              		.loc 1 1436 3 discriminator 4
 3773 0050 4FF0FF33 		mov	r3, #-1
 3774 0054 69E1     		b	.L280
 3775              	.L245:
1437:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); done_socket(sock); return -1;);
1438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: invalid msghdr iov", msg->msg_iov != NULL,
 3776              		.loc 1 1438 3 is_stmt 1
 3777 0056 BB68     		ldr	r3, [r7, #8]
 3778 0058 9B68     		ldr	r3, [r3, #8]
 3779 005a 002B     		cmp	r3, #0
 3780 005c 14D1     		bne	.L247
 3781              		.loc 1 1438 3 is_stmt 0 discriminator 1
 3782 005e 844B     		ldr	r3, .L282
 3783 0060 40F29F52 		movw	r2, #1439
 3784 0064 8649     		ldr	r1, .L282+16
 3785 0066 8448     		ldr	r0, .L282+8
 3786 0068 FFF7FEFF 		bl	printf
 3787              	.LBB40:
 3788 006c 6FF00F00 		mvn	r0, #15
 3789 0070 FFF7FEFF 		bl	err_to_errno
 3790 0074 B864     		str	r0, [r7, #72]
 3791 0076 BB6C     		ldr	r3, [r7, #72]
 3792 0078 002B     		cmp	r3, #0
 3793 007a 02D0     		beq	.L248
 3794              		.loc 1 1438 3 discriminator 2
 3795 007c 7F4A     		ldr	r2, .L282+12
 3796 007e BB6C     		ldr	r3, [r7, #72]
 3797 0080 1360     		str	r3, [r2]
 3798              	.L248:
 3799              	.LBE40:
 3800              		.loc 1 1438 3 discriminator 4
 3801 0082 4FF0FF33 		mov	r3, #-1
 3802 0086 50E1     		b	.L280
ARM GAS  /tmp/ccsCUhT2.s 			page 94


 3803              	.L247:
1439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); done_socket(sock); return -1;);
1440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: maximum iovs exceeded", (msg->msg_iovlen > 0) && (msg->msg_iovlen <= IO
 3804              		.loc 1 1440 3 is_stmt 1
 3805 0088 BB68     		ldr	r3, [r7, #8]
 3806 008a DB68     		ldr	r3, [r3, #12]
 3807 008c 002B     		cmp	r3, #0
 3808 008e 04DD     		ble	.L249
 3809              		.loc 1 1440 3 is_stmt 0 discriminator 2
 3810 0090 BB68     		ldr	r3, [r7, #8]
 3811 0092 DB68     		ldr	r3, [r3, #12]
 3812 0094 B3F5806F 		cmp	r3, #1024
 3813 0098 11DD     		ble	.L250
 3814              	.L249:
 3815              		.loc 1 1440 3 discriminator 3
 3816 009a 754B     		ldr	r3, .L282
 3817 009c 40F2A152 		movw	r2, #1441
 3818 00a0 7849     		ldr	r1, .L282+20
 3819 00a2 7548     		ldr	r0, .L282+8
 3820 00a4 FFF7FEFF 		bl	printf
 3821              	.LBB41:
 3822 00a8 5A23     		movs	r3, #90
 3823 00aa 7B62     		str	r3, [r7, #36]
 3824 00ac 7B6A     		ldr	r3, [r7, #36]
 3825 00ae 002B     		cmp	r3, #0
 3826 00b0 02D0     		beq	.L251
 3827              		.loc 1 1440 3 discriminator 4
 3828 00b2 724A     		ldr	r2, .L282+12
 3829 00b4 7B6A     		ldr	r3, [r7, #36]
 3830 00b6 1360     		str	r3, [r2]
 3831              	.L251:
 3832              	.LBE41:
 3833              		.loc 1 1440 3 discriminator 6
 3834 00b8 4FF0FF33 		mov	r3, #-1
 3835 00bc 35E1     		b	.L280
 3836              	.L250:
1441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, EMSGSIZE); done_socket(sock); return -1;);
1442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendmsg: unsupported flags", (flags & ~(MSG_DONTWAIT | MSG_MORE)) == 0,
 3837              		.loc 1 1442 3 is_stmt 1
 3838 00be 7B68     		ldr	r3, [r7, #4]
 3839 00c0 23F01803 		bic	r3, r3, #24
 3840 00c4 002B     		cmp	r3, #0
 3841 00c6 11D0     		beq	.L252
 3842              		.loc 1 1442 3 is_stmt 0 discriminator 1
 3843 00c8 694B     		ldr	r3, .L282
 3844 00ca 40F2A352 		movw	r2, #1443
 3845 00ce 6E49     		ldr	r1, .L282+24
 3846 00d0 6948     		ldr	r0, .L282+8
 3847 00d2 FFF7FEFF 		bl	printf
 3848              	.LBB42:
 3849 00d6 5F23     		movs	r3, #95
 3850 00d8 7B64     		str	r3, [r7, #68]
 3851 00da 7B6C     		ldr	r3, [r7, #68]
 3852 00dc 002B     		cmp	r3, #0
 3853 00de 02D0     		beq	.L253
 3854              		.loc 1 1442 3 discriminator 2
 3855 00e0 664A     		ldr	r2, .L282+12
ARM GAS  /tmp/ccsCUhT2.s 			page 95


 3856 00e2 7B6C     		ldr	r3, [r7, #68]
 3857 00e4 1360     		str	r3, [r2]
 3858              	.L253:
 3859              	.LBE42:
 3860              		.loc 1 1442 3 discriminator 4
 3861 00e6 4FF0FF33 		mov	r3, #-1
 3862 00ea 1EE1     		b	.L280
 3863              	.L252:
1443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, EOPNOTSUPP); done_socket(sock); return -1;);
1444:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_control);
1446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_controllen);
1447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(msg->msg_flags);
1448:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 3864              		.loc 1 1449 7 is_stmt 1
 3865 00ec 3B6D     		ldr	r3, [r7, #80]
 3866 00ee 1B68     		ldr	r3, [r3]
 3867 00f0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3868 00f2 03F0F003 		and	r3, r3, #240
 3869              		.loc 1 1449 6
 3870 00f6 102B     		cmp	r3, #16
 3871 00f8 3AD1     		bne	.L254
1450:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     write_flags = (u8_t)(NETCONN_COPY |
1452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                          ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3872              		.loc 1 1452 34
 3873 00fa 7B68     		ldr	r3, [r7, #4]
 3874 00fc 03F01003 		and	r3, r3, #16
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                          ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3875              		.loc 1 1451 39
 3876 0100 002B     		cmp	r3, #0
 3877 0102 01D0     		beq	.L255
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                          ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3878              		.loc 1 1451 39 is_stmt 0 discriminator 1
 3879 0104 0322     		movs	r2, #3
 3880 0106 00E0     		b	.L256
 3881              	.L255:
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                          ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3882              		.loc 1 1451 39 discriminator 2
 3883 0108 0122     		movs	r2, #1
 3884              	.L256:
 3885              		.loc 1 1452 75 is_stmt 1
 3886 010a 7B68     		ldr	r3, [r7, #4]
 3887 010c 5B10     		asrs	r3, r3, #1
 3888 010e 5BB2     		sxtb	r3, r3
 3889 0110 03F00403 		and	r3, r3, #4
 3890 0114 5BB2     		sxtb	r3, r3
 3891 0116 1343     		orrs	r3, r3, r2
 3892 0118 5BB2     		sxtb	r3, r3
1451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                          ((flags & MSG_MORE)     ? NETCONN_MORE      : 0) |
 3893              		.loc 1 1451 17
 3894 011a 87F84330 		strb	r3, [r7, #67]
1453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                          ((flags & MSG_DONTWAIT) ? NETCONN_DONTBLOCK : 0));
1454:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     written = 0;
 3895              		.loc 1 1455 13
ARM GAS  /tmp/ccsCUhT2.s 			page 96


 3896 011e 0023     		movs	r3, #0
 3897 0120 3B62     		str	r3, [r7, #32]
1456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_write_vectors_partly(sock->conn, (struct netvector *)msg->msg_iov, (u16_t)msg->ms
 3898              		.loc 1 1456 11
 3899 0122 3B6D     		ldr	r3, [r7, #80]
 3900 0124 1868     		ldr	r0, [r3]
 3901              		.loc 1 1456 75
 3902 0126 BB68     		ldr	r3, [r7, #8]
 3903 0128 9968     		ldr	r1, [r3, #8]
 3904              		.loc 1 1456 96
 3905 012a BB68     		ldr	r3, [r7, #8]
 3906 012c DB68     		ldr	r3, [r3, #12]
 3907              		.loc 1 1456 11
 3908 012e 9AB2     		uxth	r2, r3
 3909 0130 97F84340 		ldrb	r4, [r7, #67]	@ zero_extendqisi2
 3910 0134 07F12003 		add	r3, r7, #32
 3911 0138 0093     		str	r3, [sp]
 3912 013a 2346     		mov	r3, r4
 3913 013c FFF7FEFF 		bl	netconn_write_vectors_partly
 3914 0140 0346     		mov	r3, r0
 3915 0142 87F85F30 		strb	r3, [r7, #95]
 3916              	.LBB43:
1457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 3917              		.loc 1 1457 5
 3918 0146 97F95F30 		ldrsb	r3, [r7, #95]
 3919 014a 1846     		mov	r0, r3
 3920 014c FFF7FEFF 		bl	err_to_errno
 3921 0150 F863     		str	r0, [r7, #60]
 3922 0152 FB6B     		ldr	r3, [r7, #60]
 3923 0154 002B     		cmp	r3, #0
 3924 0156 02D0     		beq	.L257
 3925              		.loc 1 1457 5 is_stmt 0 discriminator 1
 3926 0158 484A     		ldr	r2, .L282+12
 3927 015a FB6B     		ldr	r3, [r7, #60]
 3928 015c 1360     		str	r3, [r2]
 3929              	.L257:
 3930              	.LBE43:
1458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* casting 'written' to ssize_t is OK here since the netconn API limits it to SSIZE_MAX */
1460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? (ssize_t)written : -1);
 3931              		.loc 1 1460 46 is_stmt 1
 3932 015e 97F95F30 		ldrsb	r3, [r7, #95]
 3933 0162 002B     		cmp	r3, #0
 3934 0164 01D1     		bne	.L258
 3935              		.loc 1 1460 46 is_stmt 0 discriminator 1
 3936 0166 3B6A     		ldr	r3, [r7, #32]
 3937 0168 DFE0     		b	.L280
 3938              	.L258:
 3939              		.loc 1 1460 46 discriminator 2
 3940 016a 4FF0FF33 		mov	r3, #-1
 3941 016e DCE0     		b	.L280
 3942              	.L254:
 3943              	.LBB44:
1461:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
ARM GAS  /tmp/ccsCUhT2.s 			page 97


1465:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
1466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* else, UDP and RAW NETCONNs */
1468:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP || LWIP_RAW
1469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   {
1470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     struct netbuf chain_buf;
1471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     int i;
1472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ssize_t size = 0;
 3944              		.loc 1 1472 13 is_stmt 1
 3945 0170 0023     		movs	r3, #0
 3946 0172 7B65     		str	r3, [r7, #84]
1473:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ERROR("lwip_sendmsg: invalid msghdr name", (((msg->msg_name == NULL) && (msg->msg_namelen 
 3947              		.loc 1 1475 5
 3948 0174 BB68     		ldr	r3, [r7, #8]
 3949 0176 1B68     		ldr	r3, [r3]
 3950 0178 002B     		cmp	r3, #0
 3951 017a 03D1     		bne	.L260
 3952              		.loc 1 1475 5 is_stmt 0 discriminator 2
 3953 017c BB68     		ldr	r3, [r7, #8]
 3954 017e 5B68     		ldr	r3, [r3, #4]
 3955 0180 002B     		cmp	r3, #0
 3956 0182 18D0     		beq	.L261
 3957              	.L260:
 3958              		.loc 1 1475 5 discriminator 3
 3959 0184 BB68     		ldr	r3, [r7, #8]
 3960 0186 5B68     		ldr	r3, [r3, #4]
 3961 0188 102B     		cmp	r3, #16
 3962 018a 14D0     		beq	.L261
 3963              		.loc 1 1475 5 discriminator 4
 3964 018c 384B     		ldr	r3, .L282
 3965 018e 40F2C552 		movw	r2, #1477
 3966 0192 3E49     		ldr	r1, .L282+28
 3967 0194 3848     		ldr	r0, .L282+8
 3968 0196 FFF7FEFF 		bl	printf
 3969              	.LBB45:
 3970 019a 6FF00F00 		mvn	r0, #15
 3971 019e FFF7FEFF 		bl	err_to_errno
 3972 01a2 B863     		str	r0, [r7, #56]
 3973 01a4 BB6B     		ldr	r3, [r7, #56]
 3974 01a6 002B     		cmp	r3, #0
 3975 01a8 02D0     		beq	.L262
 3976              		.loc 1 1475 5 discriminator 5
 3977 01aa 344A     		ldr	r2, .L282+12
 3978 01ac BB6B     		ldr	r3, [r7, #56]
 3979 01ae 1360     		str	r3, [r2]
 3980              	.L262:
 3981              	.LBE45:
 3982              		.loc 1 1475 5 discriminator 7
 3983 01b0 4FF0FF33 		mov	r3, #-1
 3984 01b4 B9E0     		b	.L280
 3985              	.L261:
1476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                IS_SOCK_ADDR_LEN_VALID(msg->msg_namelen)),
1477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                sock_set_errno(sock, err_to_errno(ERR_ARG)); done_socket(sock); return -1;);
1478:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* initialize chain buffer with destination */
ARM GAS  /tmp/ccsCUhT2.s 			page 98


1480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     memset(&chain_buf, 0, sizeof(struct netbuf));
 3986              		.loc 1 1480 5 is_stmt 1
 3987 01b6 07F11003 		add	r3, r7, #16
 3988 01ba 1022     		movs	r2, #16
 3989 01bc 0021     		movs	r1, #0
 3990 01be 1846     		mov	r0, r3
 3991 01c0 FFF7FEFF 		bl	memset
1481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (msg->msg_name) {
 3992              		.loc 1 1481 12
 3993 01c4 BB68     		ldr	r3, [r7, #8]
 3994 01c6 1B68     		ldr	r3, [r3]
 3995              		.loc 1 1481 8
 3996 01c8 002B     		cmp	r3, #0
 3997 01ca 0DD0     		beq	.L264
 3998              	.LBB46:
1482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t remote_port;
1483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SOCKADDR_TO_IPADDR_PORT((const struct sockaddr *)msg->msg_name, &chain_buf.addr, remote_port)
 3999              		.loc 1 1483 7
 4000 01cc BB68     		ldr	r3, [r7, #8]
 4001 01ce 1B68     		ldr	r3, [r3]
 4002 01d0 5B68     		ldr	r3, [r3, #4]
 4003 01d2 BB61     		str	r3, [r7, #24]
 4004 01d4 BB68     		ldr	r3, [r7, #8]
 4005 01d6 1B68     		ldr	r3, [r3]
 4006 01d8 5B88     		ldrh	r3, [r3, #2]
 4007 01da 1846     		mov	r0, r3
 4008 01dc FFF7FEFF 		bl	lwip_htons
 4009 01e0 0346     		mov	r3, r0
 4010 01e2 FB86     		strh	r3, [r7, #54]	@ movhi
1484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_fromport(&chain_buf) = remote_port;
 4011              		.loc 1 1484 35
 4012 01e4 FB8E     		ldrh	r3, [r7, #54]	@ movhi
 4013 01e6 BB83     		strh	r3, [r7, #28]	@ movhi
 4014              	.L264:
 4015              	.LBE46:
1485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1486:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
1488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size += msg->msg_iov[i].iov_len;
1489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((msg->msg_iov[i].iov_len > INT_MAX) || (size < (int)msg->msg_iov[i].iov_len)) {
1490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* overflow */
1491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         goto sendmsg_emsgsize;
1492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (size > 0xFFFF) {
1495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* overflow */
1496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto sendmsg_emsgsize;
1497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Allocate a new netbuf and copy the data into it. */
1499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (netbuf_alloc(&chain_buf, (u16_t)size) == NULL) {
1500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ERR_MEM;
1501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* flatten the IO vectors */
1503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size_t offset = 0;
1504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       for (i = 0; i < msg->msg_iovlen; i++) {
1505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         MEMCPY(&((u8_t *)chain_buf.p->payload)[offset], msg->msg_iov[i].iov_base, msg->msg_iov[i].i
1506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         offset += msg->msg_iov[i].iov_len;
ARM GAS  /tmp/ccsCUhT2.s 			page 99


1507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1508:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
1510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* This can be improved by using LWIP_CHKSUM_COPY() and aggregating the checksum for each I
1511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t chksum = ~inet_chksum_pbuf(chain_buf.p);
1512:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netbuf_set_chksum(&chain_buf, chksum);
1513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1514:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ERR_OK;
1516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1517:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* create a chained netbuf from the IO vectors. NOTE: we assemble a pbuf chain
1519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        manually to avoid having to allocate, chain, and delete a netbuf for each iov */
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = 0; i < msg->msg_iovlen; i++) {
 4016              		.loc 1 1520 12
 4017 01e8 0023     		movs	r3, #0
 4018 01ea BB65     		str	r3, [r7, #88]
 4019              		.loc 1 1520 5
 4020 01ec 58E0     		b	.L265
 4021              	.L273:
 4022              	.LBB47:
1521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
1522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (msg->msg_iov[i].iov_len > 0xFFFF) {
 4023              		.loc 1 1522 14
 4024 01ee BB68     		ldr	r3, [r7, #8]
 4025 01f0 9A68     		ldr	r2, [r3, #8]
 4026              		.loc 1 1522 23
 4027 01f2 BB6D     		ldr	r3, [r7, #88]
 4028 01f4 DB00     		lsls	r3, r3, #3
 4029 01f6 1344     		add	r3, r3, r2
 4030              		.loc 1 1522 26
 4031 01f8 5B68     		ldr	r3, [r3, #4]
 4032              		.loc 1 1522 10
 4033 01fa B3F5803F 		cmp	r3, #65536
 4034 01fe 80F08480 		bcs	.L281
1523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* overflow */
1524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         goto sendmsg_emsgsize;
1525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p = pbuf_alloc(PBUF_TRANSPORT, 0, PBUF_REF);
 4035              		.loc 1 1526 11
 4036 0202 4122     		movs	r2, #65
 4037 0204 0021     		movs	r1, #0
 4038 0206 3620     		movs	r0, #54
 4039 0208 FFF7FEFF 		bl	pbuf_alloc
 4040 020c 3863     		str	r0, [r7, #48]
1527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (p == NULL) {
 4041              		.loc 1 1527 10
 4042 020e 3B6B     		ldr	r3, [r7, #48]
 4043 0210 002B     		cmp	r3, #0
 4044 0212 03D1     		bne	.L268
1528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         err = ERR_MEM; /* let netbuf_delete() cleanup chain_buf */
 4045              		.loc 1 1528 13
 4046 0214 FF23     		movs	r3, #255
 4047 0216 87F85F30 		strb	r3, [r7, #95]
1529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 4048              		.loc 1 1529 9
 4049 021a 46E0     		b	.L269
ARM GAS  /tmp/ccsCUhT2.s 			page 100


 4050              	.L268:
1530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->payload = msg->msg_iov[i].iov_base;
 4051              		.loc 1 1531 23
 4052 021c BB68     		ldr	r3, [r7, #8]
 4053 021e 9A68     		ldr	r2, [r3, #8]
 4054              		.loc 1 1531 32
 4055 0220 BB6D     		ldr	r3, [r7, #88]
 4056 0222 DB00     		lsls	r3, r3, #3
 4057 0224 1344     		add	r3, r3, r2
 4058              		.loc 1 1531 35
 4059 0226 1A68     		ldr	r2, [r3]
 4060              		.loc 1 1531 18
 4061 0228 3B6B     		ldr	r3, [r7, #48]
 4062 022a 5A60     		str	r2, [r3, #4]
1532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       p->len = p->tot_len = (u16_t)msg->msg_iov[i].iov_len;
 4063              		.loc 1 1532 39
 4064 022c BB68     		ldr	r3, [r7, #8]
 4065 022e 9A68     		ldr	r2, [r3, #8]
 4066              		.loc 1 1532 48
 4067 0230 BB6D     		ldr	r3, [r7, #88]
 4068 0232 DB00     		lsls	r3, r3, #3
 4069 0234 1344     		add	r3, r3, r2
 4070              		.loc 1 1532 51
 4071 0236 5B68     		ldr	r3, [r3, #4]
 4072              		.loc 1 1532 29
 4073 0238 9AB2     		uxth	r2, r3
 4074              		.loc 1 1532 27
 4075 023a 3B6B     		ldr	r3, [r7, #48]
 4076 023c 1A81     		strh	r2, [r3, #8]	@ movhi
 4077              		.loc 1 1532 17
 4078 023e 3B6B     		ldr	r3, [r7, #48]
 4079 0240 1A89     		ldrh	r2, [r3, #8]
 4080              		.loc 1 1532 14
 4081 0242 3B6B     		ldr	r3, [r7, #48]
 4082 0244 5A81     		strh	r2, [r3, #10]	@ movhi
1533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* netbuf empty, add new pbuf */
1534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (chain_buf.p == NULL) {
 4083              		.loc 1 1534 20
 4084 0246 3B69     		ldr	r3, [r7, #16]
 4085              		.loc 1 1534 10
 4086 0248 002B     		cmp	r3, #0
 4087 024a 04D1     		bne	.L270
1535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         chain_buf.p = chain_buf.ptr = p;
 4088              		.loc 1 1535 37
 4089 024c 3B6B     		ldr	r3, [r7, #48]
 4090 024e 7B61     		str	r3, [r7, #20]
 4091              		.loc 1 1535 32
 4092 0250 7B69     		ldr	r3, [r7, #20]
 4093              		.loc 1 1535 21
 4094 0252 3B61     		str	r3, [r7, #16]
 4095 0254 21E0     		b	.L271
 4096              	.L270:
1536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* add pbuf to existing pbuf chain */
1537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
1538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (chain_buf.p->tot_len + p->len > 0xffff) {
 4097              		.loc 1 1538 22
ARM GAS  /tmp/ccsCUhT2.s 			page 101


 4098 0256 3B69     		ldr	r3, [r7, #16]
 4099              		.loc 1 1538 24
 4100 0258 1B89     		ldrh	r3, [r3, #8]
 4101 025a 1A46     		mov	r2, r3
 4102              		.loc 1 1538 37
 4103 025c 3B6B     		ldr	r3, [r7, #48]
 4104 025e 5B89     		ldrh	r3, [r3, #10]
 4105              		.loc 1 1538 34
 4106 0260 1344     		add	r3, r3, r2
 4107              		.loc 1 1538 12
 4108 0262 B3F5803F 		cmp	r3, #65536
 4109 0266 13DB     		blt	.L272
1539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* overflow */
1540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           pbuf_free(p);
 4110              		.loc 1 1540 11
 4111 0268 386B     		ldr	r0, [r7, #48]
 4112 026a FFF7FEFF 		bl	pbuf_free
1541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           goto sendmsg_emsgsize;
 4113              		.loc 1 1541 11
 4114 026e 4DE0     		b	.L267
 4115              	.L283:
 4116              		.align	2
 4117              	.L282:
 4118 0270 00000000 		.word	.LC0
 4119 0274 30020000 		.word	.LC21
 4120 0278 50000000 		.word	.LC2
 4121 027c 00000000 		.word	errno
 4122 0280 50020000 		.word	.LC22
 4123 0284 74020000 		.word	.LC23
 4124 0288 98020000 		.word	.LC24
 4125 028c B8020000 		.word	.LC25
 4126              	.L272:
1542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         pbuf_cat(chain_buf.p, p);
 4127              		.loc 1 1543 9
 4128 0290 3B69     		ldr	r3, [r7, #16]
 4129 0292 396B     		ldr	r1, [r7, #48]
 4130 0294 1846     		mov	r0, r3
 4131 0296 FFF7FEFF 		bl	pbuf_cat
 4132              	.L271:
 4133              	.LBE47:
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
 4134              		.loc 1 1520 39 discriminator 2
 4135 029a BB6D     		ldr	r3, [r7, #88]
 4136 029c 0133     		adds	r3, r3, #1
 4137 029e BB65     		str	r3, [r7, #88]
 4138              	.L265:
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
 4139              		.loc 1 1520 24 discriminator 1
 4140 02a0 BB68     		ldr	r3, [r7, #8]
 4141 02a2 DB68     		ldr	r3, [r3, #12]
1520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct pbuf *p;
 4142              		.loc 1 1520 5 discriminator 1
 4143 02a4 BA6D     		ldr	r2, [r7, #88]
 4144 02a6 9A42     		cmp	r2, r3
 4145 02a8 A1DB     		blt	.L273
 4146              	.L269:
ARM GAS  /tmp/ccsCUhT2.s 			page 102


1544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* save size of total chain */
1547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
 4147              		.loc 1 1547 8
 4148 02aa 97F95F30 		ldrsb	r3, [r7, #95]
 4149 02ae 002B     		cmp	r3, #0
 4150 02b0 02D1     		bne	.L274
1548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       size = netbuf_len(&chain_buf);
 4151              		.loc 1 1548 14
 4152 02b2 3B69     		ldr	r3, [r7, #16]
 4153 02b4 1B89     		ldrh	r3, [r3, #8]
 4154              		.loc 1 1548 12
 4155 02b6 7B65     		str	r3, [r7, #84]
 4156              	.L274:
1549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1550:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1551:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (err == ERR_OK) {
 4157              		.loc 1 1552 8
 4158 02b8 97F95F30 		ldrsb	r3, [r7, #95]
 4159 02bc 002B     		cmp	r3, #0
 4160 02be 0AD1     		bne	.L275
1553:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
1555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (IP_IS_V6_VAL(chain_buf.addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&chain_buf.addr))) {
1556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         unmap_ipv4_mapped_ipv6(ip_2_ip4(&chain_buf.addr), ip_2_ip6(&chain_buf.addr));
1557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         IP_SET_TYPE_VAL(chain_buf.addr, IPADDR_TYPE_V4);
1558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1559:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1560:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* send the data */
1562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = netconn_send(sock->conn, &chain_buf);
 4161              		.loc 1 1562 13
 4162 02c0 3B6D     		ldr	r3, [r7, #80]
 4163 02c2 1B68     		ldr	r3, [r3]
 4164 02c4 07F11002 		add	r2, r7, #16
 4165 02c8 1146     		mov	r1, r2
 4166 02ca 1846     		mov	r0, r3
 4167 02cc FFF7FEFF 		bl	netconn_send
 4168 02d0 0346     		mov	r3, r0
 4169 02d2 87F85F30 		strb	r3, [r7, #95]
 4170              	.L275:
1563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1564:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* deallocated the buffer */
1566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netbuf_free(&chain_buf);
 4171              		.loc 1 1566 5
 4172 02d6 07F11003 		add	r3, r7, #16
 4173 02da 1846     		mov	r0, r3
 4174 02dc FFF7FEFF 		bl	netbuf_free
 4175              	.LBB48:
1567:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 4176              		.loc 1 1568 5
 4177 02e0 97F95F30 		ldrsb	r3, [r7, #95]
 4178 02e4 1846     		mov	r0, r3
ARM GAS  /tmp/ccsCUhT2.s 			page 103


 4179 02e6 FFF7FEFF 		bl	err_to_errno
 4180 02ea B862     		str	r0, [r7, #40]
 4181 02ec BB6A     		ldr	r3, [r7, #40]
 4182 02ee 002B     		cmp	r3, #0
 4183 02f0 02D0     		beq	.L276
 4184              		.loc 1 1568 5 is_stmt 0 discriminator 1
 4185 02f2 104A     		ldr	r2, .L284
 4186 02f4 BB6A     		ldr	r3, [r7, #40]
 4187 02f6 1360     		str	r3, [r2]
 4188              	.L276:
 4189              	.LBE48:
1569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return (err == ERR_OK ? size : -1);
 4190              		.loc 1 1570 34 is_stmt 1
 4191 02f8 97F95F30 		ldrsb	r3, [r7, #95]
 4192 02fc 002B     		cmp	r3, #0
 4193 02fe 01D1     		bne	.L277
 4194              		.loc 1 1570 34 is_stmt 0 discriminator 1
 4195 0300 7B6D     		ldr	r3, [r7, #84]
 4196 0302 12E0     		b	.L280
 4197              	.L277:
 4198              		.loc 1 1570 34 discriminator 2
 4199 0304 4FF0FF33 		mov	r3, #-1
 4200 0308 0FE0     		b	.L280
 4201              	.L281:
 4202              	.LBB49:
1524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 4203              		.loc 1 1524 9 is_stmt 1
 4204 030a 00BF     		nop
 4205              	.L267:
 4206              	.LBE49:
 4207              	.LBB50:
1571:Middlewares/Third_Party/LwIP/src/api/sockets.c **** sendmsg_emsgsize:
1572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EMSGSIZE);
 4208              		.loc 1 1572 5
 4209 030c 5A23     		movs	r3, #90
 4210 030e FB62     		str	r3, [r7, #44]
 4211 0310 FB6A     		ldr	r3, [r7, #44]
 4212 0312 002B     		cmp	r3, #0
 4213 0314 02D0     		beq	.L279
 4214              		.loc 1 1572 5 is_stmt 0 discriminator 1
 4215 0316 074A     		ldr	r2, .L284
 4216 0318 FB6A     		ldr	r3, [r7, #44]
 4217 031a 1360     		str	r3, [r2]
 4218              	.L279:
 4219              	.LBE50:
1573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netbuf_free(&chain_buf);
 4220              		.loc 1 1573 5 is_stmt 1
 4221 031c 07F11003 		add	r3, r7, #16
 4222 0320 1846     		mov	r0, r3
 4223 0322 FFF7FEFF 		bl	netbuf_free
1574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4224              		.loc 1 1575 12
 4225 0326 4FF0FF33 		mov	r3, #-1
 4226              	.L280:
 4227              	.LBE44:
ARM GAS  /tmp/ccsCUhT2.s 			page 104


1576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1577:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_UDP || LWIP_RAW */
1578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(ERR_ARG));
1579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
1580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
1581:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP || LWIP_RAW */
1582:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4228              		.loc 1 1582 1 discriminator 2
 4229 032a 1846     		mov	r0, r3
 4230 032c 6437     		adds	r7, r7, #100
 4231              	.LCFI138:
 4232              		.cfi_def_cfa_offset 12
 4233 032e BD46     		mov	sp, r7
 4234              	.LCFI139:
 4235              		.cfi_def_cfa_register 13
 4236              		@ sp needed
 4237 0330 90BD     		pop	{r4, r7, pc}
 4238              	.L285:
 4239 0332 00BF     		.align	2
 4240              	.L284:
 4241 0334 00000000 		.word	errno
 4242              		.cfi_endproc
 4243              	.LFE164:
 4245              		.section	.rodata
 4246 02da 0000     		.align	2
 4247              	.LC26:
 4248 02dc 6C776970 		.ascii	"lwip_sendto: invalid address\000"
 4248      5F73656E 
 4248      64746F3A 
 4248      20696E76 
 4248      616C6964 
 4249              		.section	.text.lwip_sendto,"ax",%progbits
 4250              		.align	1
 4251              		.global	lwip_sendto
 4252              		.syntax unified
 4253              		.thumb
 4254              		.thumb_func
 4255              		.fpu fpv4-sp-d16
 4257              	lwip_sendto:
 4258              	.LFB165:
1583:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1584:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sendto(int s, const void *data, size_t size, int flags,
1586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             const struct sockaddr *to, socklen_t tolen)
1587:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4259              		.loc 1 1587 1
 4260              		.cfi_startproc
 4261              		@ args = 8, pretend = 0, frame = 56
 4262              		@ frame_needed = 1, uses_anonymous_args = 0
 4263 0000 80B5     		push	{r7, lr}
 4264              	.LCFI140:
 4265              		.cfi_def_cfa_offset 8
 4266              		.cfi_offset 7, -8
 4267              		.cfi_offset 14, -4
 4268 0002 8EB0     		sub	sp, sp, #56
 4269              	.LCFI141:
 4270              		.cfi_def_cfa_offset 64
ARM GAS  /tmp/ccsCUhT2.s 			page 105


 4271 0004 00AF     		add	r7, sp, #0
 4272              	.LCFI142:
 4273              		.cfi_def_cfa_register 7
 4274 0006 F860     		str	r0, [r7, #12]
 4275 0008 B960     		str	r1, [r7, #8]
 4276 000a 7A60     		str	r2, [r7, #4]
 4277 000c 3B60     		str	r3, [r7]
1588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
1590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t short_size;
1591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t remote_port;
1592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netbuf buf;
1593:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 4278              		.loc 1 1594 10
 4279 000e F868     		ldr	r0, [r7, #12]
 4280 0010 FFF7FEFF 		bl	get_socket
 4281 0014 3863     		str	r0, [r7, #48]
1595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 4282              		.loc 1 1595 6
 4283 0016 3B6B     		ldr	r3, [r7, #48]
 4284 0018 002B     		cmp	r3, #0
 4285 001a 02D1     		bne	.L287
1596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4286              		.loc 1 1596 12
 4287 001c 4FF0FF33 		mov	r3, #-1
 4288 0020 93E0     		b	.L302
 4289              	.L287:
1597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1598:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 4290              		.loc 1 1599 7
 4291 0022 3B6B     		ldr	r3, [r7, #48]
 4292 0024 1B68     		ldr	r3, [r3]
 4293 0026 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4294 0028 03F0F003 		and	r3, r3, #240
 4295              		.loc 1 1599 6
 4296 002c 102B     		cmp	r3, #16
 4297 002e 07D1     		bne	.L289
1600:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
1601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return lwip_send(s, data, size, flags);
 4298              		.loc 1 1602 12
 4299 0030 3B68     		ldr	r3, [r7]
 4300 0032 7A68     		ldr	r2, [r7, #4]
 4301 0034 B968     		ldr	r1, [r7, #8]
 4302 0036 F868     		ldr	r0, [r7, #12]
 4303 0038 FFF7FEFF 		bl	lwip_send
 4304 003c 0346     		mov	r3, r0
 4305 003e 84E0     		b	.L302
 4306              	.L289:
1603:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCP */
1604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_UNUSED_ARG(flags);
1605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(ERR_ARG));
1606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
1608:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
ARM GAS  /tmp/ccsCUhT2.s 			page 106


1609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1610:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (size > LWIP_MIN(0xFFFF, SSIZE_MAX)) {
 4307              		.loc 1 1611 6
 4308 0040 7B68     		ldr	r3, [r7, #4]
 4309 0042 B3F5803F 		cmp	r3, #65536
 4310 0046 0AD3     		bcc	.L290
 4311              	.LBB51:
1612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* cannot fit into one datagram (at least for us) */
1613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EMSGSIZE);
 4312              		.loc 1 1613 5
 4313 0048 5A23     		movs	r3, #90
 4314 004a FB62     		str	r3, [r7, #44]
 4315 004c FB6A     		ldr	r3, [r7, #44]
 4316 004e 002B     		cmp	r3, #0
 4317 0050 02D0     		beq	.L291
 4318              		.loc 1 1613 5 is_stmt 0 discriminator 1
 4319 0052 404A     		ldr	r2, .L303
 4320 0054 FB6A     		ldr	r3, [r7, #44]
 4321 0056 1360     		str	r3, [r2]
 4322              	.L291:
 4323              	.LBE51:
1614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
1615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4324              		.loc 1 1615 12 is_stmt 1
 4325 0058 4FF0FF33 		mov	r3, #-1
 4326 005c 75E0     		b	.L302
 4327              	.L290:
1616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   short_size = (u16_t)size;
 4328              		.loc 1 1617 14
 4329 005e 7B68     		ldr	r3, [r7, #4]
 4330 0060 7B85     		strh	r3, [r7, #42]	@ movhi
1618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_sendto: invalid address", (((to == NULL) && (tolen == 0)) ||
 4331              		.loc 1 1618 3
 4332 0062 3B6C     		ldr	r3, [r7, #64]
 4333 0064 002B     		cmp	r3, #0
 4334 0066 02D1     		bne	.L292
 4335              		.loc 1 1618 3 is_stmt 0 discriminator 2
 4336 0068 7B6C     		ldr	r3, [r7, #68]
 4337 006a 002B     		cmp	r3, #0
 4338 006c 23D0     		beq	.L293
 4339              	.L292:
 4340              		.loc 1 1618 3 discriminator 3
 4341 006e 7B6C     		ldr	r3, [r7, #68]
 4342 0070 102B     		cmp	r3, #16
 4343 0072 0BD1     		bne	.L294
 4344              		.loc 1 1618 3 discriminator 5
 4345 0074 3B6C     		ldr	r3, [r7, #64]
 4346 0076 002B     		cmp	r3, #0
 4347 0078 08D0     		beq	.L294
 4348              		.loc 1 1618 3 discriminator 7
 4349 007a 3B6C     		ldr	r3, [r7, #64]
 4350 007c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 4351 007e 022B     		cmp	r3, #2
 4352 0080 04D1     		bne	.L294
 4353              		.loc 1 1618 3 discriminator 9
ARM GAS  /tmp/ccsCUhT2.s 			page 107


 4354 0082 3B6C     		ldr	r3, [r7, #64]
 4355 0084 03F00303 		and	r3, r3, #3
 4356 0088 002B     		cmp	r3, #0
 4357 008a 14D0     		beq	.L293
 4358              	.L294:
 4359              		.loc 1 1618 3 discriminator 10
 4360 008c 324B     		ldr	r3, .L303+4
 4361 008e 40F25562 		movw	r2, #1621
 4362 0092 3249     		ldr	r1, .L303+8
 4363 0094 3248     		ldr	r0, .L303+12
 4364 0096 FFF7FEFF 		bl	printf
 4365              	.LBB52:
 4366 009a 6FF00F00 		mvn	r0, #15
 4367 009e FFF7FEFF 		bl	err_to_errno
 4368 00a2 7862     		str	r0, [r7, #36]
 4369 00a4 7B6A     		ldr	r3, [r7, #36]
 4370 00a6 002B     		cmp	r3, #0
 4371 00a8 02D0     		beq	.L295
 4372              		.loc 1 1618 3 discriminator 11
 4373 00aa 2A4A     		ldr	r2, .L303
 4374 00ac 7B6A     		ldr	r3, [r7, #36]
 4375 00ae 1360     		str	r3, [r2]
 4376              	.L295:
 4377              	.LBE52:
 4378              		.loc 1 1618 3 discriminator 13
 4379 00b0 4FF0FF33 		mov	r3, #-1
 4380 00b4 49E0     		b	.L302
 4381              	.L293:
1619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (IS_SOCK_ADDR_LEN_VALID(tolen) &&
1620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               ((to != NULL) && (IS_SOCK_ADDR_TYPE_VALID(to) && IS_SOCK_ADDR_ALIGNED(to))))),
1621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              sock_set_errno(sock, err_to_errno(ERR_ARG)); done_socket(sock); return -1;);
1622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(tolen);
1623:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* initialize a buffer */
1625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.p = buf.ptr = NULL;
 4382              		.loc 1 1625 19 is_stmt 1
 4383 00b6 0023     		movs	r3, #0
 4384 00b8 7B61     		str	r3, [r7, #20]
 4385              		.loc 1 1625 14
 4386 00ba 7B69     		ldr	r3, [r7, #20]
 4387              		.loc 1 1625 9
 4388 00bc 3B61     		str	r3, [r7, #16]
1626:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   buf.flags = 0;
1628:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (to) {
 4389              		.loc 1 1629 6
 4390 00be 3B6C     		ldr	r3, [r7, #64]
 4391 00c0 002B     		cmp	r3, #0
 4392 00c2 0AD0     		beq	.L296
1630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SOCKADDR_TO_IPADDR_PORT(to, &buf.addr, remote_port);
 4393              		.loc 1 1630 5
 4394 00c4 3B6C     		ldr	r3, [r7, #64]
 4395 00c6 5B68     		ldr	r3, [r3, #4]
 4396 00c8 BB61     		str	r3, [r7, #24]
 4397 00ca 3B6C     		ldr	r3, [r7, #64]
 4398 00cc 5B88     		ldrh	r3, [r3, #2]
ARM GAS  /tmp/ccsCUhT2.s 			page 108


 4399 00ce 1846     		mov	r0, r3
 4400 00d0 FFF7FEFF 		bl	lwip_htons
 4401 00d4 0346     		mov	r3, r0
 4402 00d6 BB86     		strh	r3, [r7, #52]	@ movhi
 4403 00d8 03E0     		b	.L297
 4404              	.L296:
1631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     remote_port = 0;
 4405              		.loc 1 1632 17
 4406 00da 0023     		movs	r3, #0
 4407 00dc BB86     		strh	r3, [r7, #52]	@ movhi
1633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip_addr_set_any(NETCONNTYPE_ISIPV6(netconn_type(sock->conn)), &buf.addr);
 4408              		.loc 1 1633 5
 4409 00de 0023     		movs	r3, #0
 4410 00e0 BB61     		str	r3, [r7, #24]
 4411              	.L297:
1634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_fromport(&buf) = remote_port;
 4412              		.loc 1 1635 25
 4413 00e2 BB8E     		ldrh	r3, [r7, #52]	@ movhi
 4414 00e4 BB83     		strh	r3, [r7, #28]	@ movhi
1636:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1637:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_sendto(%d, data=%p, short_size=%"U16_F", flags=0x%x to=",
1639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               s, data, short_size, flags));
1640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, buf.addr);
1641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F"\n", remote_port));
1642:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* make the buffer point to the data that should be sent */
1644:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
1645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Allocate a new netbuf and copy the data into it. */
1646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (netbuf_alloc(&buf, short_size) == NULL) {
1647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_MEM;
1648:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1649:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_CHECKSUM_ON_COPY
1650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_RAW) {
1651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t chksum = LWIP_CHKSUM_COPY(buf.p->payload, data, short_size);
1652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netbuf_set_chksum(&buf, chksum);
1653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else
1654:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_CHECKSUM_ON_COPY */
1655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     {
1656:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       MEMCPY(buf.p->payload, data, short_size);
1657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = ERR_OK;
1659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1660:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
1661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netbuf_ref(&buf, data, short_size);
 4415              		.loc 1 1661 9
 4416 00e6 7A8D     		ldrh	r2, [r7, #42]
 4417 00e8 07F11003 		add	r3, r7, #16
 4418 00ec B968     		ldr	r1, [r7, #8]
 4419 00ee 1846     		mov	r0, r3
 4420 00f0 FFF7FEFF 		bl	netbuf_ref
 4421 00f4 0346     		mov	r3, r0
 4422 00f6 87F83730 		strb	r3, [r7, #55]
1662:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
1663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err == ERR_OK) {
ARM GAS  /tmp/ccsCUhT2.s 			page 109


 4423              		.loc 1 1663 6
 4424 00fa 97F93730 		ldrsb	r3, [r7, #55]
 4425 00fe 002B     		cmp	r3, #0
 4426 0100 0AD1     		bne	.L298
1664:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
1665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Dual-stack: Unmap IPv4 mapped IPv6 addresses */
1666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (IP_IS_V6_VAL(buf.addr) && ip6_addr_isipv4mappedipv6(ip_2_ip6(&buf.addr))) {
1667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       unmap_ipv4_mapped_ipv6(ip_2_ip4(&buf.addr), ip_2_ip6(&buf.addr));
1668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_SET_TYPE_VAL(buf.addr, IPADDR_TYPE_V4);
1669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1670:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
1671:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* send the data */
1673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     err = netconn_send(sock->conn, &buf);
 4427              		.loc 1 1673 11
 4428 0102 3B6B     		ldr	r3, [r7, #48]
 4429 0104 1B68     		ldr	r3, [r3]
 4430 0106 07F11002 		add	r2, r7, #16
 4431 010a 1146     		mov	r1, r2
 4432 010c 1846     		mov	r0, r3
 4433 010e FFF7FEFF 		bl	netconn_send
 4434 0112 0346     		mov	r3, r0
 4435 0114 87F83730 		strb	r3, [r7, #55]
 4436              	.L298:
1674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1675:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* deallocated the buffer */
1677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   netbuf_free(&buf);
 4437              		.loc 1 1677 3
 4438 0118 07F11003 		add	r3, r7, #16
 4439 011c 1846     		mov	r0, r3
 4440 011e FFF7FEFF 		bl	netbuf_free
 4441              	.LBB53:
1678:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
 4442              		.loc 1 1679 3
 4443 0122 97F93730 		ldrsb	r3, [r7, #55]
 4444 0126 1846     		mov	r0, r3
 4445 0128 FFF7FEFF 		bl	err_to_errno
 4446 012c 3862     		str	r0, [r7, #32]
 4447 012e 3B6A     		ldr	r3, [r7, #32]
 4448 0130 002B     		cmp	r3, #0
 4449 0132 02D0     		beq	.L299
 4450              		.loc 1 1679 3 is_stmt 0 discriminator 1
 4451 0134 074A     		ldr	r2, .L303
 4452 0136 3B6A     		ldr	r3, [r7, #32]
 4453 0138 1360     		str	r3, [r2]
 4454              	.L299:
 4455              	.LBE53:
1680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
1681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? short_size : -1);
 4456              		.loc 1 1681 38 is_stmt 1
 4457 013a 97F93730 		ldrsb	r3, [r7, #55]
 4458 013e 002B     		cmp	r3, #0
 4459 0140 01D1     		bne	.L300
 4460              		.loc 1 1681 38 is_stmt 0 discriminator 1
 4461 0142 7B8D     		ldrh	r3, [r7, #42]
ARM GAS  /tmp/ccsCUhT2.s 			page 110


 4462 0144 01E0     		b	.L302
 4463              	.L300:
 4464              		.loc 1 1681 38 discriminator 2
 4465 0146 4FF0FF33 		mov	r3, #-1
 4466              	.L302:
1682:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4467              		.loc 1 1682 1 is_stmt 1 discriminator 1
 4468 014a 1846     		mov	r0, r3
 4469 014c 3837     		adds	r7, r7, #56
 4470              	.LCFI143:
 4471              		.cfi_def_cfa_offset 8
 4472 014e BD46     		mov	sp, r7
 4473              	.LCFI144:
 4474              		.cfi_def_cfa_register 13
 4475              		@ sp needed
 4476 0150 80BD     		pop	{r7, pc}
 4477              	.L304:
 4478 0152 00BF     		.align	2
 4479              	.L303:
 4480 0154 00000000 		.word	errno
 4481 0158 00000000 		.word	.LC0
 4482 015c DC020000 		.word	.LC26
 4483 0160 50000000 		.word	.LC2
 4484              		.cfi_endproc
 4485              	.LFE165:
 4487              		.section	.text.lwip_socket,"ax",%progbits
 4488              		.align	1
 4489              		.global	lwip_socket
 4490              		.syntax unified
 4491              		.thumb
 4492              		.thumb_func
 4493              		.fpu fpv4-sp-d16
 4495              	lwip_socket:
 4496              	.LFB166:
1683:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1684:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1685:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_socket(int domain, int type, int protocol)
1686:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4497              		.loc 1 1686 1
 4498              		.cfi_startproc
 4499              		@ args = 0, pretend = 0, frame = 24
 4500              		@ frame_needed = 1, uses_anonymous_args = 0
 4501 0000 80B5     		push	{r7, lr}
 4502              	.LCFI145:
 4503              		.cfi_def_cfa_offset 8
 4504              		.cfi_offset 7, -8
 4505              		.cfi_offset 14, -4
 4506 0002 86B0     		sub	sp, sp, #24
 4507              	.LCFI146:
 4508              		.cfi_def_cfa_offset 32
 4509 0004 00AF     		add	r7, sp, #0
 4510              	.LCFI147:
 4511              		.cfi_def_cfa_register 7
 4512 0006 F860     		str	r0, [r7, #12]
 4513 0008 B960     		str	r1, [r7, #8]
 4514 000a 7A60     		str	r2, [r7, #4]
1687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct netconn *conn;
ARM GAS  /tmp/ccsCUhT2.s 			page 111


1688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1689:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(domain); /* @todo: check this */
1691:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* create a netconn */
1693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (type) {
 4515              		.loc 1 1693 3
 4516 000c BB68     		ldr	r3, [r7, #8]
 4517 000e 022B     		cmp	r3, #2
 4518 0010 0FD0     		beq	.L306
 4519 0012 BB68     		ldr	r3, [r7, #8]
 4520 0014 032B     		cmp	r3, #3
 4521 0016 03D0     		beq	.L307
 4522 0018 BB68     		ldr	r3, [r7, #8]
 4523 001a 012B     		cmp	r3, #1
 4524 001c 16D0     		beq	.L308
 4525 001e 1CE0     		b	.L317
 4526              	.L307:
1694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SOCK_RAW:
1695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       conn = netconn_new_with_proto_and_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_RAW),
 4527              		.loc 1 1695 14
 4528 0020 7B68     		ldr	r3, [r7, #4]
 4529 0022 DBB2     		uxtb	r3, r3
 4530 0024 214A     		ldr	r2, .L318
 4531 0026 1946     		mov	r1, r3
 4532 0028 4020     		movs	r0, #64
 4533 002a FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4534 002e 7861     		str	r0, [r7, #20]
1696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              (u8_t)protocol, DEFAULT_SOCKET_EVENTCB);
1697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_RAW, %d) = ",
1698:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 4535              		.loc 1 1699 7
 4536 0030 19E0     		b	.L310
 4537              	.L306:
1700:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SOCK_DGRAM:
1701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain,
 4538              		.loc 1 1701 14
 4539 0032 7B68     		ldr	r3, [r7, #4]
 4540 0034 882B     		cmp	r3, #136
 4541 0036 01D1     		bne	.L311
 4542              		.loc 1 1701 14 is_stmt 0 discriminator 1
 4543 0038 2123     		movs	r3, #33
 4544 003a 00E0     		b	.L312
 4545              	.L311:
 4546              		.loc 1 1701 14 discriminator 2
 4547 003c 2023     		movs	r3, #32
 4548              	.L312:
 4549              		.loc 1 1701 14 discriminator 4
 4550 003e 1B4A     		ldr	r2, .L318
 4551 0040 0021     		movs	r1, #0
 4552 0042 1846     		mov	r0, r3
 4553 0044 FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4554 0048 7861     		str	r0, [r7, #20]
1702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                        ((protocol == IPPROTO_UDPLITE) ? NETCONN_UDPLITE : NETCONN_U
1703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                        DEFAULT_SOCKET_EVENTCB);
1704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_DGRAM, %d) = ",
ARM GAS  /tmp/ccsCUhT2.s 			page 112


1705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1706:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETBUF_RECVINFO
1707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn) {
1708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* netconn layer enables pktinfo by default, sockets default to off */
1709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         conn->flags &= ~NETCONN_FLAG_PKTINFO;
1710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1711:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETBUF_RECVINFO */
1712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 4555              		.loc 1 1712 7 is_stmt 1 discriminator 4
 4556 004a 0CE0     		b	.L310
 4557              	.L308:
1713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SOCK_STREAM:
1714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       conn = netconn_new_with_callback(DOMAIN_TO_NETCONN_TYPE(domain, NETCONN_TCP), DEFAULT_SOCKET_
 4558              		.loc 1 1714 14
 4559 004c 174A     		ldr	r2, .L318
 4560 004e 0021     		movs	r1, #0
 4561 0050 1020     		movs	r0, #16
 4562 0052 FFF7FEFF 		bl	netconn_new_with_proto_and_callback
 4563 0056 7861     		str	r0, [r7, #20]
1715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%s, SOCK_STREAM, %d) = ",
1716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   domain == PF_INET ? "PF_INET" : "UNKNOWN", protocol));
1717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 4564              		.loc 1 1717 7
 4565 0058 05E0     		b	.L310
 4566              	.L317:
1718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
1719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_socket(%d, %d/UNKNOWN, %d) = -1\n",
1720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   domain, type, protocol));
1721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EINVAL);
 4567              		.loc 1 1721 7 discriminator 1
 4568 005a 154B     		ldr	r3, .L318+4
 4569 005c 1622     		movs	r2, #22
 4570 005e 1A60     		str	r2, [r3]
1722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 4571              		.loc 1 1722 14 discriminator 1
 4572 0060 4FF0FF33 		mov	r3, #-1
 4573 0064 1EE0     		b	.L313
 4574              	.L310:
1723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1724:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!conn) {
 4575              		.loc 1 1725 6
 4576 0066 7B69     		ldr	r3, [r7, #20]
 4577 0068 002B     		cmp	r3, #0
 4578 006a 05D1     		bne	.L314
1726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("-1 / ENOBUFS (could not create netconn)\n"));
1727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENOBUFS);
 4579              		.loc 1 1727 5 discriminator 1
 4580 006c 104B     		ldr	r3, .L318+4
 4581 006e 6922     		movs	r2, #105
 4582 0070 1A60     		str	r2, [r3]
1728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4583              		.loc 1 1728 12 discriminator 1
 4584 0072 4FF0FF33 		mov	r3, #-1
 4585 0076 15E0     		b	.L313
 4586              	.L314:
1729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  /tmp/ccsCUhT2.s 			page 113


1730:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   i = alloc_socket(conn, 0);
 4587              		.loc 1 1731 7
 4588 0078 0021     		movs	r1, #0
 4589 007a 7869     		ldr	r0, [r7, #20]
 4590 007c FFF7FEFF 		bl	alloc_socket
 4591 0080 3861     		str	r0, [r7, #16]
1732:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (i == -1) {
 4592              		.loc 1 1733 6
 4593 0082 3B69     		ldr	r3, [r7, #16]
 4594 0084 B3F1FF3F 		cmp	r3, #-1
 4595 0088 08D1     		bne	.L315
1734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     netconn_delete(conn);
 4596              		.loc 1 1734 5
 4597 008a 7869     		ldr	r0, [r7, #20]
 4598 008c FFF7FEFF 		bl	netconn_delete
1735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENFILE);
 4599              		.loc 1 1735 5
 4600 0090 074B     		ldr	r3, .L318+4
 4601 0092 1722     		movs	r2, #23
 4602 0094 1A60     		str	r2, [r3]
1736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 4603              		.loc 1 1736 12
 4604 0096 4FF0FF33 		mov	r3, #-1
 4605 009a 03E0     		b	.L313
 4606              	.L315:
1737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   conn->socket = i;
 4607              		.loc 1 1738 16
 4608 009c 7B69     		ldr	r3, [r7, #20]
 4609 009e 3A69     		ldr	r2, [r7, #16]
 4610 00a0 9A61     		str	r2, [r3, #24]
1739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(&sockets[i - LWIP_SOCKET_OFFSET]);
1740:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("%d\n", i));
1741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
1742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return i;
 4611              		.loc 1 1742 10
 4612 00a2 3B69     		ldr	r3, [r7, #16]
 4613              	.L313:
1743:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4614              		.loc 1 1743 1
 4615 00a4 1846     		mov	r0, r3
 4616 00a6 1837     		adds	r7, r7, #24
 4617              	.LCFI148:
 4618              		.cfi_def_cfa_offset 8
 4619 00a8 BD46     		mov	sp, r7
 4620              	.LCFI149:
 4621              		.cfi_def_cfa_register 13
 4622              		@ sp needed
 4623 00aa 80BD     		pop	{r7, pc}
 4624              	.L319:
 4625              		.align	2
 4626              	.L318:
 4627 00ac 00000000 		.word	event_callback
 4628 00b0 00000000 		.word	errno
 4629              		.cfi_endproc
ARM GAS  /tmp/ccsCUhT2.s 			page 114


 4630              	.LFE166:
 4632              		.section	.text.lwip_write,"ax",%progbits
 4633              		.align	1
 4634              		.global	lwip_write
 4635              		.syntax unified
 4636              		.thumb
 4637              		.thumb_func
 4638              		.fpu fpv4-sp-d16
 4640              	lwip_write:
 4641              	.LFB167:
1744:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1745:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1746:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_write(int s, const void *data, size_t size)
1747:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4642              		.loc 1 1747 1
 4643              		.cfi_startproc
 4644              		@ args = 0, pretend = 0, frame = 16
 4645              		@ frame_needed = 1, uses_anonymous_args = 0
 4646 0000 80B5     		push	{r7, lr}
 4647              	.LCFI150:
 4648              		.cfi_def_cfa_offset 8
 4649              		.cfi_offset 7, -8
 4650              		.cfi_offset 14, -4
 4651 0002 84B0     		sub	sp, sp, #16
 4652              	.LCFI151:
 4653              		.cfi_def_cfa_offset 24
 4654 0004 00AF     		add	r7, sp, #0
 4655              	.LCFI152:
 4656              		.cfi_def_cfa_register 7
 4657 0006 F860     		str	r0, [r7, #12]
 4658 0008 B960     		str	r1, [r7, #8]
 4659 000a 7A60     		str	r2, [r7, #4]
1748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_send(s, data, size, 0);
 4660              		.loc 1 1748 10
 4661 000c 0023     		movs	r3, #0
 4662 000e 7A68     		ldr	r2, [r7, #4]
 4663 0010 B968     		ldr	r1, [r7, #8]
 4664 0012 F868     		ldr	r0, [r7, #12]
 4665 0014 FFF7FEFF 		bl	lwip_send
 4666 0018 0346     		mov	r3, r0
1749:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4667              		.loc 1 1749 1
 4668 001a 1846     		mov	r0, r3
 4669 001c 1037     		adds	r7, r7, #16
 4670              	.LCFI153:
 4671              		.cfi_def_cfa_offset 8
 4672 001e BD46     		mov	sp, r7
 4673              	.LCFI154:
 4674              		.cfi_def_cfa_register 13
 4675              		@ sp needed
 4676 0020 80BD     		pop	{r7, pc}
 4677              		.cfi_endproc
 4678              	.LFE167:
 4680              		.section	.text.lwip_writev,"ax",%progbits
 4681              		.align	1
 4682              		.global	lwip_writev
 4683              		.syntax unified
ARM GAS  /tmp/ccsCUhT2.s 			page 115


 4684              		.thumb
 4685              		.thumb_func
 4686              		.fpu fpv4-sp-d16
 4688              	lwip_writev:
 4689              	.LFB168:
1750:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1751:Middlewares/Third_Party/LwIP/src/api/sockets.c **** ssize_t
1752:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_writev(int s, const struct iovec *iov, int iovcnt)
1753:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4690              		.loc 1 1753 1
 4691              		.cfi_startproc
 4692              		@ args = 0, pretend = 0, frame = 48
 4693              		@ frame_needed = 1, uses_anonymous_args = 0
 4694 0000 80B5     		push	{r7, lr}
 4695              	.LCFI155:
 4696              		.cfi_def_cfa_offset 8
 4697              		.cfi_offset 7, -8
 4698              		.cfi_offset 14, -4
 4699 0002 8CB0     		sub	sp, sp, #48
 4700              	.LCFI156:
 4701              		.cfi_def_cfa_offset 56
 4702 0004 00AF     		add	r7, sp, #0
 4703              	.LCFI157:
 4704              		.cfi_def_cfa_register 7
 4705 0006 F860     		str	r0, [r7, #12]
 4706 0008 B960     		str	r1, [r7, #8]
 4707 000a 7A60     		str	r2, [r7, #4]
1754:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct msghdr msg;
1755:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1756:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_name = NULL;
 4708              		.loc 1 1756 16
 4709 000c 0023     		movs	r3, #0
 4710 000e 7B61     		str	r3, [r7, #20]
1757:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_namelen = 0;
 4711              		.loc 1 1757 19
 4712 0010 0023     		movs	r3, #0
 4713 0012 BB61     		str	r3, [r7, #24]
1758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Hack: we have to cast via number to cast from 'const' pointer to non-const.
1759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      Blame the opengroup standard for this inconsistency. */
1760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iov = LWIP_CONST_CAST(struct iovec *, iov);
 4714              		.loc 1 1760 15
 4715 0014 BB68     		ldr	r3, [r7, #8]
 4716 0016 FB61     		str	r3, [r7, #28]
1761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_iovlen = iovcnt;
 4717              		.loc 1 1761 18
 4718 0018 7B68     		ldr	r3, [r7, #4]
 4719 001a 3B62     		str	r3, [r7, #32]
1762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_control = NULL;
 4720              		.loc 1 1762 19
 4721 001c 0023     		movs	r3, #0
 4722 001e 7B62     		str	r3, [r7, #36]
1763:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_controllen = 0;
 4723              		.loc 1 1763 22
 4724 0020 0023     		movs	r3, #0
 4725 0022 BB62     		str	r3, [r7, #40]
1764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   msg.msg_flags = 0;
 4726              		.loc 1 1764 17
ARM GAS  /tmp/ccsCUhT2.s 			page 116


 4727 0024 0023     		movs	r3, #0
 4728 0026 FB62     		str	r3, [r7, #44]
1765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_sendmsg(s, &msg, 0);
 4729              		.loc 1 1765 10
 4730 0028 07F11403 		add	r3, r7, #20
 4731 002c 0022     		movs	r2, #0
 4732 002e 1946     		mov	r1, r3
 4733 0030 F868     		ldr	r0, [r7, #12]
 4734 0032 FFF7FEFF 		bl	lwip_sendmsg
 4735 0036 0346     		mov	r3, r0
1766:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4736              		.loc 1 1766 1
 4737 0038 1846     		mov	r0, r3
 4738 003a 3037     		adds	r7, r7, #48
 4739              	.LCFI158:
 4740              		.cfi_def_cfa_offset 8
 4741 003c BD46     		mov	sp, r7
 4742              	.LCFI159:
 4743              		.cfi_def_cfa_register 13
 4744              		@ sp needed
 4745 003e 80BD     		pop	{r7, pc}
 4746              		.cfi_endproc
 4747              	.LFE168:
 4749              		.section	.text.lwip_link_select_cb,"ax",%progbits
 4750              		.align	1
 4751              		.syntax unified
 4752              		.thumb
 4753              		.thumb_func
 4754              		.fpu fpv4-sp-d16
 4756              	lwip_link_select_cb:
 4757              	.LFB169:
1767:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1768:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL
1769:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Add select_cb to select_cb_list. */
1770:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1771:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_link_select_cb(struct lwip_select_cb *select_cb)
1772:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4758              		.loc 1 1772 1
 4759              		.cfi_startproc
 4760              		@ args = 0, pretend = 0, frame = 8
 4761              		@ frame_needed = 1, uses_anonymous_args = 0
 4762 0000 80B5     		push	{r7, lr}
 4763              	.LCFI160:
 4764              		.cfi_def_cfa_offset 8
 4765              		.cfi_offset 7, -8
 4766              		.cfi_offset 14, -4
 4767 0002 82B0     		sub	sp, sp, #8
 4768              	.LCFI161:
 4769              		.cfi_def_cfa_offset 16
 4770 0004 00AF     		add	r7, sp, #0
 4771              	.LCFI162:
 4772              		.cfi_def_cfa_register 7
 4773 0006 7860     		str	r0, [r7, #4]
1773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKET_SELECT_DECL_PROTECT(lev);
1774:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Protect the select_cb_list */
1776:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKET_SELECT_PROTECT(lev);
ARM GAS  /tmp/ccsCUhT2.s 			page 117


 4774              		.loc 1 1776 3
 4775 0008 0C48     		ldr	r0, .L326
 4776 000a FFF7FEFF 		bl	sys_mutex_lock
1777:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Put this select_cb on top of list */
1779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   select_cb->next = select_cb_list;
 4777              		.loc 1 1779 19
 4778 000e 0C4B     		ldr	r3, .L326+4
 4779 0010 1A68     		ldr	r2, [r3]
 4780 0012 7B68     		ldr	r3, [r7, #4]
 4781 0014 1A60     		str	r2, [r3]
1780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (select_cb_list != NULL) {
 4782              		.loc 1 1780 22
 4783 0016 0A4B     		ldr	r3, .L326+4
 4784 0018 1B68     		ldr	r3, [r3]
 4785              		.loc 1 1780 6
 4786 001a 002B     		cmp	r3, #0
 4787 001c 03D0     		beq	.L325
1781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_list->prev = select_cb;
 4788              		.loc 1 1781 19
 4789 001e 084B     		ldr	r3, .L326+4
 4790 0020 1B68     		ldr	r3, [r3]
 4791              		.loc 1 1781 26
 4792 0022 7A68     		ldr	r2, [r7, #4]
 4793 0024 5A60     		str	r2, [r3, #4]
 4794              	.L325:
1782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1783:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   select_cb_list = select_cb;
 4795              		.loc 1 1783 18
 4796 0026 064A     		ldr	r2, .L326+4
 4797 0028 7B68     		ldr	r3, [r7, #4]
 4798 002a 1360     		str	r3, [r2]
1784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Increasing this counter tells select_check_waiters that the list has changed. */
1786:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   select_cb_ctr++;
1787:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1788:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Now we can safely unprotect */
1790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKET_SELECT_UNPROTECT(lev);
 4799              		.loc 1 1790 3
 4800 002c 0348     		ldr	r0, .L326
 4801 002e FFF7FEFF 		bl	sys_mutex_unlock
1791:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4802              		.loc 1 1791 1
 4803 0032 00BF     		nop
 4804 0034 0837     		adds	r7, r7, #8
 4805              	.LCFI163:
 4806              		.cfi_def_cfa_offset 8
 4807 0036 BD46     		mov	sp, r7
 4808              	.LCFI164:
 4809              		.cfi_def_cfa_register 13
 4810              		@ sp needed
 4811 0038 80BD     		pop	{r7, pc}
 4812              	.L327:
 4813 003a 00BF     		.align	2
 4814              	.L326:
 4815 003c 00000000 		.word	lock_tcpip_core
ARM GAS  /tmp/ccsCUhT2.s 			page 118


 4816 0040 00000000 		.word	select_cb_list
 4817              		.cfi_endproc
 4818              	.LFE169:
 4820              		.section	.rodata
 4821 02f9 000000   		.align	2
 4822              	.LC27:
 4823 02fc 73656C65 		.ascii	"select_cb->prev == NULL\000"
 4823      63745F63 
 4823      622D3E70 
 4823      72657620 
 4823      3D3D204E 
 4824              		.align	2
 4825              	.LC28:
 4826 0314 73656C65 		.ascii	"select_cb->prev != NULL\000"
 4826      63745F63 
 4826      622D3E70 
 4826      72657620 
 4826      213D204E 
 4827              		.section	.text.lwip_unlink_select_cb,"ax",%progbits
 4828              		.align	1
 4829              		.syntax unified
 4830              		.thumb
 4831              		.thumb_func
 4832              		.fpu fpv4-sp-d16
 4834              	lwip_unlink_select_cb:
 4835              	.LFB170:
1792:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1793:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Remove select_cb from select_cb_list. */
1794:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1795:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_unlink_select_cb(struct lwip_select_cb *select_cb)
1796:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4836              		.loc 1 1796 1
 4837              		.cfi_startproc
 4838              		@ args = 0, pretend = 0, frame = 8
 4839              		@ frame_needed = 1, uses_anonymous_args = 0
 4840 0000 80B5     		push	{r7, lr}
 4841              	.LCFI165:
 4842              		.cfi_def_cfa_offset 8
 4843              		.cfi_offset 7, -8
 4844              		.cfi_offset 14, -4
 4845 0002 82B0     		sub	sp, sp, #8
 4846              	.LCFI166:
 4847              		.cfi_def_cfa_offset 16
 4848 0004 00AF     		add	r7, sp, #0
 4849              	.LCFI167:
 4850              		.cfi_def_cfa_register 7
 4851 0006 7860     		str	r0, [r7, #4]
1797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKET_SELECT_DECL_PROTECT(lev);
1798:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Take us off the list */
1800:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKET_SELECT_PROTECT(lev);
 4852              		.loc 1 1800 3
 4853 0008 1B48     		ldr	r0, .L334
 4854 000a FFF7FEFF 		bl	sys_mutex_lock
1801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (select_cb->next != NULL) {
 4855              		.loc 1 1801 16
 4856 000e 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 119


 4857 0010 1B68     		ldr	r3, [r3]
 4858              		.loc 1 1801 6
 4859 0012 002B     		cmp	r3, #0
 4860 0014 04D0     		beq	.L329
1802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb->next->prev = select_cb->prev;
 4861              		.loc 1 1802 14
 4862 0016 7B68     		ldr	r3, [r7, #4]
 4863 0018 1B68     		ldr	r3, [r3]
 4864              		.loc 1 1802 38
 4865 001a 7A68     		ldr	r2, [r7, #4]
 4866 001c 5268     		ldr	r2, [r2, #4]
 4867              		.loc 1 1802 27
 4868 001e 5A60     		str	r2, [r3, #4]
 4869              	.L329:
1803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (select_cb_list == select_cb) {
 4870              		.loc 1 1804 22
 4871 0020 164B     		ldr	r3, .L334+4
 4872 0022 1B68     		ldr	r3, [r3]
 4873              		.loc 1 1804 6
 4874 0024 7A68     		ldr	r2, [r7, #4]
 4875 0026 9A42     		cmp	r2, r3
 4876 0028 0FD1     		bne	.L330
1805:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("select_cb->prev == NULL", select_cb->prev == NULL);
 4877              		.loc 1 1805 5
 4878 002a 7B68     		ldr	r3, [r7, #4]
 4879 002c 5B68     		ldr	r3, [r3, #4]
 4880 002e 002B     		cmp	r3, #0
 4881 0030 06D0     		beq	.L331
 4882              		.loc 1 1805 5 is_stmt 0 discriminator 1
 4883 0032 134B     		ldr	r3, .L334+8
 4884 0034 40F20D72 		movw	r2, #1805
 4885 0038 1249     		ldr	r1, .L334+12
 4886 003a 1348     		ldr	r0, .L334+16
 4887 003c FFF7FEFF 		bl	printf
 4888              	.L331:
1806:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb_list = select_cb->next;
 4889              		.loc 1 1806 31 is_stmt 1
 4890 0040 7B68     		ldr	r3, [r7, #4]
 4891 0042 1B68     		ldr	r3, [r3]
 4892              		.loc 1 1806 20
 4893 0044 0D4A     		ldr	r2, .L334+4
 4894 0046 1360     		str	r3, [r2]
 4895 0048 0FE0     		b	.L332
 4896              	.L330:
1807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
1808:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("select_cb->prev != NULL", select_cb->prev != NULL);
 4897              		.loc 1 1808 5
 4898 004a 7B68     		ldr	r3, [r7, #4]
 4899 004c 5B68     		ldr	r3, [r3, #4]
 4900 004e 002B     		cmp	r3, #0
 4901 0050 06D1     		bne	.L333
 4902              		.loc 1 1808 5 is_stmt 0 discriminator 1
 4903 0052 0B4B     		ldr	r3, .L334+8
 4904 0054 4FF4E262 		mov	r2, #1808
 4905 0058 0C49     		ldr	r1, .L334+20
 4906 005a 0B48     		ldr	r0, .L334+16
ARM GAS  /tmp/ccsCUhT2.s 			page 120


 4907 005c FFF7FEFF 		bl	printf
 4908              	.L333:
1809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_cb->prev->next = select_cb->next;
 4909              		.loc 1 1809 14 is_stmt 1
 4910 0060 7B68     		ldr	r3, [r7, #4]
 4911 0062 5B68     		ldr	r3, [r3, #4]
 4912              		.loc 1 1809 38
 4913 0064 7A68     		ldr	r2, [r7, #4]
 4914 0066 1268     		ldr	r2, [r2]
 4915              		.loc 1 1809 27
 4916 0068 1A60     		str	r2, [r3]
 4917              	.L332:
1810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1811:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
1812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Increasing this counter tells select_check_waiters that the list has changed. */
1813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   select_cb_ctr++;
1814:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SOCKET_SELECT_UNPROTECT(lev);
 4918              		.loc 1 1815 3
 4919 006a 0348     		ldr	r0, .L334
 4920 006c FFF7FEFF 		bl	sys_mutex_unlock
1816:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 4921              		.loc 1 1816 1
 4922 0070 00BF     		nop
 4923 0072 0837     		adds	r7, r7, #8
 4924              	.LCFI168:
 4925              		.cfi_def_cfa_offset 8
 4926 0074 BD46     		mov	sp, r7
 4927              	.LCFI169:
 4928              		.cfi_def_cfa_register 13
 4929              		@ sp needed
 4930 0076 80BD     		pop	{r7, pc}
 4931              	.L335:
 4932              		.align	2
 4933              	.L334:
 4934 0078 00000000 		.word	lock_tcpip_core
 4935 007c 00000000 		.word	select_cb_list
 4936 0080 00000000 		.word	.LC0
 4937 0084 FC020000 		.word	.LC27
 4938 0088 50000000 		.word	.LC2
 4939 008c 14030000 		.word	.LC28
 4940              		.cfi_endproc
 4941              	.LFE170:
 4943              		.section	.rodata
 4944              		.align	2
 4945              	.LC29:
 4946 032c 6E726561 		.ascii	"nready >= 0\000"
 4946      6479203E 
 4946      3D203000 
 4947              		.section	.text.lwip_selscan,"ax",%progbits
 4948              		.align	1
 4949              		.syntax unified
 4950              		.thumb
 4951              		.thumb_func
 4952              		.fpu fpv4-sp-d16
 4954              	lwip_selscan:
 4955              	.LFB171:
ARM GAS  /tmp/ccsCUhT2.s 			page 121


1817:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL */
1818:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1819:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT
1820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
1821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Go through the readset and writeset lists and see which socket of the sockets
1822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * set in the sets has events. On return, readset, writeset and exceptset have
1823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * the sockets enabled that had events.
1824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
1825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param maxfdp1 the highest socket index in the sets
1826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_in    set of sockets to check for read events
1827:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_in   set of sockets to check for write events
1828:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_in  set of sockets to check for error events
1829:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param readset_out   set of sockets that had read events
1830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param writeset_out  set of sockets that had write events
1831:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param exceptset_out set os sockets that had error events
1832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return number of sockets that had events (read/write/exception) (>= 0)
1833:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1834:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
1835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_selscan(int maxfdp1, fd_set *readset_in, fd_set *writeset_in, fd_set *exceptset_in,
1836:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              fd_set *readset_out, fd_set *writeset_out, fd_set *exceptset_out)
1837:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 4956              		.loc 1 1837 1
 4957              		.cfi_startproc
 4958              		@ args = 12, pretend = 0, frame = 56
 4959              		@ frame_needed = 1, uses_anonymous_args = 0
 4960 0000 80B5     		push	{r7, lr}
 4961              	.LCFI170:
 4962              		.cfi_def_cfa_offset 8
 4963              		.cfi_offset 7, -8
 4964              		.cfi_offset 14, -4
 4965 0002 8EB0     		sub	sp, sp, #56
 4966              	.LCFI171:
 4967              		.cfi_def_cfa_offset 64
 4968 0004 00AF     		add	r7, sp, #0
 4969              	.LCFI172:
 4970              		.cfi_def_cfa_register 7
 4971 0006 F860     		str	r0, [r7, #12]
 4972 0008 B960     		str	r1, [r7, #8]
 4973 000a 7A60     		str	r2, [r7, #4]
 4974 000c 3B60     		str	r3, [r7]
1838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i, nready = 0;
 4975              		.loc 1 1838 10
 4976 000e 0023     		movs	r3, #0
 4977 0010 3B63     		str	r3, [r7, #48]
1839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
1841:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1842:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lreadset);
 4978              		.loc 1 1843 3
 4979 0012 07F11C03 		add	r3, r7, #28
 4980 0016 0122     		movs	r2, #1
 4981 0018 0021     		movs	r1, #0
 4982 001a 1846     		mov	r0, r3
 4983 001c FFF7FEFF 		bl	memset
1844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lwriteset);
 4984              		.loc 1 1844 3
ARM GAS  /tmp/ccsCUhT2.s 			page 122


 4985 0020 07F11803 		add	r3, r7, #24
 4986 0024 0122     		movs	r2, #1
 4987 0026 0021     		movs	r1, #0
 4988 0028 1846     		mov	r0, r3
 4989 002a FFF7FEFF 		bl	memset
1845:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(&lexceptset);
 4990              		.loc 1 1845 3
 4991 002e 07F11403 		add	r3, r7, #20
 4992 0032 0122     		movs	r2, #1
 4993 0034 0021     		movs	r1, #0
 4994 0036 1846     		mov	r0, r3
 4995 0038 FFF7FEFF 		bl	memset
1846:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
 4996              		.loc 1 1849 10
 4997 003c 0023     		movs	r3, #0
 4998 003e 7B63     		str	r3, [r7, #52]
 4999              		.loc 1 1849 3
 5000 0040 4FE1     		b	.L337
 5001              	.L364:
1850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
1851:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!(readset_in && FD_ISSET(i, readset_in)) &&
 5002              		.loc 1 1851 8
 5003 0042 BB68     		ldr	r3, [r7, #8]
 5004 0044 002B     		cmp	r3, #0
 5005 0046 17D0     		beq	.L338
 5006              		.loc 1 1851 9 discriminator 2
 5007 0048 7B6B     		ldr	r3, [r7, #52]
 5008 004a 032B     		cmp	r3, #3
 5009 004c 14DC     		bgt	.L338
 5010              		.loc 1 1851 25 discriminator 4
 5011 004e 7B6B     		ldr	r3, [r7, #52]
 5012 0050 002B     		cmp	r3, #0
 5013 0052 11DB     		blt	.L338
 5014              		.loc 1 1851 25 is_stmt 0 discriminator 6
 5015 0054 7B6B     		ldr	r3, [r7, #52]
 5016 0056 002B     		cmp	r3, #0
 5017 0058 00DA     		bge	.L339
 5018 005a 0733     		adds	r3, r3, #7
 5019              	.L339:
 5020 005c DB10     		asrs	r3, r3, #3
 5021 005e 1A46     		mov	r2, r3
 5022 0060 BB68     		ldr	r3, [r7, #8]
 5023 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5024 0064 1A46     		mov	r2, r3
 5025 0066 7B6B     		ldr	r3, [r7, #52]
 5026 0068 03F00703 		and	r3, r3, #7
 5027              		.loc 1 1851 22 is_stmt 1 discriminator 6
 5028 006c 42FA03F3 		asr	r3, r2, r3
 5029 0070 03F00103 		and	r3, r3, #1
 5030 0074 002B     		cmp	r3, #0
 5031 0076 39D1     		bne	.L340
 5032              	.L338:
 5033              		.loc 1 1851 50 discriminator 7
 5034 0078 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 123


 5035 007a 002B     		cmp	r3, #0
 5036 007c 17D0     		beq	.L341
1852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(writeset_in && FD_ISSET(i, writeset_in)) &&
 5037              		.loc 1 1852 9
 5038 007e 7B6B     		ldr	r3, [r7, #52]
 5039 0080 032B     		cmp	r3, #3
 5040 0082 14DC     		bgt	.L341
 5041              		.loc 1 1852 26 discriminator 2
 5042 0084 7B6B     		ldr	r3, [r7, #52]
 5043 0086 002B     		cmp	r3, #0
 5044 0088 11DB     		blt	.L341
 5045              		.loc 1 1852 26 is_stmt 0 discriminator 4
 5046 008a 7B6B     		ldr	r3, [r7, #52]
 5047 008c 002B     		cmp	r3, #0
 5048 008e 00DA     		bge	.L342
 5049 0090 0733     		adds	r3, r3, #7
 5050              	.L342:
 5051 0092 DB10     		asrs	r3, r3, #3
 5052 0094 1A46     		mov	r2, r3
 5053 0096 7B68     		ldr	r3, [r7, #4]
 5054 0098 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5055 009a 1A46     		mov	r2, r3
 5056 009c 7B6B     		ldr	r3, [r7, #52]
 5057 009e 03F00703 		and	r3, r3, #7
 5058              		.loc 1 1852 23 is_stmt 1 discriminator 4
 5059 00a2 42FA03F3 		asr	r3, r2, r3
 5060 00a6 03F00103 		and	r3, r3, #1
 5061 00aa 002B     		cmp	r3, #0
 5062 00ac 1ED1     		bne	.L340
 5063              	.L341:
 5064              		.loc 1 1852 52 discriminator 5
 5065 00ae 3B68     		ldr	r3, [r7]
 5066 00b0 002B     		cmp	r3, #0
 5067 00b2 00F01281 		beq	.L367
1853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         !(exceptset_in && FD_ISSET(i, exceptset_in))) {
 5068              		.loc 1 1853 9
 5069 00b6 7B6B     		ldr	r3, [r7, #52]
 5070 00b8 032B     		cmp	r3, #3
 5071 00ba 00F30E81 		bgt	.L367
 5072              		.loc 1 1853 27 discriminator 1
 5073 00be 7B6B     		ldr	r3, [r7, #52]
 5074 00c0 002B     		cmp	r3, #0
 5075 00c2 C0F20A81 		blt	.L367
 5076              		.loc 1 1853 27 is_stmt 0 discriminator 2
 5077 00c6 7B6B     		ldr	r3, [r7, #52]
 5078 00c8 002B     		cmp	r3, #0
 5079 00ca 00DA     		bge	.L344
 5080 00cc 0733     		adds	r3, r3, #7
 5081              	.L344:
 5082 00ce DB10     		asrs	r3, r3, #3
 5083 00d0 1A46     		mov	r2, r3
 5084 00d2 3B68     		ldr	r3, [r7]
 5085 00d4 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5086 00d6 1A46     		mov	r2, r3
 5087 00d8 7B6B     		ldr	r3, [r7, #52]
 5088 00da 03F00703 		and	r3, r3, #7
 5089              		.loc 1 1853 24 is_stmt 1 discriminator 2
ARM GAS  /tmp/ccsCUhT2.s 			page 124


 5090 00de 42FA03F3 		asr	r3, r2, r3
 5091 00e2 03F00103 		and	r3, r3, #1
 5092 00e6 002B     		cmp	r3, #0
 5093 00e8 00F0F780 		beq	.L367
 5094              	.L340:
1854:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       continue;
1855:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* First get the socket's status (protected)... */
1857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
 5095              		.loc 1 1857 5
 5096 00ec FFF7FEFF 		bl	sys_arch_protect
 5097 00f0 F862     		str	r0, [r7, #44]
1858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = tryget_socket_unconn_locked(i);
 5098              		.loc 1 1858 12
 5099 00f2 786B     		ldr	r0, [r7, #52]
 5100 00f4 FFF7FEFF 		bl	tryget_socket_unconn_locked
 5101 00f8 B862     		str	r0, [r7, #40]
1859:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sock != NULL) {
 5102              		.loc 1 1859 8
 5103 00fa BB6A     		ldr	r3, [r7, #40]
 5104 00fc 002B     		cmp	r3, #0
 5105 00fe 00F0E680 		beq	.L346
 5106              	.LBB54:
1860:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       void *lastdata = sock->lastdata.pbuf;
 5107              		.loc 1 1860 13
 5108 0102 BB6A     		ldr	r3, [r7, #40]
 5109 0104 5B68     		ldr	r3, [r3, #4]
 5110 0106 7B62     		str	r3, [r7, #36]
1861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s16_t rcvevent = sock->rcvevent;
 5111              		.loc 1 1861 13
 5112 0108 BB6A     		ldr	r3, [r7, #40]
 5113 010a 1B89     		ldrh	r3, [r3, #8]	@ movhi
 5114 010c 7B84     		strh	r3, [r7, #34]	@ movhi
1862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t sendevent = sock->sendevent;
 5115              		.loc 1 1862 13
 5116 010e BB6A     		ldr	r3, [r7, #40]
 5117 0110 5B89     		ldrh	r3, [r3, #10]	@ movhi
 5118 0112 3B84     		strh	r3, [r7, #32]	@ movhi
1863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       u16_t errevent = sock->errevent;
 5119              		.loc 1 1863 13
 5120 0114 BB6A     		ldr	r3, [r7, #40]
 5121 0116 9B89     		ldrh	r3, [r3, #12]	@ movhi
 5122 0118 FB83     		strh	r3, [r7, #30]	@ movhi
1864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 5123              		.loc 1 1864 7
 5124 011a F86A     		ldr	r0, [r7, #44]
 5125 011c FFF7FEFF 		bl	sys_arch_unprotect
1865:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1866:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* ... then examine it: */
1867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for read */
1868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (readset_in && FD_ISSET(i, readset_in) && ((lastdata != NULL) || (rcvevent > 0))) {
 5126              		.loc 1 1868 10
 5127 0120 BB68     		ldr	r3, [r7, #8]
 5128 0122 002B     		cmp	r3, #0
 5129 0124 46D0     		beq	.L347
 5130              		.loc 1 1868 22 discriminator 1
 5131 0126 7B6B     		ldr	r3, [r7, #52]
ARM GAS  /tmp/ccsCUhT2.s 			page 125


 5132 0128 032B     		cmp	r3, #3
 5133 012a 43DC     		bgt	.L347
 5134              		.loc 1 1868 25 discriminator 2
 5135 012c 7B6B     		ldr	r3, [r7, #52]
 5136 012e 002B     		cmp	r3, #0
 5137 0130 40DB     		blt	.L347
 5138              		.loc 1 1868 25 is_stmt 0 discriminator 3
 5139 0132 7B6B     		ldr	r3, [r7, #52]
 5140 0134 002B     		cmp	r3, #0
 5141 0136 00DA     		bge	.L348
 5142 0138 0733     		adds	r3, r3, #7
 5143              	.L348:
 5144 013a DB10     		asrs	r3, r3, #3
 5145 013c 1A46     		mov	r2, r3
 5146 013e BB68     		ldr	r3, [r7, #8]
 5147 0140 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5148 0142 1A46     		mov	r2, r3
 5149 0144 7B6B     		ldr	r3, [r7, #52]
 5150 0146 03F00703 		and	r3, r3, #7
 5151              		.loc 1 1868 22 is_stmt 1 discriminator 3
 5152 014a 42FA03F3 		asr	r3, r2, r3
 5153 014e 03F00103 		and	r3, r3, #1
 5154 0152 002B     		cmp	r3, #0
 5155 0154 2ED0     		beq	.L347
 5156              		.loc 1 1868 49 discriminator 4
 5157 0156 7B6A     		ldr	r3, [r7, #36]
 5158 0158 002B     		cmp	r3, #0
 5159 015a 03D1     		bne	.L349
 5160              		.loc 1 1868 72 discriminator 5
 5161 015c B7F92230 		ldrsh	r3, [r7, #34]
 5162 0160 002B     		cmp	r3, #0
 5163 0162 27DD     		ble	.L347
 5164              	.L349:
1869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lreadset);
 5165              		.loc 1 1869 9
 5166 0164 7B6B     		ldr	r3, [r7, #52]
 5167 0166 032B     		cmp	r3, #3
 5168 0168 21DC     		bgt	.L350
 5169              		.loc 1 1869 9 is_stmt 0 discriminator 1
 5170 016a 7B6B     		ldr	r3, [r7, #52]
 5171 016c 002B     		cmp	r3, #0
 5172 016e 1EDB     		blt	.L350
 5173              		.loc 1 1869 9 discriminator 2
 5174 0170 7B6B     		ldr	r3, [r7, #52]
 5175 0172 002B     		cmp	r3, #0
 5176 0174 00DA     		bge	.L351
 5177 0176 0733     		adds	r3, r3, #7
 5178              	.L351:
 5179 0178 DB10     		asrs	r3, r3, #3
 5180 017a 07F13802 		add	r2, r7, #56
 5181 017e 1344     		add	r3, r3, r2
 5182 0180 13F81C3C 		ldrb	r3, [r3, #-28]	@ zero_extendqisi2
 5183 0184 5AB2     		sxtb	r2, r3
 5184 0186 7B6B     		ldr	r3, [r7, #52]
 5185 0188 03F00703 		and	r3, r3, #7
 5186 018c 0121     		movs	r1, #1
 5187 018e 01FA03F3 		lsl	r3, r1, r3
ARM GAS  /tmp/ccsCUhT2.s 			page 126


 5188 0192 5BB2     		sxtb	r3, r3
 5189 0194 1343     		orrs	r3, r3, r2
 5190 0196 5AB2     		sxtb	r2, r3
 5191 0198 7B6B     		ldr	r3, [r7, #52]
 5192 019a 002B     		cmp	r3, #0
 5193 019c 00DA     		bge	.L352
 5194 019e 0733     		adds	r3, r3, #7
 5195              	.L352:
 5196 01a0 DB10     		asrs	r3, r3, #3
 5197 01a2 D2B2     		uxtb	r2, r2
 5198 01a4 07F13801 		add	r1, r7, #56
 5199 01a8 0B44     		add	r3, r3, r1
 5200 01aa 03F81C2C 		strb	r2, [r3, #-28]
 5201              	.L350:
1870:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for reading\n", i));
1871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
 5202              		.loc 1 1871 15 is_stmt 1
 5203 01ae 3B6B     		ldr	r3, [r7, #48]
 5204 01b0 0133     		adds	r3, r3, #1
 5205 01b2 3B63     		str	r3, [r7, #48]
 5206              	.L347:
1872:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket is ready for write */
1874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (writeset_in && FD_ISSET(i, writeset_in) && (sendevent != 0)) {
 5207              		.loc 1 1874 10
 5208 01b4 7B68     		ldr	r3, [r7, #4]
 5209 01b6 002B     		cmp	r3, #0
 5210 01b8 42D0     		beq	.L353
 5211              		.loc 1 1874 23 discriminator 1
 5212 01ba 7B6B     		ldr	r3, [r7, #52]
 5213 01bc 032B     		cmp	r3, #3
 5214 01be 3FDC     		bgt	.L353
 5215              		.loc 1 1874 26 discriminator 2
 5216 01c0 7B6B     		ldr	r3, [r7, #52]
 5217 01c2 002B     		cmp	r3, #0
 5218 01c4 3CDB     		blt	.L353
 5219              		.loc 1 1874 26 is_stmt 0 discriminator 3
 5220 01c6 7B6B     		ldr	r3, [r7, #52]
 5221 01c8 002B     		cmp	r3, #0
 5222 01ca 00DA     		bge	.L354
 5223 01cc 0733     		adds	r3, r3, #7
 5224              	.L354:
 5225 01ce DB10     		asrs	r3, r3, #3
 5226 01d0 1A46     		mov	r2, r3
 5227 01d2 7B68     		ldr	r3, [r7, #4]
 5228 01d4 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5229 01d6 1A46     		mov	r2, r3
 5230 01d8 7B6B     		ldr	r3, [r7, #52]
 5231 01da 03F00703 		and	r3, r3, #7
 5232              		.loc 1 1874 23 is_stmt 1 discriminator 3
 5233 01de 42FA03F3 		asr	r3, r2, r3
 5234 01e2 03F00103 		and	r3, r3, #1
 5235 01e6 002B     		cmp	r3, #0
 5236 01e8 2AD0     		beq	.L353
 5237              		.loc 1 1874 51 discriminator 4
 5238 01ea 3B8C     		ldrh	r3, [r7, #32]
 5239 01ec 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 127


 5240 01ee 27D0     		beq	.L353
1875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lwriteset);
 5241              		.loc 1 1875 9
 5242 01f0 7B6B     		ldr	r3, [r7, #52]
 5243 01f2 032B     		cmp	r3, #3
 5244 01f4 21DC     		bgt	.L355
 5245              		.loc 1 1875 9 is_stmt 0 discriminator 1
 5246 01f6 7B6B     		ldr	r3, [r7, #52]
 5247 01f8 002B     		cmp	r3, #0
 5248 01fa 1EDB     		blt	.L355
 5249              		.loc 1 1875 9 discriminator 2
 5250 01fc 7B6B     		ldr	r3, [r7, #52]
 5251 01fe 002B     		cmp	r3, #0
 5252 0200 00DA     		bge	.L356
 5253 0202 0733     		adds	r3, r3, #7
 5254              	.L356:
 5255 0204 DB10     		asrs	r3, r3, #3
 5256 0206 07F13802 		add	r2, r7, #56
 5257 020a 1344     		add	r3, r3, r2
 5258 020c 13F8203C 		ldrb	r3, [r3, #-32]	@ zero_extendqisi2
 5259 0210 5AB2     		sxtb	r2, r3
 5260 0212 7B6B     		ldr	r3, [r7, #52]
 5261 0214 03F00703 		and	r3, r3, #7
 5262 0218 0121     		movs	r1, #1
 5263 021a 01FA03F3 		lsl	r3, r1, r3
 5264 021e 5BB2     		sxtb	r3, r3
 5265 0220 1343     		orrs	r3, r3, r2
 5266 0222 5AB2     		sxtb	r2, r3
 5267 0224 7B6B     		ldr	r3, [r7, #52]
 5268 0226 002B     		cmp	r3, #0
 5269 0228 00DA     		bge	.L357
 5270 022a 0733     		adds	r3, r3, #7
 5271              	.L357:
 5272 022c DB10     		asrs	r3, r3, #3
 5273 022e D2B2     		uxtb	r2, r2
 5274 0230 07F13801 		add	r1, r7, #56
 5275 0234 0B44     		add	r3, r3, r1
 5276 0236 03F8202C 		strb	r2, [r3, #-32]
 5277              	.L355:
1876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for writing\n", i));
1877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
 5278              		.loc 1 1877 15 is_stmt 1
 5279 023a 3B6B     		ldr	r3, [r7, #48]
 5280 023c 0133     		adds	r3, r3, #1
 5281 023e 3B63     		str	r3, [r7, #48]
 5282              	.L353:
1878:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* See if netconn of this socket had an error */
1880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (exceptset_in && FD_ISSET(i, exceptset_in) && (errevent != 0)) {
 5283              		.loc 1 1880 10
 5284 0240 3B68     		ldr	r3, [r7]
 5285 0242 002B     		cmp	r3, #0
 5286 0244 4AD0     		beq	.L345
 5287              		.loc 1 1880 24 discriminator 1
 5288 0246 7B6B     		ldr	r3, [r7, #52]
 5289 0248 032B     		cmp	r3, #3
 5290 024a 47DC     		bgt	.L345
ARM GAS  /tmp/ccsCUhT2.s 			page 128


 5291              		.loc 1 1880 27 discriminator 2
 5292 024c 7B6B     		ldr	r3, [r7, #52]
 5293 024e 002B     		cmp	r3, #0
 5294 0250 44DB     		blt	.L345
 5295              		.loc 1 1880 27 is_stmt 0 discriminator 3
 5296 0252 7B6B     		ldr	r3, [r7, #52]
 5297 0254 002B     		cmp	r3, #0
 5298 0256 00DA     		bge	.L359
 5299 0258 0733     		adds	r3, r3, #7
 5300              	.L359:
 5301 025a DB10     		asrs	r3, r3, #3
 5302 025c 1A46     		mov	r2, r3
 5303 025e 3B68     		ldr	r3, [r7]
 5304 0260 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5305 0262 1A46     		mov	r2, r3
 5306 0264 7B6B     		ldr	r3, [r7, #52]
 5307 0266 03F00703 		and	r3, r3, #7
 5308              		.loc 1 1880 24 is_stmt 1 discriminator 3
 5309 026a 42FA03F3 		asr	r3, r2, r3
 5310 026e 03F00103 		and	r3, r3, #1
 5311 0272 002B     		cmp	r3, #0
 5312 0274 32D0     		beq	.L345
 5313              		.loc 1 1880 53 discriminator 4
 5314 0276 FB8B     		ldrh	r3, [r7, #30]
 5315 0278 002B     		cmp	r3, #0
 5316 027a 2FD0     		beq	.L345
1881:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         FD_SET(i, &lexceptset);
 5317              		.loc 1 1881 9
 5318 027c 7B6B     		ldr	r3, [r7, #52]
 5319 027e 032B     		cmp	r3, #3
 5320 0280 21DC     		bgt	.L360
 5321              		.loc 1 1881 9 is_stmt 0 discriminator 1
 5322 0282 7B6B     		ldr	r3, [r7, #52]
 5323 0284 002B     		cmp	r3, #0
 5324 0286 1EDB     		blt	.L360
 5325              		.loc 1 1881 9 discriminator 2
 5326 0288 7B6B     		ldr	r3, [r7, #52]
 5327 028a 002B     		cmp	r3, #0
 5328 028c 00DA     		bge	.L361
 5329 028e 0733     		adds	r3, r3, #7
 5330              	.L361:
 5331 0290 DB10     		asrs	r3, r3, #3
 5332 0292 07F13802 		add	r2, r7, #56
 5333 0296 1344     		add	r3, r3, r2
 5334 0298 13F8243C 		ldrb	r3, [r3, #-36]	@ zero_extendqisi2
 5335 029c 5AB2     		sxtb	r2, r3
 5336 029e 7B6B     		ldr	r3, [r7, #52]
 5337 02a0 03F00703 		and	r3, r3, #7
 5338 02a4 0121     		movs	r1, #1
 5339 02a6 01FA03F3 		lsl	r3, r1, r3
 5340 02aa 5BB2     		sxtb	r3, r3
 5341 02ac 1343     		orrs	r3, r3, r2
 5342 02ae 5AB2     		sxtb	r2, r3
 5343 02b0 7B6B     		ldr	r3, [r7, #52]
 5344 02b2 002B     		cmp	r3, #0
 5345 02b4 00DA     		bge	.L362
 5346 02b6 0733     		adds	r3, r3, #7
ARM GAS  /tmp/ccsCUhT2.s 			page 129


 5347              	.L362:
 5348 02b8 DB10     		asrs	r3, r3, #3
 5349 02ba D2B2     		uxtb	r2, r2
 5350 02bc 07F13801 		add	r1, r7, #56
 5351 02c0 0B44     		add	r3, r3, r1
 5352 02c2 03F8242C 		strb	r2, [r3, #-36]
 5353              	.L360:
1882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_selscan: fd=%d ready for exception\n", i));
1883:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready++;
 5354              		.loc 1 1883 15 is_stmt 1
 5355 02c6 3B6B     		ldr	r3, [r7, #48]
 5356 02c8 0133     		adds	r3, r3, #1
 5357 02ca 3B63     		str	r3, [r7, #48]
 5358 02cc 06E0     		b	.L345
 5359              	.L346:
 5360              	.LBE54:
1884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
1886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
1887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 5361              		.loc 1 1887 7
 5362 02ce F86A     		ldr	r0, [r7, #44]
 5363 02d0 FFF7FEFF 		bl	sys_arch_unprotect
1888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* no a valid open socket */
1889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 5364              		.loc 1 1889 14
 5365 02d4 4FF0FF33 		mov	r3, #-1
 5366 02d8 1CE0     		b	.L366
 5367              	.L367:
1854:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 5368              		.loc 1 1854 7
 5369 02da 00BF     		nop
 5370              	.L345:
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 5371              		.loc 1 1849 46 discriminator 2
 5372 02dc 7B6B     		ldr	r3, [r7, #52]
 5373 02de 0133     		adds	r3, r3, #1
 5374 02e0 7B63     		str	r3, [r7, #52]
 5375              	.L337:
1849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
 5376              		.loc 1 1849 3 discriminator 1
 5377 02e2 7A6B     		ldr	r2, [r7, #52]
 5378 02e4 FB68     		ldr	r3, [r7, #12]
 5379 02e6 9A42     		cmp	r2, r3
 5380 02e8 FFF6ABAE 		blt	.L364
1890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* copy local sets to the ones provided as arguments */
1893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *readset_out = lreadset;
 5381              		.loc 1 1893 16
 5382 02ec 3B6C     		ldr	r3, [r7, #64]
 5383 02ee 3A7F     		ldrb	r2, [r7, #28]
 5384 02f0 1A70     		strb	r2, [r3]
1894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *writeset_out = lwriteset;
 5385              		.loc 1 1894 17
 5386 02f2 7B6C     		ldr	r3, [r7, #68]
 5387 02f4 3A7E     		ldrb	r2, [r7, #24]
ARM GAS  /tmp/ccsCUhT2.s 			page 130


 5388 02f6 1A70     		strb	r2, [r3]
1895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *exceptset_out = lexceptset;
 5389              		.loc 1 1895 18
 5390 02f8 BB6C     		ldr	r3, [r7, #72]
 5391 02fa 3A7D     		ldrb	r2, [r7, #20]
 5392 02fc 1A70     		strb	r2, [r3]
1896:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1897:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("nready >= 0", nready >= 0);
 5393              		.loc 1 1897 3
 5394 02fe 3B6B     		ldr	r3, [r7, #48]
 5395 0300 002B     		cmp	r3, #0
 5396 0302 06DA     		bge	.L365
 5397              		.loc 1 1897 3 is_stmt 0 discriminator 1
 5398 0304 054B     		ldr	r3, .L368
 5399 0306 40F26972 		movw	r2, #1897
 5400 030a 0549     		ldr	r1, .L368+4
 5401 030c 0548     		ldr	r0, .L368+8
 5402 030e FFF7FEFF 		bl	printf
 5403              	.L365:
1898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 5404              		.loc 1 1898 10 is_stmt 1
 5405 0312 3B6B     		ldr	r3, [r7, #48]
 5406              	.L366:
1899:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 5407              		.loc 1 1899 1 discriminator 1
 5408 0314 1846     		mov	r0, r3
 5409 0316 3837     		adds	r7, r7, #56
 5410              	.LCFI173:
 5411              		.cfi_def_cfa_offset 8
 5412 0318 BD46     		mov	sp, r7
 5413              	.LCFI174:
 5414              		.cfi_def_cfa_register 13
 5415              		@ sp needed
 5416 031a 80BD     		pop	{r7, pc}
 5417              	.L369:
 5418              		.align	2
 5419              	.L368:
 5420 031c 00000000 		.word	.LC0
 5421 0320 2C030000 		.word	.LC29
 5422 0324 50000000 		.word	.LC2
 5423              		.cfi_endproc
 5424              	.LFE171:
 5426              		.section	.rodata
 5427              		.align	2
 5428              	.LC30:
 5429 0338 736F636B 		.ascii	"sock->select_waiting > 0\000"
 5429      2D3E7365 
 5429      6C656374 
 5429      5F776169 
 5429      74696E67 
 5430              		.section	.text.lwip_select,"ax",%progbits
 5431              		.align	1
 5432              		.global	lwip_select
 5433              		.syntax unified
 5434              		.thumb
 5435              		.thumb_func
 5436              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccsCUhT2.s 			page 131


 5438              	lwip_select:
 5439              	.LFB172:
1900:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1901:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_FULLDUPLEX
1902:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Mark all of the set sockets in one of the three fdsets passed to select as used.
1903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * All sockets are marked (and later unmarked), whether they are open or not.
1904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This is OK as lwip_selscan aborts select when non-open sockets are found.
1905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1906:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1907:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select_inc_sockets_used_set(int maxfdp, fd_set *fdset, fd_set *used_sockets)
1908:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (fdset) {
1911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     int i;
1912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (i = LWIP_SOCKET_OFFSET; i < maxfdp; i++) {
1913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* if this FD is in the set, lock it (unless already done) */
1914:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (FD_ISSET(i, fdset) && !FD_ISSET(i, used_sockets)) {
1915:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct lwip_sock *sock;
1916:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
1917:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock = tryget_socket_unconn_locked(i);
1918:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock != NULL) {
1919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* leave the socket used until released by lwip_select_dec_sockets_used */
1920:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           FD_SET(i, used_sockets);
1921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
1922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
1923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
1924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1926:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1927:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1928:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Mark all sockets passed to select as used to prevent them from being freed
1929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * from other threads while select is running.
1930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Marked sockets are added to 'used_sockets' to mark them only once an be able
1931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to unmark them correctly.
1932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
1933:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1934:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select_inc_sockets_used(int maxfdp, fd_set *fdset1, fd_set *fdset2, fd_set *fdset3, fd_set *us
1935:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1936:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   FD_ZERO(used_sockets);
1937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_select_inc_sockets_used_set(maxfdp, fdset1, used_sockets);
1938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_select_inc_sockets_used_set(maxfdp, fdset2, used_sockets);
1939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_select_inc_sockets_used_set(maxfdp, fdset3, used_sockets);
1940:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1941:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1942:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Let go all sockets that were marked as used when starting select */
1943:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
1944:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select_dec_sockets_used(int maxfdp, fd_set *used_sockets)
1945:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
1946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (i = LWIP_SOCKET_OFFSET; i < maxfdp; i++) {
1948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* if this FD is not in the set, continue */
1949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (FD_ISSET(i, used_sockets)) {
1950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct lwip_sock *sock = tryget_socket_unconn_nouse(i);
1951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("socket gone at the end of select", sock != NULL);
1952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock != NULL) {
1953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
1954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
ARM GAS  /tmp/ccsCUhT2.s 			page 132


1955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
1956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1957:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
1958:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
1959:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define lwip_select_inc_sockets_used(maxfdp1, readset, writeset, exceptset, used_sockets)
1960:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define lwip_select_dec_sockets_used(maxfdp1, used_sockets)
1961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
1962:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1963:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
1964:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_select(int maxfdp1, fd_set *readset, fd_set *writeset, fd_set *exceptset,
1965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             struct timeval *timeout)
1966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 5440              		.loc 1 1966 1
 5441              		.cfi_startproc
 5442              		@ args = 4, pretend = 0, frame = 104
 5443              		@ frame_needed = 1, uses_anonymous_args = 0
 5444 0000 80B5     		push	{r7, lr}
 5445              	.LCFI175:
 5446              		.cfi_def_cfa_offset 8
 5447              		.cfi_offset 7, -8
 5448              		.cfi_offset 14, -4
 5449 0002 9EB0     		sub	sp, sp, #120
 5450              	.LCFI176:
 5451              		.cfi_def_cfa_offset 128
 5452 0004 04AF     		add	r7, sp, #16
 5453              	.LCFI177:
 5454              		.cfi_def_cfa 7, 112
 5455 0006 F860     		str	r0, [r7, #12]
 5456 0008 B960     		str	r1, [r7, #8]
 5457 000a 7A60     		str	r2, [r7, #4]
 5458 000c 3B60     		str	r3, [r7]
1967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
 5459              		.loc 1 1967 9
 5460 000e 0023     		movs	r3, #0
 5461 0010 7B66     		str	r3, [r7, #100]
1968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
1969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set lreadset, lwriteset, lexceptset;
1970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t msectimeout;
1971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int i;
1972:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int maxfdp2;
1973:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
1974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int waited = 0;
1975:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1976:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_FULLDUPLEX
1977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   fd_set used_sockets;
1978:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
1979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
1980:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select(%d, %p, %p, %p, tvsec=%"S32_F" tvusec=%"S32_F")\n",
1982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               maxfdp1, (void *)readset, (void *) writeset, (void *) exceptset,
1983:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               timeout ? (s32_t)timeout->tv_sec : (s32_t) - 1,
1984:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                               timeout ? (s32_t)timeout->tv_usec : (s32_t) - 1));
1985:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((maxfdp1 < 0) || (maxfdp1 > LWIP_SELECT_MAXNFDS)) {
 5462              		.loc 1 1986 6
 5463 0012 FB68     		ldr	r3, [r7, #12]
 5464 0014 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 133


 5465 0016 02DB     		blt	.L371
 5466              		.loc 1 1986 21 discriminator 1
 5467 0018 FB68     		ldr	r3, [r7, #12]
 5468 001a 042B     		cmp	r3, #4
 5469 001c 05DD     		ble	.L372
 5470              	.L371:
1987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EINVAL);
 5471              		.loc 1 1987 5 discriminator 1
 5472 001e 934B     		ldr	r3, .L414
 5473 0020 1622     		movs	r2, #22
 5474 0022 1A60     		str	r2, [r3]
1988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5475              		.loc 1 1988 12 discriminator 1
 5476 0024 4FF0FF33 		mov	r3, #-1
 5477 0028 E4E1     		b	.L412
 5478              	.L372:
1989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
1990:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1991:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_select_inc_sockets_used(maxfdp1, readset, writeset, exceptset, &used_sockets);
1992:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each socket in each list to count number of sockets which
1994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      currently match */
1995:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexceptset);
 5479              		.loc 1 1995 12
 5480 002a 07F13803 		add	r3, r7, #56
 5481 002e 0293     		str	r3, [sp, #8]
 5482 0030 07F13C03 		add	r3, r7, #60
 5483 0034 0193     		str	r3, [sp, #4]
 5484 0036 07F14003 		add	r3, r7, #64
 5485 003a 0093     		str	r3, [sp]
 5486 003c 3B68     		ldr	r3, [r7]
 5487 003e 7A68     		ldr	r2, [r7, #4]
 5488 0040 B968     		ldr	r1, [r7, #8]
 5489 0042 F868     		ldr	r0, [r7, #12]
 5490 0044 FFF7FEFF 		bl	lwip_selscan
 5491 0048 3866     		str	r0, [r7, #96]
1996:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
1997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (nready < 0) {
 5492              		.loc 1 1997 6
 5493 004a 3B6E     		ldr	r3, [r7, #96]
 5494 004c 002B     		cmp	r3, #0
 5495 004e 05DA     		bge	.L374
1998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* one of the sockets in one of the fd_sets was invalid */
1999:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(EBADF);
 5496              		.loc 1 1999 5 discriminator 1
 5497 0050 864B     		ldr	r3, .L414
 5498 0052 0922     		movs	r2, #9
 5499 0054 1A60     		str	r2, [r3]
2000:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     lwip_select_dec_sockets_used(maxfdp1, &used_sockets);
2001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 5500              		.loc 1 2001 12 discriminator 1
 5501 0056 4FF0FF33 		mov	r3, #-1
 5502 005a CBE1     		b	.L412
 5503              	.L374:
2002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (nready > 0) {
 5504              		.loc 1 2002 13
 5505 005c 3B6E     		ldr	r3, [r7, #96]
ARM GAS  /tmp/ccsCUhT2.s 			page 134


 5506 005e 002B     		cmp	r3, #0
 5507 0060 00F3B281 		bgt	.L413
2003:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* one or more sockets are set, no need to wait */
2004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: nready=%d\n", nready));
2005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
2006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* If we don't have any current events, then suspend if we are supposed to */
2007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout && timeout->tv_sec == 0 && timeout->tv_usec == 0) {
 5508              		.loc 1 2007 8
 5509 0064 3B6F     		ldr	r3, [r7, #112]
 5510 0066 002B     		cmp	r3, #0
 5511 0068 08D0     		beq	.L376
 5512              		.loc 1 2007 27 discriminator 1
 5513 006a 3B6F     		ldr	r3, [r7, #112]
 5514 006c 1B68     		ldr	r3, [r3]
 5515              		.loc 1 2007 17 discriminator 1
 5516 006e 002B     		cmp	r3, #0
 5517 0070 04D1     		bne	.L376
 5518              		.loc 1 2007 51 discriminator 2
 5519 0072 3B6F     		ldr	r3, [r7, #112]
 5520 0074 5B68     		ldr	r3, [r3, #4]
 5521              		.loc 1 2007 41 discriminator 2
 5522 0076 002B     		cmp	r3, #0
 5523 0078 00F0A681 		beq	.L413
 5524              	.L376:
 5525              	.LBB55:
2008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: no timeout, returning 0\n"));
2009:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This is OK as the local fdsets are empty and nready is zero,
2010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          or we would have returned earlier. */
2011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     } else {
2012:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* None ready: add our semaphore to list:
2013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          We don't actually need any dynamic memory. Our entry on the
2014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          list is only valid while we are in this function, so it's ok
2015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          to use local variables (unless we're running in MPU compatible
2016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          mode). */
2017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_DECLARE(select_cb);
2018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_ALLOC(select_cb, set_errno(ENOMEM); lwip_select_dec_sockets_used(maxfdp1, &
2019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       memset(&API_SELECT_CB_VAR_REF(select_cb), 0, sizeof(struct lwip_select_cb));
 5526              		.loc 1 2019 7
 5527 007c 07F11403 		add	r3, r7, #20
 5528 0080 2422     		movs	r2, #36
 5529 0082 0021     		movs	r1, #0
 5530 0084 1846     		mov	r0, r3
 5531 0086 FFF7FEFF 		bl	memset
2020:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_REF(select_cb).readset = readset;
 5532              		.loc 1 2021 48
 5533 008a BB68     		ldr	r3, [r7, #8]
 5534 008c FB61     		str	r3, [r7, #28]
2022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_REF(select_cb).writeset = writeset;
 5535              		.loc 1 2022 49
 5536 008e 7B68     		ldr	r3, [r7, #4]
 5537 0090 3B62     		str	r3, [r7, #32]
2023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_REF(select_cb).exceptset = exceptset;
 5538              		.loc 1 2023 50
 5539 0092 3B68     		ldr	r3, [r7]
 5540 0094 7B62     		str	r3, [r7, #36]
2024:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
ARM GAS  /tmp/ccsCUhT2.s 			page 135


2025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_REF(select_cb).sem = LWIP_NETCONN_THREAD_SEM_GET();
2026:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
2027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sys_sem_new(&API_SELECT_CB_VAR_REF(select_cb).sem, 0) != ERR_OK) {
 5541              		.loc 1 2027 11
 5542 0096 07F11403 		add	r3, r7, #20
 5543 009a 2033     		adds	r3, r3, #32
 5544 009c 0021     		movs	r1, #0
 5545 009e 1846     		mov	r0, r3
 5546 00a0 FFF7FEFF 		bl	sys_sem_new
 5547 00a4 0346     		mov	r3, r0
 5548              		.loc 1 2027 10
 5549 00a6 002B     		cmp	r3, #0
 5550 00a8 05D0     		beq	.L377
2028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* failed to create semaphore */
2029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         set_errno(ENOMEM);
 5551              		.loc 1 2029 9 discriminator 1
 5552 00aa 704B     		ldr	r3, .L414
 5553 00ac 0C22     		movs	r2, #12
 5554 00ae 1A60     		str	r2, [r3]
2030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         lwip_select_dec_sockets_used(maxfdp1, &used_sockets);
2031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         API_SELECT_CB_VAR_FREE(select_cb);
2032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 5555              		.loc 1 2032 16 discriminator 1
 5556 00b0 4FF0FF33 		mov	r3, #-1
 5557 00b4 9EE1     		b	.L412
 5558              	.L377:
2033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2034:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
2035:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2036:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       lwip_link_select_cb(&API_SELECT_CB_VAR_REF(select_cb));
 5559              		.loc 1 2036 7
 5560 00b6 07F11403 		add	r3, r7, #20
 5561 00ba 1846     		mov	r0, r3
 5562 00bc FFF7FEFF 		bl	lwip_link_select_cb
2037:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Increase select_waiting for each socket we are interested in */
2039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       maxfdp2 = maxfdp1;
 5563              		.loc 1 2039 15
 5564 00c0 FB68     		ldr	r3, [r7, #12]
 5565 00c2 7B65     		str	r3, [r7, #84]
2040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       for (i = LWIP_SOCKET_OFFSET; i < maxfdp1; i++) {
 5566              		.loc 1 2040 14
 5567 00c4 0023     		movs	r3, #0
 5568 00c6 BB65     		str	r3, [r7, #88]
 5569              		.loc 1 2040 7
 5570 00c8 89E0     		b	.L379
 5571              	.L390:
2041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((readset && FD_ISSET(i, readset)) ||
 5572              		.loc 1 2041 12
 5573 00ca BB68     		ldr	r3, [r7, #8]
 5574 00cc 002B     		cmp	r3, #0
 5575 00ce 17D0     		beq	.L380
 5576              		.loc 1 2041 22 discriminator 1
 5577 00d0 BB6D     		ldr	r3, [r7, #88]
 5578 00d2 032B     		cmp	r3, #3
 5579 00d4 14DC     		bgt	.L380
 5580              		.loc 1 2041 25 discriminator 3
ARM GAS  /tmp/ccsCUhT2.s 			page 136


 5581 00d6 BB6D     		ldr	r3, [r7, #88]
 5582 00d8 002B     		cmp	r3, #0
 5583 00da 11DB     		blt	.L380
 5584              		.loc 1 2041 25 is_stmt 0 discriminator 5
 5585 00dc BB6D     		ldr	r3, [r7, #88]
 5586 00de 002B     		cmp	r3, #0
 5587 00e0 00DA     		bge	.L381
 5588 00e2 0733     		adds	r3, r3, #7
 5589              	.L381:
 5590 00e4 DB10     		asrs	r3, r3, #3
 5591 00e6 1A46     		mov	r2, r3
 5592 00e8 BB68     		ldr	r3, [r7, #8]
 5593 00ea 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5594 00ec 1A46     		mov	r2, r3
 5595 00ee BB6D     		ldr	r3, [r7, #88]
 5596 00f0 03F00703 		and	r3, r3, #7
 5597              		.loc 1 2041 22 is_stmt 1 discriminator 5
 5598 00f4 42FA03F3 		asr	r3, r2, r3
 5599 00f8 03F00103 		and	r3, r3, #1
 5600 00fc 002B     		cmp	r3, #0
 5601 00fe 35D1     		bne	.L382
 5602              	.L380:
 5603              		.loc 1 2041 47 discriminator 7
 5604 0100 7B68     		ldr	r3, [r7, #4]
 5605 0102 002B     		cmp	r3, #0
 5606 0104 17D0     		beq	.L383
2042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             (writeset && FD_ISSET(i, writeset)) ||
 5607              		.loc 1 2042 23
 5608 0106 BB6D     		ldr	r3, [r7, #88]
 5609 0108 032B     		cmp	r3, #3
 5610 010a 14DC     		bgt	.L383
 5611              		.loc 1 2042 26 discriminator 1
 5612 010c BB6D     		ldr	r3, [r7, #88]
 5613 010e 002B     		cmp	r3, #0
 5614 0110 11DB     		blt	.L383
 5615              		.loc 1 2042 26 is_stmt 0 discriminator 3
 5616 0112 BB6D     		ldr	r3, [r7, #88]
 5617 0114 002B     		cmp	r3, #0
 5618 0116 00DA     		bge	.L384
 5619 0118 0733     		adds	r3, r3, #7
 5620              	.L384:
 5621 011a DB10     		asrs	r3, r3, #3
 5622 011c 1A46     		mov	r2, r3
 5623 011e 7B68     		ldr	r3, [r7, #4]
 5624 0120 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5625 0122 1A46     		mov	r2, r3
 5626 0124 BB6D     		ldr	r3, [r7, #88]
 5627 0126 03F00703 		and	r3, r3, #7
 5628              		.loc 1 2042 23 is_stmt 1 discriminator 3
 5629 012a 42FA03F3 		asr	r3, r2, r3
 5630 012e 03F00103 		and	r3, r3, #1
 5631 0132 002B     		cmp	r3, #0
 5632 0134 1AD1     		bne	.L382
 5633              	.L383:
 5634              		.loc 1 2042 49 discriminator 5
 5635 0136 3B68     		ldr	r3, [r7]
 5636 0138 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 137


 5637 013a 4DD0     		beq	.L385
2043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             (exceptset && FD_ISSET(i, exceptset))) {
 5638              		.loc 1 2043 24
 5639 013c BB6D     		ldr	r3, [r7, #88]
 5640 013e 032B     		cmp	r3, #3
 5641 0140 4ADC     		bgt	.L385
 5642              		.loc 1 2043 27 discriminator 1
 5643 0142 BB6D     		ldr	r3, [r7, #88]
 5644 0144 002B     		cmp	r3, #0
 5645 0146 47DB     		blt	.L385
 5646              		.loc 1 2043 27 is_stmt 0 discriminator 2
 5647 0148 BB6D     		ldr	r3, [r7, #88]
 5648 014a 002B     		cmp	r3, #0
 5649 014c 00DA     		bge	.L386
 5650 014e 0733     		adds	r3, r3, #7
 5651              	.L386:
 5652 0150 DB10     		asrs	r3, r3, #3
 5653 0152 1A46     		mov	r2, r3
 5654 0154 3B68     		ldr	r3, [r7]
 5655 0156 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5656 0158 1A46     		mov	r2, r3
 5657 015a BB6D     		ldr	r3, [r7, #88]
 5658 015c 03F00703 		and	r3, r3, #7
 5659              		.loc 1 2043 24 is_stmt 1 discriminator 2
 5660 0160 42FA03F3 		asr	r3, r2, r3
 5661 0164 03F00103 		and	r3, r3, #1
 5662 0168 002B     		cmp	r3, #0
 5663 016a 35D0     		beq	.L385
 5664              	.L382:
 5665              	.LBB56:
2044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct lwip_sock *sock;
2045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           SYS_ARCH_PROTECT(lev);
 5666              		.loc 1 2045 11
 5667 016c FFF7FEFF 		bl	sys_arch_protect
 5668 0170 3865     		str	r0, [r7, #80]
2046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock = tryget_socket_unconn_locked(i);
 5669              		.loc 1 2046 18
 5670 0172 B86D     		ldr	r0, [r7, #88]
 5671 0174 FFF7FEFF 		bl	tryget_socket_unconn_locked
 5672 0178 F864     		str	r0, [r7, #76]
2047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock != NULL) {
 5673              		.loc 1 2047 14
 5674 017a FB6C     		ldr	r3, [r7, #76]
 5675 017c 002B     		cmp	r3, #0
 5676 017e 1FD0     		beq	.L387
2048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting++;
 5677              		.loc 1 2048 17
 5678 0180 FB6C     		ldr	r3, [r7, #76]
 5679 0182 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 5680              		.loc 1 2048 33
 5681 0184 0133     		adds	r3, r3, #1
 5682 0186 DAB2     		uxtb	r2, r3
 5683 0188 FB6C     		ldr	r3, [r7, #76]
 5684 018a 9A73     		strb	r2, [r3, #14]
2049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (sock->select_waiting == 0) {
 5685              		.loc 1 2049 21
 5686 018c FB6C     		ldr	r3, [r7, #76]
ARM GAS  /tmp/ccsCUhT2.s 			page 138


 5687 018e 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 5688              		.loc 1 2049 16
 5689 0190 002B     		cmp	r3, #0
 5690 0192 11D1     		bne	.L388
2050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               /* overflow - too many threads waiting */
2051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               sock->select_waiting--;
 5691              		.loc 1 2051 19
 5692 0194 FB6C     		ldr	r3, [r7, #76]
 5693 0196 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 5694              		.loc 1 2051 35
 5695 0198 013B     		subs	r3, r3, #1
 5696 019a DAB2     		uxtb	r2, r3
 5697 019c FB6C     		ldr	r3, [r7, #76]
 5698 019e 9A73     		strb	r2, [r3, #14]
2052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               nready = -1;
 5699              		.loc 1 2052 22
 5700 01a0 4FF0FF33 		mov	r3, #-1
 5701 01a4 3B66     		str	r3, [r7, #96]
2053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               maxfdp2 = i;
 5702              		.loc 1 2053 23
 5703 01a6 BB6D     		ldr	r3, [r7, #88]
 5704 01a8 7B65     		str	r3, [r7, #84]
2054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               SYS_ARCH_UNPROTECT(lev);
 5705              		.loc 1 2054 15
 5706 01aa 386D     		ldr	r0, [r7, #80]
 5707 01ac FFF7FEFF 		bl	sys_arch_unprotect
2055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               done_socket(sock);
2056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               set_errno(EBUSY);
 5708              		.loc 1 2056 15
 5709 01b0 2E4B     		ldr	r3, .L414
 5710 01b2 1022     		movs	r2, #16
 5711 01b4 1A60     		str	r2, [r3]
2057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 5712              		.loc 1 2057 15
 5713 01b6 17E0     		b	.L389
 5714              	.L388:
2058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
2059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             SYS_ARCH_UNPROTECT(lev);
 5715              		.loc 1 2059 13
 5716 01b8 386D     		ldr	r0, [r7, #80]
 5717 01ba FFF7FEFF 		bl	sys_arch_unprotect
 5718 01be 0BE0     		b	.L385
 5719              	.L387:
2060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
2061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Not a valid socket */
2063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             nready = -1;
 5720              		.loc 1 2063 20
 5721 01c0 4FF0FF33 		mov	r3, #-1
 5722 01c4 3B66     		str	r3, [r7, #96]
2064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             maxfdp2 = i;
 5723              		.loc 1 2064 21
 5724 01c6 BB6D     		ldr	r3, [r7, #88]
 5725 01c8 7B65     		str	r3, [r7, #84]
2065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             SYS_ARCH_UNPROTECT(lev);
 5726              		.loc 1 2065 13
 5727 01ca 386D     		ldr	r0, [r7, #80]
ARM GAS  /tmp/ccsCUhT2.s 			page 139


 5728 01cc FFF7FEFF 		bl	sys_arch_unprotect
2066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             set_errno(EBADF);
 5729              		.loc 1 2066 13
 5730 01d0 264B     		ldr	r3, .L414
 5731 01d2 0922     		movs	r2, #9
 5732 01d4 1A60     		str	r2, [r3]
2067:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             break;
 5733              		.loc 1 2067 13
 5734 01d6 07E0     		b	.L389
 5735              	.L385:
 5736              	.LBE56:
2040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((readset && FD_ISSET(i, readset)) ||
 5737              		.loc 1 2040 50 discriminator 2
 5738 01d8 BB6D     		ldr	r3, [r7, #88]
 5739 01da 0133     		adds	r3, r3, #1
 5740 01dc BB65     		str	r3, [r7, #88]
 5741              	.L379:
2040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((readset && FD_ISSET(i, readset)) ||
 5742              		.loc 1 2040 7 discriminator 1
 5743 01de BA6D     		ldr	r2, [r7, #88]
 5744 01e0 FB68     		ldr	r3, [r7, #12]
 5745 01e2 9A42     		cmp	r2, r3
 5746 01e4 FFF671AF 		blt	.L390
 5747              	.L389:
2068:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2070:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2071:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (nready >= 0) {
 5748              		.loc 1 2072 10
 5749 01e8 3B6E     		ldr	r3, [r7, #96]
 5750 01ea 002B     		cmp	r3, #0
 5751 01ec 3ADB     		blt	.L391
2073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Call lwip_selscan again: there could have been events between
2074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            the last scan (without us on the list) and putting us on the list! */
2075:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexcep
 5752              		.loc 1 2075 18
 5753 01ee 07F13803 		add	r3, r7, #56
 5754 01f2 0293     		str	r3, [sp, #8]
 5755 01f4 07F13C03 		add	r3, r7, #60
 5756 01f8 0193     		str	r3, [sp, #4]
 5757 01fa 07F14003 		add	r3, r7, #64
 5758 01fe 0093     		str	r3, [sp]
 5759 0200 3B68     		ldr	r3, [r7]
 5760 0202 7A68     		ldr	r2, [r7, #4]
 5761 0204 B968     		ldr	r1, [r7, #8]
 5762 0206 F868     		ldr	r0, [r7, #12]
 5763 0208 FFF7FEFF 		bl	lwip_selscan
 5764 020c 3866     		str	r0, [r7, #96]
2076:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (!nready) {
 5765              		.loc 1 2076 12
 5766 020e 3B6E     		ldr	r3, [r7, #96]
 5767 0210 002B     		cmp	r3, #0
 5768 0212 27D1     		bne	.L391
2077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* Still none ready, just wait to be woken */
2078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (timeout == 0) {
 5769              		.loc 1 2078 14
ARM GAS  /tmp/ccsCUhT2.s 			page 140


 5770 0214 3B6F     		ldr	r3, [r7, #112]
 5771 0216 002B     		cmp	r3, #0
 5772 0218 02D1     		bne	.L392
2079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Wait forever */
2080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             msectimeout = 0;
 5773              		.loc 1 2080 25
 5774 021a 0023     		movs	r3, #0
 5775 021c FB65     		str	r3, [r7, #92]
 5776 021e 19E0     		b	.L393
 5777              	.L392:
 5778              	.LBB57:
2081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             long msecs_long = ((timeout->tv_sec * 1000) + ((timeout->tv_usec + 500) / 1000));
 5779              		.loc 1 2082 40
 5780 0220 3B6F     		ldr	r3, [r7, #112]
 5781 0222 1B68     		ldr	r3, [r3]
 5782              		.loc 1 2082 49
 5783 0224 4FF47A72 		mov	r2, #1000
 5784 0228 02FB03F2 		mul	r2, r2, r3
 5785              		.loc 1 2082 68
 5786 022c 3B6F     		ldr	r3, [r7, #112]
 5787 022e 5B68     		ldr	r3, [r3, #4]
 5788              		.loc 1 2082 78
 5789 0230 03F5FA73 		add	r3, r3, #500
 5790              		.loc 1 2082 85
 5791 0234 0E49     		ldr	r1, .L414+4
 5792 0236 81FB0301 		smull	r0, r1, r1, r3
 5793 023a 8911     		asrs	r1, r1, #6
 5794 023c DB17     		asrs	r3, r3, #31
 5795 023e CB1A     		subs	r3, r1, r3
 5796              		.loc 1 2082 18
 5797 0240 1344     		add	r3, r3, r2
 5798 0242 BB64     		str	r3, [r7, #72]
2083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (msecs_long <= 0) {
 5799              		.loc 1 2083 16
 5800 0244 BB6C     		ldr	r3, [r7, #72]
 5801 0246 002B     		cmp	r3, #0
 5802 0248 02DC     		bgt	.L394
2084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               /* Wait 1ms at least (0 means wait forever) */
2085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               msectimeout = 1;
 5803              		.loc 1 2085 27
 5804 024a 0123     		movs	r3, #1
 5805 024c FB65     		str	r3, [r7, #92]
 5806 024e 01E0     		b	.L393
 5807              	.L394:
2086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             } else {
2087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               msectimeout = (u32_t)msecs_long;
 5808              		.loc 1 2087 27
 5809 0250 BB6C     		ldr	r3, [r7, #72]
 5810 0252 FB65     		str	r3, [r7, #92]
 5811              	.L393:
 5812              	.LBE57:
2088:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
2089:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2090:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           waitres = sys_arch_sem_wait(SELECT_SEM_PTR(API_SELECT_CB_VAR_REF(select_cb).sem), msectim
 5813              		.loc 1 2091 21
ARM GAS  /tmp/ccsCUhT2.s 			page 141


 5814 0254 07F11403 		add	r3, r7, #20
 5815 0258 2033     		adds	r3, r3, #32
 5816 025a F96D     		ldr	r1, [r7, #92]
 5817 025c 1846     		mov	r0, r3
 5818 025e FFF7FEFF 		bl	sys_arch_sem_wait
 5819 0262 7866     		str	r0, [r7, #100]
 5820              	.L391:
2092:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           waited = 1;
2094:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2096:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2097:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Decrease select_waiting for each socket we are interested in */
2099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       for (i = LWIP_SOCKET_OFFSET; i < maxfdp2; i++) {
 5821              		.loc 1 2099 14
 5822 0264 0023     		movs	r3, #0
 5823 0266 BB65     		str	r3, [r7, #88]
 5824              		.loc 1 2099 7
 5825 0268 84E0     		b	.L395
 5826              	.L415:
 5827 026a 00BF     		.align	2
 5828              	.L414:
 5829 026c 00000000 		.word	errno
 5830 0270 D34D6210 		.word	274877907
 5831              	.L406:
2100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((readset && FD_ISSET(i, readset)) ||
 5832              		.loc 1 2100 12
 5833 0274 BB68     		ldr	r3, [r7, #8]
 5834 0276 002B     		cmp	r3, #0
 5835 0278 17D0     		beq	.L396
 5836              		.loc 1 2100 22 discriminator 1
 5837 027a BB6D     		ldr	r3, [r7, #88]
 5838 027c 032B     		cmp	r3, #3
 5839 027e 14DC     		bgt	.L396
 5840              		.loc 1 2100 25 discriminator 3
 5841 0280 BB6D     		ldr	r3, [r7, #88]
 5842 0282 002B     		cmp	r3, #0
 5843 0284 11DB     		blt	.L396
 5844              		.loc 1 2100 25 is_stmt 0 discriminator 5
 5845 0286 BB6D     		ldr	r3, [r7, #88]
 5846 0288 002B     		cmp	r3, #0
 5847 028a 00DA     		bge	.L397
 5848 028c 0733     		adds	r3, r3, #7
 5849              	.L397:
 5850 028e DB10     		asrs	r3, r3, #3
 5851 0290 1A46     		mov	r2, r3
 5852 0292 BB68     		ldr	r3, [r7, #8]
 5853 0294 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5854 0296 1A46     		mov	r2, r3
 5855 0298 BB6D     		ldr	r3, [r7, #88]
 5856 029a 03F00703 		and	r3, r3, #7
 5857              		.loc 1 2100 22 is_stmt 1 discriminator 5
 5858 029e 42FA03F3 		asr	r3, r2, r3
 5859 02a2 03F00103 		and	r3, r3, #1
 5860 02a6 002B     		cmp	r3, #0
 5861 02a8 35D1     		bne	.L398
ARM GAS  /tmp/ccsCUhT2.s 			page 142


 5862              	.L396:
 5863              		.loc 1 2100 47 discriminator 7
 5864 02aa 7B68     		ldr	r3, [r7, #4]
 5865 02ac 002B     		cmp	r3, #0
 5866 02ae 17D0     		beq	.L399
2101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             (writeset && FD_ISSET(i, writeset)) ||
 5867              		.loc 1 2101 23
 5868 02b0 BB6D     		ldr	r3, [r7, #88]
 5869 02b2 032B     		cmp	r3, #3
 5870 02b4 14DC     		bgt	.L399
 5871              		.loc 1 2101 26 discriminator 1
 5872 02b6 BB6D     		ldr	r3, [r7, #88]
 5873 02b8 002B     		cmp	r3, #0
 5874 02ba 11DB     		blt	.L399
 5875              		.loc 1 2101 26 is_stmt 0 discriminator 3
 5876 02bc BB6D     		ldr	r3, [r7, #88]
 5877 02be 002B     		cmp	r3, #0
 5878 02c0 00DA     		bge	.L400
 5879 02c2 0733     		adds	r3, r3, #7
 5880              	.L400:
 5881 02c4 DB10     		asrs	r3, r3, #3
 5882 02c6 1A46     		mov	r2, r3
 5883 02c8 7B68     		ldr	r3, [r7, #4]
 5884 02ca 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5885 02cc 1A46     		mov	r2, r3
 5886 02ce BB6D     		ldr	r3, [r7, #88]
 5887 02d0 03F00703 		and	r3, r3, #7
 5888              		.loc 1 2101 23 is_stmt 1 discriminator 3
 5889 02d4 42FA03F3 		asr	r3, r2, r3
 5890 02d8 03F00103 		and	r3, r3, #1
 5891 02dc 002B     		cmp	r3, #0
 5892 02de 1AD1     		bne	.L398
 5893              	.L399:
 5894              		.loc 1 2101 49 discriminator 5
 5895 02e0 3B68     		ldr	r3, [r7]
 5896 02e2 002B     		cmp	r3, #0
 5897 02e4 43D0     		beq	.L401
2102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             (exceptset && FD_ISSET(i, exceptset))) {
 5898              		.loc 1 2102 24
 5899 02e6 BB6D     		ldr	r3, [r7, #88]
 5900 02e8 032B     		cmp	r3, #3
 5901 02ea 40DC     		bgt	.L401
 5902              		.loc 1 2102 27 discriminator 1
 5903 02ec BB6D     		ldr	r3, [r7, #88]
 5904 02ee 002B     		cmp	r3, #0
 5905 02f0 3DDB     		blt	.L401
 5906              		.loc 1 2102 27 is_stmt 0 discriminator 2
 5907 02f2 BB6D     		ldr	r3, [r7, #88]
 5908 02f4 002B     		cmp	r3, #0
 5909 02f6 00DA     		bge	.L402
 5910 02f8 0733     		adds	r3, r3, #7
 5911              	.L402:
 5912 02fa DB10     		asrs	r3, r3, #3
 5913 02fc 1A46     		mov	r2, r3
 5914 02fe 3B68     		ldr	r3, [r7]
 5915 0300 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5916 0302 1A46     		mov	r2, r3
ARM GAS  /tmp/ccsCUhT2.s 			page 143


 5917 0304 BB6D     		ldr	r3, [r7, #88]
 5918 0306 03F00703 		and	r3, r3, #7
 5919              		.loc 1 2102 24 is_stmt 1 discriminator 2
 5920 030a 42FA03F3 		asr	r3, r2, r3
 5921 030e 03F00103 		and	r3, r3, #1
 5922 0312 002B     		cmp	r3, #0
 5923 0314 2BD0     		beq	.L401
 5924              	.L398:
 5925              	.LBB58:
2103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct lwip_sock *sock;
2104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           SYS_ARCH_PROTECT(lev);
 5926              		.loc 1 2104 11
 5927 0316 FFF7FEFF 		bl	sys_arch_protect
 5928 031a 3865     		str	r0, [r7, #80]
2105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock = tryget_socket_unconn_locked(i);
 5929              		.loc 1 2105 18
 5930 031c B86D     		ldr	r0, [r7, #88]
 5931 031e FFF7FEFF 		bl	tryget_socket_unconn_locked
 5932 0322 7864     		str	r0, [r7, #68]
2106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock != NULL) {
 5933              		.loc 1 2106 14
 5934 0324 7B6C     		ldr	r3, [r7, #68]
 5935 0326 002B     		cmp	r3, #0
 5936 0328 18D0     		beq	.L403
2107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* for now, handle select_waiting==0... */
2108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
 5937              		.loc 1 2108 13
 5938 032a 7B6C     		ldr	r3, [r7, #68]
 5939 032c 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 5940 032e 002B     		cmp	r3, #0
 5941 0330 06D1     		bne	.L404
 5942              		.loc 1 2108 13 is_stmt 0 discriminator 1
 5943 0332 324B     		ldr	r3, .L416
 5944 0334 40F63C02 		movw	r2, #2108
 5945 0338 3149     		ldr	r1, .L416+4
 5946 033a 3248     		ldr	r0, .L416+8
 5947 033c FFF7FEFF 		bl	printf
 5948              	.L404:
2109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (sock->select_waiting > 0) {
 5949              		.loc 1 2109 21 is_stmt 1
 5950 0340 7B6C     		ldr	r3, [r7, #68]
 5951 0342 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 5952              		.loc 1 2109 16
 5953 0344 002B     		cmp	r3, #0
 5954 0346 05D0     		beq	.L405
2110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               sock->select_waiting--;
 5955              		.loc 1 2110 19
 5956 0348 7B6C     		ldr	r3, [r7, #68]
 5957 034a 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 5958              		.loc 1 2110 35
 5959 034c 013B     		subs	r3, r3, #1
 5960 034e DAB2     		uxtb	r2, r3
 5961 0350 7B6C     		ldr	r3, [r7, #68]
 5962 0352 9A73     		strb	r2, [r3, #14]
 5963              	.L405:
2111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
2112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             SYS_ARCH_UNPROTECT(lev);
ARM GAS  /tmp/ccsCUhT2.s 			page 144


 5964              		.loc 1 2112 13
 5965 0354 386D     		ldr	r0, [r7, #80]
 5966 0356 FFF7FEFF 		bl	sys_arch_unprotect
 5967 035a 08E0     		b	.L401
 5968              	.L403:
2113:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
2114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2115:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             SYS_ARCH_UNPROTECT(lev);
 5969              		.loc 1 2115 13
 5970 035c 386D     		ldr	r0, [r7, #80]
 5971 035e FFF7FEFF 		bl	sys_arch_unprotect
2116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Not a valid socket */
2117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             nready = -1;
 5972              		.loc 1 2117 20
 5973 0362 4FF0FF33 		mov	r3, #-1
 5974 0366 3B66     		str	r3, [r7, #96]
2118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             set_errno(EBADF);
 5975              		.loc 1 2118 13
 5976 0368 274B     		ldr	r3, .L416+12
 5977 036a 0922     		movs	r2, #9
 5978 036c 1A60     		str	r2, [r3]
 5979              	.L401:
 5980              	.LBE58:
2099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((readset && FD_ISSET(i, readset)) ||
 5981              		.loc 1 2099 50 discriminator 2
 5982 036e BB6D     		ldr	r3, [r7, #88]
 5983 0370 0133     		adds	r3, r3, #1
 5984 0372 BB65     		str	r3, [r7, #88]
 5985              	.L395:
2099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((readset && FD_ISSET(i, readset)) ||
 5986              		.loc 1 2099 7 discriminator 1
 5987 0374 BA6D     		ldr	r2, [r7, #88]
 5988 0376 7B6D     		ldr	r3, [r7, #84]
 5989 0378 9A42     		cmp	r2, r3
 5990 037a FFF67BAF 		blt	.L406
2119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2121:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2122:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2123:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       lwip_unlink_select_cb(&API_SELECT_CB_VAR_REF(select_cb));
 5991              		.loc 1 2123 7
 5992 037e 07F11403 		add	r3, r7, #20
 5993 0382 1846     		mov	r0, r3
 5994 0384 FFF7FEFF 		bl	lwip_unlink_select_cb
2124:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2125:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (API_SELECT_CB_VAR_REF(select_cb).sem_signalled && (!waited || (waitres == SYS_ARCH_TIMEOU
2127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* don't leave the thread-local semaphore signalled */
2128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sys_arch_sem_wait(API_SELECT_CB_VAR_REF(select_cb).sem, 1);
2129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2130:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
2131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sys_sem_free(&API_SELECT_CB_VAR_REF(select_cb).sem);
 5995              		.loc 1 2131 7
 5996 0388 07F11403 		add	r3, r7, #20
 5997 038c 2033     		adds	r3, r3, #32
 5998 038e 1846     		mov	r0, r3
 5999 0390 FFF7FEFF 		bl	sys_sem_free
ARM GAS  /tmp/ccsCUhT2.s 			page 145


2132:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
2133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_FREE(select_cb);
2134:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (nready < 0) {
 6000              		.loc 1 2135 10
 6001 0394 3B6E     		ldr	r3, [r7, #96]
 6002 0396 002B     		cmp	r3, #0
 6003 0398 02DA     		bge	.L407
2136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* This happens when a socket got closed while waiting */
2137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         lwip_select_dec_sockets_used(maxfdp1, &used_sockets);
2138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 6004              		.loc 1 2138 16
 6005 039a 4FF0FF33 		mov	r3, #-1
 6006 039e 29E0     		b	.L412
 6007              	.L407:
2139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2140:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2141:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (waitres == SYS_ARCH_TIMEOUT) {
 6008              		.loc 1 2141 10
 6009 03a0 7B6E     		ldr	r3, [r7, #100]
 6010 03a2 B3F1FF3F 		cmp	r3, #-1
 6011 03a6 0FD0     		beq	.L413
2142:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Timeout */
2143:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: timeout expired\n"));
2144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* This is OK as the local fdsets are empty and nready is zero,
2145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            or we would have returned earlier. */
2146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* See what's set now after waiting */
2148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         nready = lwip_selscan(maxfdp1, readset, writeset, exceptset, &lreadset, &lwriteset, &lexcep
 6012              		.loc 1 2148 18
 6013 03a8 07F13803 		add	r3, r7, #56
 6014 03ac 0293     		str	r3, [sp, #8]
 6015 03ae 07F13C03 		add	r3, r7, #60
 6016 03b2 0193     		str	r3, [sp, #4]
 6017 03b4 07F14003 		add	r3, r7, #64
 6018 03b8 0093     		str	r3, [sp]
 6019 03ba 3B68     		ldr	r3, [r7]
 6020 03bc 7A68     		ldr	r2, [r7, #4]
 6021 03be B968     		ldr	r1, [r7, #8]
 6022 03c0 F868     		ldr	r0, [r7, #12]
 6023 03c2 FFF7FEFF 		bl	lwip_selscan
 6024 03c6 3866     		str	r0, [r7, #96]
 6025              	.L413:
 6026              	.LBE55:
2149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_select: nready=%d\n", nready));
2150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2153:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_select_dec_sockets_used(maxfdp1, &used_sockets);
2155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
2156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (readset) {
 6027              		.loc 1 2156 6
 6028 03c8 BB68     		ldr	r3, [r7, #8]
 6029 03ca 002B     		cmp	r3, #0
 6030 03cc 03D0     		beq	.L409
2157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *readset = lreadset;
ARM GAS  /tmp/ccsCUhT2.s 			page 146


 6031              		.loc 1 2157 14
 6032 03ce BB68     		ldr	r3, [r7, #8]
 6033 03d0 97F84020 		ldrb	r2, [r7, #64]
 6034 03d4 1A70     		strb	r2, [r3]
 6035              	.L409:
2158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (writeset) {
 6036              		.loc 1 2159 6
 6037 03d6 7B68     		ldr	r3, [r7, #4]
 6038 03d8 002B     		cmp	r3, #0
 6039 03da 03D0     		beq	.L410
2160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *writeset = lwriteset;
 6040              		.loc 1 2160 15
 6041 03dc 7B68     		ldr	r3, [r7, #4]
 6042 03de 97F83C20 		ldrb	r2, [r7, #60]
 6043 03e2 1A70     		strb	r2, [r3]
 6044              	.L410:
2161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (exceptset) {
 6045              		.loc 1 2162 6
 6046 03e4 3B68     		ldr	r3, [r7]
 6047 03e6 002B     		cmp	r3, #0
 6048 03e8 03D0     		beq	.L411
2163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *exceptset = lexceptset;
 6049              		.loc 1 2163 16
 6050 03ea 3B68     		ldr	r3, [r7]
 6051 03ec 97F83820 		ldrb	r2, [r7, #56]
 6052 03f0 1A70     		strb	r2, [r3]
 6053              	.L411:
2164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 6054              		.loc 1 2165 10
 6055 03f2 3B6E     		ldr	r3, [r7, #96]
 6056              	.L412:
2166:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 6057              		.loc 1 2166 1 discriminator 2
 6058 03f4 1846     		mov	r0, r3
 6059 03f6 6837     		adds	r7, r7, #104
 6060              	.LCFI178:
 6061              		.cfi_def_cfa_offset 8
 6062 03f8 BD46     		mov	sp, r7
 6063              	.LCFI179:
 6064              		.cfi_def_cfa_register 13
 6065              		@ sp needed
 6066 03fa 80BD     		pop	{r7, pc}
 6067              	.L417:
 6068              		.align	2
 6069              	.L416:
 6070 03fc 00000000 		.word	.LC0
 6071 0400 38030000 		.word	.LC30
 6072 0404 50000000 		.word	.LC2
 6073 0408 00000000 		.word	errno
 6074              		.cfi_endproc
 6075              	.LFE172:
 6077              		.section	.text.lwip_pollscan,"ax",%progbits
 6078              		.align	1
 6079              		.syntax unified
ARM GAS  /tmp/ccsCUhT2.s 			page 147


 6080              		.thumb
 6081              		.thumb_func
 6082              		.fpu fpv4-sp-d16
 6084              	lwip_pollscan:
 6085              	.LFB173:
2167:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT */
2168:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2169:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_POLL
2170:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** Options for the lwip_pollscan function. */
2171:Middlewares/Third_Party/LwIP/src/api/sockets.c **** enum lwip_pollscan_opts
2172:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Clear revents in each struct pollfd. */
2174:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_POLLSCAN_CLEAR = 1,
2175:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2176:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Increment select_waiting in each struct lwip_sock. */
2177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_POLLSCAN_INC_WAIT = 2,
2178:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /** Decrement select_waiting in each struct lwip_sock. */
2180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_POLLSCAN_DEC_WAIT = 4
2181:Middlewares/Third_Party/LwIP/src/api/sockets.c **** };
2182:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2183:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
2184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Update revents in each struct pollfd.
2185:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Optionally update select_waiting in struct lwip_sock.
2186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
2187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param fds          array of structures to update
2188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param nfds         number of structures in fds
2189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @param opts         what to update and how
2190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @return number of structures that have revents != 0
2191:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2192:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
2193:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_pollscan(struct pollfd *fds, nfds_t nfds, enum lwip_pollscan_opts opts)
2194:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 6086              		.loc 1 2194 1
 6087              		.cfi_startproc
 6088              		@ args = 0, pretend = 0, frame = 48
 6089              		@ frame_needed = 1, uses_anonymous_args = 0
 6090 0000 80B5     		push	{r7, lr}
 6091              	.LCFI180:
 6092              		.cfi_def_cfa_offset 8
 6093              		.cfi_offset 7, -8
 6094              		.cfi_offset 14, -4
 6095 0002 8CB0     		sub	sp, sp, #48
 6096              	.LCFI181:
 6097              		.cfi_def_cfa_offset 56
 6098 0004 00AF     		add	r7, sp, #0
 6099              	.LCFI182:
 6100              		.cfi_def_cfa_register 7
 6101 0006 F860     		str	r0, [r7, #12]
 6102 0008 B960     		str	r1, [r7, #8]
 6103 000a 1346     		mov	r3, r2
 6104 000c FB71     		strb	r3, [r7, #7]
2195:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready = 0;
 6105              		.loc 1 2195 7
 6106 000e 0023     		movs	r3, #0
 6107 0010 FB62     		str	r3, [r7, #44]
2196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nfds_t fdi;
ARM GAS  /tmp/ccsCUhT2.s 			page 148


2197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
2198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
2199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each struct pollfd in the array. */
2201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (fdi = 0; fdi < nfds; fdi++) {
 6108              		.loc 1 2201 12
 6109 0012 0023     		movs	r3, #0
 6110 0014 BB62     		str	r3, [r7, #40]
 6111              		.loc 1 2201 3
 6112 0016 E3E0     		b	.L419
 6113              	.L433:
2202:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((opts & LWIP_POLLSCAN_CLEAR) != 0) {
 6114              		.loc 1 2202 15
 6115 0018 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6116 001a 03F00103 		and	r3, r3, #1
 6117              		.loc 1 2202 8
 6118 001e 002B     		cmp	r3, #0
 6119 0020 05D0     		beq	.L420
2203:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       fds[fdi].revents = 0;
 6120              		.loc 1 2203 10
 6121 0022 BB6A     		ldr	r3, [r7, #40]
 6122 0024 DB00     		lsls	r3, r3, #3
 6123 0026 FA68     		ldr	r2, [r7, #12]
 6124 0028 1344     		add	r3, r3, r2
 6125              		.loc 1 2203 24
 6126 002a 0022     		movs	r2, #0
 6127 002c DA80     		strh	r2, [r3, #6]	@ movhi
 6128              	.L420:
2204:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2205:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2206:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Negative fd means the caller wants us to ignore this struct.
2207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        POLLNVAL means we already detected that the fd is invalid;
2208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        if another thread has since opened a new socket with that fd,
2209:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        we must not use that socket. */
2210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (fds[fdi].fd >= 0 && (fds[fdi].revents & POLLNVAL) == 0) {
 6129              		.loc 1 2210 12
 6130 002e BB6A     		ldr	r3, [r7, #40]
 6131 0030 DB00     		lsls	r3, r3, #3
 6132 0032 FA68     		ldr	r2, [r7, #12]
 6133 0034 1344     		add	r3, r3, r2
 6134              		.loc 1 2210 17
 6135 0036 1B68     		ldr	r3, [r3]
 6136              		.loc 1 2210 8
 6137 0038 002B     		cmp	r3, #0
 6138 003a C0F2C380 		blt	.L421
 6139              		.loc 1 2210 33 discriminator 1
 6140 003e BB6A     		ldr	r3, [r7, #40]
 6141 0040 DB00     		lsls	r3, r3, #3
 6142 0042 FA68     		ldr	r2, [r7, #12]
 6143 0044 1344     		add	r3, r3, r2
 6144              		.loc 1 2210 38 discriminator 1
 6145 0046 B3F90630 		ldrsh	r3, [r3, #6]
 6146              		.loc 1 2210 47 discriminator 1
 6147 004a 9BB2     		uxth	r3, r3
 6148 004c 03F00803 		and	r3, r3, #8
 6149              		.loc 1 2210 26 discriminator 1
 6150 0050 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 149


 6151 0052 40F0B780 		bne	.L421
2211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* First get the socket's status (protected)... */
2212:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_PROTECT(lev);
 6152              		.loc 1 2212 7
 6153 0056 FFF7FEFF 		bl	sys_arch_protect
 6154 005a 7862     		str	r0, [r7, #36]
2213:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock = tryget_socket_unconn_locked(fds[fdi].fd);
 6155              		.loc 1 2213 45
 6156 005c BB6A     		ldr	r3, [r7, #40]
 6157 005e DB00     		lsls	r3, r3, #3
 6158 0060 FA68     		ldr	r2, [r7, #12]
 6159 0062 1344     		add	r3, r3, r2
 6160              		.loc 1 2213 14
 6161 0064 1B68     		ldr	r3, [r3]
 6162 0066 1846     		mov	r0, r3
 6163 0068 FFF7FEFF 		bl	tryget_socket_unconn_locked
 6164 006c 3862     		str	r0, [r7, #32]
2214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock != NULL) {
 6165              		.loc 1 2214 10
 6166 006e 3B6A     		ldr	r3, [r7, #32]
 6167 0070 002B     		cmp	r3, #0
 6168 0072 00F09380 		beq	.L422
 6169              	.LBB59:
2215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         void* lastdata = sock->lastdata.pbuf;
 6170              		.loc 1 2215 15
 6171 0076 3B6A     		ldr	r3, [r7, #32]
 6172 0078 5B68     		ldr	r3, [r3, #4]
 6173 007a FB61     		str	r3, [r7, #28]
2216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         s16_t rcvevent = sock->rcvevent;
 6174              		.loc 1 2216 15
 6175 007c 3B6A     		ldr	r3, [r7, #32]
 6176 007e 1B89     		ldrh	r3, [r3, #8]	@ movhi
 6177 0080 7B83     		strh	r3, [r7, #26]	@ movhi
2217:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t sendevent = sock->sendevent;
 6178              		.loc 1 2217 15
 6179 0082 3B6A     		ldr	r3, [r7, #32]
 6180 0084 5B89     		ldrh	r3, [r3, #10]	@ movhi
 6181 0086 3B83     		strh	r3, [r7, #24]	@ movhi
2218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         u16_t errevent = sock->errevent;
 6182              		.loc 1 2218 15
 6183 0088 3B6A     		ldr	r3, [r7, #32]
 6184 008a 9B89     		ldrh	r3, [r3, #12]	@ movhi
 6185 008c FB82     		strh	r3, [r7, #22]	@ movhi
2219:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((opts & LWIP_POLLSCAN_INC_WAIT) != 0) {
 6186              		.loc 1 2220 19
 6187 008e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6188 0090 03F00203 		and	r3, r3, #2
 6189              		.loc 1 2220 12
 6190 0094 002B     		cmp	r3, #0
 6191 0096 16D0     		beq	.L423
2221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->select_waiting++;
 6192              		.loc 1 2221 15
 6193 0098 3B6A     		ldr	r3, [r7, #32]
 6194 009a 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6195              		.loc 1 2221 31
 6196 009c 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccsCUhT2.s 			page 150


 6197 009e DAB2     		uxtb	r2, r3
 6198 00a0 3B6A     		ldr	r3, [r7, #32]
 6199 00a2 9A73     		strb	r2, [r3, #14]
2222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting == 0) {
 6200              		.loc 1 2222 19
 6201 00a4 3B6A     		ldr	r3, [r7, #32]
 6202 00a6 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6203              		.loc 1 2222 14
 6204 00a8 002B     		cmp	r3, #0
 6205 00aa 26D1     		bne	.L424
2223:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* overflow - too many threads waiting */
2224:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
 6206              		.loc 1 2224 17
 6207 00ac 3B6A     		ldr	r3, [r7, #32]
 6208 00ae 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6209              		.loc 1 2224 33
 6210 00b0 013B     		subs	r3, r3, #1
 6211 00b2 DAB2     		uxtb	r2, r3
 6212 00b4 3B6A     		ldr	r3, [r7, #32]
 6213 00b6 9A73     		strb	r2, [r3, #14]
2225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             nready = -1;
 6214              		.loc 1 2225 20
 6215 00b8 4FF0FF33 		mov	r3, #-1
 6216 00bc FB62     		str	r3, [r7, #44]
2226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             SYS_ARCH_UNPROTECT(lev);
 6217              		.loc 1 2226 13
 6218 00be 786A     		ldr	r0, [r7, #36]
 6219 00c0 FFF7FEFF 		bl	sys_arch_unprotect
2227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
2228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             break;
 6220              		.loc 1 2228 13
 6221 00c4 91E0     		b	.L425
 6222              	.L423:
2229:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2230:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else if ((opts & LWIP_POLLSCAN_DEC_WAIT) != 0) {
 6223              		.loc 1 2230 26
 6224 00c6 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6225 00c8 03F00403 		and	r3, r3, #4
 6226              		.loc 1 2230 19
 6227 00cc 002B     		cmp	r3, #0
 6228 00ce 14D0     		beq	.L424
2231:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* for now, handle select_waiting==0... */
2232:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("sock->select_waiting > 0", sock->select_waiting > 0);
 6229              		.loc 1 2232 11
 6230 00d0 3B6A     		ldr	r3, [r7, #32]
 6231 00d2 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6232 00d4 002B     		cmp	r3, #0
 6233 00d6 06D1     		bne	.L426
 6234              		.loc 1 2232 11 is_stmt 0 discriminator 1
 6235 00d8 4B4B     		ldr	r3, .L435
 6236 00da 40F6B802 		movw	r2, #2232
 6237 00de 4B49     		ldr	r1, .L435+4
 6238 00e0 4B48     		ldr	r0, .L435+8
 6239 00e2 FFF7FEFF 		bl	printf
 6240              	.L426:
2233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->select_waiting > 0) {
 6241              		.loc 1 2233 19 is_stmt 1
ARM GAS  /tmp/ccsCUhT2.s 			page 151


 6242 00e6 3B6A     		ldr	r3, [r7, #32]
 6243 00e8 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6244              		.loc 1 2233 14
 6245 00ea 002B     		cmp	r3, #0
 6246 00ec 05D0     		beq	.L424
2234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->select_waiting--;
 6247              		.loc 1 2234 17
 6248 00ee 3B6A     		ldr	r3, [r7, #32]
 6249 00f0 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6250              		.loc 1 2234 33
 6251 00f2 013B     		subs	r3, r3, #1
 6252 00f4 DAB2     		uxtb	r2, r3
 6253 00f6 3B6A     		ldr	r3, [r7, #32]
 6254 00f8 9A73     		strb	r2, [r3, #14]
 6255              	.L424:
2235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
 6256              		.loc 1 2237 9
 6257 00fa 786A     		ldr	r0, [r7, #36]
 6258 00fc FFF7FEFF 		bl	sys_arch_unprotect
2238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
2239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2240:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* ... then examine it: */
2241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* See if netconn of this socket is ready for read */
2242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((fds[fdi].events & POLLIN) != 0 && ((lastdata != NULL) || (rcvevent > 0))) {
 6259              		.loc 1 2242 17
 6260 0100 BB6A     		ldr	r3, [r7, #40]
 6261 0102 DB00     		lsls	r3, r3, #3
 6262 0104 FA68     		ldr	r2, [r7, #12]
 6263 0106 1344     		add	r3, r3, r2
 6264              		.loc 1 2242 22
 6265 0108 B3F90430 		ldrsh	r3, [r3, #4]
 6266              		.loc 1 2242 30
 6267 010c 9BB2     		uxth	r3, r3
 6268 010e 03F00103 		and	r3, r3, #1
 6269              		.loc 1 2242 12
 6270 0112 002B     		cmp	r3, #0
 6271 0114 14D0     		beq	.L427
 6272              		.loc 1 2242 45 discriminator 1
 6273 0116 FB69     		ldr	r3, [r7, #28]
 6274 0118 002B     		cmp	r3, #0
 6275 011a 03D1     		bne	.L428
 6276              		.loc 1 2242 68 discriminator 2
 6277 011c B7F91A30 		ldrsh	r3, [r7, #26]
 6278 0120 002B     		cmp	r3, #0
 6279 0122 0DDD     		ble	.L427
 6280              	.L428:
2243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fds[fdi].revents |= POLLIN;
 6281              		.loc 1 2243 28
 6282 0124 BB6A     		ldr	r3, [r7, #40]
 6283 0126 DB00     		lsls	r3, r3, #3
 6284 0128 FA68     		ldr	r2, [r7, #12]
 6285 012a 1344     		add	r3, r3, r2
 6286 012c B3F90620 		ldrsh	r2, [r3, #6]
 6287 0130 BB6A     		ldr	r3, [r7, #40]
 6288 0132 DB00     		lsls	r3, r3, #3
ARM GAS  /tmp/ccsCUhT2.s 			page 152


 6289 0134 F968     		ldr	r1, [r7, #12]
 6290 0136 0B44     		add	r3, r3, r1
 6291 0138 42F00102 		orr	r2, r2, #1
 6292 013c 12B2     		sxth	r2, r2
 6293 013e DA80     		strh	r2, [r3, #6]	@ movhi
 6294              	.L427:
2244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_pollscan: fd=%d ready for reading\n", fds[fdi].fd));
2245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2246:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* See if netconn of this socket is ready for write */
2247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if ((fds[fdi].events & POLLOUT) != 0 && (sendevent != 0)) {
 6295              		.loc 1 2247 17
 6296 0140 BB6A     		ldr	r3, [r7, #40]
 6297 0142 DB00     		lsls	r3, r3, #3
 6298 0144 FA68     		ldr	r2, [r7, #12]
 6299 0146 1344     		add	r3, r3, r2
 6300              		.loc 1 2247 22
 6301 0148 B3F90430 		ldrsh	r3, [r3, #4]
 6302              		.loc 1 2247 30
 6303 014c 9BB2     		uxth	r3, r3
 6304 014e 03F00203 		and	r3, r3, #2
 6305              		.loc 1 2247 12
 6306 0152 002B     		cmp	r3, #0
 6307 0154 10D0     		beq	.L429
 6308              		.loc 1 2247 46 discriminator 1
 6309 0156 3B8B     		ldrh	r3, [r7, #24]
 6310 0158 002B     		cmp	r3, #0
 6311 015a 0DD0     		beq	.L429
2248:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fds[fdi].revents |= POLLOUT;
 6312              		.loc 1 2248 28
 6313 015c BB6A     		ldr	r3, [r7, #40]
 6314 015e DB00     		lsls	r3, r3, #3
 6315 0160 FA68     		ldr	r2, [r7, #12]
 6316 0162 1344     		add	r3, r3, r2
 6317 0164 B3F90620 		ldrsh	r2, [r3, #6]
 6318 0168 BB6A     		ldr	r3, [r7, #40]
 6319 016a DB00     		lsls	r3, r3, #3
 6320 016c F968     		ldr	r1, [r7, #12]
 6321 016e 0B44     		add	r3, r3, r1
 6322 0170 42F00202 		orr	r2, r2, #2
 6323 0174 12B2     		sxth	r2, r2
 6324 0176 DA80     		strh	r2, [r3, #6]	@ movhi
 6325              	.L429:
2249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_pollscan: fd=%d ready for writing\n", fds[fdi].fd));
2250:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* See if netconn of this socket had an error */
2252:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (errevent != 0) {
 6326              		.loc 1 2252 12
 6327 0178 FB8A     		ldrh	r3, [r7, #22]
 6328 017a 002B     		cmp	r3, #0
 6329 017c 22D0     		beq	.L421
2253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* POLLERR is output only. */
2254:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           fds[fdi].revents |= POLLERR;
 6330              		.loc 1 2254 28
 6331 017e BB6A     		ldr	r3, [r7, #40]
 6332 0180 DB00     		lsls	r3, r3, #3
 6333 0182 FA68     		ldr	r2, [r7, #12]
 6334 0184 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccsCUhT2.s 			page 153


 6335 0186 B3F90620 		ldrsh	r2, [r3, #6]
 6336 018a BB6A     		ldr	r3, [r7, #40]
 6337 018c DB00     		lsls	r3, r3, #3
 6338 018e F968     		ldr	r1, [r7, #12]
 6339 0190 0B44     		add	r3, r3, r1
 6340 0192 42F00402 		orr	r2, r2, #4
 6341 0196 12B2     		sxth	r2, r2
 6342 0198 DA80     		strh	r2, [r3, #6]	@ movhi
 6343 019a 13E0     		b	.L421
 6344              	.L422:
 6345              	.LBE59:
2255:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_pollscan: fd=%d ready for exception\n", fds[fdi].fd));
2256:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Not a valid socket */
2259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
 6346              		.loc 1 2259 9
 6347 019c 786A     		ldr	r0, [r7, #36]
 6348 019e FFF7FEFF 		bl	sys_arch_unprotect
2260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* POLLNVAL is output only. */
2261:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         fds[fdi].revents |= POLLNVAL;
 6349              		.loc 1 2261 26
 6350 01a2 BB6A     		ldr	r3, [r7, #40]
 6351 01a4 DB00     		lsls	r3, r3, #3
 6352 01a6 FA68     		ldr	r2, [r7, #12]
 6353 01a8 1344     		add	r3, r3, r2
 6354 01aa B3F90620 		ldrsh	r2, [r3, #6]
 6355 01ae BB6A     		ldr	r3, [r7, #40]
 6356 01b0 DB00     		lsls	r3, r3, #3
 6357 01b2 F968     		ldr	r1, [r7, #12]
 6358 01b4 0B44     		add	r3, r3, r1
 6359 01b6 42F00802 		orr	r2, r2, #8
 6360 01ba 12B2     		sxth	r2, r2
 6361 01bc DA80     		strh	r2, [r3, #6]	@ movhi
2262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
 6362              		.loc 1 2262 16
 6363 01be 4FF0FF33 		mov	r3, #-1
 6364 01c2 1DE0     		b	.L431
 6365              	.L421:
2263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2266:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Will return the number of structures that have events,
2267:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        not the number of events. */
2268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (fds[fdi].revents != 0) {
 6366              		.loc 1 2268 12
 6367 01c4 BB6A     		ldr	r3, [r7, #40]
 6368 01c6 DB00     		lsls	r3, r3, #3
 6369 01c8 FA68     		ldr	r2, [r7, #12]
 6370 01ca 1344     		add	r3, r3, r2
 6371              		.loc 1 2268 17
 6372 01cc B3F90630 		ldrsh	r3, [r3, #6]
 6373              		.loc 1 2268 8
 6374 01d0 002B     		cmp	r3, #0
 6375 01d2 02D0     		beq	.L432
2269:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       nready++;
 6376              		.loc 1 2269 13
ARM GAS  /tmp/ccsCUhT2.s 			page 154


 6377 01d4 FB6A     		ldr	r3, [r7, #44]
 6378 01d6 0133     		adds	r3, r3, #1
 6379 01d8 FB62     		str	r3, [r7, #44]
 6380              	.L432:
2201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((opts & LWIP_POLLSCAN_CLEAR) != 0) {
 6381              		.loc 1 2201 32 discriminator 2
 6382 01da BB6A     		ldr	r3, [r7, #40]
 6383 01dc 0133     		adds	r3, r3, #1
 6384 01de BB62     		str	r3, [r7, #40]
 6385              	.L419:
2201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if ((opts & LWIP_POLLSCAN_CLEAR) != 0) {
 6386              		.loc 1 2201 3 discriminator 1
 6387 01e0 BA6A     		ldr	r2, [r7, #40]
 6388 01e2 BB68     		ldr	r3, [r7, #8]
 6389 01e4 9A42     		cmp	r2, r3
 6390 01e6 FFF417AF 		bcc	.L433
 6391              	.L425:
2270:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2272:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("nready >= 0", nready >= 0);
 6392              		.loc 1 2273 3
 6393 01ea FB6A     		ldr	r3, [r7, #44]
 6394 01ec 002B     		cmp	r3, #0
 6395 01ee 06DA     		bge	.L434
 6396              		.loc 1 2273 3 is_stmt 0 discriminator 1
 6397 01f0 054B     		ldr	r3, .L435
 6398 01f2 40F6E102 		movw	r2, #2273
 6399 01f6 0749     		ldr	r1, .L435+12
 6400 01f8 0548     		ldr	r0, .L435+8
 6401 01fa FFF7FEFF 		bl	printf
 6402              	.L434:
2274:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 6403              		.loc 1 2274 10 is_stmt 1
 6404 01fe FB6A     		ldr	r3, [r7, #44]
 6405              	.L431:
2275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 6406              		.loc 1 2275 1
 6407 0200 1846     		mov	r0, r3
 6408 0202 3037     		adds	r7, r7, #48
 6409              	.LCFI183:
 6410              		.cfi_def_cfa_offset 8
 6411 0204 BD46     		mov	sp, r7
 6412              	.LCFI184:
 6413              		.cfi_def_cfa_register 13
 6414              		@ sp needed
 6415 0206 80BD     		pop	{r7, pc}
 6416              	.L436:
 6417              		.align	2
 6418              	.L435:
 6419 0208 00000000 		.word	.LC0
 6420 020c 38030000 		.word	.LC30
 6421 0210 50000000 		.word	.LC2
 6422 0214 2C030000 		.word	.LC29
 6423              		.cfi_endproc
 6424              	.LFE173:
 6426              		.section	.rodata
ARM GAS  /tmp/ccsCUhT2.s 			page 155


 6427 0351 000000   		.align	2
 6428              	.LC31:
 6429 0354 6C776970 		.ascii	"lwip_poll: invalid fds\000"
 6429      5F706F6C 
 6429      6C3A2069 
 6429      6E76616C 
 6429      69642066 
 6430 036b 00       		.align	2
 6431              	.LC32:
 6432 036c 74696D65 		.ascii	"timeout > 0\000"
 6432      6F757420 
 6432      3E203000 
 6433              		.section	.text.lwip_poll,"ax",%progbits
 6434              		.align	1
 6435              		.global	lwip_poll
 6436              		.syntax unified
 6437              		.thumb
 6438              		.thumb_func
 6439              		.fpu fpv4-sp-d16
 6441              	lwip_poll:
 6442              	.LFB174:
2276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_FULLDUPLEX
2278:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Mark all sockets as used.
2279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
2280:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * All sockets are marked (and later unmarked), whether they are open or not.
2281:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This is OK as lwip_pollscan aborts select when non-open sockets are found.
2282:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2283:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2284:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_poll_inc_sockets_used(struct pollfd *fds, nfds_t nfds)
2285:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2286:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nfds_t fdi;
2287:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2288:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if(fds) {
2289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Go through each struct pollfd in the array. */
2290:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (fdi = 0; fdi < nfds; fdi++) {
2291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Increase the reference counter */
2292:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       tryget_socket_unconn(fds[fdi].fd);
2293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2294:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2295:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /* Let go all sockets that were marked as used when starting poll */
2298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_poll_dec_sockets_used(struct pollfd *fds, nfds_t nfds)
2300:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nfds_t fdi;
2302:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2303:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if(fds) {
2304:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Go through each struct pollfd in the array. */
2305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     for (fdi = 0; fdi < nfds; fdi++) {
2306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       struct lwip_sock *sock = tryget_socket_unconn_nouse(fds[fdi].fd);
2307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock != NULL) {
2308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
2309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2310:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2311:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
ARM GAS  /tmp/ccsCUhT2.s 			page 156


2312:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2313:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_FULLDUPLEX */
2314:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define lwip_poll_inc_sockets_used(fds, nfds)
2315:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #define lwip_poll_dec_sockets_used(fds, nfds)
2316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_FULLDUPLEX */
2317:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2318:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2319:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_poll(struct pollfd *fds, nfds_t nfds, int timeout)
2320:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 6443              		.loc 1 2320 1
 6444              		.cfi_startproc
 6445              		@ args = 0, pretend = 0, frame = 64
 6446              		@ frame_needed = 1, uses_anonymous_args = 0
 6447 0000 80B5     		push	{r7, lr}
 6448              	.LCFI185:
 6449              		.cfi_def_cfa_offset 8
 6450              		.cfi_offset 7, -8
 6451              		.cfi_offset 14, -4
 6452 0002 90B0     		sub	sp, sp, #64
 6453              	.LCFI186:
 6454              		.cfi_def_cfa_offset 72
 6455 0004 00AF     		add	r7, sp, #0
 6456              	.LCFI187:
 6457              		.cfi_def_cfa_register 7
 6458 0006 F860     		str	r0, [r7, #12]
 6459 0008 B960     		str	r1, [r7, #8]
 6460 000a 7A60     		str	r2, [r7, #4]
2321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t waitres = 0;
 6461              		.loc 1 2321 9
 6462 000c 0023     		movs	r3, #0
 6463 000e FB63     		str	r3, [r7, #60]
2322:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int nready;
2323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u32_t msectimeout;
2324:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int waited = 0;
2326:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2327:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2328:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_poll(%p, %d, %d)\n",
2329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                   (void*)fds, (int)nfds, timeout));
2330:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ERROR("lwip_poll: invalid fds", ((fds != NULL && nfds > 0) || (fds == NULL && nfds == 0)),
 6464              		.loc 1 2330 3
 6465 0010 FB68     		ldr	r3, [r7, #12]
 6466 0012 002B     		cmp	r3, #0
 6467 0014 02D0     		beq	.L438
 6468              		.loc 1 2330 3 is_stmt 0 discriminator 2
 6469 0016 BB68     		ldr	r3, [r7, #8]
 6470 0018 002B     		cmp	r3, #0
 6471 001a 12D1     		bne	.L439
 6472              	.L438:
 6473              		.loc 1 2330 3 discriminator 3
 6474 001c FB68     		ldr	r3, [r7, #12]
 6475 001e 002B     		cmp	r3, #0
 6476 0020 02D1     		bne	.L440
 6477              		.loc 1 2330 3 discriminator 5
 6478 0022 BB68     		ldr	r3, [r7, #8]
 6479 0024 002B     		cmp	r3, #0
 6480 0026 0CD0     		beq	.L439
ARM GAS  /tmp/ccsCUhT2.s 			page 157


 6481              	.L440:
 6482              		.loc 1 2330 3 discriminator 6
 6483 0028 434B     		ldr	r3, .L457
 6484 002a 40F61B12 		movw	r2, #2331
 6485 002e 4349     		ldr	r1, .L457+4
 6486 0030 4348     		ldr	r0, .L457+8
 6487 0032 FFF7FEFF 		bl	printf
 6488 0036 434B     		ldr	r3, .L457+12
 6489 0038 1622     		movs	r2, #22
 6490 003a 1A60     		str	r2, [r3]
 6491 003c 4FF0FF33 		mov	r3, #-1
 6492 0040 75E0     		b	.L441
 6493              	.L439:
2331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              set_errno(EINVAL); return -1;);
2332:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_poll_inc_sockets_used(fds, nfds);
2334:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Go through each struct pollfd to count number of structures
2336:Middlewares/Third_Party/LwIP/src/api/sockets.c ****      which currently match */
2337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nready = lwip_pollscan(fds, nfds, LWIP_POLLSCAN_CLEAR);
 6494              		.loc 1 2337 12 is_stmt 1
 6495 0042 0122     		movs	r2, #1
 6496 0044 B968     		ldr	r1, [r7, #8]
 6497 0046 F868     		ldr	r0, [r7, #12]
 6498 0048 FFF7FEFF 		bl	lwip_pollscan
 6499 004c B863     		str	r0, [r7, #56]
2338:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (nready < 0) {
 6500              		.loc 1 2339 6
 6501 004e BB6B     		ldr	r3, [r7, #56]
 6502 0050 002B     		cmp	r3, #0
 6503 0052 02DA     		bge	.L442
2340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     lwip_poll_dec_sockets_used(fds, nfds);
2341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 6504              		.loc 1 2341 12
 6505 0054 4FF0FF33 		mov	r3, #-1
 6506 0058 69E0     		b	.L441
 6507              	.L442:
2342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2343:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* If we don't have any current events, then suspend if we are supposed to */
2345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!nready) {
 6508              		.loc 1 2345 6
 6509 005a BB6B     		ldr	r3, [r7, #56]
 6510 005c 002B     		cmp	r3, #0
 6511 005e 62D1     		bne	.L455
 6512              	.LBB60:
2346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     API_SELECT_CB_VAR_DECLARE(select_cb);
2347:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2348:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (timeout == 0) {
 6513              		.loc 1 2348 8
 6514 0060 7B68     		ldr	r3, [r7, #4]
 6515 0062 002B     		cmp	r3, #0
 6516 0064 61D0     		beq	.L456
2349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_poll: no timeout, returning 0\n"));
2350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_success;
2351:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
ARM GAS  /tmp/ccsCUhT2.s 			page 158


2352:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     API_SELECT_CB_VAR_ALLOC(select_cb, set_errno(EAGAIN); lwip_poll_dec_sockets_used(fds, nfds); re
2353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     memset(&API_SELECT_CB_VAR_REF(select_cb), 0, sizeof(struct lwip_select_cb));
 6517              		.loc 1 2353 5
 6518 0066 07F11003 		add	r3, r7, #16
 6519 006a 2422     		movs	r2, #36
 6520 006c 0021     		movs	r1, #0
 6521 006e 1846     		mov	r0, r3
 6522 0070 FFF7FEFF 		bl	memset
2354:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* None ready: add our semaphore to list:
2356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        We don't actually need any dynamic memory. Our entry on the
2357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        list is only valid while we are in this function, so it's ok
2358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        to use local variables. */
2359:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     API_SELECT_CB_VAR_REF(select_cb).poll_fds = fds;
 6523              		.loc 1 2360 47
 6524 0074 FB68     		ldr	r3, [r7, #12]
 6525 0076 7B62     		str	r3, [r7, #36]
2361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     API_SELECT_CB_VAR_REF(select_cb).poll_nfds = nfds;
 6526              		.loc 1 2361 48
 6527 0078 BB68     		ldr	r3, [r7, #8]
 6528 007a BB62     		str	r3, [r7, #40]
2362:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     API_SELECT_CB_VAR_REF(select_cb).sem = LWIP_NETCONN_THREAD_SEM_GET();
2364:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
2365:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (sys_sem_new(&API_SELECT_CB_VAR_REF(select_cb).sem, 0) != ERR_OK) {
 6529              		.loc 1 2365 9
 6530 007c 07F11003 		add	r3, r7, #16
 6531 0080 2033     		adds	r3, r3, #32
 6532 0082 0021     		movs	r1, #0
 6533 0084 1846     		mov	r0, r3
 6534 0086 FFF7FEFF 		bl	sys_sem_new
 6535 008a 0346     		mov	r3, r0
 6536              		.loc 1 2365 8
 6537 008c 002B     		cmp	r3, #0
 6538 008e 05D0     		beq	.L446
2366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* failed to create semaphore */
2367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EAGAIN);
 6539              		.loc 1 2367 7 discriminator 1
 6540 0090 2C4B     		ldr	r3, .L457+12
 6541 0092 0B22     		movs	r2, #11
 6542 0094 1A60     		str	r2, [r3]
2368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       lwip_poll_dec_sockets_used(fds, nfds);
2369:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       API_SELECT_CB_VAR_FREE(select_cb);
2370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 6543              		.loc 1 2370 14 discriminator 1
 6544 0096 4FF0FF33 		mov	r3, #-1
 6545 009a 48E0     		b	.L441
 6546              	.L446:
2371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2372:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
2373:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     lwip_link_select_cb(&API_SELECT_CB_VAR_REF(select_cb));
 6547              		.loc 1 2374 5
 6548 009c 07F11003 		add	r3, r7, #16
 6549 00a0 1846     		mov	r0, r3
 6550 00a2 FFF7FEFF 		bl	lwip_link_select_cb
ARM GAS  /tmp/ccsCUhT2.s 			page 159


2375:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Increase select_waiting for each socket we are interested in.
2377:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        Also, check for events again: there could have been events between
2378:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        the last scan (without us on the list) and putting us on the list! */
2379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     nready = lwip_pollscan(fds, nfds, LWIP_POLLSCAN_INC_WAIT);
 6551              		.loc 1 2379 14
 6552 00a6 0222     		movs	r2, #2
 6553 00a8 B968     		ldr	r1, [r7, #8]
 6554 00aa F868     		ldr	r0, [r7, #12]
 6555 00ac FFF7FEFF 		bl	lwip_pollscan
 6556 00b0 B863     		str	r0, [r7, #56]
2380:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!nready) {
 6557              		.loc 1 2381 8
 6558 00b2 BB6B     		ldr	r3, [r7, #56]
 6559 00b4 002B     		cmp	r3, #0
 6560 00b6 19D1     		bne	.L448
2382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Still none ready, just wait to be woken */
2383:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (timeout < 0) {
 6561              		.loc 1 2383 10
 6562 00b8 7B68     		ldr	r3, [r7, #4]
 6563 00ba 002B     		cmp	r3, #0
 6564 00bc 02DA     		bge	.L449
2384:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Wait forever */
2385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         msectimeout = 0;
 6565              		.loc 1 2385 21
 6566 00be 0023     		movs	r3, #0
 6567 00c0 7B63     		str	r3, [r7, #52]
 6568 00c2 0BE0     		b	.L450
 6569              	.L449:
2386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
2387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* timeout == 0 would have been handled earlier. */
2388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LWIP_ASSERT("timeout > 0", timeout > 0);
 6570              		.loc 1 2388 9
 6571 00c4 7B68     		ldr	r3, [r7, #4]
 6572 00c6 002B     		cmp	r3, #0
 6573 00c8 06DC     		bgt	.L451
 6574              		.loc 1 2388 9 is_stmt 0 discriminator 1
 6575 00ca 1B4B     		ldr	r3, .L457
 6576 00cc 40F65412 		movw	r2, #2388
 6577 00d0 1D49     		ldr	r1, .L457+16
 6578 00d2 1B48     		ldr	r0, .L457+8
 6579 00d4 FFF7FEFF 		bl	printf
 6580              	.L451:
2389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         msectimeout = timeout;
 6581              		.loc 1 2389 21 is_stmt 1
 6582 00d8 7B68     		ldr	r3, [r7, #4]
 6583 00da 7B63     		str	r3, [r7, #52]
 6584              	.L450:
2390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       waitres = sys_arch_sem_wait(SELECT_SEM_PTR(API_SELECT_CB_VAR_REF(select_cb).sem), msectimeout
 6585              		.loc 1 2391 17
 6586 00dc 07F11003 		add	r3, r7, #16
 6587 00e0 2033     		adds	r3, r3, #32
 6588 00e2 796B     		ldr	r1, [r7, #52]
 6589 00e4 1846     		mov	r0, r3
 6590 00e6 FFF7FEFF 		bl	sys_arch_sem_wait
ARM GAS  /tmp/ccsCUhT2.s 			page 160


 6591 00ea F863     		str	r0, [r7, #60]
 6592              	.L448:
2392:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       waited = 1;
2394:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2396:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Decrease select_waiting for each socket we are interested in,
2398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        and check which events occurred while we waited. */
2399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     nready = lwip_pollscan(fds, nfds, LWIP_POLLSCAN_DEC_WAIT);
 6593              		.loc 1 2399 14
 6594 00ec 0422     		movs	r2, #4
 6595 00ee B968     		ldr	r1, [r7, #8]
 6596 00f0 F868     		ldr	r0, [r7, #12]
 6597 00f2 FFF7FEFF 		bl	lwip_pollscan
 6598 00f6 B863     		str	r0, [r7, #56]
2400:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     lwip_unlink_select_cb(&API_SELECT_CB_VAR_REF(select_cb));
 6599              		.loc 1 2401 5
 6600 00f8 07F11003 		add	r3, r7, #16
 6601 00fc 1846     		mov	r0, r3
 6602 00fe FFF7FEFF 		bl	lwip_unlink_select_cb
2402:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2403:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2404:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (select_cb.sem_signalled && (!waited || (waitres == SYS_ARCH_TIMEOUT))) {
2405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* don't leave the thread-local semaphore signalled */
2406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sys_arch_sem_wait(API_SELECT_CB_VAR_REF(select_cb).sem, 1);
2407:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2408:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
2409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sys_sem_free(&API_SELECT_CB_VAR_REF(select_cb).sem);
 6603              		.loc 1 2409 5
 6604 0102 07F11003 		add	r3, r7, #16
 6605 0106 2033     		adds	r3, r3, #32
 6606 0108 1846     		mov	r0, r3
 6607 010a FFF7FEFF 		bl	sys_sem_free
2410:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
2411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     API_SELECT_CB_VAR_FREE(select_cb);
2412:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2413:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (nready < 0) {
 6608              		.loc 1 2413 8
 6609 010e BB6B     		ldr	r3, [r7, #56]
 6610 0110 002B     		cmp	r3, #0
 6611 0112 02DA     		bge	.L452
2414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* This happens when a socket got closed while waiting */
2415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       lwip_poll_dec_sockets_used(fds, nfds);
2416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 6612              		.loc 1 2416 14
 6613 0114 4FF0FF33 		mov	r3, #-1
 6614 0118 09E0     		b	.L441
 6615              	.L452:
2417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2418:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (waitres == SYS_ARCH_TIMEOUT) {
 6616              		.loc 1 2419 8
 6617 011a FB6B     		ldr	r3, [r7, #60]
 6618 011c B3F1FF3F 		cmp	r3, #-1
 6619 0120 04D1     		bne	.L454
ARM GAS  /tmp/ccsCUhT2.s 			page 161


2420:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Timeout */
2421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_poll: timeout expired\n"));
2422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto return_success;
 6620              		.loc 1 2422 7
 6621 0122 00BF     		nop
 6622 0124 02E0     		b	.L454
 6623              	.L443:
 6624              	.L455:
 6625              	.LBE60:
2423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2424:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2425:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2426:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_poll: nready=%d\n", nready));
2427:Middlewares/Third_Party/LwIP/src/api/sockets.c **** return_success:
 6626              		.loc 1 2427 1
 6627 0126 00BF     		nop
 6628 0128 00E0     		b	.L454
 6629              	.L456:
 6630              	.LBB61:
2350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
 6631              		.loc 1 2350 7
 6632 012a 00BF     		nop
 6633              	.L454:
 6634              	.LBE61:
2428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   lwip_poll_dec_sockets_used(fds, nfds);
2429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   set_errno(0);
2430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return nready;
 6635              		.loc 1 2430 10
 6636 012c BB6B     		ldr	r3, [r7, #56]
 6637              	.L441:
2431:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 6638              		.loc 1 2431 1
 6639 012e 1846     		mov	r0, r3
 6640 0130 4037     		adds	r7, r7, #64
 6641              	.LCFI188:
 6642              		.cfi_def_cfa_offset 8
 6643 0132 BD46     		mov	sp, r7
 6644              	.LCFI189:
 6645              		.cfi_def_cfa_register 13
 6646              		@ sp needed
 6647 0134 80BD     		pop	{r7, pc}
 6648              	.L458:
 6649 0136 00BF     		.align	2
 6650              	.L457:
 6651 0138 00000000 		.word	.LC0
 6652 013c 54030000 		.word	.LC31
 6653 0140 50000000 		.word	.LC2
 6654 0144 00000000 		.word	errno
 6655 0148 6C030000 		.word	.LC32
 6656              		.cfi_endproc
 6657              	.LFE174:
 6659              		.section	.text.lwip_poll_should_wake,"ax",%progbits
 6660              		.align	1
 6661              		.syntax unified
 6662              		.thumb
 6663              		.thumb_func
 6664              		.fpu fpv4-sp-d16
ARM GAS  /tmp/ccsCUhT2.s 			page 162


 6666              	lwip_poll_should_wake:
 6667              	.LFB175:
2432:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2433:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
2434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Check whether event_callback should wake up a thread waiting in
2435:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * lwip_poll.
2436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2437:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
2438:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_poll_should_wake(const struct lwip_select_cb *scb, int fd, int has_recvevent, int has_sendeven
2439:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 6668              		.loc 1 2439 1
 6669              		.cfi_startproc
 6670              		@ args = 4, pretend = 0, frame = 24
 6671              		@ frame_needed = 1, uses_anonymous_args = 0
 6672              		@ link register save eliminated.
 6673 0000 80B4     		push	{r7}
 6674              	.LCFI190:
 6675              		.cfi_def_cfa_offset 4
 6676              		.cfi_offset 7, -4
 6677 0002 87B0     		sub	sp, sp, #28
 6678              	.LCFI191:
 6679              		.cfi_def_cfa_offset 32
 6680 0004 00AF     		add	r7, sp, #0
 6681              	.LCFI192:
 6682              		.cfi_def_cfa_register 7
 6683 0006 F860     		str	r0, [r7, #12]
 6684 0008 B960     		str	r1, [r7, #8]
 6685 000a 7A60     		str	r2, [r7, #4]
 6686 000c 3B60     		str	r3, [r7]
2440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   nfds_t fdi;
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (fdi = 0; fdi < scb->poll_nfds; fdi++) {
 6687              		.loc 1 2441 12
 6688 000e 0023     		movs	r3, #0
 6689 0010 7B61     		str	r3, [r7, #20]
 6690              		.loc 1 2441 3
 6691 0012 2CE0     		b	.L460
 6692              	.L465:
 6693              	.LBB62:
2442:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     const struct pollfd *pollfd = &scb->poll_fds[fdi];
 6694              		.loc 1 2442 39
 6695 0014 FB68     		ldr	r3, [r7, #12]
 6696 0016 5A69     		ldr	r2, [r3, #20]
 6697              		.loc 1 2442 49
 6698 0018 7B69     		ldr	r3, [r7, #20]
 6699 001a DB00     		lsls	r3, r3, #3
 6700              		.loc 1 2442 26
 6701 001c 1344     		add	r3, r3, r2
 6702 001e 3B61     		str	r3, [r7, #16]
2443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (pollfd->fd == fd) {
 6703              		.loc 1 2443 15
 6704 0020 3B69     		ldr	r3, [r7, #16]
 6705 0022 1B68     		ldr	r3, [r3]
 6706              		.loc 1 2443 8
 6707 0024 BA68     		ldr	r2, [r7, #8]
 6708 0026 9A42     		cmp	r2, r3
 6709 0028 1ED1     		bne	.L461
2444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Do not update pollfd->revents right here;
ARM GAS  /tmp/ccsCUhT2.s 			page 163


2445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          that would be a data race because lwip_pollscan
2446:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          accesses revents without protecting. */
2447:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (has_recvevent && (pollfd->events & POLLIN) != 0) {
 6710              		.loc 1 2447 10
 6711 002a 7B68     		ldr	r3, [r7, #4]
 6712 002c 002B     		cmp	r3, #0
 6713 002e 09D0     		beq	.L462
 6714              		.loc 1 2447 35 discriminator 1
 6715 0030 3B69     		ldr	r3, [r7, #16]
 6716 0032 B3F90430 		ldrsh	r3, [r3, #4]
 6717              		.loc 1 2447 44 discriminator 1
 6718 0036 9BB2     		uxth	r3, r3
 6719 0038 03F00103 		and	r3, r3, #1
 6720              		.loc 1 2447 25 discriminator 1
 6721 003c 002B     		cmp	r3, #0
 6722 003e 01D0     		beq	.L462
2448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return 1;
 6723              		.loc 1 2448 16
 6724 0040 0123     		movs	r3, #1
 6725 0042 1AE0     		b	.L463
 6726              	.L462:
2449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (has_sendevent && (pollfd->events & POLLOUT) != 0) {
 6727              		.loc 1 2450 10
 6728 0044 3B68     		ldr	r3, [r7]
 6729 0046 002B     		cmp	r3, #0
 6730 0048 09D0     		beq	.L464
 6731              		.loc 1 2450 35 discriminator 1
 6732 004a 3B69     		ldr	r3, [r7, #16]
 6733 004c B3F90430 		ldrsh	r3, [r3, #4]
 6734              		.loc 1 2450 44 discriminator 1
 6735 0050 9BB2     		uxth	r3, r3
 6736 0052 03F00203 		and	r3, r3, #2
 6737              		.loc 1 2450 25 discriminator 1
 6738 0056 002B     		cmp	r3, #0
 6739 0058 01D0     		beq	.L464
2451:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return 1;
 6740              		.loc 1 2451 16
 6741 005a 0123     		movs	r3, #1
 6742 005c 0DE0     		b	.L463
 6743              	.L464:
2452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (has_errevent) {
 6744              		.loc 1 2453 10
 6745 005e 3B6A     		ldr	r3, [r7, #32]
 6746 0060 002B     		cmp	r3, #0
 6747 0062 01D0     		beq	.L461
2454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* POLLERR is output only. */
2455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return 1;
 6748              		.loc 1 2455 16
 6749 0064 0123     		movs	r3, #1
 6750 0066 08E0     		b	.L463
 6751              	.L461:
 6752              	.LBE62:
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     const struct pollfd *pollfd = &scb->poll_fds[fdi];
 6753              		.loc 1 2441 42 discriminator 2
 6754 0068 7B69     		ldr	r3, [r7, #20]
ARM GAS  /tmp/ccsCUhT2.s 			page 164


 6755 006a 0133     		adds	r3, r3, #1
 6756 006c 7B61     		str	r3, [r7, #20]
 6757              	.L460:
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     const struct pollfd *pollfd = &scb->poll_fds[fdi];
 6758              		.loc 1 2441 26 discriminator 1
 6759 006e FB68     		ldr	r3, [r7, #12]
 6760 0070 9B69     		ldr	r3, [r3, #24]
2441:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     const struct pollfd *pollfd = &scb->poll_fds[fdi];
 6761              		.loc 1 2441 3 discriminator 1
 6762 0072 7A69     		ldr	r2, [r7, #20]
 6763 0074 9A42     		cmp	r2, r3
 6764 0076 CDD3     		bcc	.L465
2456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 6765              		.loc 1 2459 10
 6766 0078 0023     		movs	r3, #0
 6767              	.L463:
2460:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 6768              		.loc 1 2460 1
 6769 007a 1846     		mov	r0, r3
 6770 007c 1C37     		adds	r7, r7, #28
 6771              	.LCFI193:
 6772              		.cfi_def_cfa_offset 4
 6773 007e BD46     		mov	sp, r7
 6774              	.LCFI194:
 6775              		.cfi_def_cfa_register 13
 6776              		@ sp needed
 6777 0080 5DF8047B 		ldr	r7, [sp], #4
 6778              	.LCFI195:
 6779              		.cfi_restore 7
 6780              		.cfi_def_cfa_offset 0
 6781 0084 7047     		bx	lr
 6782              		.cfi_endproc
 6783              	.LFE175:
 6785              		.section	.rodata
 6786              		.align	2
 6787              	.LC33:
 6788 0378 756E6B6E 		.ascii	"unknown event\000"
 6788      6F776E20 
 6788      6576656E 
 6788      7400
 6789              		.section	.text.event_callback,"ax",%progbits
 6790              		.align	1
 6791              		.syntax unified
 6792              		.thumb
 6793              		.thumb_func
 6794              		.fpu fpv4-sp-d16
 6796              	event_callback:
 6797              	.LFB176:
2461:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_POLL */
2462:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2463:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL
2464:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
2465:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Callback registered in the netconn layer for each socket-netconn.
2466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Processes recvevent (data available) and wakes up tasks waiting for select.
ARM GAS  /tmp/ccsCUhT2.s 			page 165


2467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
2468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @note for LWIP_TCPIP_CORE_LOCKING any caller of this function
2469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * must have the core lock held when signaling the following events
2470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * as they might cause select_list_cb to be checked:
2471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *   NETCONN_EVT_RCVPLUS
2472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *   NETCONN_EVT_SENDPLUS
2473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *   NETCONN_EVT_ERROR
2474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * This requirement will be asserted in select_check_waiters()
2475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2476:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2477:Middlewares/Third_Party/LwIP/src/api/sockets.c **** event_callback(struct netconn *conn, enum netconn_evt evt, u16_t len)
2478:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 6798              		.loc 1 2478 1
 6799              		.cfi_startproc
 6800              		@ args = 0, pretend = 0, frame = 40
 6801              		@ frame_needed = 1, uses_anonymous_args = 0
 6802 0000 80B5     		push	{r7, lr}
 6803              	.LCFI196:
 6804              		.cfi_def_cfa_offset 8
 6805              		.cfi_offset 7, -8
 6806              		.cfi_offset 14, -4
 6807 0002 8AB0     		sub	sp, sp, #40
 6808              	.LCFI197:
 6809              		.cfi_def_cfa_offset 48
 6810 0004 00AF     		add	r7, sp, #0
 6811              	.LCFI198:
 6812              		.cfi_def_cfa_register 7
 6813 0006 7860     		str	r0, [r7, #4]
 6814 0008 0B46     		mov	r3, r1
 6815 000a FB70     		strb	r3, [r7, #3]
 6816 000c 1346     		mov	r3, r2	@ movhi
 6817 000e 3B80     		strh	r3, [r7]	@ movhi
2479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int s, check_waiters;
2480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
2481:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
2482:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_UNUSED_ARG(len);
2484:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Get socket */
2486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (conn) {
 6818              		.loc 1 2486 6
 6819 0010 7B68     		ldr	r3, [r7, #4]
 6820 0012 002B     		cmp	r3, #0
 6821 0014 00F0A480 		beq	.L485
2487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     s = conn->socket;
 6822              		.loc 1 2487 7
 6823 0018 7B68     		ldr	r3, [r7, #4]
 6824 001a 9B69     		ldr	r3, [r3, #24]
 6825 001c 7B62     		str	r3, [r7, #36]
2488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (s < 0) {
 6826              		.loc 1 2488 8
 6827 001e 7B6A     		ldr	r3, [r7, #36]
 6828 0020 002B     		cmp	r3, #0
 6829 0022 18DA     		bge	.L468
2489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Data comes in right away after an accept, even though
2490:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * the server task might not have created a new socket yet.
2491:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * Just count down (or up) if that's the case and we
ARM GAS  /tmp/ccsCUhT2.s 			page 166


2492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * will use the data later. Note that only receive events
2493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****        * can happen before the new socket is set up. */
2494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_PROTECT(lev);
 6830              		.loc 1 2494 7
 6831 0024 FFF7FEFF 		bl	sys_arch_protect
 6832 0028 F861     		str	r0, [r7, #28]
2495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (conn->socket < 0) {
 6833              		.loc 1 2495 15
 6834 002a 7B68     		ldr	r3, [r7, #4]
 6835 002c 9B69     		ldr	r3, [r3, #24]
 6836              		.loc 1 2495 10
 6837 002e 002B     		cmp	r3, #0
 6838 0030 0BDA     		bge	.L469
2496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (evt == NETCONN_EVT_RCVPLUS) {
 6839              		.loc 1 2496 12
 6840 0032 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 6841 0034 002B     		cmp	r3, #0
 6842 0036 04D1     		bne	.L470
2497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* conn->socket is -1 on initialization
2498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****              lwip_accept adjusts sock->recvevent if conn->socket < -1 */
2499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn->socket--;
 6843              		.loc 1 2499 15
 6844 0038 7B68     		ldr	r3, [r7, #4]
 6845 003a 9B69     		ldr	r3, [r3, #24]
 6846              		.loc 1 2499 23
 6847 003c 5A1E     		subs	r2, r3, #1
 6848 003e 7B68     		ldr	r3, [r7, #4]
 6849 0040 9A61     		str	r2, [r3, #24]
 6850              	.L470:
2500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
 6851              		.loc 1 2501 9
 6852 0042 F869     		ldr	r0, [r7, #28]
 6853 0044 FFF7FEFF 		bl	sys_arch_unprotect
2502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return;
 6854              		.loc 1 2502 9
 6855 0048 8DE0     		b	.L466
 6856              	.L469:
2503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       s = conn->socket;
 6857              		.loc 1 2504 9
 6858 004a 7B68     		ldr	r3, [r7, #4]
 6859 004c 9B69     		ldr	r3, [r3, #24]
 6860 004e 7B62     		str	r3, [r7, #36]
2505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_UNPROTECT(lev);
 6861              		.loc 1 2505 7
 6862 0050 F869     		ldr	r0, [r7, #28]
 6863 0052 FFF7FEFF 		bl	sys_arch_unprotect
 6864              	.L468:
2506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2507:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock = get_socket(s);
 6865              		.loc 1 2508 12
 6866 0056 786A     		ldr	r0, [r7, #36]
 6867 0058 FFF7FEFF 		bl	get_socket
 6868 005c B861     		str	r0, [r7, #24]
2509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (!sock) {
ARM GAS  /tmp/ccsCUhT2.s 			page 167


 6869              		.loc 1 2509 8
 6870 005e BB69     		ldr	r3, [r7, #24]
 6871 0060 002B     		cmp	r3, #0
 6872 0062 7FD0     		beq	.L486
2510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return;
2511:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2512:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
2513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return;
2514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2515:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   check_waiters = 1;
 6873              		.loc 1 2516 17
 6874 0064 0123     		movs	r3, #1
 6875 0066 3B62     		str	r3, [r7, #32]
2517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
 6876              		.loc 1 2517 3
 6877 0068 FFF7FEFF 		bl	sys_arch_protect
 6878 006c F861     		str	r0, [r7, #28]
2518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Set event as required */
2519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (evt) {
 6879              		.loc 1 2519 3
 6880 006e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 6881 0070 042B     		cmp	r3, #4
 6882 0072 3ED8     		bhi	.L484
 6883 0074 01A2     		adr	r2, .L475
 6884 0076 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 6885 007a 00BF     		.p2align 2
 6886              	.L475:
 6887 007c 91000000 		.word	.L479+1
 6888 0080 B3000000 		.word	.L478+1
 6889 0084 CB000000 		.word	.L477+1
 6890 0088 DF000000 		.word	.L476+1
 6891 008c EB000000 		.word	.L474+1
 6892              		.p2align 1
 6893              	.L479:
2520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVPLUS:
2521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent++;
 6894              		.loc 1 2521 11
 6895 0090 BB69     		ldr	r3, [r7, #24]
 6896 0092 B3F90830 		ldrsh	r3, [r3, #8]
 6897              		.loc 1 2521 21
 6898 0096 9BB2     		uxth	r3, r3
 6899 0098 0133     		adds	r3, r3, #1
 6900 009a 9BB2     		uxth	r3, r3
 6901 009c 1AB2     		sxth	r2, r3
 6902 009e BB69     		ldr	r3, [r7, #24]
 6903 00a0 1A81     		strh	r2, [r3, #8]	@ movhi
2522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->rcvevent > 1) {
 6904              		.loc 1 2522 15
 6905 00a2 BB69     		ldr	r3, [r7, #24]
 6906 00a4 B3F90830 		ldrsh	r3, [r3, #8]
 6907              		.loc 1 2522 10
 6908 00a8 012B     		cmp	r3, #1
 6909 00aa 2ADD     		ble	.L487
2523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         check_waiters = 0;
 6910              		.loc 1 2523 23
 6911 00ac 0023     		movs	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 168


 6912 00ae 3B62     		str	r3, [r7, #32]
2524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 6913              		.loc 1 2525 7
 6914 00b0 27E0     		b	.L487
 6915              	.L478:
2526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVMINUS:
2527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->rcvevent--;
 6916              		.loc 1 2527 11
 6917 00b2 BB69     		ldr	r3, [r7, #24]
 6918 00b4 B3F90830 		ldrsh	r3, [r3, #8]
 6919              		.loc 1 2527 21
 6920 00b8 9BB2     		uxth	r3, r3
 6921 00ba 013B     		subs	r3, r3, #1
 6922 00bc 9BB2     		uxth	r3, r3
 6923 00be 1AB2     		sxth	r2, r3
 6924 00c0 BB69     		ldr	r3, [r7, #24]
 6925 00c2 1A81     		strh	r2, [r3, #8]	@ movhi
2528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       check_waiters = 0;
 6926              		.loc 1 2528 21
 6927 00c4 0023     		movs	r3, #0
 6928 00c6 3B62     		str	r3, [r7, #32]
2529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 6929              		.loc 1 2529 7
 6930 00c8 1CE0     		b	.L481
 6931              	.L477:
2530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDPLUS:
2531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->sendevent) {
 6932              		.loc 1 2531 15
 6933 00ca BB69     		ldr	r3, [r7, #24]
 6934 00cc 5B89     		ldrh	r3, [r3, #10]
 6935              		.loc 1 2531 10
 6936 00ce 002B     		cmp	r3, #0
 6937 00d0 01D0     		beq	.L482
2532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         check_waiters = 0;
 6938              		.loc 1 2532 23
 6939 00d2 0023     		movs	r3, #0
 6940 00d4 3B62     		str	r3, [r7, #32]
 6941              	.L482:
2533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 1;
 6942              		.loc 1 2534 23
 6943 00d6 BB69     		ldr	r3, [r7, #24]
 6944 00d8 0122     		movs	r2, #1
 6945 00da 5A81     		strh	r2, [r3, #10]	@ movhi
2535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 6946              		.loc 1 2535 7
 6947 00dc 12E0     		b	.L481
 6948              	.L476:
2536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_SENDMINUS:
2537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->sendevent = 0;
 6949              		.loc 1 2537 23
 6950 00de BB69     		ldr	r3, [r7, #24]
 6951 00e0 0022     		movs	r2, #0
 6952 00e2 5A81     		strh	r2, [r3, #10]	@ movhi
2538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       check_waiters = 0;
 6953              		.loc 1 2538 21
ARM GAS  /tmp/ccsCUhT2.s 			page 169


 6954 00e4 0023     		movs	r3, #0
 6955 00e6 3B62     		str	r3, [r7, #32]
2539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 6956              		.loc 1 2539 7
 6957 00e8 0CE0     		b	.L481
 6958              	.L474:
2540:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_ERROR:
2541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock->errevent = 1;
 6959              		.loc 1 2541 22
 6960 00ea BB69     		ldr	r3, [r7, #24]
 6961 00ec 0122     		movs	r2, #1
 6962 00ee 9A81     		strh	r2, [r3, #12]	@ movhi
2542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 6963              		.loc 1 2542 7
 6964 00f0 08E0     		b	.L481
 6965              	.L484:
2543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
2544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_ASSERT("unknown event", 0);
 6966              		.loc 1 2544 7 discriminator 1
 6967 00f2 1E4B     		ldr	r3, .L488
 6968 00f4 4FF41F62 		mov	r2, #2544
 6969 00f8 1D49     		ldr	r1, .L488+4
 6970 00fa 1E48     		ldr	r0, .L488+8
 6971 00fc FFF7FEFF 		bl	printf
2545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 6972              		.loc 1 2545 7 discriminator 1
 6973 0100 00E0     		b	.L481
 6974              	.L487:
2525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case NETCONN_EVT_RCVMINUS:
 6975              		.loc 1 2525 7
 6976 0102 00BF     		nop
 6977              	.L481:
2546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2547:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->select_waiting && check_waiters) {
 6978              		.loc 1 2548 11
 6979 0104 BB69     		ldr	r3, [r7, #24]
 6980 0106 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 6981              		.loc 1 2548 6
 6982 0108 002B     		cmp	r3, #0
 6983 010a 25D0     		beq	.L483
 6984              		.loc 1 2548 28 discriminator 1
 6985 010c 3B6A     		ldr	r3, [r7, #32]
 6986 010e 002B     		cmp	r3, #0
 6987 0110 22D0     		beq	.L483
 6988              	.LBB63:
2549:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Save which events are active */
2550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     int has_recvevent, has_sendevent, has_errevent;
2551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     has_recvevent = sock->rcvevent > 0;
 6989              		.loc 1 2551 25
 6990 0112 BB69     		ldr	r3, [r7, #24]
 6991 0114 B3F90830 		ldrsh	r3, [r3, #8]
 6992              		.loc 1 2551 36
 6993 0118 002B     		cmp	r3, #0
 6994 011a CCBF     		ite	gt
 6995 011c 0123     		movgt	r3, #1
 6996 011e 0023     		movle	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 170


 6997 0120 DBB2     		uxtb	r3, r3
 6998              		.loc 1 2551 19
 6999 0122 7B61     		str	r3, [r7, #20]
2552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     has_sendevent = sock->sendevent != 0;
 7000              		.loc 1 2552 25
 7001 0124 BB69     		ldr	r3, [r7, #24]
 7002 0126 5B89     		ldrh	r3, [r3, #10]
 7003              		.loc 1 2552 37
 7004 0128 002B     		cmp	r3, #0
 7005 012a 14BF     		ite	ne
 7006 012c 0123     		movne	r3, #1
 7007 012e 0023     		moveq	r3, #0
 7008 0130 DBB2     		uxtb	r3, r3
 7009              		.loc 1 2552 19
 7010 0132 3B61     		str	r3, [r7, #16]
2553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     has_errevent = sock->errevent != 0;
 7011              		.loc 1 2553 24
 7012 0134 BB69     		ldr	r3, [r7, #24]
 7013 0136 9B89     		ldrh	r3, [r3, #12]
 7014              		.loc 1 2553 35
 7015 0138 002B     		cmp	r3, #0
 7016 013a 14BF     		ite	ne
 7017 013c 0123     		movne	r3, #1
 7018 013e 0023     		moveq	r3, #0
 7019 0140 DBB2     		uxtb	r3, r3
 7020              		.loc 1 2553 18
 7021 0142 FB60     		str	r3, [r7, #12]
2554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 7022              		.loc 1 2554 5
 7023 0144 F869     		ldr	r0, [r7, #28]
 7024 0146 FFF7FEFF 		bl	sys_arch_unprotect
2555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Check any select calls waiting on this socket */
2556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     select_check_waiters(s, has_recvevent, has_sendevent, has_errevent);
 7025              		.loc 1 2556 5
 7026 014a FB68     		ldr	r3, [r7, #12]
 7027 014c 3A69     		ldr	r2, [r7, #16]
 7028 014e 7969     		ldr	r1, [r7, #20]
 7029 0150 786A     		ldr	r0, [r7, #36]
 7030 0152 FFF7FEFF 		bl	select_check_waiters
 7031              	.LBE63:
2548:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Save which events are active */
 7032              		.loc 1 2548 46
 7033 0156 06E0     		b	.L466
 7034              	.L483:
2557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
2558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
 7035              		.loc 1 2558 5
 7036 0158 F869     		ldr	r0, [r7, #28]
 7037 015a FFF7FEFF 		bl	sys_arch_unprotect
 7038 015e 02E0     		b	.L466
 7039              	.L485:
2513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
 7040              		.loc 1 2513 5
 7041 0160 00BF     		nop
 7042 0162 00E0     		b	.L466
 7043              	.L486:
2510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
ARM GAS  /tmp/ccsCUhT2.s 			page 171


 7044              		.loc 1 2510 7
 7045 0164 00BF     		nop
 7046              	.L466:
2559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
2561:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7047              		.loc 1 2561 1
 7048 0166 2837     		adds	r7, r7, #40
 7049              	.LCFI199:
 7050              		.cfi_def_cfa_offset 8
 7051 0168 BD46     		mov	sp, r7
 7052              	.LCFI200:
 7053              		.cfi_def_cfa_register 13
 7054              		@ sp needed
 7055 016a 80BD     		pop	{r7, pc}
 7056              	.L489:
 7057              		.align	2
 7058              	.L488:
 7059 016c 00000000 		.word	.LC0
 7060 0170 78030000 		.word	.LC33
 7061 0174 50000000 		.word	.LC2
 7062              		.cfi_endproc
 7063              	.LFE176:
 7065              		.section	.text.select_check_waiters,"ax",%progbits
 7066              		.align	1
 7067              		.syntax unified
 7068              		.thumb
 7069              		.thumb_func
 7070              		.fpu fpv4-sp-d16
 7072              	select_check_waiters:
 7073              	.LFB177:
2562:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2563:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
2564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Check if any select waiters are waiting on this socket and its events
2565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  *
2566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * @note on synchronization of select_cb_list:
2567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * LWIP_TCPIP_CORE_LOCKING: the select_cb_list must only be accessed while holding
2568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * the core lock. We do a single pass through the list and signal any waiters.
2569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Core lock should already be held when calling here!!!!
2570:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * !LWIP_TCPIP_CORE_LOCKING: we use SYS_ARCH_PROTECT but unlock on each iteration
2572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * of the loop, thus creating a possibility where a thread could modify the
2573:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * select_cb_list during our UNPROTECT/PROTECT. We use a generational counter to
2574:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * detect this change and restart the list walk. The list is expected to be small
2575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2576:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void select_check_waiters(int s, int has_recvevent, int has_sendevent, int has_errevent)
2577:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7074              		.loc 1 2577 1
 7075              		.cfi_startproc
 7076              		@ args = 0, pretend = 0, frame = 24
 7077              		@ frame_needed = 1, uses_anonymous_args = 0
 7078 0000 80B5     		push	{r7, lr}
 7079              	.LCFI201:
 7080              		.cfi_def_cfa_offset 8
 7081              		.cfi_offset 7, -8
 7082              		.cfi_offset 14, -4
 7083 0002 88B0     		sub	sp, sp, #32
ARM GAS  /tmp/ccsCUhT2.s 			page 172


 7084              	.LCFI202:
 7085              		.cfi_def_cfa_offset 40
 7086 0004 02AF     		add	r7, sp, #8
 7087              	.LCFI203:
 7088              		.cfi_def_cfa 7, 32
 7089 0006 F860     		str	r0, [r7, #12]
 7090 0008 B960     		str	r1, [r7, #8]
 7091 000a 7A60     		str	r2, [r7, #4]
 7092 000c 3B60     		str	r3, [r7]
2578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_select_cb *scb;
2579:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int last_select_cb_ctr;
2581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_DECL_PROTECT(lev);
2582:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
2583:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT_CORE_LOCKED();
2585:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2586:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_PROTECT(lev);
2588:Middlewares/Third_Party/LwIP/src/api/sockets.c **** again:
2589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* remember the state of select_cb_list to detect changes */
2590:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   last_select_cb_ctr = select_cb_ctr;
2591:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
2592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   for (scb = select_cb_list; scb != NULL; scb = scb->next) {
 7093              		.loc 1 2592 12
 7094 000e 4C4B     		ldr	r3, .L501
 7095 0010 1B68     		ldr	r3, [r3]
 7096 0012 7B61     		str	r3, [r7, #20]
 7097              		.loc 1 2592 3
 7098 0014 8BE0     		b	.L491
 7099              	.L500:
2593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
 7100              		.loc 1 2593 12
 7101 0016 7B69     		ldr	r3, [r7, #20]
 7102 0018 DB69     		ldr	r3, [r3, #28]
 7103              		.loc 1 2593 8
 7104 001a 002B     		cmp	r3, #0
 7105 001c 40F08480 		bne	.L492
 7106              	.LBB64:
2594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* semaphore not signalled yet */
2595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       int do_signal = 0;
 7107              		.loc 1 2595 11
 7108 0020 0023     		movs	r3, #0
 7109 0022 3B61     		str	r3, [r7, #16]
2596:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_POLL
2597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (scb->poll_fds != NULL) {
 7110              		.loc 1 2597 14
 7111 0024 7B69     		ldr	r3, [r7, #20]
 7112 0026 5B69     		ldr	r3, [r3, #20]
 7113              		.loc 1 2597 10
 7114 0028 002B     		cmp	r3, #0
 7115 002a 09D0     		beq	.L493
2598:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         do_signal = lwip_poll_should_wake(scb, s, has_recvevent, has_sendevent, has_errevent);
 7116              		.loc 1 2598 21
 7117 002c 3B68     		ldr	r3, [r7]
 7118 002e 0093     		str	r3, [sp]
 7119 0030 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 173


 7120 0032 BA68     		ldr	r2, [r7, #8]
 7121 0034 F968     		ldr	r1, [r7, #12]
 7122 0036 7869     		ldr	r0, [r7, #20]
 7123 0038 FFF7FEFF 		bl	lwip_poll_should_wake
 7124 003c 3861     		str	r0, [r7, #16]
 7125 003e 68E0     		b	.L494
 7126              	.L493:
2599:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2600:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_POLL */
2601:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT && LWIP_SOCKET_POLL
2602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       else
2603:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT && LWIP_SOCKET_POLL */
2604:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SOCKET_SELECT
2605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       {
2606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* Test this select call for our socket */
2607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (has_recvevent) {
 7127              		.loc 1 2607 12
 7128 0040 BB68     		ldr	r3, [r7, #8]
 7129 0042 002B     		cmp	r3, #0
 7130 0044 1DD0     		beq	.L495
2608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (scb->readset && FD_ISSET(s, scb->readset)) {
 7131              		.loc 1 2608 18
 7132 0046 7B69     		ldr	r3, [r7, #20]
 7133 0048 9B68     		ldr	r3, [r3, #8]
 7134              		.loc 1 2608 14
 7135 004a 002B     		cmp	r3, #0
 7136 004c 19D0     		beq	.L495
 7137              		.loc 1 2608 28 discriminator 1
 7138 004e FB68     		ldr	r3, [r7, #12]
 7139 0050 032B     		cmp	r3, #3
 7140 0052 16DC     		bgt	.L495
 7141              		.loc 1 2608 31 discriminator 2
 7142 0054 FB68     		ldr	r3, [r7, #12]
 7143 0056 002B     		cmp	r3, #0
 7144 0058 13DB     		blt	.L495
 7145              		.loc 1 2608 31 is_stmt 0 discriminator 3
 7146 005a 7B69     		ldr	r3, [r7, #20]
 7147 005c 9A68     		ldr	r2, [r3, #8]
 7148 005e FB68     		ldr	r3, [r7, #12]
 7149 0060 002B     		cmp	r3, #0
 7150 0062 00DA     		bge	.L496
 7151 0064 0733     		adds	r3, r3, #7
 7152              	.L496:
 7153 0066 DB10     		asrs	r3, r3, #3
 7154 0068 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 7155 006a 1A46     		mov	r2, r3
 7156 006c FB68     		ldr	r3, [r7, #12]
 7157 006e 03F00703 		and	r3, r3, #7
 7158              		.loc 1 2608 28 is_stmt 1 discriminator 3
 7159 0072 42FA03F3 		asr	r3, r2, r3
 7160 0076 03F00103 		and	r3, r3, #1
 7161 007a 002B     		cmp	r3, #0
 7162 007c 01D0     		beq	.L495
2609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             do_signal = 1;
 7163              		.loc 1 2609 23
 7164 007e 0123     		movs	r3, #1
 7165 0080 3B61     		str	r3, [r7, #16]
ARM GAS  /tmp/ccsCUhT2.s 			page 174


 7166              	.L495:
2610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (has_sendevent) {
 7167              		.loc 1 2612 12
 7168 0082 7B68     		ldr	r3, [r7, #4]
 7169 0084 002B     		cmp	r3, #0
 7170 0086 20D0     		beq	.L497
2613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!do_signal && scb->writeset && FD_ISSET(s, scb->writeset)) {
 7171              		.loc 1 2613 14
 7172 0088 3B69     		ldr	r3, [r7, #16]
 7173 008a 002B     		cmp	r3, #0
 7174 008c 1DD1     		bne	.L497
 7175              		.loc 1 2613 32 discriminator 1
 7176 008e 7B69     		ldr	r3, [r7, #20]
 7177 0090 DB68     		ldr	r3, [r3, #12]
 7178              		.loc 1 2613 26 discriminator 1
 7179 0092 002B     		cmp	r3, #0
 7180 0094 19D0     		beq	.L497
 7181              		.loc 1 2613 43 discriminator 2
 7182 0096 FB68     		ldr	r3, [r7, #12]
 7183 0098 032B     		cmp	r3, #3
 7184 009a 16DC     		bgt	.L497
 7185              		.loc 1 2613 46 discriminator 3
 7186 009c FB68     		ldr	r3, [r7, #12]
 7187 009e 002B     		cmp	r3, #0
 7188 00a0 13DB     		blt	.L497
 7189              		.loc 1 2613 46 is_stmt 0 discriminator 4
 7190 00a2 7B69     		ldr	r3, [r7, #20]
 7191 00a4 DA68     		ldr	r2, [r3, #12]
 7192 00a6 FB68     		ldr	r3, [r7, #12]
 7193 00a8 002B     		cmp	r3, #0
 7194 00aa 00DA     		bge	.L498
 7195 00ac 0733     		adds	r3, r3, #7
 7196              	.L498:
 7197 00ae DB10     		asrs	r3, r3, #3
 7198 00b0 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 7199 00b2 1A46     		mov	r2, r3
 7200 00b4 FB68     		ldr	r3, [r7, #12]
 7201 00b6 03F00703 		and	r3, r3, #7
 7202              		.loc 1 2613 43 is_stmt 1 discriminator 4
 7203 00ba 42FA03F3 		asr	r3, r2, r3
 7204 00be 03F00103 		and	r3, r3, #1
 7205 00c2 002B     		cmp	r3, #0
 7206 00c4 01D0     		beq	.L497
2614:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             do_signal = 1;
 7207              		.loc 1 2614 23
 7208 00c6 0123     		movs	r3, #1
 7209 00c8 3B61     		str	r3, [r7, #16]
 7210              	.L497:
2615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (has_errevent) {
 7211              		.loc 1 2617 12
 7212 00ca 3B68     		ldr	r3, [r7]
 7213 00cc 002B     		cmp	r3, #0
 7214 00ce 20D0     		beq	.L494
ARM GAS  /tmp/ccsCUhT2.s 			page 175


2618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!do_signal && scb->exceptset && FD_ISSET(s, scb->exceptset)) {
 7215              		.loc 1 2618 14
 7216 00d0 3B69     		ldr	r3, [r7, #16]
 7217 00d2 002B     		cmp	r3, #0
 7218 00d4 1DD1     		bne	.L494
 7219              		.loc 1 2618 32 discriminator 1
 7220 00d6 7B69     		ldr	r3, [r7, #20]
 7221 00d8 1B69     		ldr	r3, [r3, #16]
 7222              		.loc 1 2618 26 discriminator 1
 7223 00da 002B     		cmp	r3, #0
 7224 00dc 19D0     		beq	.L494
 7225              		.loc 1 2618 44 discriminator 2
 7226 00de FB68     		ldr	r3, [r7, #12]
 7227 00e0 032B     		cmp	r3, #3
 7228 00e2 16DC     		bgt	.L494
 7229              		.loc 1 2618 47 discriminator 3
 7230 00e4 FB68     		ldr	r3, [r7, #12]
 7231 00e6 002B     		cmp	r3, #0
 7232 00e8 13DB     		blt	.L494
 7233              		.loc 1 2618 47 is_stmt 0 discriminator 4
 7234 00ea 7B69     		ldr	r3, [r7, #20]
 7235 00ec 1A69     		ldr	r2, [r3, #16]
 7236 00ee FB68     		ldr	r3, [r7, #12]
 7237 00f0 002B     		cmp	r3, #0
 7238 00f2 00DA     		bge	.L499
 7239 00f4 0733     		adds	r3, r3, #7
 7240              	.L499:
 7241 00f6 DB10     		asrs	r3, r3, #3
 7242 00f8 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 7243 00fa 1A46     		mov	r2, r3
 7244 00fc FB68     		ldr	r3, [r7, #12]
 7245 00fe 03F00703 		and	r3, r3, #7
 7246              		.loc 1 2618 44 is_stmt 1 discriminator 4
 7247 0102 42FA03F3 		asr	r3, r2, r3
 7248 0106 03F00103 		and	r3, r3, #1
 7249 010a 002B     		cmp	r3, #0
 7250 010c 01D0     		beq	.L494
2619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             do_signal = 1;
 7251              		.loc 1 2619 23
 7252 010e 0123     		movs	r3, #1
 7253 0110 3B61     		str	r3, [r7, #16]
 7254              	.L494:
2620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2623:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT */
2624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (do_signal) {
 7255              		.loc 1 2624 10
 7256 0112 3B69     		ldr	r3, [r7, #16]
 7257 0114 002B     		cmp	r3, #0
 7258 0116 07D0     		beq	.L492
2625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         scb->sem_signalled = 1;
 7259              		.loc 1 2625 28
 7260 0118 7B69     		ldr	r3, [r7, #20]
 7261 011a 0122     		movs	r2, #1
 7262 011c DA61     		str	r2, [r3, #28]
2626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* For !LWIP_TCPIP_CORE_LOCKING, we don't call SYS_ARCH_UNPROTECT() before signaling
ARM GAS  /tmp/ccsCUhT2.s 			page 176


2627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            the semaphore, as this might lead to the select thread taking itself off the list,
2628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            invalidating the semaphore. */
2629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sys_sem_signal(SELECT_SEM_PTR(scb->sem));
 7263              		.loc 1 2629 9
 7264 011e 7B69     		ldr	r3, [r7, #20]
 7265 0120 2033     		adds	r3, r3, #32
 7266 0122 1846     		mov	r0, r3
 7267 0124 FFF7FEFF 		bl	sys_sem_signal
 7268              	.L492:
 7269              	.LBE64:
2592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
 7270              		.loc 1 2592 47 discriminator 2
 7271 0128 7B69     		ldr	r3, [r7, #20]
 7272 012a 1B68     		ldr	r3, [r3]
 7273 012c 7B61     		str	r3, [r7, #20]
 7274              	.L491:
2592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (scb->sem_signalled == 0) {
 7275              		.loc 1 2592 3 discriminator 1
 7276 012e 7B69     		ldr	r3, [r7, #20]
 7277 0130 002B     		cmp	r3, #0
 7278 0132 7FF470AF 		bne	.L500
2630:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
2631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2632:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
2633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2634:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
2635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* unlock interrupts with each step */
2636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_UNPROTECT(lev);
2637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* this makes sure interrupt protection time is short */
2638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     SYS_ARCH_PROTECT(lev);
2639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (last_select_cb_ctr != select_cb_ctr) {
2640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* someone has changed select_cb_list, restart at the beginning */
2641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       goto again;
2642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* remember the state of select_cb_list to detect changes */
2644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     last_select_cb_ctr = select_cb_ctr;
2645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   SYS_ARCH_UNPROTECT(lev);
2647:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2648:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7279              		.loc 1 2648 1
 7280 0136 00BF     		nop
 7281 0138 1837     		adds	r7, r7, #24
 7282              	.LCFI204:
 7283              		.cfi_def_cfa_offset 8
 7284 013a BD46     		mov	sp, r7
 7285              	.LCFI205:
 7286              		.cfi_def_cfa_register 13
 7287              		@ sp needed
 7288 013c 80BD     		pop	{r7, pc}
 7289              	.L502:
 7290 013e 00BF     		.align	2
 7291              	.L501:
 7292 0140 00000000 		.word	select_cb_list
 7293              		.cfi_endproc
 7294              	.LFE177:
 7296              		.section	.text.lwip_shutdown,"ax",%progbits
ARM GAS  /tmp/ccsCUhT2.s 			page 177


 7297              		.align	1
 7298              		.global	lwip_shutdown
 7299              		.syntax unified
 7300              		.thumb
 7301              		.thumb_func
 7302              		.fpu fpv4-sp-d16
 7304              	lwip_shutdown:
 7305              	.LFB178:
2649:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SOCKET_SELECT || LWIP_SOCKET_POLL */
2650:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2651:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /**
2652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Close one end of a full-duplex connection.
2653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2654:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2655:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_shutdown(int s, int how)
2656:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7306              		.loc 1 2656 1
 7307              		.cfi_startproc
 7308              		@ args = 0, pretend = 0, frame = 40
 7309              		@ frame_needed = 1, uses_anonymous_args = 0
 7310 0000 80B5     		push	{r7, lr}
 7311              	.LCFI206:
 7312              		.cfi_def_cfa_offset 8
 7313              		.cfi_offset 7, -8
 7314              		.cfi_offset 14, -4
 7315 0002 8AB0     		sub	sp, sp, #40
 7316              	.LCFI207:
 7317              		.cfi_def_cfa_offset 48
 7318 0004 00AF     		add	r7, sp, #0
 7319              	.LCFI208:
 7320              		.cfi_def_cfa_register 7
 7321 0006 7860     		str	r0, [r7, #4]
 7322 0008 3960     		str	r1, [r7]
2657:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
2658:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
2659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t shut_rx = 0, shut_tx = 0;
 7323              		.loc 1 2659 8
 7324 000a 0023     		movs	r3, #0
 7325 000c 87F82730 		strb	r3, [r7, #39]
 7326              		.loc 1 2659 21
 7327 0010 0023     		movs	r3, #0
 7328 0012 87F82630 		strb	r3, [r7, #38]
2660:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_shutdown(%d, how=%d)\n", s, how));
2662:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 7329              		.loc 1 2663 10
 7330 0016 7868     		ldr	r0, [r7, #4]
 7331 0018 FFF7FEFF 		bl	get_socket
 7332 001c 3862     		str	r0, [r7, #32]
2664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 7333              		.loc 1 2664 6
 7334 001e 3B6A     		ldr	r3, [r7, #32]
 7335 0020 002B     		cmp	r3, #0
 7336 0022 02D1     		bne	.L504
2665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7337              		.loc 1 2665 12
ARM GAS  /tmp/ccsCUhT2.s 			page 178


 7338 0024 4FF0FF33 		mov	r3, #-1
 7339 0028 62E0     		b	.L505
 7340              	.L504:
2666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2667:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (sock->conn != NULL) {
 7341              		.loc 1 2668 11
 7342 002a 3B6A     		ldr	r3, [r7, #32]
 7343 002c 1B68     		ldr	r3, [r3]
 7344              		.loc 1 2668 6
 7345 002e 002B     		cmp	r3, #0
 7346 0030 11D0     		beq	.L506
2669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
 7347              		.loc 1 2669 9
 7348 0032 3B6A     		ldr	r3, [r7, #32]
 7349 0034 1B68     		ldr	r3, [r3]
 7350 0036 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7351 0038 03F0F003 		and	r3, r3, #240
 7352              		.loc 1 2669 8
 7353 003c 102B     		cmp	r3, #16
 7354 003e 15D0     		beq	.L507
 7355              	.LBB65:
2670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, EOPNOTSUPP);
 7356              		.loc 1 2670 7
 7357 0040 5F23     		movs	r3, #95
 7358 0042 FB61     		str	r3, [r7, #28]
 7359 0044 FB69     		ldr	r3, [r7, #28]
 7360 0046 002B     		cmp	r3, #0
 7361 0048 02D0     		beq	.L508
 7362              		.loc 1 2670 7 is_stmt 0 discriminator 1
 7363 004a 2B4A     		ldr	r2, .L518
 7364 004c FB69     		ldr	r3, [r7, #28]
 7365 004e 1360     		str	r3, [r2]
 7366              	.L508:
 7367              	.LBE65:
2671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
2672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return -1;
 7368              		.loc 1 2672 14 is_stmt 1
 7369 0050 4FF0FF33 		mov	r3, #-1
 7370 0054 4CE0     		b	.L505
 7371              	.L506:
 7372              	.LBB66:
2673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
2674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
2675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOTCONN);
 7373              		.loc 1 2675 5
 7374 0056 6B23     		movs	r3, #107
 7375 0058 FB60     		str	r3, [r7, #12]
 7376 005a FB68     		ldr	r3, [r7, #12]
 7377 005c 002B     		cmp	r3, #0
 7378 005e 02D0     		beq	.L509
 7379              		.loc 1 2675 5 is_stmt 0 discriminator 1
 7380 0060 254A     		ldr	r2, .L518
 7381 0062 FB68     		ldr	r3, [r7, #12]
 7382 0064 1360     		str	r3, [r2]
 7383              	.L509:
 7384              	.LBE66:
ARM GAS  /tmp/ccsCUhT2.s 			page 179


2676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
2677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7385              		.loc 1 2677 12 is_stmt 1
 7386 0066 4FF0FF33 		mov	r3, #-1
 7387 006a 41E0     		b	.L505
 7388              	.L507:
2678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2679:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (how == SHUT_RD) {
 7389              		.loc 1 2680 6
 7390 006c 3B68     		ldr	r3, [r7]
 7391 006e 002B     		cmp	r3, #0
 7392 0070 03D1     		bne	.L510
2681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 7393              		.loc 1 2681 13
 7394 0072 0123     		movs	r3, #1
 7395 0074 87F82730 		strb	r3, [r7, #39]
 7396 0078 1BE0     		b	.L511
 7397              	.L510:
2682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_WR) {
 7398              		.loc 1 2682 13
 7399 007a 3B68     		ldr	r3, [r7]
 7400 007c 012B     		cmp	r3, #1
 7401 007e 03D1     		bne	.L512
2683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 7402              		.loc 1 2683 13
 7403 0080 0123     		movs	r3, #1
 7404 0082 87F82630 		strb	r3, [r7, #38]
 7405 0086 14E0     		b	.L511
 7406              	.L512:
2684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else if (how == SHUT_RDWR) {
 7407              		.loc 1 2684 13
 7408 0088 3B68     		ldr	r3, [r7]
 7409 008a 022B     		cmp	r3, #2
 7410 008c 06D1     		bne	.L513
2685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_rx = 1;
 7411              		.loc 1 2685 13
 7412 008e 0123     		movs	r3, #1
 7413 0090 87F82730 		strb	r3, [r7, #39]
2686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     shut_tx = 1;
 7414              		.loc 1 2686 13
 7415 0094 0123     		movs	r3, #1
 7416 0096 87F82630 		strb	r3, [r7, #38]
 7417 009a 0AE0     		b	.L511
 7418              	.L513:
 7419              	.LBB67:
2687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } else {
2688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EINVAL);
 7420              		.loc 1 2688 5
 7421 009c 1623     		movs	r3, #22
 7422 009e BB61     		str	r3, [r7, #24]
 7423 00a0 BB69     		ldr	r3, [r7, #24]
 7424 00a2 002B     		cmp	r3, #0
 7425 00a4 02D0     		beq	.L514
 7426              		.loc 1 2688 5 is_stmt 0 discriminator 1
 7427 00a6 144A     		ldr	r2, .L518
 7428 00a8 BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccsCUhT2.s 			page 180


 7429 00aa 1360     		str	r3, [r2]
 7430              	.L514:
 7431              	.LBE67:
2689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
2690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7432              		.loc 1 2690 12 is_stmt 1
 7433 00ac 4FF0FF33 		mov	r3, #-1
 7434 00b0 1EE0     		b	.L505
 7435              	.L511:
2691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_shutdown(sock->conn, shut_rx, shut_tx);
 7436              		.loc 1 2692 9
 7437 00b2 3B6A     		ldr	r3, [r7, #32]
 7438 00b4 1B68     		ldr	r3, [r3]
 7439 00b6 97F82620 		ldrb	r2, [r7, #38]	@ zero_extendqisi2
 7440 00ba 97F82710 		ldrb	r1, [r7, #39]	@ zero_extendqisi2
 7441 00be 1846     		mov	r0, r3
 7442 00c0 FFF7FEFF 		bl	netconn_shutdown
 7443 00c4 0346     		mov	r3, r0
 7444 00c6 FB75     		strb	r3, [r7, #23]
 7445              	.LBB68:
2693:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err_to_errno(err));
 7446              		.loc 1 2694 3
 7447 00c8 97F91730 		ldrsb	r3, [r7, #23]
 7448 00cc 1846     		mov	r0, r3
 7449 00ce FFF7FEFF 		bl	err_to_errno
 7450 00d2 3861     		str	r0, [r7, #16]
 7451 00d4 3B69     		ldr	r3, [r7, #16]
 7452 00d6 002B     		cmp	r3, #0
 7453 00d8 02D0     		beq	.L515
 7454              		.loc 1 2694 3 is_stmt 0 discriminator 1
 7455 00da 074A     		ldr	r2, .L518
 7456 00dc 3B69     		ldr	r3, [r7, #16]
 7457 00de 1360     		str	r3, [r2]
 7458              	.L515:
 7459              	.LBE68:
2695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
2696:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return (err == ERR_OK ? 0 : -1);
 7460              		.loc 1 2696 29 is_stmt 1
 7461 00e0 97F91730 		ldrsb	r3, [r7, #23]
 7462 00e4 002B     		cmp	r3, #0
 7463 00e6 01D1     		bne	.L516
 7464              		.loc 1 2696 29 is_stmt 0 discriminator 1
 7465 00e8 0023     		movs	r3, #0
 7466 00ea 01E0     		b	.L505
 7467              	.L516:
 7468              		.loc 1 2696 29 discriminator 2
 7469 00ec 4FF0FF33 		mov	r3, #-1
 7470              	.L505:
2697:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7471              		.loc 1 2697 1 is_stmt 1
 7472 00f0 1846     		mov	r0, r3
 7473 00f2 2837     		adds	r7, r7, #40
 7474              	.LCFI209:
 7475              		.cfi_def_cfa_offset 8
 7476 00f4 BD46     		mov	sp, r7
ARM GAS  /tmp/ccsCUhT2.s 			page 181


 7477              	.LCFI210:
 7478              		.cfi_def_cfa_register 13
 7479              		@ sp needed
 7480 00f6 80BD     		pop	{r7, pc}
 7481              	.L519:
 7482              		.align	2
 7483              	.L518:
 7484 00f8 00000000 		.word	errno
 7485              		.cfi_endproc
 7486              	.LFE178:
 7488              		.section	.text.lwip_getaddrname,"ax",%progbits
 7489              		.align	1
 7490              		.syntax unified
 7491              		.thumb
 7492              		.thumb_func
 7493              		.fpu fpv4-sp-d16
 7495              	lwip_getaddrname:
 7496              	.LFB179:
2698:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2699:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
2700:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getaddrname(int s, struct sockaddr *name, socklen_t *namelen, u8_t local)
2701:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7497              		.loc 1 2701 1
 7498              		.cfi_startproc
 7499              		@ args = 0, pretend = 0, frame = 56
 7500              		@ frame_needed = 1, uses_anonymous_args = 0
 7501 0000 90B5     		push	{r4, r7, lr}
 7502              	.LCFI211:
 7503              		.cfi_def_cfa_offset 12
 7504              		.cfi_offset 4, -12
 7505              		.cfi_offset 7, -8
 7506              		.cfi_offset 14, -4
 7507 0002 8FB0     		sub	sp, sp, #60
 7508              	.LCFI212:
 7509              		.cfi_def_cfa_offset 72
 7510 0004 00AF     		add	r7, sp, #0
 7511              	.LCFI213:
 7512              		.cfi_def_cfa_register 7
 7513 0006 F860     		str	r0, [r7, #12]
 7514 0008 B960     		str	r1, [r7, #8]
 7515 000a 7A60     		str	r2, [r7, #4]
 7516 000c FB70     		strb	r3, [r7, #3]
2702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock;
2703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   union sockaddr_aligned saddr;
2704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_t naddr;
2705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u16_t port;
2706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t err;
2707:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2708:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock = get_socket(s);
 7517              		.loc 1 2708 10
 7518 000e F868     		ldr	r0, [r7, #12]
 7519 0010 FFF7FEFF 		bl	get_socket
 7520 0014 7863     		str	r0, [r7, #52]
2709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 7521              		.loc 1 2709 6
 7522 0016 7B6B     		ldr	r3, [r7, #52]
 7523 0018 002B     		cmp	r3, #0
ARM GAS  /tmp/ccsCUhT2.s 			page 182


 7524 001a 02D1     		bne	.L521
2710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7525              		.loc 1 2710 12
 7526 001c 4FF0FF33 		mov	r3, #-1
 7527 0020 54E0     		b	.L527
 7528              	.L521:
2711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2712:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* get the IP address and port */
2714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = netconn_getaddr(sock->conn, &naddr, &port, local);
 7529              		.loc 1 2714 9
 7530 0022 7B6B     		ldr	r3, [r7, #52]
 7531 0024 1868     		ldr	r0, [r3]
 7532 0026 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 7533 0028 07F11202 		add	r2, r7, #18
 7534 002c 07F11401 		add	r1, r7, #20
 7535 0030 FFF7FEFF 		bl	netconn_getaddr
 7536 0034 0346     		mov	r3, r0
 7537 0036 87F83330 		strb	r3, [r7, #51]
2715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (err != ERR_OK) {
 7538              		.loc 1 2715 6
 7539 003a 97F93330 		ldrsb	r3, [r7, #51]
 7540 003e 002B     		cmp	r3, #0
 7541 0040 0ED0     		beq	.L523
 7542              	.LBB69:
2716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(err));
 7543              		.loc 1 2716 5
 7544 0042 97F93330 		ldrsb	r3, [r7, #51]
 7545 0046 1846     		mov	r0, r3
 7546 0048 FFF7FEFF 		bl	err_to_errno
 7547 004c F862     		str	r0, [r7, #44]
 7548 004e FB6A     		ldr	r3, [r7, #44]
 7549 0050 002B     		cmp	r3, #0
 7550 0052 02D0     		beq	.L524
 7551              		.loc 1 2716 5 is_stmt 0 discriminator 1
 7552 0054 1F4A     		ldr	r2, .L528
 7553 0056 FB6A     		ldr	r3, [r7, #44]
 7554 0058 1360     		str	r3, [r2]
 7555              	.L524:
 7556              	.LBE69:
2717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
2718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7557              		.loc 1 2718 12 is_stmt 1
 7558 005a 4FF0FF33 		mov	r3, #-1
 7559 005e 35E0     		b	.L527
 7560              	.L523:
2719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2720:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2721:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_IPV6
2722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Dual-stack: Map IPv4 addresses to IPv4 mapped IPv6 */
2723:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NETCONNTYPE_ISIPV6(netconn_type(sock->conn)) &&
2724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       IP_IS_V4_VAL(naddr)) {
2725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     ip4_2_ipv4_mapped_ipv6(ip_2_ip6(&naddr), ip_2_ip4(&naddr));
2726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     IP_SET_TYPE_VAL(naddr, IPADDR_TYPE_V6);
2727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2728:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_IPV6 */
2729:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  /tmp/ccsCUhT2.s 			page 183


2730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   IPADDR_PORT_TO_SOCKADDR(&saddr, &naddr, port);
 7561              		.loc 1 2730 3
 7562 0060 07F11803 		add	r3, r7, #24
 7563 0064 1022     		movs	r2, #16
 7564 0066 1A70     		strb	r2, [r3]
 7565 0068 07F11803 		add	r3, r7, #24
 7566 006c 0222     		movs	r2, #2
 7567 006e 5A70     		strb	r2, [r3, #1]
 7568 0070 7B8A     		ldrh	r3, [r7, #18]
 7569 0072 07F11804 		add	r4, r7, #24
 7570 0076 1846     		mov	r0, r3
 7571 0078 FFF7FEFF 		bl	lwip_htons
 7572 007c 0346     		mov	r3, r0
 7573 007e 6380     		strh	r3, [r4, #2]	@ movhi
 7574 0080 07F11803 		add	r3, r7, #24
 7575 0084 7A69     		ldr	r2, [r7, #20]
 7576 0086 5A60     		str	r2, [r3, #4]
 7577 0088 07F11803 		add	r3, r7, #24
 7578 008c 0833     		adds	r3, r3, #8
 7579 008e 0822     		movs	r2, #8
 7580 0090 0021     		movs	r1, #0
 7581 0092 1846     		mov	r0, r3
 7582 0094 FFF7FEFF 		bl	memset
2731:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getaddrname(%d, addr=", s));
2733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   ip_addr_debug_print_val(SOCKETS_DEBUG, naddr);
2734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, (" port=%"U16_F")\n", port));
2735:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*namelen > saddr.sa.sa_len) {
 7583              		.loc 1 2736 7
 7584 0098 7B68     		ldr	r3, [r7, #4]
 7585 009a 1B68     		ldr	r3, [r3]
 7586              		.loc 1 2736 26
 7587 009c 3A7E     		ldrb	r2, [r7, #24]	@ zero_extendqisi2
 7588              		.loc 1 2736 6
 7589 009e 9342     		cmp	r3, r2
 7590 00a0 03D9     		bls	.L525
2737:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     *namelen = saddr.sa.sa_len;
 7591              		.loc 1 2737 24
 7592 00a2 3B7E     		ldrb	r3, [r7, #24]	@ zero_extendqisi2
 7593 00a4 1A46     		mov	r2, r3
 7594              		.loc 1 2737 14
 7595 00a6 7B68     		ldr	r3, [r7, #4]
 7596 00a8 1A60     		str	r2, [r3]
 7597              	.L525:
2738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(name, &saddr, *namelen);
 7598              		.loc 1 2739 3
 7599 00aa 7B68     		ldr	r3, [r7, #4]
 7600 00ac 1A68     		ldr	r2, [r3]
 7601 00ae 07F11803 		add	r3, r7, #24
 7602 00b2 1946     		mov	r1, r3
 7603 00b4 B868     		ldr	r0, [r7, #8]
 7604 00b6 FFF7FEFF 		bl	memcpy
 7605              	.LBB70:
2740:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2741:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, 0);
ARM GAS  /tmp/ccsCUhT2.s 			page 184


 7606              		.loc 1 2741 3
 7607 00ba 0023     		movs	r3, #0
 7608 00bc BB62     		str	r3, [r7, #40]
 7609 00be BB6A     		ldr	r3, [r7, #40]
 7610 00c0 002B     		cmp	r3, #0
 7611 00c2 02D0     		beq	.L526
 7612              		.loc 1 2741 3 is_stmt 0 discriminator 1
 7613 00c4 034A     		ldr	r2, .L528
 7614 00c6 BB6A     		ldr	r3, [r7, #40]
 7615 00c8 1360     		str	r3, [r2]
 7616              	.L526:
 7617              	.LBE70:
2742:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
2743:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return 0;
 7618              		.loc 1 2743 10 is_stmt 1
 7619 00ca 0023     		movs	r3, #0
 7620              	.L527:
2744:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7621              		.loc 1 2744 1 discriminator 1
 7622 00cc 1846     		mov	r0, r3
 7623 00ce 3C37     		adds	r7, r7, #60
 7624              	.LCFI214:
 7625              		.cfi_def_cfa_offset 12
 7626 00d0 BD46     		mov	sp, r7
 7627              	.LCFI215:
 7628              		.cfi_def_cfa_register 13
 7629              		@ sp needed
 7630 00d2 90BD     		pop	{r4, r7, pc}
 7631              	.L529:
 7632              		.align	2
 7633              	.L528:
 7634 00d4 00000000 		.word	errno
 7635              		.cfi_endproc
 7636              	.LFE179:
 7638              		.section	.text.lwip_getpeername,"ax",%progbits
 7639              		.align	1
 7640              		.global	lwip_getpeername
 7641              		.syntax unified
 7642              		.thumb
 7643              		.thumb_func
 7644              		.fpu fpv4-sp-d16
 7646              	lwip_getpeername:
 7647              	.LFB180:
2745:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2746:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2747:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getpeername(int s, struct sockaddr *name, socklen_t *namelen)
2748:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7648              		.loc 1 2748 1
 7649              		.cfi_startproc
 7650              		@ args = 0, pretend = 0, frame = 16
 7651              		@ frame_needed = 1, uses_anonymous_args = 0
 7652 0000 80B5     		push	{r7, lr}
 7653              	.LCFI216:
 7654              		.cfi_def_cfa_offset 8
 7655              		.cfi_offset 7, -8
 7656              		.cfi_offset 14, -4
 7657 0002 84B0     		sub	sp, sp, #16
ARM GAS  /tmp/ccsCUhT2.s 			page 185


 7658              	.LCFI217:
 7659              		.cfi_def_cfa_offset 24
 7660 0004 00AF     		add	r7, sp, #0
 7661              	.LCFI218:
 7662              		.cfi_def_cfa_register 7
 7663 0006 F860     		str	r0, [r7, #12]
 7664 0008 B960     		str	r1, [r7, #8]
 7665 000a 7A60     		str	r2, [r7, #4]
2749:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 0);
 7666              		.loc 1 2749 10
 7667 000c 0023     		movs	r3, #0
 7668 000e 7A68     		ldr	r2, [r7, #4]
 7669 0010 B968     		ldr	r1, [r7, #8]
 7670 0012 F868     		ldr	r0, [r7, #12]
 7671 0014 FFF7FEFF 		bl	lwip_getaddrname
 7672 0018 0346     		mov	r3, r0
2750:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7673              		.loc 1 2750 1
 7674 001a 1846     		mov	r0, r3
 7675 001c 1037     		adds	r7, r7, #16
 7676              	.LCFI219:
 7677              		.cfi_def_cfa_offset 8
 7678 001e BD46     		mov	sp, r7
 7679              	.LCFI220:
 7680              		.cfi_def_cfa_register 13
 7681              		@ sp needed
 7682 0020 80BD     		pop	{r7, pc}
 7683              		.cfi_endproc
 7684              	.LFE180:
 7686              		.section	.text.lwip_getsockname,"ax",%progbits
 7687              		.align	1
 7688              		.global	lwip_getsockname
 7689              		.syntax unified
 7690              		.thumb
 7691              		.thumb_func
 7692              		.fpu fpv4-sp-d16
 7694              	lwip_getsockname:
 7695              	.LFB181:
2751:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2752:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2753:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockname(int s, struct sockaddr *name, socklen_t *namelen)
2754:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7696              		.loc 1 2754 1
 7697              		.cfi_startproc
 7698              		@ args = 0, pretend = 0, frame = 16
 7699              		@ frame_needed = 1, uses_anonymous_args = 0
 7700 0000 80B5     		push	{r7, lr}
 7701              	.LCFI221:
 7702              		.cfi_def_cfa_offset 8
 7703              		.cfi_offset 7, -8
 7704              		.cfi_offset 14, -4
 7705 0002 84B0     		sub	sp, sp, #16
 7706              	.LCFI222:
 7707              		.cfi_def_cfa_offset 24
 7708 0004 00AF     		add	r7, sp, #0
 7709              	.LCFI223:
 7710              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccsCUhT2.s 			page 186


 7711 0006 F860     		str	r0, [r7, #12]
 7712 0008 B960     		str	r1, [r7, #8]
 7713 000a 7A60     		str	r2, [r7, #4]
2755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_getaddrname(s, name, namelen, 1);
 7714              		.loc 1 2755 10
 7715 000c 0123     		movs	r3, #1
 7716 000e 7A68     		ldr	r2, [r7, #4]
 7717 0010 B968     		ldr	r1, [r7, #8]
 7718 0012 F868     		ldr	r0, [r7, #12]
 7719 0014 FFF7FEFF 		bl	lwip_getaddrname
 7720 0018 0346     		mov	r3, r0
2756:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7721              		.loc 1 2756 1
 7722 001a 1846     		mov	r0, r3
 7723 001c 1037     		adds	r7, r7, #16
 7724              	.LCFI224:
 7725              		.cfi_def_cfa_offset 8
 7726 001e BD46     		mov	sp, r7
 7727              	.LCFI225:
 7728              		.cfi_def_cfa_register 13
 7729              		@ sp needed
 7730 0020 80BD     		pop	{r7, pc}
 7731              		.cfi_endproc
 7732              	.LFE181:
 7734              		.section	.text.lwip_getsockopt,"ax",%progbits
 7735              		.align	1
 7736              		.global	lwip_getsockopt
 7737              		.syntax unified
 7738              		.thumb
 7739              		.thumb_func
 7740              		.fpu fpv4-sp-d16
 7742              	lwip_getsockopt:
 7743              	.LFB182:
2757:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2758:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
2759:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt(int s, int level, int optname, void *optval, socklen_t *optlen)
2760:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7744              		.loc 1 2760 1
 7745              		.cfi_startproc
 7746              		@ args = 4, pretend = 0, frame = 32
 7747              		@ frame_needed = 1, uses_anonymous_args = 0
 7748 0000 80B5     		push	{r7, lr}
 7749              	.LCFI226:
 7750              		.cfi_def_cfa_offset 8
 7751              		.cfi_offset 7, -8
 7752              		.cfi_offset 14, -4
 7753 0002 8AB0     		sub	sp, sp, #40
 7754              	.LCFI227:
 7755              		.cfi_def_cfa_offset 48
 7756 0004 02AF     		add	r7, sp, #8
 7757              	.LCFI228:
 7758              		.cfi_def_cfa 7, 40
 7759 0006 F860     		str	r0, [r7, #12]
 7760 0008 B960     		str	r1, [r7, #8]
 7761 000a 7A60     		str	r2, [r7, #4]
 7762 000c 3B60     		str	r3, [r7]
2761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int err;
ARM GAS  /tmp/ccsCUhT2.s 			page 187


2762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 7763              		.loc 1 2762 28
 7764 000e F868     		ldr	r0, [r7, #12]
 7765 0010 FFF7FEFF 		bl	get_socket
 7766 0014 F861     		str	r0, [r7, #28]
2763:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t cberr;
2765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
2766:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
2767:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 7767              		.loc 1 2768 6
 7768 0016 FB69     		ldr	r3, [r7, #28]
 7769 0018 002B     		cmp	r3, #0
 7770 001a 02D1     		bne	.L535
2769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7771              		.loc 1 2769 12
 7772 001c 4FF0FF33 		mov	r3, #-1
 7773 0020 2EE0     		b	.L536
 7774              	.L535:
2770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2771:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if ((NULL == optval) || (NULL == optlen)) {
 7775              		.loc 1 2772 6
 7776 0022 3B68     		ldr	r3, [r7]
 7777 0024 002B     		cmp	r3, #0
 7778 0026 02D0     		beq	.L537
 7779              		.loc 1 2772 24 discriminator 1
 7780 0028 BB6A     		ldr	r3, [r7, #40]
 7781 002a 002B     		cmp	r3, #0
 7782 002c 0AD1     		bne	.L538
 7783              	.L537:
 7784              	.LBB71:
2773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 7785              		.loc 1 2773 5
 7786 002e 0E23     		movs	r3, #14
 7787 0030 3B61     		str	r3, [r7, #16]
 7788 0032 3B69     		ldr	r3, [r7, #16]
 7789 0034 002B     		cmp	r3, #0
 7790 0036 02D0     		beq	.L539
 7791              		.loc 1 2773 5 is_stmt 0 discriminator 1
 7792 0038 134A     		ldr	r2, .L543
 7793 003a 3B69     		ldr	r3, [r7, #16]
 7794 003c 1360     		str	r3, [r2]
 7795              	.L539:
 7796              	.LBE71:
2774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
2775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 7797              		.loc 1 2775 12 is_stmt 1
 7798 003e 4FF0FF33 		mov	r3, #-1
 7799 0042 1DE0     		b	.L536
 7800              	.L538:
2776:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2777:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2778:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
2779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
2780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
ARM GAS  /tmp/ccsCUhT2.s 			page 188


 7801              		.loc 1 2780 3
 7802 0044 1148     		ldr	r0, .L543+4
 7803 0046 FFF7FEFF 		bl	sys_mutex_lock
2781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_getsockopt_impl(s, level, optname, optval, optlen);
 7804              		.loc 1 2781 9
 7805 004a BB6A     		ldr	r3, [r7, #40]
 7806 004c 0093     		str	r3, [sp]
 7807 004e 3B68     		ldr	r3, [r7]
 7808 0050 7A68     		ldr	r2, [r7, #4]
 7809 0052 B968     		ldr	r1, [r7, #8]
 7810 0054 F868     		ldr	r0, [r7, #12]
 7811 0056 FFF7FEFF 		bl	lwip_getsockopt_impl
 7812 005a B861     		str	r0, [r7, #24]
2782:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 7813              		.loc 1 2782 3
 7814 005c 0B48     		ldr	r0, .L543+4
 7815 005e FFF7FEFF 		bl	sys_mutex_unlock
 7816              	.LBB72:
2783:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
2785:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2786:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
2788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (*optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
2789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
2790:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
2791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2793:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2794:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
2796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
2797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
2798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
2799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = *optlen;
2800:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_MPU_COMPATIBLE
2801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.p = optval;
2802:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_MPU_COMPATIBLE */
2803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
2804:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
2805:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
2806:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
2807:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
2808:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2809:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   cberr = tcpip_callback(lwip_getsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
2810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (cberr != ERR_OK) {
2811:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(cberr));
2813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
2814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
2815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t *)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
2817:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* write back optlen and optval */
2819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   *optlen = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen;
2820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(optval, LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval,
ARM GAS  /tmp/ccsCUhT2.s 			page 189


2822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen);
2823:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2824:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
2826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
2827:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
2828:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
2829:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2830:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
 7817              		.loc 1 2830 3
 7818 0062 BB69     		ldr	r3, [r7, #24]
 7819 0064 7B61     		str	r3, [r7, #20]
 7820 0066 7B69     		ldr	r3, [r7, #20]
 7821 0068 002B     		cmp	r3, #0
 7822 006a 02D0     		beq	.L540
 7823              		.loc 1 2830 3 is_stmt 0 discriminator 1
 7824 006c 064A     		ldr	r2, .L543
 7825 006e 7B69     		ldr	r3, [r7, #20]
 7826 0070 1360     		str	r3, [r2]
 7827              	.L540:
 7828              	.LBE72:
2831:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
2832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 7829              		.loc 1 2832 19 is_stmt 1
 7830 0072 BB69     		ldr	r3, [r7, #24]
 7831 0074 002B     		cmp	r3, #0
 7832 0076 02D0     		beq	.L541
 7833              		.loc 1 2832 19 is_stmt 0 discriminator 1
 7834 0078 4FF0FF33 		mov	r3, #-1
 7835 007c 00E0     		b	.L536
 7836              	.L541:
 7837              		.loc 1 2832 19 discriminator 2
 7838 007e 0023     		movs	r3, #0
 7839              	.L536:
2833:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7840              		.loc 1 2833 1 is_stmt 1
 7841 0080 1846     		mov	r0, r3
 7842 0082 2037     		adds	r7, r7, #32
 7843              	.LCFI229:
 7844              		.cfi_def_cfa_offset 8
 7845 0084 BD46     		mov	sp, r7
 7846              	.LCFI230:
 7847              		.cfi_def_cfa_register 13
 7848              		@ sp needed
 7849 0086 80BD     		pop	{r7, pc}
 7850              	.L544:
 7851              		.align	2
 7852              	.L543:
 7853 0088 00000000 		.word	errno
 7854 008c 00000000 		.word	lock_tcpip_core
 7855              		.cfi_endproc
 7856              	.LFE182:
 7858              		.section	.rodata
 7859 0386 0000     		.align	2
 7860              	.LC34:
 7861 0388 556E6B6E 		.ascii	"Unknown socket option\000"
 7861      6F776E20 
ARM GAS  /tmp/ccsCUhT2.s 			page 190


 7861      736F636B 
 7861      6574206F 
 7861      7074696F 
 7862              		.section	.text.lwip_sockopt_to_ipopt,"ax",%progbits
 7863              		.align	1
 7864              		.syntax unified
 7865              		.thumb
 7866              		.thumb_func
 7867              		.fpu fpv4-sp-d16
 7869              	lwip_sockopt_to_ipopt:
 7870              	.LFB183:
2834:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
2836:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_callback: only used without CORE_LOCKING
2837:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
2838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2839:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
2840:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_callback(void *arg)
2841:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
2842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
2843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
2844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data *)arg;
2845:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_getsockopt_impl(data->s, data->level, data->optname,
2847:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
2848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                    data->optval,
2849:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
2850:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                    data->optval.p,
2851:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
2852:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                    &data->optlen);
2853:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2854:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t *)(data->completed_sem));
2855:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
2856:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
2857:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2858:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
2859:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_sockopt_to_ipopt(int optname)
2860:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7871              		.loc 1 2860 1
 7872              		.cfi_startproc
 7873              		@ args = 0, pretend = 0, frame = 8
 7874              		@ frame_needed = 1, uses_anonymous_args = 0
 7875 0000 80B5     		push	{r7, lr}
 7876              	.LCFI231:
 7877              		.cfi_def_cfa_offset 8
 7878              		.cfi_offset 7, -8
 7879              		.cfi_offset 14, -4
 7880 0002 82B0     		sub	sp, sp, #8
 7881              	.LCFI232:
 7882              		.cfi_def_cfa_offset 16
 7883 0004 00AF     		add	r7, sp, #0
 7884              	.LCFI233:
 7885              		.cfi_def_cfa_register 7
 7886 0006 7860     		str	r0, [r7, #4]
2861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* Map SO_* values to our internal SOF_* values
2862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * We should not rely on #defines in socket.h
2863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    * being in sync with ip.h.
ARM GAS  /tmp/ccsCUhT2.s 			page 191


2864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****    */
2865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (optname) {
 7887              		.loc 1 2865 3
 7888 0008 7B68     		ldr	r3, [r7, #4]
 7889 000a 082B     		cmp	r3, #8
 7890 000c 08D0     		beq	.L546
 7891 000e 7B68     		ldr	r3, [r7, #4]
 7892 0010 202B     		cmp	r3, #32
 7893 0012 03D0     		beq	.L547
 7894 0014 7B68     		ldr	r3, [r7, #4]
 7895 0016 042B     		cmp	r3, #4
 7896 0018 04D0     		beq	.L548
 7897 001a 05E0     		b	.L552
 7898              	.L547:
2866:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SO_BROADCAST:
2867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return SOF_BROADCAST;
 7899              		.loc 1 2867 12
 7900 001c 2023     		movs	r3, #32
 7901 001e 0BE0     		b	.L550
 7902              	.L546:
2868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SO_KEEPALIVE:
2869:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return SOF_KEEPALIVE;
 7903              		.loc 1 2869 12
 7904 0020 0823     		movs	r3, #8
 7905 0022 09E0     		b	.L550
 7906              	.L548:
2870:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   case SO_REUSEADDR:
2871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return SOF_REUSEADDR;
 7907              		.loc 1 2871 12
 7908 0024 0423     		movs	r3, #4
 7909 0026 07E0     		b	.L550
 7910              	.L552:
2872:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   default:
2873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_ASSERT("Unknown socket option", 0);
 7911              		.loc 1 2873 5 discriminator 1
 7912 0028 054B     		ldr	r3, .L553
 7913 002a 40F63932 		movw	r2, #2873
 7914 002e 0549     		ldr	r1, .L553+4
 7915 0030 0548     		ldr	r0, .L553+8
 7916 0032 FFF7FEFF 		bl	printf
2874:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return 0;
 7917              		.loc 1 2874 12 discriminator 1
 7918 0036 0023     		movs	r3, #0
 7919              	.L550:
2875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2876:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 7920              		.loc 1 2876 1
 7921 0038 1846     		mov	r0, r3
 7922 003a 0837     		adds	r7, r7, #8
 7923              	.LCFI234:
 7924              		.cfi_def_cfa_offset 8
 7925 003c BD46     		mov	sp, r7
 7926              	.LCFI235:
 7927              		.cfi_def_cfa_register 13
 7928              		@ sp needed
 7929 003e 80BD     		pop	{r7, pc}
 7930              	.L554:
ARM GAS  /tmp/ccsCUhT2.s 			page 192


 7931              		.align	2
 7932              	.L553:
 7933 0040 00000000 		.word	.LC0
 7934 0044 88030000 		.word	.LC34
 7935 0048 50000000 		.word	.LC2
 7936              		.cfi_endproc
 7937              	.LFE183:
 7939              		.section	.text.lwip_getsockopt_impl,"ax",%progbits
 7940              		.align	1
 7941              		.syntax unified
 7942              		.thumb
 7943              		.thumb_func
 7944              		.fpu fpv4-sp-d16
 7946              	lwip_getsockopt_impl:
 7947              	.LFB184:
2877:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2878:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_getsockopt_impl: the actual implementation of getsockopt:
2879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_getsockopt, either called directly or through callback
2880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
2881:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
2882:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_getsockopt_impl(int s, int level, int optname, void *optval, socklen_t *optlen)
2883:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 7948              		.loc 1 2883 1
 7949              		.cfi_startproc
 7950              		@ args = 4, pretend = 0, frame = 24
 7951              		@ frame_needed = 1, uses_anonymous_args = 0
 7952 0000 80B5     		push	{r7, lr}
 7953              	.LCFI236:
 7954              		.cfi_def_cfa_offset 8
 7955              		.cfi_offset 7, -8
 7956              		.cfi_offset 14, -4
 7957 0002 86B0     		sub	sp, sp, #24
 7958              	.LCFI237:
 7959              		.cfi_def_cfa_offset 32
 7960 0004 00AF     		add	r7, sp, #0
 7961              	.LCFI238:
 7962              		.cfi_def_cfa_register 7
 7963 0006 F860     		str	r0, [r7, #12]
 7964 0008 B960     		str	r1, [r7, #8]
 7965 000a 7A60     		str	r2, [r7, #4]
 7966 000c 3B60     		str	r3, [r7]
2884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int err = 0;
 7967              		.loc 1 2884 7
 7968 000e 0023     		movs	r3, #0
 7969 0010 7B61     		str	r3, [r7, #20]
2885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 7970              		.loc 1 2885 28
 7971 0012 F868     		ldr	r0, [r7, #12]
 7972 0014 FFF7FEFF 		bl	tryget_socket
 7973 0018 3861     		str	r0, [r7, #16]
2886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 7974              		.loc 1 2886 6
 7975 001a 3B69     		ldr	r3, [r7, #16]
 7976 001c 002B     		cmp	r3, #0
 7977 001e 01D1     		bne	.L556
2887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
 7978              		.loc 1 2887 12
ARM GAS  /tmp/ccsCUhT2.s 			page 193


 7979 0020 0923     		movs	r3, #9
 7980 0022 7BE1     		b	.L557
 7981              	.L556:
2888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2889:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2890:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifdef LWIP_HOOK_SOCKETS_GETSOCKOPT
2891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (LWIP_HOOK_SOCKETS_GETSOCKOPT(s, sock, level, optname, optval, optlen, &err)) {
2892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return err;
2893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
2894:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
2895:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
 7982              		.loc 1 2896 3
 7983 0024 BB68     		ldr	r3, [r7, #8]
 7984 0026 062B     		cmp	r3, #6
 7985 0028 00F02B81 		beq	.L558
 7986 002c BB68     		ldr	r3, [r7, #8]
 7987 002e 062B     		cmp	r3, #6
 7988 0030 04DC     		bgt	.L559
 7989 0032 BB68     		ldr	r3, [r7, #8]
 7990 0034 002B     		cmp	r3, #0
 7991 0036 00F0E880 		beq	.L560
 7992 003a 6BE1     		b	.L561
 7993              	.L559:
 7994 003c BB68     		ldr	r3, [r7, #8]
 7995 003e FF2B     		cmp	r3, #255
 7996 0040 00F06481 		beq	.L562
 7997 0044 BB68     		ldr	r3, [r7, #8]
 7998 0046 40F6FF72 		movw	r2, #4095
 7999 004a 9342     		cmp	r3, r2
 8000 004c 40F06281 		bne	.L561
 8001 0050 7B68     		ldr	r3, [r7, #4]
 8002 0052 202B     		cmp	r3, #32
 8003 0054 48D0     		beq	.L563
 8004 0056 7B68     		ldr	r3, [r7, #4]
 8005 0058 202B     		cmp	r3, #32
 8006 005a 06DC     		bgt	.L564
 8007 005c 7B68     		ldr	r3, [r7, #4]
 8008 005e 022B     		cmp	r3, #2
 8009 0060 15D0     		beq	.L565
 8010 0062 7B68     		ldr	r3, [r7, #4]
 8011 0064 082B     		cmp	r3, #8
 8012 0066 3FD0     		beq	.L563
 8013 0068 CBE0     		b	.L566
 8014              	.L564:
 8015 006a 7B68     		ldr	r3, [r7, #4]
 8016 006c 41F20802 		movw	r2, #4104
 8017 0070 9342     		cmp	r3, r2
 8018 0072 64D0     		beq	.L567
 8019 0074 7B68     		ldr	r3, [r7, #4]
 8020 0076 41F20A02 		movw	r2, #4106
 8021 007a 9342     		cmp	r3, r2
 8022 007c 00F09E80 		beq	.L568
 8023 0080 7B68     		ldr	r3, [r7, #4]
 8024 0082 41F20702 		movw	r2, #4103
 8025 0086 9342     		cmp	r3, r2
 8026 0088 00F08580 		beq	.L569
ARM GAS  /tmp/ccsCUhT2.s 			page 194


 8027 008c B9E0     		b	.L566
 8028              	.L565:
2897:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: SOL_SOCKET */
2899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SOL_SOCKET:
2900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
2901:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2902:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
2903:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_ACCEPTCONN:
2904:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
 8029              		.loc 1 2904 11
 8030 008e 3B6A     		ldr	r3, [r7, #32]
 8031 0090 1B68     		ldr	r3, [r3]
 8032 0092 032B     		cmp	r3, #3
 8033 0094 01D8     		bhi	.L570
 8034              		.loc 1 2904 11 is_stmt 0 discriminator 1
 8035 0096 1623     		movs	r3, #22
 8036 0098 40E1     		b	.L557
 8037              	.L570:
 8038              		.loc 1 2904 11 discriminator 2
 8039 009a 3B69     		ldr	r3, [r7, #16]
 8040 009c 1B68     		ldr	r3, [r3]
 8041 009e 002B     		cmp	r3, #0
 8042 00a0 04D0     		beq	.L571
 8043              		.loc 1 2904 11 discriminator 4
 8044 00a2 3B69     		ldr	r3, [r7, #16]
 8045 00a4 1B68     		ldr	r3, [r3]
 8046 00a6 5B68     		ldr	r3, [r3, #4]
 8047 00a8 002B     		cmp	r3, #0
 8048 00aa 01D1     		bne	.L572
 8049              	.L571:
 8050              		.loc 1 2904 11 discriminator 5
 8051 00ac 1623     		movs	r3, #22
 8052 00ae 35E1     		b	.L557
 8053              	.L572:
2905:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_TCP) {
 8054              		.loc 1 2905 15 is_stmt 1
 8055 00b0 3B69     		ldr	r3, [r7, #16]
 8056 00b2 1B68     		ldr	r3, [r3]
 8057 00b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8058 00b6 03F0F003 		and	r3, r3, #240
 8059              		.loc 1 2905 14
 8060 00ba 102B     		cmp	r3, #16
 8061 00bc 01D0     		beq	.L573
2906:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
2907:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return ENOPROTOOPT;
 8062              		.loc 1 2907 20
 8063 00be 5C23     		movs	r3, #92
 8064 00c0 2CE1     		b	.L557
 8065              	.L573:
2908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if ((sock->conn->pcb.tcp != NULL) && (sock->conn->pcb.tcp->state == LISTEN)) {
 8066              		.loc 1 2909 20
 8067 00c2 3B69     		ldr	r3, [r7, #16]
 8068 00c4 1B68     		ldr	r3, [r3]
 8069              		.loc 1 2909 31
 8070 00c6 5B68     		ldr	r3, [r3, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 195


 8071              		.loc 1 2909 14
 8072 00c8 002B     		cmp	r3, #0
 8073 00ca 09D0     		beq	.L574
 8074              		.loc 1 2909 53 discriminator 1
 8075 00cc 3B69     		ldr	r3, [r7, #16]
 8076 00ce 1B68     		ldr	r3, [r3]
 8077              		.loc 1 2909 64 discriminator 1
 8078 00d0 5B68     		ldr	r3, [r3, #4]
 8079              		.loc 1 2909 68 discriminator 1
 8080 00d2 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8081              		.loc 1 2909 45 discriminator 1
 8082 00d4 012B     		cmp	r3, #1
 8083 00d6 03D1     		bne	.L574
2910:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *(int *)optval = 1;
 8084              		.loc 1 2910 28
 8085 00d8 3B68     		ldr	r3, [r7]
 8086 00da 0122     		movs	r2, #1
 8087 00dc 1A60     		str	r2, [r3]
2911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *(int *)optval = 0;
2913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2914:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8088              		.loc 1 2914 11
 8089 00de 93E0     		b	.L576
 8090              	.L574:
2912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 8091              		.loc 1 2912 28
 8092 00e0 3B68     		ldr	r3, [r7]
 8093 00e2 0022     		movs	r2, #0
 8094 00e4 1A60     		str	r2, [r3]
 8095              		.loc 1 2914 11
 8096 00e6 8FE0     		b	.L576
 8097              	.L563:
2915:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
2916:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2917:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* The option flags */
2918:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_BROADCAST:
2919:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_KEEPALIVE:
2920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
2921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_REUSEADDR:
2922:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
2923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if ((optname == SO_BROADCAST) &&
 8098              		.loc 1 2923 14
 8099 00e8 7B68     		ldr	r3, [r7, #4]
 8100 00ea 202B     		cmp	r3, #32
 8101 00ec 08D1     		bne	.L577
2924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_UDP)) {
 8102              		.loc 1 2924 16 discriminator 1
 8103 00ee 3B69     		ldr	r3, [r7, #16]
 8104 00f0 1B68     		ldr	r3, [r3]
 8105 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8106 00f4 03F0F003 		and	r3, r3, #240
2923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_UDP)) {
 8107              		.loc 1 2923 41 discriminator 1
 8108 00f8 202B     		cmp	r3, #32
 8109 00fa 01D0     		beq	.L577
2925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
ARM GAS  /tmp/ccsCUhT2.s 			page 196


2926:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return ENOPROTOOPT;
 8110              		.loc 1 2926 20
 8111 00fc 5C23     		movs	r3, #92
 8112 00fe 0DE1     		b	.L557
 8113              	.L577:
2927:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2928:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           optname = lwip_sockopt_to_ipopt(optname);
 8114              		.loc 1 2929 21
 8115 0100 7868     		ldr	r0, [r7, #4]
 8116 0102 FFF7FEFF 		bl	lwip_sockopt_to_ipopt
 8117 0106 7860     		str	r0, [r7, #4]
2930:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
 8118              		.loc 1 2931 11
 8119 0108 3B6A     		ldr	r3, [r7, #32]
 8120 010a 1B68     		ldr	r3, [r3]
 8121 010c 032B     		cmp	r3, #3
 8122 010e 01D8     		bhi	.L578
 8123              		.loc 1 2931 11 is_stmt 0 discriminator 1
 8124 0110 1623     		movs	r3, #22
 8125 0112 03E1     		b	.L557
 8126              	.L578:
 8127              		.loc 1 2931 11 discriminator 2
 8128 0114 3B69     		ldr	r3, [r7, #16]
 8129 0116 1B68     		ldr	r3, [r3]
 8130 0118 002B     		cmp	r3, #0
 8131 011a 04D0     		beq	.L579
 8132              		.loc 1 2931 11 discriminator 4
 8133 011c 3B69     		ldr	r3, [r7, #16]
 8134 011e 1B68     		ldr	r3, [r3]
 8135 0120 5B68     		ldr	r3, [r3, #4]
 8136 0122 002B     		cmp	r3, #0
 8137 0124 01D1     		bne	.L580
 8138              	.L579:
 8139              		.loc 1 2931 11 discriminator 5
 8140 0126 1623     		movs	r3, #22
 8141 0128 F8E0     		b	.L557
 8142              	.L580:
2932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = ip_get_option(sock->conn->pcb.ip, optname);
 8143              		.loc 1 2932 28 is_stmt 1
 8144 012a 3B69     		ldr	r3, [r7, #16]
 8145 012c 1B68     		ldr	r3, [r3]
 8146 012e 5B68     		ldr	r3, [r3, #4]
 8147 0130 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 8148 0132 1A46     		mov	r2, r3
 8149 0134 7B68     		ldr	r3, [r7, #4]
 8150 0136 1A40     		ands	r2, r2, r3
 8151              		.loc 1 2932 26
 8152 0138 3B68     		ldr	r3, [r7]
 8153 013a 1A60     		str	r2, [r3]
2933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, optname=0x%x, ..) = %s\n",
2934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname, (*(int *)optval ? "on" : "off")));
2935:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8154              		.loc 1 2935 11
 8155 013c 64E0     		b	.L576
 8156              	.L567:
ARM GAS  /tmp/ccsCUhT2.s 			page 197


2936:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_TYPE:
2938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
 8157              		.loc 1 2938 11
 8158 013e 3B6A     		ldr	r3, [r7, #32]
 8159 0140 1B68     		ldr	r3, [r3]
 8160 0142 032B     		cmp	r3, #3
 8161 0144 01D8     		bhi	.L581
 8162              		.loc 1 2938 11 is_stmt 0 discriminator 1
 8163 0146 1623     		movs	r3, #22
 8164 0148 E8E0     		b	.L557
 8165              	.L581:
 8166              		.loc 1 2938 11 discriminator 2
 8167 014a 3B69     		ldr	r3, [r7, #16]
 8168 014c 1B68     		ldr	r3, [r3]
 8169 014e 002B     		cmp	r3, #0
 8170 0150 01D1     		bne	.L582
 8171              		.loc 1 2938 11 discriminator 3
 8172 0152 1623     		movs	r3, #22
 8173 0154 E2E0     		b	.L557
 8174              	.L582:
2939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 8175              		.loc 1 2939 19 is_stmt 1
 8176 0156 3B69     		ldr	r3, [r7, #16]
 8177 0158 1B68     		ldr	r3, [r3]
 8178 015a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8179 015c 03F0F003 		and	r3, r3, #240
 8180 0160 202B     		cmp	r3, #32
 8181 0162 0CD0     		beq	.L583
 8182 0164 402B     		cmp	r3, #64
 8183 0166 02D0     		beq	.L584
 8184 0168 102B     		cmp	r3, #16
 8185 016a 04D0     		beq	.L585
 8186 016c 0BE0     		b	.L612
 8187              	.L584:
2940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             case NETCONN_RAW:
2941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               *(int *)optval = SOCK_RAW;
 8188              		.loc 1 2941 30
 8189 016e 3B68     		ldr	r3, [r7]
 8190 0170 0322     		movs	r2, #3
 8191 0172 1A60     		str	r2, [r3]
2942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 8192              		.loc 1 2942 15
 8193 0174 0EE0     		b	.L587
 8194              	.L585:
2943:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             case NETCONN_TCP:
2944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               *(int *)optval = SOCK_STREAM;
 8195              		.loc 1 2944 30
 8196 0176 3B68     		ldr	r3, [r7]
 8197 0178 0122     		movs	r2, #1
 8198 017a 1A60     		str	r2, [r3]
2945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 8199              		.loc 1 2945 15
 8200 017c 0AE0     		b	.L587
 8201              	.L583:
2946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             case NETCONN_UDP:
2947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               *(int *)optval = SOCK_DGRAM;
ARM GAS  /tmp/ccsCUhT2.s 			page 198


 8202              		.loc 1 2947 30
 8203 017e 3B68     		ldr	r3, [r7]
 8204 0180 0222     		movs	r2, #2
 8205 0182 1A60     		str	r2, [r3]
2948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 8206              		.loc 1 2948 15
 8207 0184 06E0     		b	.L587
 8208              	.L612:
2949:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             default: /* unrecognized socket type */
2950:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               *(int *)optval = netconn_type(sock->conn);
 8209              		.loc 1 2950 32
 8210 0186 3B69     		ldr	r3, [r7, #16]
 8211 0188 1B68     		ldr	r3, [r3]
 8212 018a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8213 018c 1A46     		mov	r2, r3
 8214              		.loc 1 2950 30
 8215 018e 3B68     		ldr	r3, [r7]
 8216 0190 1A60     		str	r2, [r3]
2951:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               LWIP_DEBUGF(SOCKETS_DEBUG,
2952:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                           ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE): unrecognized socket type %d\n
2953:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                            s, *(int *)optval));
2954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }  /* switch (netconn_type(sock->conn)) */
2955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_TYPE) = %d\n",
2956:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
2957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8217              		.loc 1 2957 11
 8218 0192 39E0     		b	.L576
 8219              	.L587:
 8220 0194 38E0     		b	.L576
 8221              	.L569:
2958:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_ERROR:
2960:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN(sock, *optlen, int);
 8222              		.loc 1 2960 11
 8223 0196 3B6A     		ldr	r3, [r7, #32]
 8224 0198 1B68     		ldr	r3, [r3]
 8225 019a 032B     		cmp	r3, #3
 8226 019c 01D8     		bhi	.L588
 8227              		.loc 1 2960 11 is_stmt 0 discriminator 1
 8228 019e 1623     		movs	r3, #22
 8229 01a0 BCE0     		b	.L557
 8230              	.L588:
2961:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = err_to_errno(netconn_err(sock->conn));
 8231              		.loc 1 2961 28 is_stmt 1
 8232 01a2 3B69     		ldr	r3, [r7, #16]
 8233 01a4 1B68     		ldr	r3, [r3]
 8234 01a6 1846     		mov	r0, r3
 8235 01a8 FFF7FEFF 		bl	netconn_err
 8236 01ac 0346     		mov	r3, r0
 8237 01ae 1846     		mov	r0, r3
 8238 01b0 FFF7FEFF 		bl	err_to_errno
 8239 01b4 0246     		mov	r2, r0
 8240              		.loc 1 2961 26
 8241 01b6 3B68     		ldr	r3, [r7]
 8242 01b8 1A60     		str	r2, [r3]
2962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, SO_ERROR) = %d\n",
2963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
ARM GAS  /tmp/ccsCUhT2.s 			page 199


2964:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8243              		.loc 1 2964 11
 8244 01ba 25E0     		b	.L576
 8245              	.L568:
2965:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
2966:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
2967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_SNDTIMEO:
2968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_sendtimeout(sock->conn));
2970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
2971:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
2972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
2973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_RCVTIMEO:
2974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
2975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SO_SNDRCVTIMEO_SET(optval, netconn_get_recvtimeout(sock->conn));
2976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
2977:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
2978:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
2979:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_RCVBUF:
2980:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
2981:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = netconn_get_recvbufsize(sock->conn);
2982:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
2983:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
2984:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
2985:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_LINGER: {
2986:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           s16_t conn_linger;
2987:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct linger *linger = (struct linger *)optval;
2988:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, struct linger);
2989:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           conn_linger = sock->conn->linger;
2990:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (conn_linger >= 0) {
2991:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             linger->l_onoff = 1;
2992:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             linger->l_linger = (int)conn_linger;
2993:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
2994:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             linger->l_onoff = 0;
2995:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             linger->l_linger = 0;
2996:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
2997:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
2998:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
2999:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
3000:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
3001:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_NO_CHECK:
3002:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_UDP);
 8246              		.loc 1 3002 11
 8247 01bc 3B6A     		ldr	r3, [r7, #32]
 8248 01be 1B68     		ldr	r3, [r3]
 8249 01c0 032B     		cmp	r3, #3
 8250 01c2 01D8     		bhi	.L589
 8251              		.loc 1 3002 11 is_stmt 0 discriminator 1
 8252 01c4 1623     		movs	r3, #22
 8253 01c6 A9E0     		b	.L557
 8254              	.L589:
 8255              		.loc 1 3002 11 discriminator 2
 8256 01c8 3B69     		ldr	r3, [r7, #16]
 8257 01ca 1B68     		ldr	r3, [r3]
 8258 01cc 002B     		cmp	r3, #0
 8259 01ce 04D0     		beq	.L590
 8260              		.loc 1 3002 11 discriminator 4
ARM GAS  /tmp/ccsCUhT2.s 			page 200


 8261 01d0 3B69     		ldr	r3, [r7, #16]
 8262 01d2 1B68     		ldr	r3, [r3]
 8263 01d4 5B68     		ldr	r3, [r3, #4]
 8264 01d6 002B     		cmp	r3, #0
 8265 01d8 01D1     		bne	.L591
 8266              	.L590:
 8267              		.loc 1 3002 11 discriminator 5
 8268 01da 1623     		movs	r3, #22
 8269 01dc 9EE0     		b	.L557
 8270              	.L591:
 8271              		.loc 1 3002 11 discriminator 6
 8272 01de 3B69     		ldr	r3, [r7, #16]
 8273 01e0 1B68     		ldr	r3, [r3]
 8274 01e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8275 01e4 03F0F003 		and	r3, r3, #240
 8276 01e8 202B     		cmp	r3, #32
 8277 01ea 01D0     		beq	.L592
 8278              		.loc 1 3002 11 discriminator 7
 8279 01ec 5C23     		movs	r3, #92
 8280 01ee 95E0     		b	.L557
 8281              	.L592:
3003:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
3004:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (udp_is_flag_set(sock->conn->pcb.udp, UDP_FLAGS_UDPLITE)) {
3005:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* this flag is only available for UDP, not for UDP lite */
3006:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3007:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EAFNOSUPPORT;
3008:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3009:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
3010:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = udp_is_flag_set(sock->conn->pcb.udp, UDP_FLAGS_NOCHKSUM) ? 1 : 0;
 8282              		.loc 1 3010 28 is_stmt 1
 8283 01f0 3B69     		ldr	r3, [r7, #16]
 8284 01f2 1B68     		ldr	r3, [r3]
 8285 01f4 5B68     		ldr	r3, [r3, #4]
 8286 01f6 1B7C     		ldrb	r3, [r3, #16]	@ zero_extendqisi2
 8287              		.loc 1 3010 89
 8288 01f8 03F00102 		and	r2, r3, #1
 8289              		.loc 1 3010 26
 8290 01fc 3B68     		ldr	r3, [r7]
 8291 01fe 1A60     		str	r2, [r3]
3011:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8292              		.loc 1 3011 11
 8293 0200 02E0     		b	.L576
 8294              	.L566:
3012:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP*/
3013:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3014:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n"
3015:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3016:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 8295              		.loc 1 3016 15
 8296 0202 5C23     		movs	r3, #92
 8297 0204 7B61     		str	r3, [r7, #20]
3017:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8298              		.loc 1 3017 11
 8299 0206 00BF     		nop
 8300              	.L576:
3018:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3019:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
ARM GAS  /tmp/ccsCUhT2.s 			page 201


 8301              		.loc 1 3019 7
 8302 0208 87E0     		b	.L593
 8303              	.L560:
 8304 020a 7B68     		ldr	r3, [r7, #4]
 8305 020c 012B     		cmp	r3, #1
 8306 020e 1BD0     		beq	.L594
 8307 0210 7B68     		ldr	r3, [r7, #4]
 8308 0212 022B     		cmp	r3, #2
 8309 0214 31D1     		bne	.L595
3020:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3021:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_IP */
3022:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_IP:
3023:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3024:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_TTL:
3025:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
 8310              		.loc 1 3025 11
 8311 0216 3B6A     		ldr	r3, [r7, #32]
 8312 0218 1B68     		ldr	r3, [r3]
 8313 021a 032B     		cmp	r3, #3
 8314 021c 01D8     		bhi	.L596
 8315              		.loc 1 3025 11 is_stmt 0 discriminator 1
 8316 021e 1623     		movs	r3, #22
 8317 0220 7CE0     		b	.L557
 8318              	.L596:
 8319              		.loc 1 3025 11 discriminator 2
 8320 0222 3B69     		ldr	r3, [r7, #16]
 8321 0224 1B68     		ldr	r3, [r3]
 8322 0226 002B     		cmp	r3, #0
 8323 0228 04D0     		beq	.L597
 8324              		.loc 1 3025 11 discriminator 4
 8325 022a 3B69     		ldr	r3, [r7, #16]
 8326 022c 1B68     		ldr	r3, [r3]
 8327 022e 5B68     		ldr	r3, [r3, #4]
 8328 0230 002B     		cmp	r3, #0
 8329 0232 01D1     		bne	.L598
 8330              	.L597:
 8331              		.loc 1 3025 11 discriminator 5
 8332 0234 1623     		movs	r3, #22
 8333 0236 71E0     		b	.L557
 8334              	.L598:
3026:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = sock->conn->pcb.ip->ttl;
 8335              		.loc 1 3026 32 is_stmt 1
 8336 0238 3B69     		ldr	r3, [r7, #16]
 8337 023a 1B68     		ldr	r3, [r3]
 8338              		.loc 1 3026 43
 8339 023c 5B68     		ldr	r3, [r3, #4]
 8340              		.loc 1 3026 46
 8341 023e DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 8342 0240 1A46     		mov	r2, r3
 8343              		.loc 1 3026 26
 8344 0242 3B68     		ldr	r3, [r7]
 8345 0244 1A60     		str	r2, [r3]
3027:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TTL) = %d\n",
3028:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3029:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8346              		.loc 1 3029 11
 8347 0246 1BE0     		b	.L599
ARM GAS  /tmp/ccsCUhT2.s 			page 202


 8348              	.L594:
3030:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_TOS:
3031:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
 8349              		.loc 1 3031 11
 8350 0248 3B6A     		ldr	r3, [r7, #32]
 8351 024a 1B68     		ldr	r3, [r3]
 8352 024c 032B     		cmp	r3, #3
 8353 024e 01D8     		bhi	.L600
 8354              		.loc 1 3031 11 is_stmt 0 discriminator 1
 8355 0250 1623     		movs	r3, #22
 8356 0252 63E0     		b	.L557
 8357              	.L600:
 8358              		.loc 1 3031 11 discriminator 2
 8359 0254 3B69     		ldr	r3, [r7, #16]
 8360 0256 1B68     		ldr	r3, [r3]
 8361 0258 002B     		cmp	r3, #0
 8362 025a 04D0     		beq	.L601
 8363              		.loc 1 3031 11 discriminator 4
 8364 025c 3B69     		ldr	r3, [r7, #16]
 8365 025e 1B68     		ldr	r3, [r3]
 8366 0260 5B68     		ldr	r3, [r3, #4]
 8367 0262 002B     		cmp	r3, #0
 8368 0264 01D1     		bne	.L602
 8369              	.L601:
 8370              		.loc 1 3031 11 discriminator 5
 8371 0266 1623     		movs	r3, #22
 8372 0268 58E0     		b	.L557
 8373              	.L602:
3032:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = sock->conn->pcb.ip->tos;
 8374              		.loc 1 3032 32 is_stmt 1
 8375 026a 3B69     		ldr	r3, [r7, #16]
 8376 026c 1B68     		ldr	r3, [r3]
 8377              		.loc 1 3032 43
 8378 026e 5B68     		ldr	r3, [r3, #4]
 8379              		.loc 1 3032 46
 8380 0270 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 8381 0272 1A46     		mov	r2, r3
 8382              		.loc 1 3032 26
 8383 0274 3B68     		ldr	r3, [r7]
 8384 0276 1A60     		str	r2, [r3]
3033:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_TOS) = %d\n",
3034:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3035:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8385              		.loc 1 3035 11
 8386 0278 02E0     		b	.L599
 8387              	.L595:
3036:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_MULTICAST_TX_OPTIONS && LWIP_UDP
3037:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_MULTICAST_TTL:
3038:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
3039:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
3040:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3041:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return ENOPROTOOPT;
3042:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3043:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(u8_t *)optval = udp_get_multicast_ttl(sock->conn->pcb.udp);
3044:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_TTL) = %d\n",
3045:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3046:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
ARM GAS  /tmp/ccsCUhT2.s 			page 203


3047:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_MULTICAST_IF:
3048:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, struct in_addr);
3049:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_UDP) {
3050:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3051:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return ENOPROTOOPT;
3052:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3053:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           inet_addr_from_ip4addr((struct in_addr *)optval, udp_get_multicast_netif_addr(sock->conn-
3054:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_IF) = 0x%"X32_F
3055:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(u32_t *)optval));
3056:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3057:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_MULTICAST_LOOP:
3058:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, u8_t);
3059:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if ((sock->conn->pcb.udp->flags & UDP_FLAGS_MULTICAST_LOOP) != 0) {
3060:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *(u8_t *)optval = 1;
3061:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3062:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *(u8_t *)optval = 0;
3063:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3064:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, IP_MULTICAST_LOOP) = %d\n",
3065:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3066:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3067:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_MULTICAST_TX_OPTIONS && LWIP_UDP */
3068:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3069:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n"
3070:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3071:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 8388              		.loc 1 3071 15
 8389 027a 5C23     		movs	r3, #92
 8390 027c 7B61     		str	r3, [r7, #20]
3072:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8391              		.loc 1 3072 11
 8392 027e 00BF     		nop
 8393              	.L599:
3073:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3074:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 8394              		.loc 1 3074 7
 8395 0280 4BE0     		b	.L593
 8396              	.L558:
3075:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3076:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
3077:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_TCP */
3078:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_TCP:
3079:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Special case: all IPPROTO_TCP option take an int */
3080:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_TCP);
 8397              		.loc 1 3080 7
 8398 0282 3B6A     		ldr	r3, [r7, #32]
 8399 0284 1B68     		ldr	r3, [r3]
 8400 0286 032B     		cmp	r3, #3
 8401 0288 01D8     		bhi	.L603
 8402              		.loc 1 3080 7 is_stmt 0 discriminator 1
 8403 028a 1623     		movs	r3, #22
 8404 028c 46E0     		b	.L557
 8405              	.L603:
 8406              		.loc 1 3080 7 discriminator 2
 8407 028e 3B69     		ldr	r3, [r7, #16]
 8408 0290 1B68     		ldr	r3, [r3]
 8409 0292 002B     		cmp	r3, #0
 8410 0294 04D0     		beq	.L604
ARM GAS  /tmp/ccsCUhT2.s 			page 204


 8411              		.loc 1 3080 7 discriminator 4
 8412 0296 3B69     		ldr	r3, [r7, #16]
 8413 0298 1B68     		ldr	r3, [r3]
 8414 029a 5B68     		ldr	r3, [r3, #4]
 8415 029c 002B     		cmp	r3, #0
 8416 029e 01D1     		bne	.L605
 8417              	.L604:
 8418              		.loc 1 3080 7 discriminator 5
 8419 02a0 1623     		movs	r3, #22
 8420 02a2 3BE0     		b	.L557
 8421              	.L605:
 8422              		.loc 1 3080 7 discriminator 6
 8423 02a4 3B69     		ldr	r3, [r7, #16]
 8424 02a6 1B68     		ldr	r3, [r3]
 8425 02a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8426 02aa 03F0F003 		and	r3, r3, #240
 8427 02ae 102B     		cmp	r3, #16
 8428 02b0 01D0     		beq	.L606
 8429              		.loc 1 3080 7 discriminator 7
 8430 02b2 5C23     		movs	r3, #92
 8431 02b4 32E0     		b	.L557
 8432              	.L606:
3081:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->conn->pcb.tcp->state == LISTEN) {
 8433              		.loc 1 3081 15 is_stmt 1
 8434 02b6 3B69     		ldr	r3, [r7, #16]
 8435 02b8 1B68     		ldr	r3, [r3]
 8436              		.loc 1 3081 26
 8437 02ba 5B68     		ldr	r3, [r3, #4]
 8438              		.loc 1 3081 30
 8439 02bc 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8440              		.loc 1 3081 10
 8441 02be 012B     		cmp	r3, #1
 8442 02c0 01D1     		bne	.L607
3082:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
3083:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
 8443              		.loc 1 3083 16
 8444 02c2 1623     		movs	r3, #22
 8445 02c4 2AE0     		b	.L557
 8446              	.L607:
 8447 02c6 7B68     		ldr	r3, [r7, #4]
 8448 02c8 012B     		cmp	r3, #1
 8449 02ca 03D0     		beq	.L608
 8450 02cc 7B68     		ldr	r3, [r7, #4]
 8451 02ce 022B     		cmp	r3, #2
 8452 02d0 0FD0     		beq	.L609
 8453 02d2 17E0     		b	.L613
 8454              	.L608:
3084:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3085:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3086:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_NODELAY:
3087:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = tcp_nagle_disabled(sock->conn->pcb.tcp);
 8455              		.loc 1 3087 28
 8456 02d4 3B69     		ldr	r3, [r7, #16]
 8457 02d6 1B68     		ldr	r3, [r3]
 8458 02d8 5B68     		ldr	r3, [r3, #4]
 8459 02da 5B8B     		ldrh	r3, [r3, #26]
 8460 02dc 03F04003 		and	r3, r3, #64
ARM GAS  /tmp/ccsCUhT2.s 			page 205


 8461 02e0 002B     		cmp	r3, #0
 8462 02e2 14BF     		ite	ne
 8463 02e4 0123     		movne	r3, #1
 8464 02e6 0023     		moveq	r3, #0
 8465 02e8 DBB2     		uxtb	r3, r3
 8466 02ea 1A46     		mov	r2, r3
 8467              		.loc 1 3087 26
 8468 02ec 3B68     		ldr	r3, [r7]
 8469 02ee 1A60     		str	r2, [r3]
3088:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_NODELAY) = %s\n",
3089:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(int *)optval) ? "on" : "off") );
3090:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8470              		.loc 1 3090 11
 8471 02f0 0BE0     		b	.L611
 8472              	.L609:
3091:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPALIVE:
3092:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = (int)sock->conn->pcb.tcp->keep_idle;
 8473              		.loc 1 3092 37
 8474 02f2 3B69     		ldr	r3, [r7, #16]
 8475 02f4 1B68     		ldr	r3, [r3]
 8476              		.loc 1 3092 48
 8477 02f6 5B68     		ldr	r3, [r3, #4]
 8478              		.loc 1 3092 52
 8479 02f8 D3F89430 		ldr	r3, [r3, #148]
 8480              		.loc 1 3092 28
 8481 02fc 1A46     		mov	r2, r3
 8482              		.loc 1 3092 26
 8483 02fe 3B68     		ldr	r3, [r7]
 8484 0300 1A60     		str	r2, [r3]
3093:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) = %d\n",
3094:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3095:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8485              		.loc 1 3095 11
 8486 0302 02E0     		b	.L611
 8487              	.L613:
3096:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3097:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
3098:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPIDLE:
3099:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = (int)(sock->conn->pcb.tcp->keep_idle / 1000);
3100:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) = %d\n",
3101:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3102:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3103:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPINTVL:
3104:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = (int)(sock->conn->pcb.tcp->keep_intvl / 1000);
3105:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) = %d\n",
3106:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3107:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3108:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPCNT:
3109:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = (int)sock->conn->pcb.tcp->keep_cnt;
3110:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) = %d\n",
3111:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3112:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3113:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
3114:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3115:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n
3116:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3117:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
ARM GAS  /tmp/ccsCUhT2.s 			page 206


 8488              		.loc 1 3117 15
 8489 0304 5C23     		movs	r3, #92
 8490 0306 7B61     		str	r3, [r7, #20]
3118:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8491              		.loc 1 3118 11
 8492 0308 00BF     		nop
 8493              	.L611:
3119:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3120:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 8494              		.loc 1 3120 7
 8495 030a 06E0     		b	.L593
 8496              	.L562:
3121:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP */
3122:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3123:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
3124:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_IPV6 */
3125:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_IPV6:
3126:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3127:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IPV6_V6ONLY:
3128:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, *optlen, int);
3129:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = (netconn_get_ipv6only(sock->conn) ? 1 : 0);
3130:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY) = %d\n",
3131:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, *(int *)optval));
3132:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3133:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3134:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\
3135:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3136:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
3137:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3138:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3139:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
3140:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
3141:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3142:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
3143:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_UDPLITE */
3144:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_UDPLITE:
3145:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Special case: all IPPROTO_UDPLITE option take an int */
3146:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, *optlen, int);
3147:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is no UDP lite socket, ignore any options. */
3148:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
3149:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
3150:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
3151:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3152:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3153:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case UDPLITE_SEND_CSCOV:
3154:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = sock->conn->pcb.udp->chksum_len_tx;
3155:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) = %
3156:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(int *)optval)) );
3157:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3158:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case UDPLITE_RECV_CSCOV:
3159:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *(int *)optval = sock->conn->pcb.udp->chksum_len_rx;
3160:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) = %
3161:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(int *)optval)) );
3162:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3163:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3164:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, .
3165:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
ARM GAS  /tmp/ccsCUhT2.s 			page 207


3166:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
3167:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3168:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3169:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
3170:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
3171:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_RAW */
3172:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_RAW:
3173:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3174:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
3175:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IPV6_CHECKSUM:
3176:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, *optlen, int, NETCONN_RAW);
3177:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->conn->pcb.raw->chksum_reqd == 0) {
3178:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *(int *)optval = -1;
3179:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3180:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *(int *)optval = sock->conn->pcb.raw->chksum_offset;
3181:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3182:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM) = %d\n",
3183:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(int *)optval)) );
3184:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3185:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
3186:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3187:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n
3188:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3189:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 8497              		.loc 1 3189 15
 8498 030c 5C23     		movs	r3, #92
 8499 030e 7B61     		str	r3, [r7, #20]
3190:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8500              		.loc 1 3190 11
 8501 0310 00BF     		nop
3191:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3192:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 8502              		.loc 1 3192 7
 8503 0312 02E0     		b	.L593
 8504              	.L561:
3193:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
3194:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_getsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
3195:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, level, optname));
3196:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
 8505              		.loc 1 3196 11
 8506 0314 5C23     		movs	r3, #92
 8507 0316 7B61     		str	r3, [r7, #20]
3197:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 8508              		.loc 1 3197 7
 8509 0318 00BF     		nop
 8510              	.L593:
3198:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (level) */
3199:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3200:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
3201:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
 8511              		.loc 1 3201 10
 8512 031a 7B69     		ldr	r3, [r7, #20]
 8513              	.L557:
3202:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 8514              		.loc 1 3202 1
 8515 031c 1846     		mov	r0, r3
 8516 031e 1837     		adds	r7, r7, #24
ARM GAS  /tmp/ccsCUhT2.s 			page 208


 8517              	.LCFI239:
 8518              		.cfi_def_cfa_offset 8
 8519 0320 BD46     		mov	sp, r7
 8520              	.LCFI240:
 8521              		.cfi_def_cfa_register 13
 8522              		@ sp needed
 8523 0322 80BD     		pop	{r7, pc}
 8524              		.cfi_endproc
 8525              	.LFE184:
 8527              		.section	.text.lwip_setsockopt,"ax",%progbits
 8528              		.align	1
 8529              		.global	lwip_setsockopt
 8530              		.syntax unified
 8531              		.thumb
 8532              		.thumb_func
 8533              		.fpu fpv4-sp-d16
 8535              	lwip_setsockopt:
 8536              	.LFB185:
3203:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3204:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
3205:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt(int s, int level, int optname, const void *optval, socklen_t optlen)
3206:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 8537              		.loc 1 3206 1
 8538              		.cfi_startproc
 8539              		@ args = 4, pretend = 0, frame = 32
 8540              		@ frame_needed = 1, uses_anonymous_args = 0
 8541 0000 80B5     		push	{r7, lr}
 8542              	.LCFI241:
 8543              		.cfi_def_cfa_offset 8
 8544              		.cfi_offset 7, -8
 8545              		.cfi_offset 14, -4
 8546 0002 8AB0     		sub	sp, sp, #40
 8547              	.LCFI242:
 8548              		.cfi_def_cfa_offset 48
 8549 0004 02AF     		add	r7, sp, #8
 8550              	.LCFI243:
 8551              		.cfi_def_cfa 7, 40
 8552 0006 F860     		str	r0, [r7, #12]
 8553 0008 B960     		str	r1, [r7, #8]
 8554 000a 7A60     		str	r2, [r7, #4]
 8555 000c 3B60     		str	r3, [r7]
3207:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int err = 0;
 8556              		.loc 1 3207 7
 8557 000e 0023     		movs	r3, #0
 8558 0010 FB61     		str	r3, [r7, #28]
3208:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 8559              		.loc 1 3208 28
 8560 0012 F868     		ldr	r0, [r7, #12]
 8561 0014 FFF7FEFF 		bl	get_socket
 8562 0018 B861     		str	r0, [r7, #24]
3209:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
3210:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err_t cberr;
3211:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_DECLARE(data);
3212:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
3213:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3214:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 8563              		.loc 1 3214 6
ARM GAS  /tmp/ccsCUhT2.s 			page 209


 8564 001a BB69     		ldr	r3, [r7, #24]
 8565 001c 002B     		cmp	r3, #0
 8566 001e 02D1     		bne	.L615
3215:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 8567              		.loc 1 3215 12
 8568 0020 4FF0FF33 		mov	r3, #-1
 8569 0024 2BE0     		b	.L616
 8570              	.L615:
3216:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3217:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3218:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (NULL == optval) {
 8571              		.loc 1 3218 6
 8572 0026 3B68     		ldr	r3, [r7]
 8573 0028 002B     		cmp	r3, #0
 8574 002a 0AD1     		bne	.L617
 8575              	.LBB73:
3219:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, EFAULT);
 8576              		.loc 1 3219 5
 8577 002c 0E23     		movs	r3, #14
 8578 002e 7B61     		str	r3, [r7, #20]
 8579 0030 7B69     		ldr	r3, [r7, #20]
 8580 0032 002B     		cmp	r3, #0
 8581 0034 02D0     		beq	.L618
 8582              		.loc 1 3219 5 is_stmt 0 discriminator 1
 8583 0036 144A     		ldr	r2, .L622
 8584 0038 7B69     		ldr	r3, [r7, #20]
 8585 003a 1360     		str	r3, [r2]
 8586              	.L618:
 8587              	.LBE73:
3220:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
3221:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 8588              		.loc 1 3221 12 is_stmt 1
 8589 003c 4FF0FF33 		mov	r3, #-1
 8590 0040 1DE0     		b	.L616
 8591              	.L617:
3222:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3223:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3224:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
3225:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* core-locking can just call the -impl function */
3226:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LOCK_TCPIP_CORE();
 8592              		.loc 1 3226 3
 8593 0042 1248     		ldr	r0, .L622+4
 8594 0044 FFF7FEFF 		bl	sys_mutex_lock
3227:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = lwip_setsockopt_impl(s, level, optname, optval, optlen);
 8595              		.loc 1 3227 9
 8596 0048 BB6A     		ldr	r3, [r7, #40]
 8597 004a 0093     		str	r3, [sp]
 8598 004c 3B68     		ldr	r3, [r7]
 8599 004e 7A68     		ldr	r2, [r7, #4]
 8600 0050 B968     		ldr	r1, [r7, #8]
 8601 0052 F868     		ldr	r0, [r7, #12]
 8602 0054 FFF7FEFF 		bl	lwip_setsockopt_impl
 8603 0058 F861     		str	r0, [r7, #28]
3228:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   UNLOCK_TCPIP_CORE();
 8604              		.loc 1 3228 3
 8605 005a 0C48     		ldr	r0, .L622+4
 8606 005c FFF7FEFF 		bl	sys_mutex_unlock
ARM GAS  /tmp/ccsCUhT2.s 			page 210


 8607              	.LBB74:
3229:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3230:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
3231:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3232:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
3233:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* MPU_COMPATIBLE copies the optval data, so check for max size here */
3234:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (optlen > LWIP_SETGETSOCKOPT_MAXOPTLEN) {
3235:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, ENOBUFS);
3236:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
3237:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
3238:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3239:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
3240:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3241:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_ALLOC(data, sock);
3242:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).s = s;
3243:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).level = level;
3244:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optname = optname;
3245:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optlen = optlen;
3246:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
3247:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   MEMCPY(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval, optval, optlen);
3248:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
3249:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).optval.pc = (const void *)optval;
3250:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
3251:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err = 0;
3252:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETCONN_SEM_PER_THREAD
3253:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = LWIP_NETCONN_THREAD_SEM_GET();
3254:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
3255:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem = &sock->conn->op_completed;
3256:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3257:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   cberr = tcpip_callback(lwip_setsockopt_callback, &LWIP_SETGETSOCKOPT_DATA_VAR_REF(data));
3258:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (cberr != ERR_OK) {
3259:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
3260:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     sock_set_errno(sock, err_to_errno(cberr));
3261:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     done_socket(sock);
3262:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
3263:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3264:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_arch_sem_wait((sys_sem_t *)(LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).completed_sem), 0);
3265:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3266:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   /* maybe lwip_getsockopt_internal has changed err */
3267:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   err = LWIP_SETGETSOCKOPT_DATA_VAR_REF(data).err;
3268:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_SETGETSOCKOPT_DATA_VAR_FREE(data);
3269:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
3270:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3271:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, err);
 8608              		.loc 1 3271 3
 8609 0060 FB69     		ldr	r3, [r7, #28]
 8610 0062 3B61     		str	r3, [r7, #16]
 8611 0064 3B69     		ldr	r3, [r7, #16]
 8612 0066 002B     		cmp	r3, #0
 8613 0068 02D0     		beq	.L619
 8614              		.loc 1 3271 3 is_stmt 0 discriminator 1
 8615 006a 074A     		ldr	r2, .L622
 8616 006c 3B69     		ldr	r3, [r7, #16]
 8617 006e 1360     		str	r3, [r2]
 8618              	.L619:
 8619              	.LBE74:
3272:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
ARM GAS  /tmp/ccsCUhT2.s 			page 211


3273:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err ? -1 : 0;
 8620              		.loc 1 3273 19 is_stmt 1
 8621 0070 FB69     		ldr	r3, [r7, #28]
 8622 0072 002B     		cmp	r3, #0
 8623 0074 02D0     		beq	.L620
 8624              		.loc 1 3273 19 is_stmt 0 discriminator 1
 8625 0076 4FF0FF33 		mov	r3, #-1
 8626 007a 00E0     		b	.L616
 8627              	.L620:
 8628              		.loc 1 3273 19 discriminator 2
 8629 007c 0023     		movs	r3, #0
 8630              	.L616:
3274:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 8631              		.loc 1 3274 1 is_stmt 1
 8632 007e 1846     		mov	r0, r3
 8633 0080 2037     		adds	r7, r7, #32
 8634              	.LCFI244:
 8635              		.cfi_def_cfa_offset 8
 8636 0082 BD46     		mov	sp, r7
 8637              	.LCFI245:
 8638              		.cfi_def_cfa_register 13
 8639              		@ sp needed
 8640 0084 80BD     		pop	{r7, pc}
 8641              	.L623:
 8642 0086 00BF     		.align	2
 8643              	.L622:
 8644 0088 00000000 		.word	errno
 8645 008c 00000000 		.word	lock_tcpip_core
 8646              		.cfi_endproc
 8647              	.LFE185:
 8649              		.section	.rodata
 8650 039e 0000     		.align	2
 8651              	.LC35:
 8652 03a0 556E6861 		.ascii	"Unhandled netconn type in SO_BINDTODEVICE\000"
 8652      6E646C65 
 8652      64206E65 
 8652      74636F6E 
 8652      6E207479 
 8653              		.section	.text.lwip_setsockopt_impl,"ax",%progbits
 8654              		.align	1
 8655              		.syntax unified
 8656              		.thumb
 8657              		.thumb_func
 8658              		.fpu fpv4-sp-d16
 8660              	lwip_setsockopt_impl:
 8661              	.LFB186:
3275:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3276:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if !LWIP_TCPIP_CORE_LOCKING
3277:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_callback: only used without CORE_LOCKING
3278:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * to get into the tcpip_thread
3279:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
3280:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static void
3281:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_callback(void *arg)
3282:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
3283:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_setgetsockopt_data *data;
3284:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_ASSERT("arg != NULL", arg != NULL);
3285:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data = (struct lwip_setgetsockopt_data *)arg;
ARM GAS  /tmp/ccsCUhT2.s 			page 212


3286:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3287:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   data->err = lwip_setsockopt_impl(data->s, data->level, data->optname,
3288:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_MPU_COMPATIBLE
3289:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                    data->optval,
3290:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_MPU_COMPATIBLE */
3291:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                    data->optval.pc,
3292:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_MPU_COMPATIBLE */
3293:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                    data->optlen);
3294:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3295:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sys_sem_signal((sys_sem_t *)(data->completed_sem));
3296:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
3297:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif  /* LWIP_TCPIP_CORE_LOCKING */
3298:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3299:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** lwip_setsockopt_impl: the actual implementation of setsockopt:
3300:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * same argument as lwip_setsockopt, either called directly or through callback
3301:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
3302:Middlewares/Third_Party/LwIP/src/api/sockets.c **** static int
3303:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_setsockopt_impl(int s, int level, int optname, const void *optval, socklen_t optlen)
3304:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 8662              		.loc 1 3304 1
 8663              		.cfi_startproc
 8664              		@ args = 4, pretend = 0, frame = 32
 8665              		@ frame_needed = 1, uses_anonymous_args = 0
 8666 0000 80B5     		push	{r7, lr}
 8667              	.LCFI246:
 8668              		.cfi_def_cfa_offset 8
 8669              		.cfi_offset 7, -8
 8670              		.cfi_offset 14, -4
 8671 0002 88B0     		sub	sp, sp, #32
 8672              	.LCFI247:
 8673              		.cfi_def_cfa_offset 40
 8674 0004 00AF     		add	r7, sp, #0
 8675              	.LCFI248:
 8676              		.cfi_def_cfa_register 7
 8677 0006 F860     		str	r0, [r7, #12]
 8678 0008 B960     		str	r1, [r7, #8]
 8679 000a 7A60     		str	r2, [r7, #4]
 8680 000c 3B60     		str	r3, [r7]
3305:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int err = 0;
 8681              		.loc 1 3305 7
 8682 000e 0023     		movs	r3, #0
 8683 0010 FB61     		str	r3, [r7, #28]
3306:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = tryget_socket(s);
 8684              		.loc 1 3306 28
 8685 0012 F868     		ldr	r0, [r7, #12]
 8686 0014 FFF7FEFF 		bl	tryget_socket
 8687 0018 7861     		str	r0, [r7, #20]
3307:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 8688              		.loc 1 3307 6
 8689 001a 7B69     		ldr	r3, [r7, #20]
 8690 001c 002B     		cmp	r3, #0
 8691 001e 01D1     		bne	.L625
3308:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return EBADF;
 8692              		.loc 1 3308 12
 8693 0020 0923     		movs	r3, #9
 8694 0022 79E1     		b	.L626
 8695              	.L625:
ARM GAS  /tmp/ccsCUhT2.s 			page 213


3309:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3310:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3311:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #ifdef LWIP_HOOK_SOCKETS_SETSOCKOPT
3312:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (LWIP_HOOK_SOCKETS_SETSOCKOPT(s, sock, level, optname, optval, optlen, &err)) {
3313:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return err;
3314:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3315:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3316:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3317:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (level) {
 8696              		.loc 1 3317 3
 8697 0024 BB68     		ldr	r3, [r7, #8]
 8698 0026 062B     		cmp	r3, #6
 8699 0028 00F01E81 		beq	.L627
 8700 002c BB68     		ldr	r3, [r7, #8]
 8701 002e 062B     		cmp	r3, #6
 8702 0030 04DC     		bgt	.L628
 8703 0032 BB68     		ldr	r3, [r7, #8]
 8704 0034 002B     		cmp	r3, #0
 8705 0036 00F0DD80 		beq	.L629
 8706 003a 69E1     		b	.L630
 8707              	.L628:
 8708 003c BB68     		ldr	r3, [r7, #8]
 8709 003e FF2B     		cmp	r3, #255
 8710 0040 00F06281 		beq	.L631
 8711 0044 BB68     		ldr	r3, [r7, #8]
 8712 0046 40F6FF72 		movw	r2, #4095
 8713 004a 9342     		cmp	r3, r2
 8714 004c 40F06081 		bne	.L630
 8715 0050 7B68     		ldr	r3, [r7, #4]
 8716 0052 202B     		cmp	r3, #32
 8717 0054 11D0     		beq	.L632
 8718 0056 7B68     		ldr	r3, [r7, #4]
 8719 0058 202B     		cmp	r3, #32
 8720 005a 03DC     		bgt	.L633
 8721 005c 7B68     		ldr	r3, [r7, #4]
 8722 005e 082B     		cmp	r3, #8
 8723 0060 0BD0     		beq	.L632
 8724 0062 C3E0     		b	.L634
 8725              	.L633:
 8726 0064 7B68     		ldr	r3, [r7, #4]
 8727 0066 41F20A02 		movw	r2, #4106
 8728 006a 9342     		cmp	r3, r2
 8729 006c 49D0     		beq	.L635
 8730 006e 7B68     		ldr	r3, [r7, #4]
 8731 0070 41F20B02 		movw	r2, #4107
 8732 0074 9342     		cmp	r3, r2
 8733 0076 79D0     		beq	.L636
 8734 0078 B8E0     		b	.L634
 8735              	.L632:
3318:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3319:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: SOL_SOCKET */
3320:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case SOL_SOCKET:
3321:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3322:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3323:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* SO_ACCEPTCONN is get-only */
3324:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3325:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* The option flags */
ARM GAS  /tmp/ccsCUhT2.s 			page 214


3326:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_BROADCAST:
3327:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_KEEPALIVE:
3328:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if SO_REUSE
3329:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_REUSEADDR:
3330:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* SO_REUSE */
3331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if ((optname == SO_BROADCAST) &&
 8736              		.loc 1 3331 14
 8737 007a 7B68     		ldr	r3, [r7, #4]
 8738 007c 202B     		cmp	r3, #32
 8739 007e 08D1     		bne	.L637
3332:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_UDP)) {
 8740              		.loc 1 3332 16 discriminator 1
 8741 0080 7B69     		ldr	r3, [r7, #20]
 8742 0082 1B68     		ldr	r3, [r3]
 8743 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8744 0086 03F0F003 		and	r3, r3, #240
3331:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               (NETCONNTYPE_GROUP(sock->conn->type) != NETCONN_UDP)) {
 8745              		.loc 1 3331 41 discriminator 1
 8746 008a 202B     		cmp	r3, #32
 8747 008c 01D0     		beq	.L637
3333:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3334:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return ENOPROTOOPT;
 8748              		.loc 1 3334 20
 8749 008e 5C23     		movs	r3, #92
 8750 0090 42E1     		b	.L626
 8751              	.L637:
3335:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3336:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3337:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           optname = lwip_sockopt_to_ipopt(optname);
 8752              		.loc 1 3337 21
 8753 0092 7868     		ldr	r0, [r7, #4]
 8754 0094 FFF7FEFF 		bl	lwip_sockopt_to_ipopt
 8755 0098 7860     		str	r0, [r7, #4]
3338:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3339:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
 8756              		.loc 1 3339 11
 8757 009a BB6A     		ldr	r3, [r7, #40]
 8758 009c 032B     		cmp	r3, #3
 8759 009e 01D8     		bhi	.L638
 8760              		.loc 1 3339 11 is_stmt 0 discriminator 1
 8761 00a0 1623     		movs	r3, #22
 8762 00a2 39E1     		b	.L626
 8763              	.L638:
 8764              		.loc 1 3339 11 discriminator 2
 8765 00a4 7B69     		ldr	r3, [r7, #20]
 8766 00a6 1B68     		ldr	r3, [r3]
 8767 00a8 002B     		cmp	r3, #0
 8768 00aa 04D0     		beq	.L639
 8769              		.loc 1 3339 11 discriminator 4
 8770 00ac 7B69     		ldr	r3, [r7, #20]
 8771 00ae 1B68     		ldr	r3, [r3]
 8772 00b0 5B68     		ldr	r3, [r3, #4]
 8773 00b2 002B     		cmp	r3, #0
 8774 00b4 01D1     		bne	.L640
 8775              	.L639:
 8776              		.loc 1 3339 11 discriminator 5
 8777 00b6 1623     		movs	r3, #22
ARM GAS  /tmp/ccsCUhT2.s 			page 215


 8778 00b8 2EE1     		b	.L626
 8779              	.L640:
3340:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const int *)optval) {
 8780              		.loc 1 3340 15 is_stmt 1
 8781 00ba 3B68     		ldr	r3, [r7]
 8782 00bc 1B68     		ldr	r3, [r3]
 8783              		.loc 1 3340 14
 8784 00be 002B     		cmp	r3, #0
 8785 00c0 0ED0     		beq	.L641
3341:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             ip_set_option(sock->conn->pcb.ip, optname);
 8786              		.loc 1 3341 13
 8787 00c2 7B69     		ldr	r3, [r7, #20]
 8788 00c4 1B68     		ldr	r3, [r3]
 8789 00c6 5B68     		ldr	r3, [r3, #4]
 8790 00c8 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 8791 00ca 5AB2     		sxtb	r2, r3
 8792 00cc 7B68     		ldr	r3, [r7, #4]
 8793 00ce 5BB2     		sxtb	r3, r3
 8794 00d0 1343     		orrs	r3, r3, r2
 8795 00d2 5AB2     		sxtb	r2, r3
 8796 00d4 7B69     		ldr	r3, [r7, #20]
 8797 00d6 1B68     		ldr	r3, [r3]
 8798 00d8 5B68     		ldr	r3, [r3, #4]
 8799 00da D2B2     		uxtb	r2, r2
 8800 00dc 5A72     		strb	r2, [r3, #9]
3342:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             ip_reset_option(sock->conn->pcb.ip, optname);
3344:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3345:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, optname=0x%x, ..) -> %s\n",
3346:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname, (*(const int *)optval ? "on" : "off")));
3347:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8801              		.loc 1 3347 11
 8802 00de 88E0     		b	.L643
 8803              	.L641:
3343:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 8804              		.loc 1 3343 13
 8805 00e0 7B69     		ldr	r3, [r7, #20]
 8806 00e2 1B68     		ldr	r3, [r3]
 8807 00e4 5B68     		ldr	r3, [r3, #4]
 8808 00e6 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 8809 00e8 5AB2     		sxtb	r2, r3
 8810 00ea 7B68     		ldr	r3, [r7, #4]
 8811 00ec 5BB2     		sxtb	r3, r3
 8812 00ee DB43     		mvns	r3, r3
 8813 00f0 5BB2     		sxtb	r3, r3
 8814 00f2 1340     		ands	r3, r3, r2
 8815 00f4 5AB2     		sxtb	r2, r3
 8816 00f6 7B69     		ldr	r3, [r7, #20]
 8817 00f8 1B68     		ldr	r3, [r3]
 8818 00fa 5B68     		ldr	r3, [r3, #4]
 8819 00fc D2B2     		uxtb	r2, r2
 8820 00fe 5A72     		strb	r2, [r3, #9]
 8821              		.loc 1 3347 11
 8822 0100 77E0     		b	.L643
 8823              	.L635:
3348:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3349:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* SO_TYPE is get-only */
ARM GAS  /tmp/ccsCUhT2.s 			page 216


3350:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* SO_ERROR is get-only */
3351:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3352:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_SNDTIMEO
3353:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_SNDTIMEO: {
3354:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           long ms_long;
3355:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
3356:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ms_long = LWIP_SO_SNDRCVTIMEO_GET_MS(optval);
3357:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (ms_long < 0) {
3358:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3359:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
3360:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3361:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_set_sendtimeout(sock->conn, ms_long);
3362:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3363:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3364:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_SNDTIMEO */
3365:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVTIMEO
3366:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_RCVTIMEO: {
3367:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           long ms_long;
3368:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, LWIP_SO_SNDRCVTIMEO_OPTTYPE);
3369:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ms_long = LWIP_SO_SNDRCVTIMEO_GET_MS(optval);
3370:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (ms_long < 0) {
3371:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3372:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
3373:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3374:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_set_recvtimeout(sock->conn, (u32_t)ms_long);
3375:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3376:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3377:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVTIMEO */
3378:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
3379:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_RCVBUF:
3380:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, int);
3381:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netconn_set_recvbufsize(sock->conn, *(const int *)optval);
3382:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3383:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
3384:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_LINGER
3385:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_LINGER: {
3386:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           const struct linger *linger = (const struct linger *)optval;
3387:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, struct linger);
3388:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (linger->l_onoff) {
3389:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             int lingersec = linger->l_linger;
3390:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (lingersec < 0) {
3391:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               done_socket(sock);
3392:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               return EINVAL;
3393:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
3394:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (lingersec > 0xFFFF) {
3395:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               lingersec = 0xFFFF;
3396:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
3397:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->linger = (s16_t)lingersec;
3398:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3399:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->linger = -1;
3400:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3401:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3402:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
3403:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_LINGER */
3404:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
3405:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_NO_CHECK:
3406:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_UDP);
ARM GAS  /tmp/ccsCUhT2.s 			page 217


 8824              		.loc 1 3406 11
 8825 0102 BB6A     		ldr	r3, [r7, #40]
 8826 0104 032B     		cmp	r3, #3
 8827 0106 01D8     		bhi	.L644
 8828              		.loc 1 3406 11 is_stmt 0 discriminator 1
 8829 0108 1623     		movs	r3, #22
 8830 010a 05E1     		b	.L626
 8831              	.L644:
 8832              		.loc 1 3406 11 discriminator 2
 8833 010c 7B69     		ldr	r3, [r7, #20]
 8834 010e 1B68     		ldr	r3, [r3]
 8835 0110 002B     		cmp	r3, #0
 8836 0112 04D0     		beq	.L645
 8837              		.loc 1 3406 11 discriminator 4
 8838 0114 7B69     		ldr	r3, [r7, #20]
 8839 0116 1B68     		ldr	r3, [r3]
 8840 0118 5B68     		ldr	r3, [r3, #4]
 8841 011a 002B     		cmp	r3, #0
 8842 011c 01D1     		bne	.L646
 8843              	.L645:
 8844              		.loc 1 3406 11 discriminator 5
 8845 011e 1623     		movs	r3, #22
 8846 0120 FAE0     		b	.L626
 8847              	.L646:
 8848              		.loc 1 3406 11 discriminator 6
 8849 0122 7B69     		ldr	r3, [r7, #20]
 8850 0124 1B68     		ldr	r3, [r3]
 8851 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8852 0128 03F0F003 		and	r3, r3, #240
 8853 012c 202B     		cmp	r3, #32
 8854 012e 01D0     		beq	.L647
 8855              		.loc 1 3406 11 discriminator 7
 8856 0130 5C23     		movs	r3, #92
 8857 0132 F1E0     		b	.L626
 8858              	.L647:
3407:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDPLITE
3408:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (udp_is_flag_set(sock->conn->pcb.udp, UDP_FLAGS_UDPLITE)) {
3409:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* this flag is only available for UDP, not for UDP lite */
3410:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3411:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EAFNOSUPPORT;
3412:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3413:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDPLITE */
3414:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const int *)optval) {
 8859              		.loc 1 3414 15 is_stmt 1
 8860 0134 3B68     		ldr	r3, [r7]
 8861 0136 1B68     		ldr	r3, [r3]
 8862              		.loc 1 3414 14
 8863 0138 002B     		cmp	r3, #0
 8864 013a 0BD0     		beq	.L648
3415:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             udp_set_flags(sock->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
 8865              		.loc 1 3415 13
 8866 013c 7B69     		ldr	r3, [r7, #20]
 8867 013e 1B68     		ldr	r3, [r3]
 8868 0140 5B68     		ldr	r3, [r3, #4]
 8869 0142 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 8870 0144 7B69     		ldr	r3, [r7, #20]
 8871 0146 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccsCUhT2.s 			page 218


 8872 0148 5B68     		ldr	r3, [r3, #4]
 8873 014a 42F00102 		orr	r2, r2, #1
 8874 014e D2B2     		uxtb	r2, r2
 8875 0150 1A74     		strb	r2, [r3, #16]
3416:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             udp_clear_flags(sock->conn->pcb.udp, UDP_FLAGS_NOCHKSUM);
3418:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3419:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8876              		.loc 1 3419 11
 8877 0152 4EE0     		b	.L643
 8878              	.L648:
3417:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 8879              		.loc 1 3417 13
 8880 0154 7B69     		ldr	r3, [r7, #20]
 8881 0156 1B68     		ldr	r3, [r3]
 8882 0158 5B68     		ldr	r3, [r3, #4]
 8883 015a 1A7C     		ldrb	r2, [r3, #16]	@ zero_extendqisi2
 8884 015c 7B69     		ldr	r3, [r7, #20]
 8885 015e 1B68     		ldr	r3, [r3]
 8886 0160 5B68     		ldr	r3, [r3, #4]
 8887 0162 22F00102 		bic	r2, r2, #1
 8888 0166 D2B2     		uxtb	r2, r2
 8889 0168 1A74     		strb	r2, [r3, #16]
 8890              		.loc 1 3419 11
 8891 016a 42E0     		b	.L643
 8892              	.L636:
 8893              	.LBB75:
3420:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
3421:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case SO_BINDTODEVICE: {
3422:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           const struct ifreq *iface;
3423:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct netif *n = NULL;
 8894              		.loc 1 3423 25
 8895 016c 0023     		movs	r3, #0
 8896 016e BB61     		str	r3, [r7, #24]
3424:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3425:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN(sock, optlen, struct ifreq);
 8897              		.loc 1 3425 11
 8898 0170 BB6A     		ldr	r3, [r7, #40]
 8899 0172 052B     		cmp	r3, #5
 8900 0174 01D8     		bhi	.L650
 8901              		.loc 1 3425 11 is_stmt 0 discriminator 1
 8902 0176 1623     		movs	r3, #22
 8903 0178 CEE0     		b	.L626
 8904              	.L650:
 8905              		.loc 1 3425 11 discriminator 2
 8906 017a 7B69     		ldr	r3, [r7, #20]
 8907 017c 1B68     		ldr	r3, [r3]
 8908 017e 002B     		cmp	r3, #0
 8909 0180 01D1     		bne	.L651
 8910              		.loc 1 3425 11 discriminator 3
 8911 0182 1623     		movs	r3, #22
 8912 0184 C8E0     		b	.L626
 8913              	.L651:
3426:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3427:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           iface = (const struct ifreq *)optval;
 8914              		.loc 1 3427 17 is_stmt 1
 8915 0186 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccsCUhT2.s 			page 219


 8916 0188 3B61     		str	r3, [r7, #16]
3428:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (iface->ifr_name[0] != 0) {
 8917              		.loc 1 3428 30
 8918 018a 3B69     		ldr	r3, [r7, #16]
 8919 018c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8920              		.loc 1 3428 14
 8921 018e 002B     		cmp	r3, #0
 8922 0190 09D0     		beq	.L652
3429:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             n = netif_find(iface->ifr_name);
 8923              		.loc 1 3429 33
 8924 0192 3B69     		ldr	r3, [r7, #16]
 8925              		.loc 1 3429 17
 8926 0194 1846     		mov	r0, r3
 8927 0196 FFF7FEFF 		bl	netif_find
 8928 019a B861     		str	r0, [r7, #24]
3430:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (n == NULL) {
 8929              		.loc 1 3430 16
 8930 019c BB69     		ldr	r3, [r7, #24]
 8931 019e 002B     		cmp	r3, #0
 8932 01a0 01D1     		bne	.L652
3431:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               done_socket(sock);
3432:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               return ENODEV;
 8933              		.loc 1 3432 22
 8934 01a2 1323     		movs	r3, #19
 8935 01a4 B8E0     		b	.L626
 8936              	.L652:
3433:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
3434:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3435:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3436:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           switch (NETCONNTYPE_GROUP(netconn_type(sock->conn))) {
 8937              		.loc 1 3436 19
 8938 01a6 7B69     		ldr	r3, [r7, #20]
 8939 01a8 1B68     		ldr	r3, [r3]
 8940 01aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8941 01ac 03F0F003 		and	r3, r3, #240
 8942 01b0 102B     		cmp	r3, #16
 8943 01b2 02D0     		beq	.L653
 8944 01b4 202B     		cmp	r3, #32
 8945 01b6 08D0     		beq	.L654
 8946 01b8 0FE0     		b	.L679
 8947              	.L653:
3437:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
3438:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             case NETCONN_TCP:
3439:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               tcp_bind_netif(sock->conn->pcb.tcp, n);
 8948              		.loc 1 3439 34
 8949 01ba 7B69     		ldr	r3, [r7, #20]
 8950 01bc 1B68     		ldr	r3, [r3]
 8951              		.loc 1 3439 15
 8952 01be 5B68     		ldr	r3, [r3, #4]
 8953 01c0 B969     		ldr	r1, [r7, #24]
 8954 01c2 1846     		mov	r0, r3
 8955 01c4 FFF7FEFF 		bl	tcp_bind_netif
3440:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 8956              		.loc 1 3440 15
 8957 01c8 0FE0     		b	.L656
 8958              	.L654:
3441:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
ARM GAS  /tmp/ccsCUhT2.s 			page 220


3442:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP
3443:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             case NETCONN_UDP:
3444:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               udp_bind_netif(sock->conn->pcb.udp, n);
 8959              		.loc 1 3444 34
 8960 01ca 7B69     		ldr	r3, [r7, #20]
 8961 01cc 1B68     		ldr	r3, [r3]
 8962              		.loc 1 3444 15
 8963 01ce 5B68     		ldr	r3, [r3, #4]
 8964 01d0 B969     		ldr	r1, [r7, #24]
 8965 01d2 1846     		mov	r0, r3
 8966 01d4 FFF7FEFF 		bl	udp_bind_netif
3445:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 8967              		.loc 1 3445 15
 8968 01d8 07E0     		b	.L656
 8969              	.L679:
3446:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3447:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_RAW
3448:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             case NETCONN_RAW:
3449:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               raw_bind_netif(sock->conn->pcb.raw, n);
3450:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
3451:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3452:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             default:
3453:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               LWIP_ASSERT("Unhandled netconn type in SO_BINDTODEVICE", 0);
 8970              		.loc 1 3453 15 discriminator 1
 8971 01da 514B     		ldr	r3, .L681
 8972 01dc 40F67D52 		movw	r2, #3453
 8973 01e0 5049     		ldr	r1, .L681+4
 8974 01e2 5148     		ldr	r0, .L681+8
 8975 01e4 FFF7FEFF 		bl	printf
3454:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               break;
 8976              		.loc 1 3454 15 discriminator 1
 8977 01e8 00BF     		nop
 8978              	.L656:
 8979              	.LBE75:
3455:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3456:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3457:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
 8980              		.loc 1 3457 9
 8981 01ea 02E0     		b	.L643
 8982              	.L634:
3458:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3459:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, SOL_SOCKET, UNIMPL: optname=0x%x, ..)\n"
3460:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3461:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 8983              		.loc 1 3461 15
 8984 01ec 5C23     		movs	r3, #92
 8985 01ee FB61     		str	r3, [r7, #28]
3462:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 8986              		.loc 1 3462 11
 8987 01f0 00BF     		nop
 8988              	.L643:
3463:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3464:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 8989              		.loc 1 3464 7
 8990 01f2 90E0     		b	.L657
 8991              	.L629:
 8992 01f4 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccsCUhT2.s 			page 221


 8993 01f6 012B     		cmp	r3, #1
 8994 01f8 1AD0     		beq	.L658
 8995 01fa 7B68     		ldr	r3, [r7, #4]
 8996 01fc 022B     		cmp	r3, #2
 8997 01fe 2FD1     		bne	.L659
3465:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3466:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_IP */
3467:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_IP:
3468:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3469:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_TTL:
3470:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
 8998              		.loc 1 3470 11
 8999 0200 BB6A     		ldr	r3, [r7, #40]
 9000 0202 032B     		cmp	r3, #3
 9001 0204 01D8     		bhi	.L660
 9002              		.loc 1 3470 11 is_stmt 0 discriminator 1
 9003 0206 1623     		movs	r3, #22
 9004 0208 86E0     		b	.L626
 9005              	.L660:
 9006              		.loc 1 3470 11 discriminator 2
 9007 020a 7B69     		ldr	r3, [r7, #20]
 9008 020c 1B68     		ldr	r3, [r3]
 9009 020e 002B     		cmp	r3, #0
 9010 0210 04D0     		beq	.L661
 9011              		.loc 1 3470 11 discriminator 4
 9012 0212 7B69     		ldr	r3, [r7, #20]
 9013 0214 1B68     		ldr	r3, [r3]
 9014 0216 5B68     		ldr	r3, [r3, #4]
 9015 0218 002B     		cmp	r3, #0
 9016 021a 01D1     		bne	.L662
 9017              	.L661:
 9018              		.loc 1 3470 11 discriminator 5
 9019 021c 1623     		movs	r3, #22
 9020 021e 7BE0     		b	.L626
 9021              	.L662:
3471:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->pcb.ip->ttl = (u8_t)(*(const int *)optval);
 9022              		.loc 1 3471 44 is_stmt 1
 9023 0220 3B68     		ldr	r3, [r7]
 9024 0222 1A68     		ldr	r2, [r3]
 9025              		.loc 1 3471 15
 9026 0224 7B69     		ldr	r3, [r7, #20]
 9027 0226 1B68     		ldr	r3, [r3]
 9028              		.loc 1 3471 26
 9029 0228 5B68     		ldr	r3, [r3, #4]
 9030              		.loc 1 3471 37
 9031 022a D2B2     		uxtb	r2, r2
 9032              		.loc 1 3471 35
 9033 022c DA72     		strb	r2, [r3, #11]
3472:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TTL, ..) -> %d\n",
3473:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.ip->ttl));
3474:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9034              		.loc 1 3474 11
 9035 022e 1AE0     		b	.L663
 9036              	.L658:
3475:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_TOS:
3476:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
 9037              		.loc 1 3476 11
ARM GAS  /tmp/ccsCUhT2.s 			page 222


 9038 0230 BB6A     		ldr	r3, [r7, #40]
 9039 0232 032B     		cmp	r3, #3
 9040 0234 01D8     		bhi	.L664
 9041              		.loc 1 3476 11 is_stmt 0 discriminator 1
 9042 0236 1623     		movs	r3, #22
 9043 0238 6EE0     		b	.L626
 9044              	.L664:
 9045              		.loc 1 3476 11 discriminator 2
 9046 023a 7B69     		ldr	r3, [r7, #20]
 9047 023c 1B68     		ldr	r3, [r3]
 9048 023e 002B     		cmp	r3, #0
 9049 0240 04D0     		beq	.L665
 9050              		.loc 1 3476 11 discriminator 4
 9051 0242 7B69     		ldr	r3, [r7, #20]
 9052 0244 1B68     		ldr	r3, [r3]
 9053 0246 5B68     		ldr	r3, [r3, #4]
 9054 0248 002B     		cmp	r3, #0
 9055 024a 01D1     		bne	.L666
 9056              	.L665:
 9057              		.loc 1 3476 11 discriminator 5
 9058 024c 1623     		movs	r3, #22
 9059 024e 63E0     		b	.L626
 9060              	.L666:
3477:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->pcb.ip->tos = (u8_t)(*(const int *)optval);
 9061              		.loc 1 3477 44 is_stmt 1
 9062 0250 3B68     		ldr	r3, [r7]
 9063 0252 1A68     		ldr	r2, [r3]
 9064              		.loc 1 3477 15
 9065 0254 7B69     		ldr	r3, [r7, #20]
 9066 0256 1B68     		ldr	r3, [r3]
 9067              		.loc 1 3477 26
 9068 0258 5B68     		ldr	r3, [r3, #4]
 9069              		.loc 1 3477 37
 9070 025a D2B2     		uxtb	r2, r2
 9071              		.loc 1 3477 35
 9072 025c 9A72     		strb	r2, [r3, #10]
3478:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, IP_TOS, ..)-> %d\n",
3479:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.ip->tos));
3480:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9073              		.loc 1 3480 11
 9074 025e 02E0     		b	.L663
 9075              	.L659:
3481:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_NETBUF_RECVINFO
3482:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_PKTINFO:
3483:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_UDP);
3484:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const int *)optval) {
3485:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->flags |= NETCONN_FLAG_PKTINFO;
3486:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3487:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->flags &= ~NETCONN_FLAG_PKTINFO;
3488:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3489:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3490:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_NETBUF_RECVINFO */
3491:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4 && LWIP_MULTICAST_TX_OPTIONS && LWIP_UDP
3492:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_MULTICAST_TTL:
3493:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
3494:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           udp_set_multicast_ttl(sock->conn->pcb.udp, (u8_t)(*(const u8_t *)optval));
3495:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
ARM GAS  /tmp/ccsCUhT2.s 			page 223


3496:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_MULTICAST_IF: {
3497:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ip4_addr_t if_addr;
3498:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct in_addr, NETCONN_UDP);
3499:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           inet_addr_to_ip4addr(&if_addr, (const struct in_addr *)optval);
3500:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           udp_set_multicast_netif_addr(sock->conn->pcb.udp, &if_addr);
3501:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3502:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
3503:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_MULTICAST_LOOP:
3504:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, u8_t, NETCONN_UDP);
3505:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const u8_t *)optval) {
3506:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             udp_set_flags(sock->conn->pcb.udp, UDP_FLAGS_MULTICAST_LOOP);
3507:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3508:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             udp_clear_flags(sock->conn->pcb.udp, UDP_FLAGS_MULTICAST_LOOP);
3509:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3510:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3511:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV4 && LWIP_MULTICAST_TX_OPTIONS && LWIP_UDP */
3512:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IGMP
3513:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_ADD_MEMBERSHIP:
3514:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IP_DROP_MEMBERSHIP: {
3515:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* If this is a TCP or a RAW socket, ignore these options. */
3516:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err_t igmp_err;
3517:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           const struct ip_mreq *imr = (const struct ip_mreq *)optval;
3518:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ip4_addr_t if_addr;
3519:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ip4_addr_t multi_addr;
3520:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct ip_mreq, NETCONN_UDP);
3521:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           inet_addr_to_ip4addr(&if_addr, &imr->imr_interface);
3522:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           inet_addr_to_ip4addr(&multi_addr, &imr->imr_multiaddr);
3523:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (optname == IP_ADD_MEMBERSHIP) {
3524:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (!lwip_socket_register_membership(s, &if_addr, &multi_addr)) {
3525:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               /* cannot track membership (out of memory) */
3526:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               err = ENOMEM;
3527:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               igmp_err = ERR_OK;
3528:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             } else {
3529:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               igmp_err = igmp_joingroup(&if_addr, &multi_addr);
3530:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
3531:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3532:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             igmp_err = igmp_leavegroup(&if_addr, &multi_addr);
3533:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             lwip_socket_unregister_membership(s, &if_addr, &multi_addr);
3534:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3535:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (igmp_err != ERR_OK) {
3536:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             err = EADDRNOTAVAIL;
3537:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3538:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3539:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
3540:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IGMP */
3541:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3542:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IP, UNIMPL: optname=0x%x, ..)\n"
3543:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3544:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 9076              		.loc 1 3544 15
 9077 0260 5C23     		movs	r3, #92
 9078 0262 FB61     		str	r3, [r7, #28]
3545:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9079              		.loc 1 3545 11
 9080 0264 00BF     		nop
 9081              	.L663:
3546:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
ARM GAS  /tmp/ccsCUhT2.s 			page 224


3547:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9082              		.loc 1 3547 7
 9083 0266 56E0     		b	.L657
 9084              	.L627:
3548:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3549:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
3550:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_TCP */
3551:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_TCP:
3552:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Special case: all IPPROTO_TCP option take an int */
3553:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_TCP);
 9085              		.loc 1 3553 7
 9086 0268 BB6A     		ldr	r3, [r7, #40]
 9087 026a 032B     		cmp	r3, #3
 9088 026c 01D8     		bhi	.L667
 9089              		.loc 1 3553 7 is_stmt 0 discriminator 1
 9090 026e 1623     		movs	r3, #22
 9091 0270 52E0     		b	.L626
 9092              	.L667:
 9093              		.loc 1 3553 7 discriminator 2
 9094 0272 7B69     		ldr	r3, [r7, #20]
 9095 0274 1B68     		ldr	r3, [r3]
 9096 0276 002B     		cmp	r3, #0
 9097 0278 04D0     		beq	.L668
 9098              		.loc 1 3553 7 discriminator 4
 9099 027a 7B69     		ldr	r3, [r7, #20]
 9100 027c 1B68     		ldr	r3, [r3]
 9101 027e 5B68     		ldr	r3, [r3, #4]
 9102 0280 002B     		cmp	r3, #0
 9103 0282 01D1     		bne	.L669
 9104              	.L668:
 9105              		.loc 1 3553 7 discriminator 5
 9106 0284 1623     		movs	r3, #22
 9107 0286 47E0     		b	.L626
 9108              	.L669:
 9109              		.loc 1 3553 7 discriminator 6
 9110 0288 7B69     		ldr	r3, [r7, #20]
 9111 028a 1B68     		ldr	r3, [r3]
 9112 028c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9113 028e 03F0F003 		and	r3, r3, #240
 9114 0292 102B     		cmp	r3, #16
 9115 0294 01D0     		beq	.L670
 9116              		.loc 1 3553 7 discriminator 7
 9117 0296 5C23     		movs	r3, #92
 9118 0298 3EE0     		b	.L626
 9119              	.L670:
3554:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->conn->pcb.tcp->state == LISTEN) {
 9120              		.loc 1 3554 15 is_stmt 1
 9121 029a 7B69     		ldr	r3, [r7, #20]
 9122 029c 1B68     		ldr	r3, [r3]
 9123              		.loc 1 3554 26
 9124 029e 5B68     		ldr	r3, [r3, #4]
 9125              		.loc 1 3554 30
 9126 02a0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 9127              		.loc 1 3554 10
 9128 02a2 012B     		cmp	r3, #1
 9129 02a4 01D1     		bne	.L671
3555:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
ARM GAS  /tmp/ccsCUhT2.s 			page 225


3556:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return EINVAL;
 9130              		.loc 1 3556 16
 9131 02a6 1623     		movs	r3, #22
 9132 02a8 36E0     		b	.L626
 9133              	.L671:
 9134 02aa 7B68     		ldr	r3, [r7, #4]
 9135 02ac 012B     		cmp	r3, #1
 9136 02ae 03D0     		beq	.L672
 9137 02b0 7B68     		ldr	r3, [r7, #4]
 9138 02b2 022B     		cmp	r3, #2
 9139 02b4 1CD0     		beq	.L673
 9140 02b6 23E0     		b	.L680
 9141              	.L672:
3557:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3558:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3559:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_NODELAY:
3560:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const int *)optval) {
 9142              		.loc 1 3560 15
 9143 02b8 3B68     		ldr	r3, [r7]
 9144 02ba 1B68     		ldr	r3, [r3]
 9145              		.loc 1 3560 14
 9146 02bc 002B     		cmp	r3, #0
 9147 02be 0BD0     		beq	.L675
3561:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             tcp_nagle_disable(sock->conn->pcb.tcp);
 9148              		.loc 1 3561 13
 9149 02c0 7B69     		ldr	r3, [r7, #20]
 9150 02c2 1B68     		ldr	r3, [r3]
 9151 02c4 5B68     		ldr	r3, [r3, #4]
 9152 02c6 5A8B     		ldrh	r2, [r3, #26]
 9153 02c8 7B69     		ldr	r3, [r7, #20]
 9154 02ca 1B68     		ldr	r3, [r3]
 9155 02cc 5B68     		ldr	r3, [r3, #4]
 9156 02ce 42F04002 		orr	r2, r2, #64
 9157 02d2 92B2     		uxth	r2, r2
 9158 02d4 5A83     		strh	r2, [r3, #26]	@ movhi
3562:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             tcp_nagle_enable(sock->conn->pcb.tcp);
3564:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3565:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_NODELAY) -> %s\n",
3566:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(const int *)optval) ? "on" : "off") );
3567:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9159              		.loc 1 3567 11
 9160 02d6 16E0     		b	.L677
 9161              	.L675:
3563:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
 9162              		.loc 1 3563 13
 9163 02d8 7B69     		ldr	r3, [r7, #20]
 9164 02da 1B68     		ldr	r3, [r3]
 9165 02dc 5B68     		ldr	r3, [r3, #4]
 9166 02de 5A8B     		ldrh	r2, [r3, #26]
 9167 02e0 7B69     		ldr	r3, [r7, #20]
 9168 02e2 1B68     		ldr	r3, [r3]
 9169 02e4 5B68     		ldr	r3, [r3, #4]
 9170 02e6 22F04002 		bic	r2, r2, #64
 9171 02ea 92B2     		uxth	r2, r2
 9172 02ec 5A83     		strh	r2, [r3, #26]	@ movhi
 9173              		.loc 1 3567 11
ARM GAS  /tmp/ccsCUhT2.s 			page 226


 9174 02ee 0AE0     		b	.L677
 9175              	.L673:
3568:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPALIVE:
3569:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->pcb.tcp->keep_idle = (u32_t)(*(const int *)optval);
 9176              		.loc 1 3569 52
 9177 02f0 3B68     		ldr	r3, [r7]
 9178 02f2 1A68     		ldr	r2, [r3]
 9179              		.loc 1 3569 15
 9180 02f4 7B69     		ldr	r3, [r7, #20]
 9181 02f6 1B68     		ldr	r3, [r3]
 9182              		.loc 1 3569 26
 9183 02f8 5B68     		ldr	r3, [r3, #4]
 9184              		.loc 1 3569 42
 9185 02fa C3F89420 		str	r2, [r3, #148]
3570:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPALIVE) -> %"U32_F"\
3571:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.tcp->keep_idle));
3572:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9186              		.loc 1 3572 11
 9187 02fe 02E0     		b	.L677
 9188              	.L680:
3573:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3574:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP_KEEPALIVE
3575:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPIDLE:
3576:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->pcb.tcp->keep_idle = 1000 * (u32_t)(*(const int *)optval);
3577:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPIDLE) -> %"U32_F"\n
3578:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.tcp->keep_idle));
3579:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3580:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPINTVL:
3581:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->pcb.tcp->keep_intvl = 1000 * (u32_t)(*(const int *)optval);
3582:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPINTVL) -> %"U32_F"\
3583:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.tcp->keep_intvl));
3584:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3585:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case TCP_KEEPCNT:
3586:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           sock->conn->pcb.tcp->keep_cnt = (u32_t)(*(const int *)optval);
3587:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, TCP_KEEPCNT) -> %"U32_F"\n"
3588:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.tcp->keep_cnt));
3589:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3590:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP_KEEPALIVE */
3591:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3592:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_TCP, UNIMPL: optname=0x%x, ..)\n
3593:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3594:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 9189              		.loc 1 3594 15
 9190 0300 5C23     		movs	r3, #92
 9191 0302 FB61     		str	r3, [r7, #28]
3595:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9192              		.loc 1 3595 11
 9193 0304 00BF     		nop
 9194              	.L677:
3596:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3597:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9195              		.loc 1 3597 7
 9196 0306 06E0     		b	.L657
 9197              	.L631:
3598:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_TCP*/
3599:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3600:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
ARM GAS  /tmp/ccsCUhT2.s 			page 227


3601:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_IPV6 */
3602:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_IPV6:
3603:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3604:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IPV6_V6ONLY:
3605:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
3606:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const int *)optval) {
3607:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             netconn_set_ipv6only(sock->conn, 1);
3608:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3609:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             netconn_set_ipv6only(sock->conn, 0);
3610:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3611:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, IPV6_V6ONLY, ..) -> %d\n",
3612:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (netconn_get_ipv6only(sock->conn) ? 1 : 0)));
3613:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3614:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6_MLD
3615:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IPV6_JOIN_GROUP:
3616:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IPV6_LEAVE_GROUP: {
3617:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* If this is a TCP or a RAW socket, ignore these options. */
3618:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err_t mld6_err;
3619:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct netif *netif;
3620:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           ip6_addr_t multi_addr;
3621:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           const struct ipv6_mreq *imr = (const struct ipv6_mreq *)optval;
3622:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, struct ipv6_mreq, NETCONN_UDP);
3623:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           inet6_addr_to_ip6addr(&multi_addr, &imr->ipv6mr_multiaddr);
3624:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_ASSERT("Invalid netif index", imr->ipv6mr_interface <= 0xFFu);
3625:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           netif = netif_get_by_index((u8_t)imr->ipv6mr_interface);
3626:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (netif == NULL) {
3627:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             err = EADDRNOTAVAIL;
3628:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             break;
3629:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3630:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3631:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (optname == IPV6_JOIN_GROUP) {
3632:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             if (!lwip_socket_register_mld6_membership(s, imr->ipv6mr_interface, &multi_addr)) {
3633:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               /* cannot track membership (out of memory) */
3634:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               err = ENOMEM;
3635:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               mld6_err = ERR_OK;
3636:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             } else {
3637:Middlewares/Third_Party/LwIP/src/api/sockets.c ****               mld6_err = mld6_joingroup_netif(netif, &multi_addr);
3638:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             }
3639:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3640:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             mld6_err = mld6_leavegroup_netif(netif, &multi_addr);
3641:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             lwip_socket_unregister_mld6_membership(s, imr->ipv6mr_interface, &multi_addr);
3642:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3643:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (mld6_err != ERR_OK) {
3644:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             err = EADDRNOTAVAIL;
3645:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3646:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3647:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         break;
3648:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6_MLD */
3649:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3650:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_IPV6, UNIMPL: optname=0x%x, ..)\
3651:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3652:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
3653:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3654:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3655:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
3656:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 */
3657:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  /tmp/ccsCUhT2.s 			page 228


3658:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_UDP && LWIP_UDPLITE
3659:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_UDPLITE */
3660:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_UDPLITE:
3661:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Special case: all IPPROTO_UDPLITE option take an int */
3662:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB(sock, optlen, int);
3663:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* If this is no UDP lite socket, ignore any options. */
3664:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!NETCONNTYPE_ISUDPLITE(netconn_type(sock->conn))) {
3665:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
3666:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return ENOPROTOOPT;
3667:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3668:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3669:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case UDPLITE_SEND_CSCOV:
3670:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if ((*(const int *)optval != 0) && ((*(const int *)optval < 8) || (*(const int *)optval >
3671:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* don't allow illegal values! */
3672:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.udp->chksum_len_tx = 8;
3673:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3674:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.udp->chksum_len_tx = (u16_t) * (const int *)optval;
3675:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3676:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_SEND_CSCOV) -> 
3677:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(const int *)optval)) );
3678:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3679:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case UDPLITE_RECV_CSCOV:
3680:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if ((*(const int *)optval != 0) && ((*(const int *)optval < 8) || (*(const int *)optval >
3681:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* don't allow illegal values! */
3682:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.udp->chksum_len_rx = 8;
3683:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3684:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.udp->chksum_len_rx = (u16_t) * (const int *)optval;
3685:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3686:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UDPLITE_RECV_CSCOV) -> 
3687:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, (*(const int *)optval)) );
3688:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3689:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3690:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_UDPLITE, UNIMPL: optname=0x%x, .
3691:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3692:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
3693:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3694:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3695:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
3696:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_UDP */
3697:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     /* Level: IPPROTO_RAW */
3698:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case IPPROTO_RAW:
3699:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       switch (optname) {
3700:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6 && LWIP_RAW
3701:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         case IPV6_CHECKSUM:
3702:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           /* It should not be possible to disable the checksum generation with ICMPv6
3703:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            * as per RFC 3542 chapter 3.1 */
3704:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (sock->conn->pcb.raw->protocol == IPPROTO_ICMPV6) {
3705:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
3706:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
3707:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3708:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3709:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_SOCKOPT_CHECK_OPTLEN_CONN_PCB_TYPE(sock, optlen, int, NETCONN_RAW);
3710:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (*(const int *)optval < 0) {
3711:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.raw->chksum_reqd = 0;
3712:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else if (*(const int *)optval & 1) {
3713:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             /* Per RFC3542, odd offsets are not allowed */
3714:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             done_socket(sock);
ARM GAS  /tmp/ccsCUhT2.s 			page 229


3715:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             return EINVAL;
3716:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3717:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.raw->chksum_reqd = 1;
3718:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->conn->pcb.raw->chksum_offset = (u16_t) * (const int *)optval;
3719:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3720:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, IPV6_CHECKSUM, ..) -> %d\n"
3721:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, sock->conn->pcb.raw->chksum_reqd));
3722:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
3723:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_IPV6 && LWIP_RAW */
3724:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         default:
3725:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, IPPROTO_RAW, UNIMPL: optname=0x%x, ..)\n
3726:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                       s, optname));
3727:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err = ENOPROTOOPT;
 9198              		.loc 1 3727 15
 9199 0308 5C23     		movs	r3, #92
 9200 030a FB61     		str	r3, [r7, #28]
3728:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           break;
 9201              		.loc 1 3728 11
 9202 030c 00BF     		nop
3729:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }  /* switch (optname) */
3730:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9203              		.loc 1 3730 7
 9204 030e 02E0     		b	.L657
 9205              	.L630:
3731:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
3732:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_setsockopt(%d, level=0x%x, UNIMPL: optname=0x%x, ..)\n",
3733:Middlewares/Third_Party/LwIP/src/api/sockets.c ****                                   s, level, optname));
3734:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ENOPROTOOPT;
 9206              		.loc 1 3734 11
 9207 0310 5C23     		movs	r3, #92
 9208 0312 FB61     		str	r3, [r7, #28]
3735:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9209              		.loc 1 3735 7
 9210 0314 00BF     		nop
 9211              	.L657:
3736:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }  /* switch (level) */
3737:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3738:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
3739:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
 9212              		.loc 1 3739 10
 9213 0316 FB69     		ldr	r3, [r7, #28]
 9214              	.L626:
3740:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 9215              		.loc 1 3740 1
 9216 0318 1846     		mov	r0, r3
 9217 031a 2037     		adds	r7, r7, #32
 9218              	.LCFI249:
 9219              		.cfi_def_cfa_offset 8
 9220 031c BD46     		mov	sp, r7
 9221              	.LCFI250:
 9222              		.cfi_def_cfa_register 13
 9223              		@ sp needed
 9224 031e 80BD     		pop	{r7, pc}
 9225              	.L682:
 9226              		.align	2
 9227              	.L681:
 9228 0320 00000000 		.word	.LC0
ARM GAS  /tmp/ccsCUhT2.s 			page 230


 9229 0324 A0030000 		.word	.LC35
 9230 0328 50000000 		.word	.LC2
 9231              		.cfi_endproc
 9232              	.LFE186:
 9234              		.section	.text.lwip_ioctl,"ax",%progbits
 9235              		.align	1
 9236              		.global	lwip_ioctl
 9237              		.syntax unified
 9238              		.thumb
 9239              		.thumb_func
 9240              		.fpu fpv4-sp-d16
 9242              	lwip_ioctl:
 9243              	.LFB187:
3741:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3742:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
3743:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_ioctl(int s, long cmd, void *argp)
3744:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 9244              		.loc 1 3744 1
 9245              		.cfi_startproc
 9246              		@ args = 0, pretend = 0, frame = 32
 9247              		@ frame_needed = 1, uses_anonymous_args = 0
 9248 0000 80B5     		push	{r7, lr}
 9249              	.LCFI251:
 9250              		.cfi_def_cfa_offset 8
 9251              		.cfi_offset 7, -8
 9252              		.cfi_offset 14, -4
 9253 0002 88B0     		sub	sp, sp, #32
 9254              	.LCFI252:
 9255              		.cfi_def_cfa_offset 40
 9256 0004 00AF     		add	r7, sp, #0
 9257              	.LCFI253:
 9258              		.cfi_def_cfa_register 7
 9259 0006 F860     		str	r0, [r7, #12]
 9260 0008 B960     		str	r1, [r7, #8]
 9261 000a 7A60     		str	r2, [r7, #4]
3745:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 9262              		.loc 1 3745 28
 9263 000c F868     		ldr	r0, [r7, #12]
 9264 000e FFF7FEFF 		bl	get_socket
 9265 0012 B861     		str	r0, [r7, #24]
3746:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   u8_t val;
3747:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
3748:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int recv_avail;
3749:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
3750:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3751:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 9266              		.loc 1 3751 6
 9267 0014 BB69     		ldr	r3, [r7, #24]
 9268 0016 002B     		cmp	r3, #0
 9269 0018 02D1     		bne	.L684
3752:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 9270              		.loc 1 3752 12
 9271 001a 4FF0FF33 		mov	r3, #-1
 9272 001e 39E0     		b	.L685
 9273              	.L684:
3753:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3754:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
ARM GAS  /tmp/ccsCUhT2.s 			page 231


3755:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 9274              		.loc 1 3755 3
 9275 0020 BB68     		ldr	r3, [r7, #8]
 9276 0022 1E4A     		ldr	r2, .L694
 9277 0024 9342     		cmp	r3, r2
 9278 0026 2AD1     		bne	.L693
3756:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE
3757:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case FIONREAD:
3758:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (!argp) {
3759:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, EINVAL);
3760:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
3761:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return -1;
3762:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3763:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_FIONREAD_LINUXMODE
3764:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) != NETCONN_TCP) {
3765:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         struct netbuf *nb;
3766:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock->lastdata.netbuf) {
3767:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           nb = sock->lastdata.netbuf;
3768:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           *((int *)argp) = nb->p->tot_len;
3769:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
3770:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           struct netbuf *rxbuf;
3771:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           err_t err = netconn_recv_udp_raw_netbuf_flags(sock->conn, &rxbuf, NETCONN_DONTBLOCK);
3772:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (err != ERR_OK) {
3773:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int *)argp) = 0;
3774:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           } else {
3775:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             sock->lastdata.netbuf = rxbuf;
3776:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             *((int *)argp) = rxbuf->p->tot_len;
3777:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3778:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3779:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         done_socket(sock);
3780:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         return 0;
3781:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3782:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_FIONREAD_LINUXMODE */
3783:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3784:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_SO_RCVBUF
3785:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* we come here if either LWIP_FIONREAD_LINUXMODE==0 or this is a TCP socket */
3786:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       SYS_ARCH_GET(sock->conn->recv_avail, recv_avail);
3787:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (recv_avail < 0) {
3788:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         recv_avail = 0;
3789:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3790:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3791:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Check if there is data left from the last recv operation. /maq 041215 */
3792:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (sock->lastdata.netbuf) {
3793:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
3794:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           recv_avail += sock->lastdata.pbuf->tot_len;
3795:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         } else {
3796:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           recv_avail += sock->lastdata.netbuf->p->tot_len;
3797:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
3798:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3799:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       *((int *)argp) = recv_avail;
3800:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3801:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONREAD, %p) = %"U16_F"\n", s, argp, *((u16_t *)
3802:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
3803:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
3804:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return 0;
3805:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else /* LWIP_SO_RCVBUF */
3806:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
ARM GAS  /tmp/ccsCUhT2.s 			page 232


3807:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF */
3808:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif /* LWIP_SO_RCVBUF || LWIP_FIONREAD_LINUXMODE */
3809:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3810:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case (long)FIONBIO:
3811:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       val = 0;
 9279              		.loc 1 3811 11
 9280 0028 0023     		movs	r3, #0
 9281 002a FB77     		strb	r3, [r7, #31]
3812:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (argp && *(int *)argp) {
 9282              		.loc 1 3812 10
 9283 002c 7B68     		ldr	r3, [r7, #4]
 9284 002e 002B     		cmp	r3, #0
 9285 0030 05D0     		beq	.L687
 9286              		.loc 1 3812 19 discriminator 1
 9287 0032 7B68     		ldr	r3, [r7, #4]
 9288 0034 1B68     		ldr	r3, [r3]
 9289              		.loc 1 3812 16 discriminator 1
 9290 0036 002B     		cmp	r3, #0
 9291 0038 01D0     		beq	.L687
3813:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         val = 1;
 9292              		.loc 1 3813 13
 9293 003a 0123     		movs	r3, #1
 9294 003c FB77     		strb	r3, [r7, #31]
 9295              	.L687:
3814:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3815:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       netconn_set_nonblocking(sock->conn, val);
 9296              		.loc 1 3815 7
 9297 003e FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 9298 0040 002B     		cmp	r3, #0
 9299 0042 09D0     		beq	.L688
 9300              		.loc 1 3815 7 is_stmt 0 discriminator 1
 9301 0044 BB69     		ldr	r3, [r7, #24]
 9302 0046 1B68     		ldr	r3, [r3]
 9303 0048 1A7F     		ldrb	r2, [r3, #28]	@ zero_extendqisi2
 9304 004a BB69     		ldr	r3, [r7, #24]
 9305 004c 1B68     		ldr	r3, [r3]
 9306 004e 42F00202 		orr	r2, r2, #2
 9307 0052 D2B2     		uxtb	r2, r2
 9308 0054 1A77     		strb	r2, [r3, #28]
 9309 0056 08E0     		b	.L689
 9310              	.L688:
 9311              		.loc 1 3815 7 discriminator 2
 9312 0058 BB69     		ldr	r3, [r7, #24]
 9313 005a 1B68     		ldr	r3, [r3]
 9314 005c 1A7F     		ldrb	r2, [r3, #28]	@ zero_extendqisi2
 9315 005e BB69     		ldr	r3, [r7, #24]
 9316 0060 1B68     		ldr	r3, [r3]
 9317 0062 22F00202 		bic	r2, r2, #2
 9318 0066 D2B2     		uxtb	r2, r2
 9319 0068 1A77     		strb	r2, [r3, #28]
 9320              	.L689:
 9321              	.LBB76:
3816:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, FIONBIO, %d)\n", s, val));
3817:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
 9322              		.loc 1 3817 7 is_stmt 1
 9323 006a 0023     		movs	r3, #0
 9324 006c 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccsCUhT2.s 			page 233


 9325 006e 7B69     		ldr	r3, [r7, #20]
 9326 0070 002B     		cmp	r3, #0
 9327 0072 02D0     		beq	.L690
 9328              		.loc 1 3817 7 is_stmt 0 discriminator 1
 9329 0074 0A4A     		ldr	r2, .L694+4
 9330 0076 7B69     		ldr	r3, [r7, #20]
 9331 0078 1360     		str	r3, [r2]
 9332              	.L690:
 9333              	.LBE76:
3818:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       done_socket(sock);
3819:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       return 0;
 9334              		.loc 1 3819 14 is_stmt 1
 9335 007a 0023     		movs	r3, #0
 9336 007c 0AE0     		b	.L685
 9337              	.L693:
3820:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3821:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
3822:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9338              		.loc 1 3822 7
 9339 007e 00BF     		nop
 9340              	.LBB77:
3823:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   } /* switch (cmd) */
3824:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_ioctl(%d, UNIMPL: 0x%lx, %p)\n", s, cmd, argp));
3825:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   sock_set_errno(sock, ENOSYS); /* not yet implemented */
 9341              		.loc 1 3825 3
 9342 0080 2623     		movs	r3, #38
 9343 0082 3B61     		str	r3, [r7, #16]
 9344 0084 3B69     		ldr	r3, [r7, #16]
 9345 0086 002B     		cmp	r3, #0
 9346 0088 02D0     		beq	.L691
 9347              		.loc 1 3825 3 is_stmt 0 discriminator 1
 9348 008a 054A     		ldr	r2, .L694+4
 9349 008c 3B69     		ldr	r3, [r7, #16]
 9350 008e 1360     		str	r3, [r2]
 9351              	.L691:
 9352              	.LBE77:
3826:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
3827:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return -1;
 9353              		.loc 1 3827 10 is_stmt 1
 9354 0090 4FF0FF33 		mov	r3, #-1
 9355              	.L685:
3828:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 9356              		.loc 1 3828 1
 9357 0094 1846     		mov	r0, r3
 9358 0096 2037     		adds	r7, r7, #32
 9359              	.LCFI254:
 9360              		.cfi_def_cfa_offset 8
 9361 0098 BD46     		mov	sp, r7
 9362              	.LCFI255:
 9363              		.cfi_def_cfa_register 13
 9364              		@ sp needed
 9365 009a 80BD     		pop	{r7, pc}
 9366              	.L695:
 9367              		.align	2
 9368              	.L694:
 9369 009c 7E660480 		.word	-2147195266
 9370 00a0 00000000 		.word	errno
ARM GAS  /tmp/ccsCUhT2.s 			page 234


 9371              		.cfi_endproc
 9372              	.LFE187:
 9374              		.section	.text.lwip_fcntl,"ax",%progbits
 9375              		.align	1
 9376              		.global	lwip_fcntl
 9377              		.syntax unified
 9378              		.thumb
 9379              		.thumb_func
 9380              		.fpu fpv4-sp-d16
 9382              	lwip_fcntl:
 9383              	.LFB188:
3829:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3830:Middlewares/Third_Party/LwIP/src/api/sockets.c **** /** A minimal implementation of fcntl.
3831:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * Currently only the commands F_GETFL and F_SETFL are implemented.
3832:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * The flag O_NONBLOCK and access modes are supported for F_GETFL, only
3833:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  * the flag O_NONBLOCK is implemented for F_SETFL.
3834:Middlewares/Third_Party/LwIP/src/api/sockets.c ****  */
3835:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
3836:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_fcntl(int s, int cmd, int val)
3837:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 9384              		.loc 1 3837 1
 9385              		.cfi_startproc
 9386              		@ args = 0, pretend = 0, frame = 48
 9387              		@ frame_needed = 1, uses_anonymous_args = 0
 9388 0000 80B5     		push	{r7, lr}
 9389              	.LCFI256:
 9390              		.cfi_def_cfa_offset 8
 9391              		.cfi_offset 7, -8
 9392              		.cfi_offset 14, -4
 9393 0002 8CB0     		sub	sp, sp, #48
 9394              	.LCFI257:
 9395              		.cfi_def_cfa_offset 56
 9396 0004 00AF     		add	r7, sp, #0
 9397              	.LCFI258:
 9398              		.cfi_def_cfa_register 7
 9399 0006 F860     		str	r0, [r7, #12]
 9400 0008 B960     		str	r1, [r7, #8]
 9401 000a 7A60     		str	r2, [r7, #4]
3838:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   struct lwip_sock *sock = get_socket(s);
 9402              		.loc 1 3838 28
 9403 000c F868     		ldr	r0, [r7, #12]
 9404 000e FFF7FEFF 		bl	get_socket
 9405 0012 7862     		str	r0, [r7, #36]
3839:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int ret = -1;
 9406              		.loc 1 3839 7
 9407 0014 4FF0FF33 		mov	r3, #-1
 9408 0018 FB62     		str	r3, [r7, #44]
3840:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int op_mode = 0;
 9409              		.loc 1 3840 7
 9410 001a 0023     		movs	r3, #0
 9411 001c BB62     		str	r3, [r7, #40]
3841:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3842:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (!sock) {
 9412              		.loc 1 3842 6
 9413 001e 7B6A     		ldr	r3, [r7, #36]
 9414 0020 002B     		cmp	r3, #0
 9415 0022 02D1     		bne	.L697
ARM GAS  /tmp/ccsCUhT2.s 			page 235


3843:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return -1;
 9416              		.loc 1 3843 12
 9417 0024 4FF0FF33 		mov	r3, #-1
 9418 0028 8BE0     		b	.L698
 9419              	.L697:
3844:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3845:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3846:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (cmd) {
 9420              		.loc 1 3846 3
 9421 002a BB68     		ldr	r3, [r7, #8]
 9422 002c 032B     		cmp	r3, #3
 9423 002e 03D0     		beq	.L699
 9424 0030 BB68     		ldr	r3, [r7, #8]
 9425 0032 042B     		cmp	r3, #4
 9426 0034 43D0     		beq	.L700
 9427 0036 77E0     		b	.L714
 9428              	.L699:
3847:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case F_GETFL:
3848:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = netconn_is_nonblocking(sock->conn) ? O_NONBLOCK : 0;
 9429              		.loc 1 3848 13
 9430 0038 7B6A     		ldr	r3, [r7, #36]
 9431 003a 1B68     		ldr	r3, [r3]
 9432 003c 1B7F     		ldrb	r3, [r3, #28]	@ zero_extendqisi2
 9433              		.loc 1 3848 61
 9434 003e 5B10     		asrs	r3, r3, #1
 9435              		.loc 1 3848 11
 9436 0040 03F00103 		and	r3, r3, #1
 9437 0044 FB62     		str	r3, [r7, #44]
 9438              	.LBB78:
3849:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, 0);
 9439              		.loc 1 3849 7
 9440 0046 0023     		movs	r3, #0
 9441 0048 3B62     		str	r3, [r7, #32]
 9442 004a 3B6A     		ldr	r3, [r7, #32]
 9443 004c 002B     		cmp	r3, #0
 9444 004e 02D0     		beq	.L702
 9445              		.loc 1 3849 7 is_stmt 0 discriminator 1
 9446 0050 3E4A     		ldr	r2, .L717
 9447 0052 3B6A     		ldr	r3, [r7, #32]
 9448 0054 1360     		str	r3, [r2]
 9449              	.L702:
 9450              	.LBE78:
3850:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3851:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (NETCONNTYPE_GROUP(netconn_type(sock->conn)) == NETCONN_TCP) {
 9451              		.loc 1 3851 11 is_stmt 1
 9452 0056 7B6A     		ldr	r3, [r7, #36]
 9453 0058 1B68     		ldr	r3, [r3]
 9454 005a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9455 005c 03F0F003 		and	r3, r3, #240
 9456              		.loc 1 3851 10
 9457 0060 102B     		cmp	r3, #16
 9458 0062 23D1     		bne	.L703
3852:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
3853:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         LOCK_TCPIP_CORE();
 9459              		.loc 1 3853 9
 9460 0064 3A48     		ldr	r0, .L717+4
 9461 0066 FFF7FEFF 		bl	sys_mutex_lock
ARM GAS  /tmp/ccsCUhT2.s 			page 236


3854:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
3855:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_DECL_PROTECT(lev);
3856:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* the proper thing to do here would be to get into the tcpip_thread,
3857:Middlewares/Third_Party/LwIP/src/api/sockets.c ****            but locking should be OK as well since we only *read* some flags */
3858:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_PROTECT(lev);
3859:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3860:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCP
3861:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         if (sock->conn->pcb.tcp) {
 9462              		.loc 1 3861 17
 9463 006a 7B6A     		ldr	r3, [r7, #36]
 9464 006c 1B68     		ldr	r3, [r3]
 9465              		.loc 1 3861 28
 9466 006e 5B68     		ldr	r3, [r3, #4]
 9467              		.loc 1 3861 12
 9468 0070 002B     		cmp	r3, #0
 9469 0072 17D0     		beq	.L704
3862:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!(sock->conn->pcb.tcp->flags & TF_RXCLOSED)) {
 9470              		.loc 1 3862 21
 9471 0074 7B6A     		ldr	r3, [r7, #36]
 9472 0076 1B68     		ldr	r3, [r3]
 9473              		.loc 1 3862 32
 9474 0078 5B68     		ldr	r3, [r3, #4]
 9475              		.loc 1 3862 36
 9476 007a 5B8B     		ldrh	r3, [r3, #26]
 9477              		.loc 1 3862 44
 9478 007c 03F01003 		and	r3, r3, #16
 9479              		.loc 1 3862 14
 9480 0080 002B     		cmp	r3, #0
 9481 0082 03D1     		bne	.L705
3863:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             op_mode |= O_RDONLY;
 9482              		.loc 1 3863 21
 9483 0084 BB6A     		ldr	r3, [r7, #40]
 9484 0086 43F00203 		orr	r3, r3, #2
 9485 008a BB62     		str	r3, [r7, #40]
 9486              	.L705:
3864:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3865:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           if (!(sock->conn->pcb.tcp->flags & TF_FIN)) {
 9487              		.loc 1 3865 21
 9488 008c 7B6A     		ldr	r3, [r7, #36]
 9489 008e 1B68     		ldr	r3, [r3]
 9490              		.loc 1 3865 32
 9491 0090 5B68     		ldr	r3, [r3, #4]
 9492              		.loc 1 3865 36
 9493 0092 5B8B     		ldrh	r3, [r3, #26]
 9494              		.loc 1 3865 44
 9495 0094 03F02003 		and	r3, r3, #32
 9496              		.loc 1 3865 14
 9497 0098 002B     		cmp	r3, #0
 9498 009a 03D1     		bne	.L704
3866:Middlewares/Third_Party/LwIP/src/api/sockets.c ****             op_mode |= O_WRONLY;
 9499              		.loc 1 3866 21
 9500 009c BB6A     		ldr	r3, [r7, #40]
 9501 009e 43F00403 		orr	r3, r3, #4
 9502 00a2 BB62     		str	r3, [r7, #40]
 9503              	.L704:
3867:Middlewares/Third_Party/LwIP/src/api/sockets.c ****           }
3868:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         }
ARM GAS  /tmp/ccsCUhT2.s 			page 237


3869:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3870:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_TCPIP_CORE_LOCKING
3871:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         UNLOCK_TCPIP_CORE();
 9504              		.loc 1 3871 9
 9505 00a4 2A48     		ldr	r0, .L717+4
 9506 00a6 FFF7FEFF 		bl	sys_mutex_unlock
 9507 00aa 03E0     		b	.L706
 9508              	.L703:
3872:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #else
3873:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         SYS_ARCH_UNPROTECT(lev);
3874:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3875:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
3876:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         op_mode |= O_RDWR;
 9509              		.loc 1 3876 17
 9510 00ac BB6A     		ldr	r3, [r7, #40]
 9511 00ae 43F00603 		orr	r3, r3, #6
 9512 00b2 BB62     		str	r3, [r7, #40]
 9513              	.L706:
3877:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3878:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3879:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* ensure O_RDWR for (O_RDONLY|O_WRONLY) != O_RDWR cases */
3880:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret |= (op_mode == (O_RDONLY | O_WRONLY)) ? O_RDWR : op_mode;
 9514              		.loc 1 3880 11
 9515 00b4 FA6A     		ldr	r2, [r7, #44]
 9516 00b6 BB6A     		ldr	r3, [r7, #40]
 9517 00b8 1343     		orrs	r3, r3, r2
 9518 00ba FB62     		str	r3, [r7, #44]
3881:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3882:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9519              		.loc 1 3882 7
 9520 00bc 40E0     		b	.L707
 9521              	.L700:
3883:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case F_SETFL:
3884:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* Bits corresponding to the file access mode and the file creation flags [..] that are set i
3885:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       val &= ~(O_RDONLY | O_WRONLY | O_RDWR);
 9522              		.loc 1 3885 11
 9523 00be 7B68     		ldr	r3, [r7, #4]
 9524 00c0 23F00603 		bic	r3, r3, #6
 9525 00c4 7B60     		str	r3, [r7, #4]
3886:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if ((val & ~O_NONBLOCK) == 0) {
 9526              		.loc 1 3886 16
 9527 00c6 7B68     		ldr	r3, [r7, #4]
 9528 00c8 23F00103 		bic	r3, r3, #1
 9529              		.loc 1 3886 10
 9530 00cc 002B     		cmp	r3, #0
 9531 00ce 22D1     		bne	.L708
3887:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         /* only O_NONBLOCK, all other bits are zero */
3888:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         netconn_set_nonblocking(sock->conn, val & O_NONBLOCK);
 9532              		.loc 1 3888 9
 9533 00d0 7B68     		ldr	r3, [r7, #4]
 9534 00d2 03F00103 		and	r3, r3, #1
 9535 00d6 002B     		cmp	r3, #0
 9536 00d8 09D0     		beq	.L709
 9537              		.loc 1 3888 9 is_stmt 0 discriminator 1
 9538 00da 7B6A     		ldr	r3, [r7, #36]
 9539 00dc 1B68     		ldr	r3, [r3]
 9540 00de 1A7F     		ldrb	r2, [r3, #28]	@ zero_extendqisi2
ARM GAS  /tmp/ccsCUhT2.s 			page 238


 9541 00e0 7B6A     		ldr	r3, [r7, #36]
 9542 00e2 1B68     		ldr	r3, [r3]
 9543 00e4 42F00202 		orr	r2, r2, #2
 9544 00e8 D2B2     		uxtb	r2, r2
 9545 00ea 1A77     		strb	r2, [r3, #28]
 9546 00ec 08E0     		b	.L710
 9547              	.L709:
 9548              		.loc 1 3888 9 discriminator 2
 9549 00ee 7B6A     		ldr	r3, [r7, #36]
 9550 00f0 1B68     		ldr	r3, [r3]
 9551 00f2 1A7F     		ldrb	r2, [r3, #28]	@ zero_extendqisi2
 9552 00f4 7B6A     		ldr	r3, [r7, #36]
 9553 00f6 1B68     		ldr	r3, [r3]
 9554 00f8 22F00202 		bic	r2, r2, #2
 9555 00fc D2B2     		uxtb	r2, r2
 9556 00fe 1A77     		strb	r2, [r3, #28]
 9557              	.L710:
3889:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         ret = 0;
 9558              		.loc 1 3889 13 is_stmt 1
 9559 0100 0023     		movs	r3, #0
 9560 0102 FB62     		str	r3, [r7, #44]
 9561              	.LBB79:
3890:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, 0);
 9562              		.loc 1 3890 9
 9563 0104 0023     		movs	r3, #0
 9564 0106 FB61     		str	r3, [r7, #28]
 9565 0108 FB69     		ldr	r3, [r7, #28]
 9566 010a 002B     		cmp	r3, #0
 9567 010c 15D0     		beq	.L715
 9568              		.loc 1 3890 9 is_stmt 0 discriminator 1
 9569 010e 0F4A     		ldr	r2, .L717
 9570 0110 FB69     		ldr	r3, [r7, #28]
 9571 0112 1360     		str	r3, [r2]
 9572              	.LBE79:
3891:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       } else {
3892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         sock_set_errno(sock, ENOSYS); /* not yet implemented */
3893:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9573              		.loc 1 3894 7 is_stmt 1 discriminator 1
 9574 0114 11E0     		b	.L715
 9575              	.L708:
 9576              	.LBB80:
3892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 9577              		.loc 1 3892 9
 9578 0116 2623     		movs	r3, #38
 9579 0118 BB61     		str	r3, [r7, #24]
 9580 011a BB69     		ldr	r3, [r7, #24]
 9581 011c 002B     		cmp	r3, #0
 9582 011e 0CD0     		beq	.L715
3892:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
 9583              		.loc 1 3892 9 is_stmt 0 discriminator 1
 9584 0120 0A4A     		ldr	r2, .L717
 9585 0122 BB69     		ldr	r3, [r7, #24]
 9586 0124 1360     		str	r3, [r2]
 9587              	.LBE80:
 9588              		.loc 1 3894 7 is_stmt 1 discriminator 1
 9589 0126 08E0     		b	.L715
ARM GAS  /tmp/ccsCUhT2.s 			page 239


 9590              	.L714:
 9591              	.LBB81:
3895:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
3896:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       LWIP_DEBUGF(SOCKETS_DEBUG, ("lwip_fcntl(%d, UNIMPL: %d, %d)\n", s, cmd, val));
3897:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       sock_set_errno(sock, ENOSYS); /* not yet implemented */
 9592              		.loc 1 3897 7
 9593 0128 2623     		movs	r3, #38
 9594 012a 7B61     		str	r3, [r7, #20]
 9595 012c 7B69     		ldr	r3, [r7, #20]
 9596 012e 002B     		cmp	r3, #0
 9597 0130 05D0     		beq	.L716
 9598              		.loc 1 3897 7 is_stmt 0 discriminator 1
 9599 0132 064A     		ldr	r2, .L717
 9600 0134 7B69     		ldr	r3, [r7, #20]
 9601 0136 1360     		str	r3, [r2]
 9602              	.LBE81:
3898:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9603              		.loc 1 3898 7 is_stmt 1 discriminator 1
 9604 0138 01E0     		b	.L716
 9605              	.L715:
3894:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
 9606              		.loc 1 3894 7
 9607 013a 00BF     		nop
 9608 013c 00E0     		b	.L707
 9609              	.L716:
 9610              		.loc 1 3898 7
 9611 013e 00BF     		nop
 9612              	.L707:
3899:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3900:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   done_socket(sock);
3901:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
 9613              		.loc 1 3901 10
 9614 0140 FB6A     		ldr	r3, [r7, #44]
 9615              	.L698:
3902:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 9616              		.loc 1 3902 1
 9617 0142 1846     		mov	r0, r3
 9618 0144 3037     		adds	r7, r7, #48
 9619              	.LCFI259:
 9620              		.cfi_def_cfa_offset 8
 9621 0146 BD46     		mov	sp, r7
 9622              	.LCFI260:
 9623              		.cfi_def_cfa_register 13
 9624              		@ sp needed
 9625 0148 80BD     		pop	{r7, pc}
 9626              	.L718:
 9627 014a 00BF     		.align	2
 9628              	.L717:
 9629 014c 00000000 		.word	errno
 9630 0150 00000000 		.word	lock_tcpip_core
 9631              		.cfi_endproc
 9632              	.LFE188:
 9634              		.section	.text.lwip_inet_ntop,"ax",%progbits
 9635              		.align	1
 9636              		.global	lwip_inet_ntop
 9637              		.syntax unified
 9638              		.thumb
ARM GAS  /tmp/ccsCUhT2.s 			page 240


 9639              		.thumb_func
 9640              		.fpu fpv4-sp-d16
 9642              	lwip_inet_ntop:
 9643              	.LFB189:
3903:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3904:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_COMPAT_SOCKETS == 2 && LWIP_POSIX_SOCKETS_IO_NAMES
3905:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
3906:Middlewares/Third_Party/LwIP/src/api/sockets.c **** fcntl(int s, int cmd, ...)
3907:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
3908:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   va_list ap;
3909:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int val;
3910:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3911:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   va_start(ap, cmd);
3912:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   val = va_arg(ap, int);
3913:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   va_end(ap);
3914:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return lwip_fcntl(s, cmd, val);
3915:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
3916:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3917:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3918:Middlewares/Third_Party/LwIP/src/api/sockets.c **** const char *
3919:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_inet_ntop(int af, const void *src, char *dst, socklen_t size)
3920:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 9644              		.loc 1 3920 1
 9645              		.cfi_startproc
 9646              		@ args = 0, pretend = 0, frame = 24
 9647              		@ frame_needed = 1, uses_anonymous_args = 0
 9648 0000 80B5     		push	{r7, lr}
 9649              	.LCFI261:
 9650              		.cfi_def_cfa_offset 8
 9651              		.cfi_offset 7, -8
 9652              		.cfi_offset 14, -4
 9653 0002 86B0     		sub	sp, sp, #24
 9654              	.LCFI262:
 9655              		.cfi_def_cfa_offset 32
 9656 0004 00AF     		add	r7, sp, #0
 9657              	.LCFI263:
 9658              		.cfi_def_cfa_register 7
 9659 0006 F860     		str	r0, [r7, #12]
 9660 0008 B960     		str	r1, [r7, #8]
 9661 000a 7A60     		str	r2, [r7, #4]
 9662 000c 3B60     		str	r3, [r7]
3921:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   const char *ret = NULL;
 9663              		.loc 1 3921 15
 9664 000e 0023     		movs	r3, #0
 9665 0010 7B61     		str	r3, [r7, #20]
3922:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int size_int = (int)size;
 9666              		.loc 1 3922 7
 9667 0012 3B68     		ldr	r3, [r7]
 9668 0014 3B61     		str	r3, [r7, #16]
3923:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   if (size_int < 0) {
 9669              		.loc 1 3923 6
 9670 0016 3B69     		ldr	r3, [r7, #16]
 9671 0018 002B     		cmp	r3, #0
 9672 001a 04DA     		bge	.L720
3924:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     set_errno(ENOSPC);
 9673              		.loc 1 3924 5 discriminator 1
 9674 001c 0F4B     		ldr	r3, .L727
ARM GAS  /tmp/ccsCUhT2.s 			page 241


 9675 001e 1C22     		movs	r2, #28
 9676 0020 1A60     		str	r2, [r3]
3925:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     return NULL;
 9677              		.loc 1 3925 12 discriminator 1
 9678 0022 0023     		movs	r3, #0
 9679 0024 15E0     		b	.L721
 9680              	.L720:
3926:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3927:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (af) {
 9681              		.loc 1 3927 3
 9682 0026 FB68     		ldr	r3, [r7, #12]
 9683 0028 022B     		cmp	r3, #2
 9684 002a 0CD1     		bne	.L725
3928:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
3929:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case AF_INET:
3930:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = ip4addr_ntoa_r((const ip4_addr_t *)src, dst, size_int);
 9685              		.loc 1 3930 13
 9686 002c 3A69     		ldr	r2, [r7, #16]
 9687 002e 7968     		ldr	r1, [r7, #4]
 9688 0030 B868     		ldr	r0, [r7, #8]
 9689 0032 FFF7FEFF 		bl	ip4addr_ntoa_r
 9690 0036 7861     		str	r0, [r7, #20]
3931:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (ret == NULL) {
 9691              		.loc 1 3931 10
 9692 0038 7B69     		ldr	r3, [r7, #20]
 9693 003a 002B     		cmp	r3, #0
 9694 003c 07D1     		bne	.L726
3932:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         set_errno(ENOSPC);
 9695              		.loc 1 3932 9 discriminator 1
 9696 003e 074B     		ldr	r3, .L727
 9697 0040 1C22     		movs	r2, #28
 9698 0042 1A60     		str	r2, [r3]
3933:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3934:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9699              		.loc 1 3934 7 discriminator 1
 9700 0044 03E0     		b	.L726
 9701              	.L725:
3935:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3936:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
3937:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case AF_INET6:
3938:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ret = ip6addr_ntoa_r((const ip6_addr_t *)src, dst, size_int);
3939:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (ret == NULL) {
3940:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         set_errno(ENOSPC);
3941:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3942:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
3943:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3944:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
3945:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EAFNOSUPPORT);
 9702              		.loc 1 3945 7 discriminator 1
 9703 0046 054B     		ldr	r3, .L727
 9704 0048 6122     		movs	r2, #97
 9705 004a 1A60     		str	r2, [r3]
3946:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9706              		.loc 1 3946 7 discriminator 1
 9707 004c 00E0     		b	.L724
 9708              	.L726:
3934:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
ARM GAS  /tmp/ccsCUhT2.s 			page 242


 9709              		.loc 1 3934 7
 9710 004e 00BF     		nop
 9711              	.L724:
3947:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3948:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return ret;
 9712              		.loc 1 3948 10
 9713 0050 7B69     		ldr	r3, [r7, #20]
 9714              	.L721:
3949:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 9715              		.loc 1 3949 1
 9716 0052 1846     		mov	r0, r3
 9717 0054 1837     		adds	r7, r7, #24
 9718              	.LCFI264:
 9719              		.cfi_def_cfa_offset 8
 9720 0056 BD46     		mov	sp, r7
 9721              	.LCFI265:
 9722              		.cfi_def_cfa_register 13
 9723              		@ sp needed
 9724 0058 80BD     		pop	{r7, pc}
 9725              	.L728:
 9726 005a 00BF     		.align	2
 9727              	.L727:
 9728 005c 00000000 		.word	errno
 9729              		.cfi_endproc
 9730              	.LFE189:
 9732              		.section	.text.lwip_inet_pton,"ax",%progbits
 9733              		.align	1
 9734              		.global	lwip_inet_pton
 9735              		.syntax unified
 9736              		.thumb
 9737              		.thumb_func
 9738              		.fpu fpv4-sp-d16
 9740              	lwip_inet_pton:
 9741              	.LFB190:
3950:Middlewares/Third_Party/LwIP/src/api/sockets.c **** 
3951:Middlewares/Third_Party/LwIP/src/api/sockets.c **** int
3952:Middlewares/Third_Party/LwIP/src/api/sockets.c **** lwip_inet_pton(int af, const char *src, void *dst)
3953:Middlewares/Third_Party/LwIP/src/api/sockets.c **** {
 9742              		.loc 1 3953 1
 9743              		.cfi_startproc
 9744              		@ args = 0, pretend = 0, frame = 24
 9745              		@ frame_needed = 1, uses_anonymous_args = 0
 9746 0000 80B5     		push	{r7, lr}
 9747              	.LCFI266:
 9748              		.cfi_def_cfa_offset 8
 9749              		.cfi_offset 7, -8
 9750              		.cfi_offset 14, -4
 9751 0002 86B0     		sub	sp, sp, #24
 9752              	.LCFI267:
 9753              		.cfi_def_cfa_offset 32
 9754 0004 00AF     		add	r7, sp, #0
 9755              	.LCFI268:
 9756              		.cfi_def_cfa_register 7
 9757 0006 F860     		str	r0, [r7, #12]
 9758 0008 B960     		str	r1, [r7, #8]
 9759 000a 7A60     		str	r2, [r7, #4]
3954:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   int err;
ARM GAS  /tmp/ccsCUhT2.s 			page 243


3955:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   switch (af) {
 9760              		.loc 1 3955 3
 9761 000c FB68     		ldr	r3, [r7, #12]
 9762 000e 022B     		cmp	r3, #2
 9763 0010 05D1     		bne	.L730
3956:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV4
3957:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case AF_INET:
3958:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ip4addr_aton(src, (ip4_addr_t *)dst);
 9764              		.loc 1 3958 13
 9765 0012 7968     		ldr	r1, [r7, #4]
 9766 0014 B868     		ldr	r0, [r7, #8]
 9767 0016 FFF7FEFF 		bl	ip4addr_aton
 9768 001a 7861     		str	r0, [r7, #20]
3959:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9769              		.loc 1 3959 7
 9770 001c 06E0     		b	.L731
 9771              	.L730:
3960:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3961:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #if LWIP_IPV6
3962:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     case AF_INET6: {
3963:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       /* convert into temporary variable since ip6_addr_t might be larger
3964:Middlewares/Third_Party/LwIP/src/api/sockets.c ****          than in6_addr when scopes are enabled */
3965:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       ip6_addr_t addr;
3966:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = ip6addr_aton(src, &addr);
3967:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       if (err) {
3968:Middlewares/Third_Party/LwIP/src/api/sockets.c ****         memcpy(dst, &addr.addr, sizeof(addr.addr));
3969:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       }
3970:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
3971:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     }
3972:Middlewares/Third_Party/LwIP/src/api/sockets.c **** #endif
3973:Middlewares/Third_Party/LwIP/src/api/sockets.c ****     default:
3974:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       err = -1;
 9772              		.loc 1 3974 11
 9773 001e 4FF0FF33 		mov	r3, #-1
 9774 0022 7B61     		str	r3, [r7, #20]
3975:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       set_errno(EAFNOSUPPORT);
 9775              		.loc 1 3975 7
 9776 0024 044B     		ldr	r3, .L733
 9777 0026 6122     		movs	r2, #97
 9778 0028 1A60     		str	r2, [r3]
3976:Middlewares/Third_Party/LwIP/src/api/sockets.c ****       break;
 9779              		.loc 1 3976 7
 9780 002a 00BF     		nop
 9781              	.L731:
3977:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   }
3978:Middlewares/Third_Party/LwIP/src/api/sockets.c ****   return err;
 9782              		.loc 1 3978 10
 9783 002c 7B69     		ldr	r3, [r7, #20]
3979:Middlewares/Third_Party/LwIP/src/api/sockets.c **** }
 9784              		.loc 1 3979 1
 9785 002e 1846     		mov	r0, r3
 9786 0030 1837     		adds	r7, r7, #24
 9787              	.LCFI269:
 9788              		.cfi_def_cfa_offset 8
 9789 0032 BD46     		mov	sp, r7
 9790              	.LCFI270:
 9791              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccsCUhT2.s 			page 244


 9792              		@ sp needed
 9793 0034 80BD     		pop	{r7, pc}
 9794              	.L734:
 9795 0036 00BF     		.align	2
 9796              	.L733:
 9797 0038 00000000 		.word	errno
 9798              		.cfi_endproc
 9799              	.LFE190:
 9801              		.text
 9802              	.Letext0:
 9803              		.file 2 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/machine/_default_typ
 9804              		.file 3 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_stdint.h"
 9805              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 9806              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 9807              		.file 6 "/home/mego-ros2/microros_ws/firmware/toolchain/lib/gcc/arm-none-eabi/8.3.1/include/stddef
 9808              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 9809              		.file 8 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_types.h"
 9810              		.file 9 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/reent.h"
 9811              		.file 10 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/lock.h"
 9812              		.file 11 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/stdlib.h"
 9813              		.file 12 "/home/mego-ros2/microros_ws/firmware/freertos_apps/stm32MakefileTest/lib/include/FreeRTO
 9814              		.file 13 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 9815              		.file 14 "/home/mego-ros2/microros_ws/firmware/freertos_apps/stm32MakefileTest/lib/include/FreeRTO
 9816              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 9817              		.file 16 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/ctype.h"
 9818              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 9819              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 9820              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 9821              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 9822              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 9823              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 9824              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 9825              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/inet.h"
 9826              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/errno.h"
 9827              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/sockets.h"
 9828              		.file 27 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 9829              		.file 28 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 9830              		.file 29 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/sockets_priv.h"
 9831              		.file 30 "Middlewares/Third_Party/LwIP/src/include/lwip/netbuf.h"
 9832              		.file 31 "Middlewares/Third_Party/LwIP/src/include/lwip/api.h"
 9833              		.file 32 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 9834              		.file 33 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 9835              		.file 34 "Middlewares/Third_Party/LwIP/src/include/lwip/udp.h"
 9836              		.file 35 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpbase.h"
 9837              		.file 36 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 9838              		.file 37 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 9839              		.file 38 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
ARM GAS  /tmp/ccsCUhT2.s 			page 245


DEFINED SYMBOLS
                            *ABS*:0000000000000000 sockets.c
     /tmp/ccsCUhT2.s:18     .bss.sockets:0000000000000000 $d
     /tmp/ccsCUhT2.s:21     .bss.sockets:0000000000000000 sockets
     /tmp/ccsCUhT2.s:24     .bss.select_cb_list:0000000000000000 $d
     /tmp/ccsCUhT2.s:27     .bss.select_cb_list:0000000000000000 select_cb_list
     /tmp/ccsCUhT2.s:30     .text.lwip_socket_thread_init:0000000000000000 $t
     /tmp/ccsCUhT2.s:38     .text.lwip_socket_thread_init:0000000000000000 lwip_socket_thread_init
     /tmp/ccsCUhT2.s:68     .text.lwip_socket_thread_cleanup:0000000000000000 $t
     /tmp/ccsCUhT2.s:75     .text.lwip_socket_thread_cleanup:0000000000000000 lwip_socket_thread_cleanup
     /tmp/ccsCUhT2.s:104    .text.tryget_socket_unconn_nouse:0000000000000000 $t
     /tmp/ccsCUhT2.s:110    .text.tryget_socket_unconn_nouse:0000000000000000 tryget_socket_unconn_nouse
     /tmp/ccsCUhT2.s:167    .text.tryget_socket_unconn_nouse:0000000000000030 $d
     /tmp/ccsCUhT2.s:172    .text.lwip_socket_dbg_get_socket:0000000000000000 $t
     /tmp/ccsCUhT2.s:179    .text.lwip_socket_dbg_get_socket:0000000000000000 lwip_socket_dbg_get_socket
     /tmp/ccsCUhT2.s:215    .text.tryget_socket_unconn:0000000000000000 $t
     /tmp/ccsCUhT2.s:221    .text.tryget_socket_unconn:0000000000000000 tryget_socket_unconn
     /tmp/ccsCUhT2.s:259    .text.tryget_socket_unconn_locked:0000000000000000 $t
     /tmp/ccsCUhT2.s:265    .text.tryget_socket_unconn_locked:0000000000000000 tryget_socket_unconn_locked
     /tmp/ccsCUhT2.s:303    .text.tryget_socket:0000000000000000 $t
     /tmp/ccsCUhT2.s:309    .text.tryget_socket:0000000000000000 tryget_socket
     /tmp/ccsCUhT2.s:362    .text.get_socket:0000000000000000 $t
     /tmp/ccsCUhT2.s:368    .text.get_socket:0000000000000000 get_socket
     /tmp/ccsCUhT2.s:418    .text.get_socket:000000000000002c $d
     /tmp/ccsCUhT2.s:423    .rodata:0000000000000000 $d
     /tmp/ccsCUhT2.s:433    .text.alloc_socket:0000000000000000 $t
     /tmp/ccsCUhT2.s:439    .text.alloc_socket:0000000000000000 alloc_socket
     /tmp/ccsCUhT2.s:586    .text.alloc_socket:00000000000000c8 $d
     /tmp/ccsCUhT2.s:594    .text.free_socket_locked:0000000000000000 $t
     /tmp/ccsCUhT2.s:600    .text.free_socket_locked:0000000000000000 free_socket_locked
     /tmp/ccsCUhT2.s:660    .text.free_socket_free_elements:0000000000000000 $t
     /tmp/ccsCUhT2.s:666    .text.free_socket_free_elements:0000000000000000 free_socket_free_elements
     /tmp/ccsCUhT2.s:731    .text.free_socket:0000000000000000 $t
     /tmp/ccsCUhT2.s:737    .text.free_socket:0000000000000000 free_socket
     /tmp/ccsCUhT2.s:801    .text.lwip_accept:0000000000000000 $t
     /tmp/ccsCUhT2.s:808    .text.lwip_accept:0000000000000000 lwip_accept
     /tmp/ccsCUhT2.s:1158   .text.lwip_accept:0000000000000220 $d
     /tmp/ccsCUhT2.s:1173   .text.lwip_bind:0000000000000000 $t
     /tmp/ccsCUhT2.s:1180   .text.lwip_bind:0000000000000000 lwip_bind
     /tmp/ccsCUhT2.s:1321   .text.lwip_bind:00000000000000cc $d
     /tmp/ccsCUhT2.s:1333   .text.lwip_close:0000000000000000 $t
     /tmp/ccsCUhT2.s:1340   .text.lwip_close:0000000000000000 lwip_close
     /tmp/ccsCUhT2.s:1456   .text.lwip_close:000000000000009c $d
     /tmp/ccsCUhT2.s:1468   .text.lwip_connect:0000000000000000 $t
     /tmp/ccsCUhT2.s:1475   .text.lwip_connect:0000000000000000 lwip_connect
     /tmp/ccsCUhT2.s:1640   .text.lwip_connect:00000000000000f0 $d
     /tmp/ccsCUhT2.s:1648   .text.lwip_listen:0000000000000000 $t
     /tmp/ccsCUhT2.s:1655   .text.lwip_listen:0000000000000000 lwip_listen
     /tmp/ccsCUhT2.s:1784   .text.lwip_listen:00000000000000a4 $d
     /tmp/ccsCUhT2.s:1805   .text.lwip_recv_tcp:0000000000000000 $t
     /tmp/ccsCUhT2.s:1811   .text.lwip_recv_tcp:0000000000000000 lwip_recv_tcp
     /tmp/ccsCUhT2.s:2150   .text.lwip_recv_tcp:0000000000000200 $d
     /tmp/ccsCUhT2.s:2172   .text.lwip_sock_make_addr:0000000000000000 $t
     /tmp/ccsCUhT2.s:2178   .text.lwip_sock_make_addr:0000000000000000 lwip_sock_make_addr
     /tmp/ccsCUhT2.s:2310   .text.lwip_sock_make_addr:00000000000000c8 $d
     /tmp/ccsCUhT2.s:2319   .text.lwip_recv_tcp_from:0000000000000000 $t
     /tmp/ccsCUhT2.s:2325   .text.lwip_recv_tcp_from:0000000000000000 lwip_recv_tcp_from
ARM GAS  /tmp/ccsCUhT2.s 			page 246


     /tmp/ccsCUhT2.s:2415   .text.lwip_recvfrom_udp_raw:0000000000000000 $t
     /tmp/ccsCUhT2.s:2421   .text.lwip_recvfrom_udp_raw:0000000000000000 lwip_recvfrom_udp_raw
     /tmp/ccsCUhT2.s:2720   .text.lwip_recvfrom_udp_raw:0000000000000198 $d
     /tmp/ccsCUhT2.s:2732   .text.lwip_recvfrom:0000000000000000 $t
     /tmp/ccsCUhT2.s:2739   .text.lwip_recvfrom:0000000000000000 lwip_recvfrom
     /tmp/ccsCUhT2.s:2942   .text.lwip_recvfrom:000000000000011c $d
     /tmp/ccsCUhT2.s:2949   .text.lwip_read:0000000000000000 $t
     /tmp/ccsCUhT2.s:2956   .text.lwip_read:0000000000000000 lwip_read
     /tmp/ccsCUhT2.s:3001   .text.lwip_readv:0000000000000000 $t
     /tmp/ccsCUhT2.s:3008   .text.lwip_readv:0000000000000000 lwip_readv
     /tmp/ccsCUhT2.s:3137   .text.lwip_recvmsg:0000000000000000 lwip_recvmsg
     /tmp/ccsCUhT2.s:3070   .text.lwip_recv:0000000000000000 $t
     /tmp/ccsCUhT2.s:3077   .text.lwip_recv:0000000000000000 lwip_recv
     /tmp/ccsCUhT2.s:3130   .text.lwip_recvmsg:0000000000000000 $t
     /tmp/ccsCUhT2.s:3538   .text.lwip_recvmsg:0000000000000228 $d
     /tmp/ccsCUhT2.s:3547   .text.lwip_send:0000000000000000 $t
     /tmp/ccsCUhT2.s:3554   .text.lwip_send:0000000000000000 lwip_send
     /tmp/ccsCUhT2.s:4257   .text.lwip_sendto:0000000000000000 lwip_sendto
     /tmp/ccsCUhT2.s:3685   .text.lwip_send:00000000000000b8 $d
     /tmp/ccsCUhT2.s:3706   .text.lwip_sendmsg:0000000000000000 $t
     /tmp/ccsCUhT2.s:3713   .text.lwip_sendmsg:0000000000000000 lwip_sendmsg
     /tmp/ccsCUhT2.s:4118   .text.lwip_sendmsg:0000000000000270 $d
     /tmp/ccsCUhT2.s:4128   .text.lwip_sendmsg:0000000000000290 $t
     /tmp/ccsCUhT2.s:4241   .text.lwip_sendmsg:0000000000000334 $d
     /tmp/ccsCUhT2.s:4250   .text.lwip_sendto:0000000000000000 $t
     /tmp/ccsCUhT2.s:4480   .text.lwip_sendto:0000000000000154 $d
     /tmp/ccsCUhT2.s:4488   .text.lwip_socket:0000000000000000 $t
     /tmp/ccsCUhT2.s:4495   .text.lwip_socket:0000000000000000 lwip_socket
     /tmp/ccsCUhT2.s:4627   .text.lwip_socket:00000000000000ac $d
     /tmp/ccsCUhT2.s:6796   .text.event_callback:0000000000000000 event_callback
     /tmp/ccsCUhT2.s:4633   .text.lwip_write:0000000000000000 $t
     /tmp/ccsCUhT2.s:4640   .text.lwip_write:0000000000000000 lwip_write
     /tmp/ccsCUhT2.s:4681   .text.lwip_writev:0000000000000000 $t
     /tmp/ccsCUhT2.s:4688   .text.lwip_writev:0000000000000000 lwip_writev
     /tmp/ccsCUhT2.s:4750   .text.lwip_link_select_cb:0000000000000000 $t
     /tmp/ccsCUhT2.s:4756   .text.lwip_link_select_cb:0000000000000000 lwip_link_select_cb
     /tmp/ccsCUhT2.s:4815   .text.lwip_link_select_cb:000000000000003c $d
     /tmp/ccsCUhT2.s:4828   .text.lwip_unlink_select_cb:0000000000000000 $t
     /tmp/ccsCUhT2.s:4834   .text.lwip_unlink_select_cb:0000000000000000 lwip_unlink_select_cb
     /tmp/ccsCUhT2.s:4934   .text.lwip_unlink_select_cb:0000000000000078 $d
     /tmp/ccsCUhT2.s:4948   .text.lwip_selscan:0000000000000000 $t
     /tmp/ccsCUhT2.s:4954   .text.lwip_selscan:0000000000000000 lwip_selscan
     /tmp/ccsCUhT2.s:5420   .text.lwip_selscan:000000000000031c $d
     /tmp/ccsCUhT2.s:5431   .text.lwip_select:0000000000000000 $t
     /tmp/ccsCUhT2.s:5438   .text.lwip_select:0000000000000000 lwip_select
     /tmp/ccsCUhT2.s:5829   .text.lwip_select:000000000000026c $d
     /tmp/ccsCUhT2.s:5833   .text.lwip_select:0000000000000274 $t
     /tmp/ccsCUhT2.s:6070   .text.lwip_select:00000000000003fc $d
     /tmp/ccsCUhT2.s:6078   .text.lwip_pollscan:0000000000000000 $t
     /tmp/ccsCUhT2.s:6084   .text.lwip_pollscan:0000000000000000 lwip_pollscan
     /tmp/ccsCUhT2.s:6419   .text.lwip_pollscan:0000000000000208 $d
     /tmp/ccsCUhT2.s:6434   .text.lwip_poll:0000000000000000 $t
     /tmp/ccsCUhT2.s:6441   .text.lwip_poll:0000000000000000 lwip_poll
     /tmp/ccsCUhT2.s:6651   .text.lwip_poll:0000000000000138 $d
     /tmp/ccsCUhT2.s:6660   .text.lwip_poll_should_wake:0000000000000000 $t
     /tmp/ccsCUhT2.s:6666   .text.lwip_poll_should_wake:0000000000000000 lwip_poll_should_wake
     /tmp/ccsCUhT2.s:6790   .text.event_callback:0000000000000000 $t
ARM GAS  /tmp/ccsCUhT2.s 			page 247


     /tmp/ccsCUhT2.s:6887   .text.event_callback:000000000000007c $d
     /tmp/ccsCUhT2.s:6892   .text.event_callback:0000000000000090 $t
     /tmp/ccsCUhT2.s:7072   .text.select_check_waiters:0000000000000000 select_check_waiters
     /tmp/ccsCUhT2.s:7059   .text.event_callback:000000000000016c $d
     /tmp/ccsCUhT2.s:7066   .text.select_check_waiters:0000000000000000 $t
     /tmp/ccsCUhT2.s:7292   .text.select_check_waiters:0000000000000140 $d
     /tmp/ccsCUhT2.s:7297   .text.lwip_shutdown:0000000000000000 $t
     /tmp/ccsCUhT2.s:7304   .text.lwip_shutdown:0000000000000000 lwip_shutdown
     /tmp/ccsCUhT2.s:7484   .text.lwip_shutdown:00000000000000f8 $d
     /tmp/ccsCUhT2.s:7489   .text.lwip_getaddrname:0000000000000000 $t
     /tmp/ccsCUhT2.s:7495   .text.lwip_getaddrname:0000000000000000 lwip_getaddrname
     /tmp/ccsCUhT2.s:7634   .text.lwip_getaddrname:00000000000000d4 $d
     /tmp/ccsCUhT2.s:7639   .text.lwip_getpeername:0000000000000000 $t
     /tmp/ccsCUhT2.s:7646   .text.lwip_getpeername:0000000000000000 lwip_getpeername
     /tmp/ccsCUhT2.s:7687   .text.lwip_getsockname:0000000000000000 $t
     /tmp/ccsCUhT2.s:7694   .text.lwip_getsockname:0000000000000000 lwip_getsockname
     /tmp/ccsCUhT2.s:7735   .text.lwip_getsockopt:0000000000000000 $t
     /tmp/ccsCUhT2.s:7742   .text.lwip_getsockopt:0000000000000000 lwip_getsockopt
     /tmp/ccsCUhT2.s:7946   .text.lwip_getsockopt_impl:0000000000000000 lwip_getsockopt_impl
     /tmp/ccsCUhT2.s:7853   .text.lwip_getsockopt:0000000000000088 $d
     /tmp/ccsCUhT2.s:7863   .text.lwip_sockopt_to_ipopt:0000000000000000 $t
     /tmp/ccsCUhT2.s:7869   .text.lwip_sockopt_to_ipopt:0000000000000000 lwip_sockopt_to_ipopt
     /tmp/ccsCUhT2.s:7933   .text.lwip_sockopt_to_ipopt:0000000000000040 $d
     /tmp/ccsCUhT2.s:7940   .text.lwip_getsockopt_impl:0000000000000000 $t
     /tmp/ccsCUhT2.s:8528   .text.lwip_setsockopt:0000000000000000 $t
     /tmp/ccsCUhT2.s:8535   .text.lwip_setsockopt:0000000000000000 lwip_setsockopt
     /tmp/ccsCUhT2.s:8660   .text.lwip_setsockopt_impl:0000000000000000 lwip_setsockopt_impl
     /tmp/ccsCUhT2.s:8644   .text.lwip_setsockopt:0000000000000088 $d
     /tmp/ccsCUhT2.s:8654   .text.lwip_setsockopt_impl:0000000000000000 $t
     /tmp/ccsCUhT2.s:9228   .text.lwip_setsockopt_impl:0000000000000320 $d
     /tmp/ccsCUhT2.s:9235   .text.lwip_ioctl:0000000000000000 $t
     /tmp/ccsCUhT2.s:9242   .text.lwip_ioctl:0000000000000000 lwip_ioctl
     /tmp/ccsCUhT2.s:9369   .text.lwip_ioctl:000000000000009c $d
     /tmp/ccsCUhT2.s:9375   .text.lwip_fcntl:0000000000000000 $t
     /tmp/ccsCUhT2.s:9382   .text.lwip_fcntl:0000000000000000 lwip_fcntl
     /tmp/ccsCUhT2.s:9629   .text.lwip_fcntl:000000000000014c $d
     /tmp/ccsCUhT2.s:9635   .text.lwip_inet_ntop:0000000000000000 $t
     /tmp/ccsCUhT2.s:9642   .text.lwip_inet_ntop:0000000000000000 lwip_inet_ntop
     /tmp/ccsCUhT2.s:9728   .text.lwip_inet_ntop:000000000000005c $d
     /tmp/ccsCUhT2.s:9733   .text.lwip_inet_pton:0000000000000000 $t
     /tmp/ccsCUhT2.s:9740   .text.lwip_inet_pton:0000000000000000 lwip_inet_pton
     /tmp/ccsCUhT2.s:9797   .text.lwip_inet_pton:0000000000000038 $d

UNDEFINED SYMBOLS
errno
sys_arch_protect
sys_arch_unprotect
printf
pbuf_free
netbuf_delete
netconn_delete
netconn_accept
err_to_errno
sys_mutex_lock
sys_mutex_unlock
netconn_getaddr
lwip_htons
ARM GAS  /tmp/ccsCUhT2.s 			page 248


memset
memcpy
lock_tcpip_core
netconn_bind
netconn_prepare_delete
netconn_disconnect
netconn_connect
netconn_listen_with_backlog
netconn_recv_tcp_pbuf_flags
pbuf_copy_partial
pbuf_free_header
netconn_tcp_recvd
netconn_recv_udp_raw_netbuf_flags
netconn_write_partly
netconn_write_vectors_partly
pbuf_alloc
pbuf_cat
netconn_send
netbuf_free
netbuf_ref
netconn_new_with_proto_and_callback
sys_sem_new
sys_arch_sem_wait
sys_sem_free
sys_sem_signal
netconn_shutdown
netconn_err
netif_find
tcp_bind_netif
udp_bind_netif
ip4addr_ntoa_r
ip4addr_aton
