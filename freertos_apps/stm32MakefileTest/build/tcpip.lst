ARM GAS  /tmp/cc312nRe.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"tcpip.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.bss.tcpip_init_done,"aw",%nobits
  18              		.align	2
  21              	tcpip_init_done:
  22 0000 00000000 		.space	4
  23              		.section	.bss.tcpip_init_done_arg,"aw",%nobits
  24              		.align	2
  27              	tcpip_init_done_arg:
  28 0000 00000000 		.space	4
  29              		.section	.bss.tcpip_mbox,"aw",%nobits
  30              		.align	2
  33              	tcpip_mbox:
  34 0000 00000000 		.space	4
  35              		.comm	lock_tcpip_core,4,4
  36              		.section	.text.tcpip_timeouts_mbox_fetch,"ax",%progbits
  37              		.align	1
  38              		.arch armv7e-m
  39              		.syntax unified
  40              		.thumb
  41              		.thumb_func
  42              		.fpu fpv4-sp-d16
  44              	tcpip_timeouts_mbox_fetch:
  45              	.LFB137:
  46              		.file 1 "Middlewares/Third_Party/LwIP/src/api/tcpip.c"
   1:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
   2:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Sequential API Main thread module
   4:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
   5:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
   6:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
   7:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /*
   8:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
   9:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * All rights reserved.
  10:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  11:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Redistribution and use in source and binary forms, with or without modification,
  12:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * are permitted provided that the following conditions are met:
  13:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  14:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  15:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    this list of conditions and the following disclaimer.
  16:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  17:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    this list of conditions and the following disclaimer in the documentation
  18:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    and/or other materials provided with the distribution.
ARM GAS  /tmp/cc312nRe.s 			page 2


  19:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 3. The name of the author may not be used to endorse or promote products
  20:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *    derived from this software without specific prior written permission.
  21:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  22:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  23:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  24:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  25:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  26:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  27:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  28:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  29:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  30:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  31:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * OF SUCH DAMAGE.
  32:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  33:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * This file is part of the lwIP TCP/IP stack.
  34:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  35:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Author: Adam Dunkels <adam@sics.se>
  36:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  37:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
  38:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  39:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/opt.h"
  40:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  41:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !NO_SYS /* don't build if not configured for use in lwipopts.h */
  42:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  43:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/priv/tcpip_priv.h"
  44:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/sys.h"
  45:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/memp.h"
  46:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/mem.h"
  47:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/init.h"
  48:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/ip.h"
  49:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/pbuf.h"
  50:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "lwip/etharp.h"
  51:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #include "netif/ethernet.h"
  52:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  53:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_REF(name)     API_VAR_REF(name)
  54:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_DECLARE(name) API_VAR_DECLARE(struct tcpip_msg, name)
  55:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_ALLOC(name)   API_VAR_ALLOC(struct tcpip_msg, MEMP_TCPIP_MSG_API, name, ERR_M
  56:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MSG_VAR_FREE(name)    API_VAR_FREE(MEMP_TCPIP_MSG_API, name)
  57:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  58:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* global variables */
  59:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static tcpip_init_done_fn tcpip_init_done;
  60:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void *tcpip_init_done_arg;
  61:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static sys_mbox_t tcpip_mbox;
  62:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  63:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
  64:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /** The global semaphore to lock the stack. */
  65:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** sys_mutex_t lock_tcpip_core;
  66:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
  67:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  68:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void tcpip_thread_handle_msg(struct tcpip_msg *msg);
  69:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  70:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_TIMERS
  71:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* wait for a message with timers disabled (e.g. pass a timer-check trigger into tcpip_thread) */
  72:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MBOX_FETCH(mbox, msg) sys_mbox_fetch(mbox, msg)
  73:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* !LWIP_TIMERS */
  74:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* wait for a message, timeouts are processed while waiting */
  75:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #define TCPIP_MBOX_FETCH(mbox, msg) tcpip_timeouts_mbox_fetch(mbox, msg)
ARM GAS  /tmp/cc312nRe.s 			page 3


  76:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
  77:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Wait (forever) for a message to arrive in an mbox.
  78:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * While waiting, timeouts are processed.
  79:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
  80:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param mbox the mbox to fetch the message from
  81:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msg the place to store the message
  82:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
  83:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void
  84:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_timeouts_mbox_fetch(sys_mbox_t *mbox, void **msg)
  85:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
  47              		.loc 1 85 1
  48              		.cfi_startproc
  49              		@ args = 0, pretend = 0, frame = 16
  50              		@ frame_needed = 1, uses_anonymous_args = 0
  51 0000 80B5     		push	{r7, lr}
  52              	.LCFI0:
  53              		.cfi_def_cfa_offset 8
  54              		.cfi_offset 7, -8
  55              		.cfi_offset 14, -4
  56 0002 84B0     		sub	sp, sp, #16
  57              	.LCFI1:
  58              		.cfi_def_cfa_offset 24
  59 0004 00AF     		add	r7, sp, #0
  60              	.LCFI2:
  61              		.cfi_def_cfa_register 7
  62 0006 7860     		str	r0, [r7, #4]
  63 0008 3960     		str	r1, [r7]
  64              	.L2:
  86:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   u32_t sleeptime, res;
  87:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  88:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** again:
  89:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT_CORE_LOCKED();
  90:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
  91:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sleeptime = sys_timeouts_sleeptime();
  65              		.loc 1 91 15
  66 000a FFF7FEFF 		bl	sys_timeouts_sleeptime
  67 000e F860     		str	r0, [r7, #12]
  92:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sleeptime == SYS_TIMEOUTS_SLEEPTIME_INFINITE) {
  68              		.loc 1 92 6
  69 0010 FB68     		ldr	r3, [r7, #12]
  70 0012 B3F1FF3F 		cmp	r3, #-1
  71 0016 0BD1     		bne	.L3
  93:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     UNLOCK_TCPIP_CORE();
  72              		.loc 1 93 5
  73 0018 1348     		ldr	r0, .L6
  74 001a FFF7FEFF 		bl	sys_mutex_unlock
  94:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     sys_arch_mbox_fetch(mbox, msg, 0);
  75              		.loc 1 94 5
  76 001e 0022     		movs	r2, #0
  77 0020 3968     		ldr	r1, [r7]
  78 0022 7868     		ldr	r0, [r7, #4]
  79 0024 FFF7FEFF 		bl	sys_arch_mbox_fetch
  95:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LOCK_TCPIP_CORE();
  80              		.loc 1 95 5
  81 0028 0F48     		ldr	r0, .L6
  82 002a FFF7FEFF 		bl	sys_mutex_lock
  96:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return;
ARM GAS  /tmp/cc312nRe.s 			page 4


  83              		.loc 1 96 5
  84 002e 18E0     		b	.L1
  85              	.L3:
  97:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   } else if (sleeptime == 0) {
  86              		.loc 1 97 13
  87 0030 FB68     		ldr	r3, [r7, #12]
  88 0032 002B     		cmp	r3, #0
  89 0034 02D1     		bne	.L5
  98:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     sys_check_timeouts();
  90              		.loc 1 98 5
  91 0036 FFF7FEFF 		bl	sys_check_timeouts
  99:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     /* We try again to fetch a message from the mbox. */
 100:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     goto again;
  92              		.loc 1 100 5
  93 003a E6E7     		b	.L2
  94              	.L5:
 101:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 102:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 103:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
  95              		.loc 1 103 3
  96 003c 0A48     		ldr	r0, .L6
  97 003e FFF7FEFF 		bl	sys_mutex_unlock
 104:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   res = sys_arch_mbox_fetch(mbox, msg, sleeptime);
  98              		.loc 1 104 9
  99 0042 FA68     		ldr	r2, [r7, #12]
 100 0044 3968     		ldr	r1, [r7]
 101 0046 7868     		ldr	r0, [r7, #4]
 102 0048 FFF7FEFF 		bl	sys_arch_mbox_fetch
 103 004c B860     		str	r0, [r7, #8]
 105:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 104              		.loc 1 105 3
 105 004e 0648     		ldr	r0, .L6
 106 0050 FFF7FEFF 		bl	sys_mutex_lock
 106:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (res == SYS_ARCH_TIMEOUT) {
 107              		.loc 1 106 6
 108 0054 BB68     		ldr	r3, [r7, #8]
 109 0056 B3F1FF3F 		cmp	r3, #-1
 110 005a 02D1     		bne	.L1
 107:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     /* If a SYS_ARCH_TIMEOUT value is returned, a timeout occurred
 108:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****        before a message could be fetched. */
 109:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     sys_check_timeouts();
 111              		.loc 1 109 5
 112 005c FFF7FEFF 		bl	sys_check_timeouts
 110:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     /* We try again to fetch a message from the mbox. */
 111:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     goto again;
 113              		.loc 1 111 5
 114 0060 D3E7     		b	.L2
 115              	.L1:
 112:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 113:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 116              		.loc 1 113 1
 117 0062 1037     		adds	r7, r7, #16
 118              	.LCFI3:
 119              		.cfi_def_cfa_offset 8
 120 0064 BD46     		mov	sp, r7
 121              	.LCFI4:
 122              		.cfi_def_cfa_register 13
ARM GAS  /tmp/cc312nRe.s 			page 5


 123              		@ sp needed
 124 0066 80BD     		pop	{r7, pc}
 125              	.L7:
 126              		.align	2
 127              	.L6:
 128 0068 00000000 		.word	lock_tcpip_core
 129              		.cfi_endproc
 130              	.LFE137:
 132              		.section	.rodata
 133              		.align	2
 134              	.LC0:
 135 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/api/tcpip.c\000"
 135      6C657761 
 135      7265732F 
 135      54686972 
 135      645F5061 
 136 002d 000000   		.align	2
 137              	.LC1:
 138 0030 74637069 		.ascii	"tcpip_thread: invalid message\000"
 138      705F7468 
 138      72656164 
 138      3A20696E 
 138      76616C69 
 139 004e 0000     		.align	2
 140              	.LC2:
 141 0050 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 141      7274696F 
 141      6E202225 
 141      73222066 
 141      61696C65 
 142              		.section	.text.tcpip_thread,"ax",%progbits
 143              		.align	1
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 149              	tcpip_thread:
 150              	.LFB138:
 114:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* !LWIP_TIMERS */
 115:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 116:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 117:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * The main lwIP thread. This thread has exclusive access to lwIP core functions
 118:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * (unless access to them is not locked). Other threads communicate with this
 119:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * thread using message boxes.
 120:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 121:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * It also starts all the timers to make sure they are running in the right
 122:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * thread context.
 123:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 124:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg unused argument
 125:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 126:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void
 127:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_thread(void *arg)
 128:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 151              		.loc 1 128 1
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 16
 154              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cc312nRe.s 			page 6


 155 0000 80B5     		push	{r7, lr}
 156              	.LCFI5:
 157              		.cfi_def_cfa_offset 8
 158              		.cfi_offset 7, -8
 159              		.cfi_offset 14, -4
 160 0002 84B0     		sub	sp, sp, #16
 161              	.LCFI6:
 162              		.cfi_def_cfa_offset 24
 163 0004 00AF     		add	r7, sp, #0
 164              	.LCFI7:
 165              		.cfi_def_cfa_register 7
 166 0006 7860     		str	r0, [r7, #4]
 129:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 130:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_UNUSED_ARG(arg);
 131:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 132:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_MARK_TCPIP_THREAD();
 133:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 134:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 167              		.loc 1 134 3
 168 0008 1048     		ldr	r0, .L13
 169 000a FFF7FEFF 		bl	sys_mutex_lock
 135:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (tcpip_init_done != NULL) {
 170              		.loc 1 135 23
 171 000e 104B     		ldr	r3, .L13+4
 172 0010 1B68     		ldr	r3, [r3]
 173              		.loc 1 135 6
 174 0012 002B     		cmp	r3, #0
 175 0014 05D0     		beq	.L12
 136:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     tcpip_init_done(tcpip_init_done_arg);
 176              		.loc 1 136 5
 177 0016 0E4B     		ldr	r3, .L13+4
 178 0018 1B68     		ldr	r3, [r3]
 179 001a 0E4A     		ldr	r2, .L13+8
 180 001c 1268     		ldr	r2, [r2]
 181 001e 1046     		mov	r0, r2
 182 0020 9847     		blx	r3
 183              	.LVL0:
 184              	.L12:
 137:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 138:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 139:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   while (1) {                          /* MAIN Loop */
 140:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_TCPIP_THREAD_ALIVE();
 141:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     /* wait for a message, timeouts are processed while waiting */
 142:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     TCPIP_MBOX_FETCH(&tcpip_mbox, (void **)&msg);
 185              		.loc 1 142 5
 186 0022 07F10C03 		add	r3, r7, #12
 187 0026 1946     		mov	r1, r3
 188 0028 0B48     		ldr	r0, .L13+12
 189 002a FFF7FEFF 		bl	tcpip_timeouts_mbox_fetch
 143:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     if (msg == NULL) {
 190              		.loc 1 143 13
 191 002e FB68     		ldr	r3, [r7, #12]
 192              		.loc 1 143 8
 193 0030 002B     		cmp	r3, #0
 194 0032 06D1     		bne	.L10
 144:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: invalid message: NULL\n"));
 145:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_ASSERT("tcpip_thread: invalid message", 0);
ARM GAS  /tmp/cc312nRe.s 			page 7


 195              		.loc 1 145 7 discriminator 1
 196 0034 094B     		ldr	r3, .L13+16
 197 0036 9122     		movs	r2, #145
 198 0038 0949     		ldr	r1, .L13+20
 199 003a 0A48     		ldr	r0, .L13+24
 200 003c FFF7FEFF 		bl	printf
 146:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       continue;
 201              		.loc 1 146 7 discriminator 1
 202 0040 03E0     		b	.L11
 203              	.L10:
 147:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     }
 148:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     tcpip_thread_handle_msg(msg);
 204              		.loc 1 148 5
 205 0042 FB68     		ldr	r3, [r7, #12]
 206 0044 1846     		mov	r0, r3
 207 0046 FFF7FEFF 		bl	tcpip_thread_handle_msg
 208              	.L11:
 142:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     if (msg == NULL) {
 209              		.loc 1 142 5
 210 004a EAE7     		b	.L12
 211              	.L14:
 212              		.align	2
 213              	.L13:
 214 004c 00000000 		.word	lock_tcpip_core
 215 0050 00000000 		.word	tcpip_init_done
 216 0054 00000000 		.word	tcpip_init_done_arg
 217 0058 00000000 		.word	tcpip_mbox
 218 005c 00000000 		.word	.LC0
 219 0060 30000000 		.word	.LC1
 220 0064 50000000 		.word	.LC2
 221              		.cfi_endproc
 222              	.LFE138:
 224              		.section	.text.tcpip_thread_handle_msg,"ax",%progbits
 225              		.align	1
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu fpv4-sp-d16
 231              	tcpip_thread_handle_msg:
 232              	.LFB139:
 149:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 150:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 151:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 152:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /* Handle a single tcpip_msg
 153:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * This is in its own function for access by tests only.
 154:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 155:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void
 156:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_thread_handle_msg(struct tcpip_msg *msg)
 157:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 233              		.loc 1 157 1
 234              		.cfi_startproc
 235              		@ args = 0, pretend = 0, frame = 8
 236              		@ frame_needed = 1, uses_anonymous_args = 0
 237 0000 80B5     		push	{r7, lr}
 238              	.LCFI8:
 239              		.cfi_def_cfa_offset 8
 240              		.cfi_offset 7, -8
ARM GAS  /tmp/cc312nRe.s 			page 8


 241              		.cfi_offset 14, -4
 242 0002 82B0     		sub	sp, sp, #8
 243              	.LCFI9:
 244              		.cfi_def_cfa_offset 16
 245 0004 00AF     		add	r7, sp, #0
 246              	.LCFI10:
 247              		.cfi_def_cfa_register 7
 248 0006 7860     		str	r0, [r7, #4]
 158:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   switch (msg->type) {
 249              		.loc 1 158 14
 250 0008 7B68     		ldr	r3, [r7, #4]
 251 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 252              		.loc 1 158 3
 253 000c 012B     		cmp	r3, #1
 254 000e 18D0     		beq	.L16
 255 0010 022B     		cmp	r3, #2
 256 0012 21D0     		beq	.L17
 257 0014 002B     		cmp	r3, #0
 258 0016 26D1     		bne	.L21
 159:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_TCPIP_CORE_LOCKING
 160:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_API:
 161:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: API message %p\n", (void *)msg));
 162:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.api_msg.function(msg->msg.api_msg.msg);
 163:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 164:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_API_CALL:
 165:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: API CALL message %p\n", (void *)msg));
 166:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.api_call.arg->err = msg->msg.api_call.function(msg->msg.api_call.arg);
 167:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       sys_sem_signal(msg->msg.api_call.sem);
 168:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 169:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING */
 170:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 171:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_TCPIP_CORE_LOCKING_INPUT
 172:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_INPKT:
 173:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: PACKET %p\n", (void *)msg));
 174:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       if (msg->msg.inp.input_fn(msg->msg.inp.p, msg->msg.inp.netif) != ERR_OK) {
 259              		.loc 1 174 23
 260 0018 7B68     		ldr	r3, [r7, #4]
 261 001a DB68     		ldr	r3, [r3, #12]
 262              		.loc 1 174 11
 263 001c 7A68     		ldr	r2, [r7, #4]
 264 001e 5068     		ldr	r0, [r2, #4]
 265 0020 7A68     		ldr	r2, [r7, #4]
 266 0022 9268     		ldr	r2, [r2, #8]
 267 0024 1146     		mov	r1, r2
 268 0026 9847     		blx	r3
 269              	.LVL1:
 270 0028 0346     		mov	r3, r0
 271              		.loc 1 174 10
 272 002a 002B     		cmp	r3, #0
 273 002c 04D0     		beq	.L19
 175:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****         pbuf_free(msg->msg.inp.p);
 274              		.loc 1 175 9
 275 002e 7B68     		ldr	r3, [r7, #4]
 276 0030 5B68     		ldr	r3, [r3, #4]
 277 0032 1846     		mov	r0, r3
 278 0034 FFF7FEFF 		bl	pbuf_free
 279              	.L19:
ARM GAS  /tmp/cc312nRe.s 			page 9


 176:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       }
 177:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_INPKT, msg);
 280              		.loc 1 177 7
 281 0038 7968     		ldr	r1, [r7, #4]
 282 003a 0920     		movs	r0, #9
 283 003c FFF7FEFF 		bl	memp_free
 178:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 284              		.loc 1 178 7
 285 0040 18E0     		b	.L20
 286              	.L16:
 179:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* !LWIP_TCPIP_CORE_LOCKING_INPUT */
 180:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 181:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_TIMEOUT && LWIP_TIMERS
 182:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_TIMEOUT:
 183:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: TIMEOUT %p\n", (void *)msg));
 184:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       sys_timeout(msg->msg.tmo.msecs, msg->msg.tmo.h, msg->msg.tmo.arg);
 185:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 186:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 187:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_UNTIMEOUT:
 188:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: UNTIMEOUT %p\n", (void *)msg));
 189:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       sys_untimeout(msg->msg.tmo.h, msg->msg.tmo.arg);
 190:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 191:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 192:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_TIMEOUT && LWIP_TIMERS */
 193:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 194:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_CALLBACK:
 195:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: CALLBACK %p\n", (void *)msg));
 196:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.cb.function(msg->msg.cb.ctx);
 287              		.loc 1 196 18
 288 0042 7B68     		ldr	r3, [r7, #4]
 289 0044 5B68     		ldr	r3, [r3, #4]
 290              		.loc 1 196 7
 291 0046 7A68     		ldr	r2, [r7, #4]
 292 0048 9268     		ldr	r2, [r2, #8]
 293 004a 1046     		mov	r0, r2
 294 004c 9847     		blx	r3
 295              	.LVL2:
 197:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       memp_free(MEMP_TCPIP_MSG_API, msg);
 296              		.loc 1 197 7
 297 004e 7968     		ldr	r1, [r7, #4]
 298 0050 0820     		movs	r0, #8
 299 0052 FFF7FEFF 		bl	memp_free
 198:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 300              		.loc 1 198 7
 301 0056 0DE0     		b	.L20
 302              	.L17:
 199:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 200:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     case TCPIP_MSG_CALLBACK_STATIC:
 201:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: CALLBACK_STATIC %p\n", (void *)msg));
 202:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       msg->msg.cb.function(msg->msg.cb.ctx);
 303              		.loc 1 202 18
 304 0058 7B68     		ldr	r3, [r7, #4]
 305 005a 5B68     		ldr	r3, [r3, #4]
 306              		.loc 1 202 7
 307 005c 7A68     		ldr	r2, [r7, #4]
 308 005e 9268     		ldr	r2, [r2, #8]
 309 0060 1046     		mov	r0, r2
ARM GAS  /tmp/cc312nRe.s 			page 10


 310 0062 9847     		blx	r3
 311              	.LVL3:
 203:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 312              		.loc 1 203 7
 313 0064 06E0     		b	.L20
 314              	.L21:
 204:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 205:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     default:
 206:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_thread: invalid message: %d\n", msg->type));
 207:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       LWIP_ASSERT("tcpip_thread: invalid message", 0);
 315              		.loc 1 207 7 discriminator 1
 316 0066 054B     		ldr	r3, .L22
 317 0068 CF22     		movs	r2, #207
 318 006a 0549     		ldr	r1, .L22+4
 319 006c 0548     		ldr	r0, .L22+8
 320 006e FFF7FEFF 		bl	printf
 208:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       break;
 321              		.loc 1 208 7 discriminator 1
 322 0072 00BF     		nop
 323              	.L20:
 209:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 210:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 324              		.loc 1 210 1
 325 0074 00BF     		nop
 326 0076 0837     		adds	r7, r7, #8
 327              	.LCFI11:
 328              		.cfi_def_cfa_offset 8
 329 0078 BD46     		mov	sp, r7
 330              	.LCFI12:
 331              		.cfi_def_cfa_register 13
 332              		@ sp needed
 333 007a 80BD     		pop	{r7, pc}
 334              	.L23:
 335              		.align	2
 336              	.L22:
 337 007c 00000000 		.word	.LC0
 338 0080 30000000 		.word	.LC1
 339 0084 50000000 		.word	.LC2
 340              		.cfi_endproc
 341              	.LFE139:
 343              		.section	.rodata
 344              		.align	2
 345              	.LC3:
 346 0078 496E7661 		.ascii	"Invalid mbox\000"
 346      6C696420 
 346      6D626F78 
 346      00
 347              		.section	.text.tcpip_inpkt,"ax",%progbits
 348              		.align	1
 349              		.global	tcpip_inpkt
 350              		.syntax unified
 351              		.thumb
 352              		.thumb_func
 353              		.fpu fpv4-sp-d16
 355              	tcpip_inpkt:
 356              	.LFB140:
 211:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
ARM GAS  /tmp/cc312nRe.s 			page 11


 212:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #ifdef TCPIP_THREAD_TEST
 213:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /** Work on queued items in single-threaded test mode */
 214:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** int
 215:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_thread_poll_one(void)
 216:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 217:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   int ret = 0;
 218:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 219:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 220:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_arch_mbox_tryfetch(&tcpip_mbox, (void **)&msg) != SYS_ARCH_TIMEOUT) {
 221:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LOCK_TCPIP_CORE();
 222:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     if (msg != NULL) {
 223:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       tcpip_thread_handle_msg(msg);
 224:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****       ret = 1;
 225:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     }
 226:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     UNLOCK_TCPIP_CORE();
 227:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 228:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ret;
 229:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 230:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif
 231:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 232:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 233:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Pass a received packet to tcpip_thread for input processing
 234:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 235:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p the received packet
 236:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param inp the network interface on which the packet was received
 237:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param input_fn input function to call
 238:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 239:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 240:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_inpkt(struct pbuf *p, struct netif *inp, netif_input_fn input_fn)
 241:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 357              		.loc 1 241 1
 358              		.cfi_startproc
 359              		@ args = 0, pretend = 0, frame = 24
 360              		@ frame_needed = 1, uses_anonymous_args = 0
 361 0000 80B5     		push	{r7, lr}
 362              	.LCFI13:
 363              		.cfi_def_cfa_offset 8
 364              		.cfi_offset 7, -8
 365              		.cfi_offset 14, -4
 366 0002 86B0     		sub	sp, sp, #24
 367              	.LCFI14:
 368              		.cfi_def_cfa_offset 32
 369 0004 00AF     		add	r7, sp, #0
 370              	.LCFI15:
 371              		.cfi_def_cfa_register 7
 372 0006 F860     		str	r0, [r7, #12]
 373 0008 B960     		str	r1, [r7, #8]
 374 000a 7A60     		str	r2, [r7, #4]
 242:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING_INPUT
 243:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err_t ret;
 244:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_DEBUGF(TCPIP_DEBUG, ("tcpip_inpkt: PACKET %p/%p\n", (void *)p, (void *)inp));
 245:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 246:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   ret = input_fn(p, inp);
 247:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 248:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ret;
 249:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TCPIP_CORE_LOCKING_INPUT */
 250:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
ARM GAS  /tmp/cc312nRe.s 			page 12


 251:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 252:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 375              		.loc 1 252 3
 376 000c 1A48     		ldr	r0, .L29
 377 000e FFF7FEFF 		bl	sys_mbox_valid
 378 0012 0346     		mov	r3, r0
 379 0014 002B     		cmp	r3, #0
 380 0016 05D1     		bne	.L25
 381              		.loc 1 252 3 is_stmt 0 discriminator 1
 382 0018 184B     		ldr	r3, .L29+4
 383 001a FC22     		movs	r2, #252
 384 001c 1849     		ldr	r1, .L29+8
 385 001e 1948     		ldr	r0, .L29+12
 386 0020 FFF7FEFF 		bl	printf
 387              	.L25:
 253:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 254:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_INPKT);
 388              		.loc 1 254 29 is_stmt 1
 389 0024 0920     		movs	r0, #9
 390 0026 FFF7FEFF 		bl	memp_malloc
 391 002a 7861     		str	r0, [r7, #20]
 255:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 392              		.loc 1 255 6
 393 002c 7B69     		ldr	r3, [r7, #20]
 394 002e 002B     		cmp	r3, #0
 395 0030 02D1     		bne	.L26
 256:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 396              		.loc 1 256 12
 397 0032 4FF0FF33 		mov	r3, #-1
 398 0036 1AE0     		b	.L27
 399              	.L26:
 257:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 258:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 259:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_INPKT;
 400              		.loc 1 259 13
 401 0038 7B69     		ldr	r3, [r7, #20]
 402 003a 0022     		movs	r2, #0
 403 003c 1A70     		strb	r2, [r3]
 260:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.p = p;
 404              		.loc 1 260 18
 405 003e 7B69     		ldr	r3, [r7, #20]
 406 0040 FA68     		ldr	r2, [r7, #12]
 407 0042 5A60     		str	r2, [r3, #4]
 261:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.netif = inp;
 408              		.loc 1 261 22
 409 0044 7B69     		ldr	r3, [r7, #20]
 410 0046 BA68     		ldr	r2, [r7, #8]
 411 0048 9A60     		str	r2, [r3, #8]
 262:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.inp.input_fn = input_fn;
 412              		.loc 1 262 25
 413 004a 7B69     		ldr	r3, [r7, #20]
 414 004c 7A68     		ldr	r2, [r7, #4]
 415 004e DA60     		str	r2, [r3, #12]
 263:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_trypost(&tcpip_mbox, msg) != ERR_OK) {
 416              		.loc 1 263 7
 417 0050 7969     		ldr	r1, [r7, #20]
 418 0052 0948     		ldr	r0, .L29
ARM GAS  /tmp/cc312nRe.s 			page 13


 419 0054 FFF7FEFF 		bl	sys_mbox_trypost
 420 0058 0346     		mov	r3, r0
 421              		.loc 1 263 6
 422 005a 002B     		cmp	r3, #0
 423 005c 06D0     		beq	.L28
 264:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     memp_free(MEMP_TCPIP_MSG_INPKT, msg);
 424              		.loc 1 264 5
 425 005e 7969     		ldr	r1, [r7, #20]
 426 0060 0920     		movs	r0, #9
 427 0062 FFF7FEFF 		bl	memp_free
 265:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 428              		.loc 1 265 12
 429 0066 4FF0FF33 		mov	r3, #-1
 430 006a 00E0     		b	.L27
 431              	.L28:
 266:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 267:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 432              		.loc 1 267 10
 433 006c 0023     		movs	r3, #0
 434              	.L27:
 268:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING_INPUT */
 269:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 435              		.loc 1 269 1
 436 006e 1846     		mov	r0, r3
 437 0070 1837     		adds	r7, r7, #24
 438              	.LCFI16:
 439              		.cfi_def_cfa_offset 8
 440 0072 BD46     		mov	sp, r7
 441              	.LCFI17:
 442              		.cfi_def_cfa_register 13
 443              		@ sp needed
 444 0074 80BD     		pop	{r7, pc}
 445              	.L30:
 446 0076 00BF     		.align	2
 447              	.L29:
 448 0078 00000000 		.word	tcpip_mbox
 449 007c 00000000 		.word	.LC0
 450 0080 78000000 		.word	.LC3
 451 0084 50000000 		.word	.LC2
 452              		.cfi_endproc
 453              	.LFE140:
 455              		.section	.text.tcpip_input,"ax",%progbits
 456              		.align	1
 457              		.global	tcpip_input
 458              		.syntax unified
 459              		.thumb
 460              		.thumb_func
 461              		.fpu fpv4-sp-d16
 463              	tcpip_input:
 464              	.LFB141:
 270:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 271:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 272:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 273:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Pass a received packet to tcpip_thread for input processing with
 274:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * ethernet_input or ip_input. Don't call directly, pass to netif_add()
 275:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * and call netif->input().
 276:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
ARM GAS  /tmp/cc312nRe.s 			page 14


 277:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p the received packet, p->payload pointing to the Ethernet header or
 278:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *          to an IP header (if inp doesn't have NETIF_FLAG_ETHARP or
 279:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *          NETIF_FLAG_ETHERNET flags)
 280:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param inp the network interface on which the packet was received
 281:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 282:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 283:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_input(struct pbuf *p, struct netif *inp)
 284:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 465              		.loc 1 284 1
 466              		.cfi_startproc
 467              		@ args = 0, pretend = 0, frame = 8
 468              		@ frame_needed = 1, uses_anonymous_args = 0
 469 0000 80B5     		push	{r7, lr}
 470              	.LCFI18:
 471              		.cfi_def_cfa_offset 8
 472              		.cfi_offset 7, -8
 473              		.cfi_offset 14, -4
 474 0002 82B0     		sub	sp, sp, #8
 475              	.LCFI19:
 476              		.cfi_def_cfa_offset 16
 477 0004 00AF     		add	r7, sp, #0
 478              	.LCFI20:
 479              		.cfi_def_cfa_register 7
 480 0006 7860     		str	r0, [r7, #4]
 481 0008 3960     		str	r1, [r7]
 285:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_ETHERNET
 286:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (inp->flags & (NETIF_FLAG_ETHARP | NETIF_FLAG_ETHERNET)) {
 482              		.loc 1 286 10
 483 000a 3B68     		ldr	r3, [r7]
 484 000c 93F83130 		ldrb	r3, [r3, #49]	@ zero_extendqisi2
 485              		.loc 1 286 18
 486 0010 03F01803 		and	r3, r3, #24
 487              		.loc 1 286 6
 488 0014 002B     		cmp	r3, #0
 489 0016 06D0     		beq	.L32
 287:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return tcpip_inpkt(p, inp, ethernet_input);
 490              		.loc 1 287 12
 491 0018 084A     		ldr	r2, .L34
 492 001a 3968     		ldr	r1, [r7]
 493 001c 7868     		ldr	r0, [r7, #4]
 494 001e FFF7FEFF 		bl	tcpip_inpkt
 495 0022 0346     		mov	r3, r0
 496 0024 05E0     		b	.L33
 497              	.L32:
 288:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   } else
 289:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_ETHERNET */
 290:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return tcpip_inpkt(p, inp, ip_input);
 498              		.loc 1 290 12
 499 0026 064A     		ldr	r2, .L34+4
 500 0028 3968     		ldr	r1, [r7]
 501 002a 7868     		ldr	r0, [r7, #4]
 502 002c FFF7FEFF 		bl	tcpip_inpkt
 503 0030 0346     		mov	r3, r0
 504              	.L33:
 291:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 505              		.loc 1 291 1
 506 0032 1846     		mov	r0, r3
ARM GAS  /tmp/cc312nRe.s 			page 15


 507 0034 0837     		adds	r7, r7, #8
 508              	.LCFI21:
 509              		.cfi_def_cfa_offset 8
 510 0036 BD46     		mov	sp, r7
 511              	.LCFI22:
 512              		.cfi_def_cfa_register 13
 513              		@ sp needed
 514 0038 80BD     		pop	{r7, pc}
 515              	.L35:
 516 003a 00BF     		.align	2
 517              	.L34:
 518 003c 00000000 		.word	ethernet_input
 519 0040 00000000 		.word	ip4_input
 520              		.cfi_endproc
 521              	.LFE141:
 523              		.section	.text.tcpip_callback,"ax",%progbits
 524              		.align	1
 525              		.global	tcpip_callback
 526              		.syntax unified
 527              		.thumb
 528              		.thumb_func
 529              		.fpu fpv4-sp-d16
 531              	tcpip_callback:
 532              	.LFB142:
 292:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 293:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 294:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 295:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Call a specific function in the thread context of
 296:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * tcpip_thread for easy access synchronization.
 297:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A function called in that way may access lwIP core code
 298:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * without fearing concurrent access.
 299:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Blocks until the request is posted.
 300:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Must not be called from interrupt context!
 301:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 302:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param function the function to call
 303:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param ctx parameter passed to f
 304:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if the function was called, another err_t if not
 305:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 306:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_try_callback
 307:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 308:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 309:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callback(tcpip_callback_fn function, void *ctx)
 310:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 533              		.loc 1 310 1
 534              		.cfi_startproc
 535              		@ args = 0, pretend = 0, frame = 16
 536              		@ frame_needed = 1, uses_anonymous_args = 0
 537 0000 80B5     		push	{r7, lr}
 538              	.LCFI23:
 539              		.cfi_def_cfa_offset 8
 540              		.cfi_offset 7, -8
 541              		.cfi_offset 14, -4
 542 0002 84B0     		sub	sp, sp, #16
 543              	.LCFI24:
 544              		.cfi_def_cfa_offset 24
 545 0004 00AF     		add	r7, sp, #0
 546              	.LCFI25:
ARM GAS  /tmp/cc312nRe.s 			page 16


 547              		.cfi_def_cfa_register 7
 548 0006 7860     		str	r0, [r7, #4]
 549 0008 3960     		str	r1, [r7]
 311:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 312:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 313:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 550              		.loc 1 313 3
 551 000a 1448     		ldr	r0, .L40
 552 000c FFF7FEFF 		bl	sys_mbox_valid
 553 0010 0346     		mov	r3, r0
 554 0012 002B     		cmp	r3, #0
 555 0014 06D1     		bne	.L37
 556              		.loc 1 313 3 is_stmt 0 discriminator 1
 557 0016 124B     		ldr	r3, .L40+4
 558 0018 40F23912 		movw	r2, #313
 559 001c 1149     		ldr	r1, .L40+8
 560 001e 1248     		ldr	r0, .L40+12
 561 0020 FFF7FEFF 		bl	printf
 562              	.L37:
 314:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 315:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 563              		.loc 1 315 29 is_stmt 1
 564 0024 0820     		movs	r0, #8
 565 0026 FFF7FEFF 		bl	memp_malloc
 566 002a F860     		str	r0, [r7, #12]
 316:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 567              		.loc 1 316 6
 568 002c FB68     		ldr	r3, [r7, #12]
 569 002e 002B     		cmp	r3, #0
 570 0030 02D1     		bne	.L38
 317:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 571              		.loc 1 317 12
 572 0032 4FF0FF33 		mov	r3, #-1
 573 0036 0DE0     		b	.L39
 574              	.L38:
 318:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 319:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 320:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_CALLBACK;
 575              		.loc 1 320 13
 576 0038 FB68     		ldr	r3, [r7, #12]
 577 003a 0122     		movs	r2, #1
 578 003c 1A70     		strb	r2, [r3]
 321:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 579              		.loc 1 321 24
 580 003e FB68     		ldr	r3, [r7, #12]
 581 0040 7A68     		ldr	r2, [r7, #4]
 582 0042 5A60     		str	r2, [r3, #4]
 322:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 583              		.loc 1 322 19
 584 0044 FB68     		ldr	r3, [r7, #12]
 585 0046 3A68     		ldr	r2, [r7]
 586 0048 9A60     		str	r2, [r3, #8]
 323:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 324:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&tcpip_mbox, msg);
 587              		.loc 1 324 3
 588 004a F968     		ldr	r1, [r7, #12]
 589 004c 0348     		ldr	r0, .L40
ARM GAS  /tmp/cc312nRe.s 			page 17


 590 004e FFF7FEFF 		bl	sys_mbox_post
 325:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 591              		.loc 1 325 10
 592 0052 0023     		movs	r3, #0
 593              	.L39:
 326:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 594              		.loc 1 326 1
 595 0054 1846     		mov	r0, r3
 596 0056 1037     		adds	r7, r7, #16
 597              	.LCFI26:
 598              		.cfi_def_cfa_offset 8
 599 0058 BD46     		mov	sp, r7
 600              	.LCFI27:
 601              		.cfi_def_cfa_register 13
 602              		@ sp needed
 603 005a 80BD     		pop	{r7, pc}
 604              	.L41:
 605              		.align	2
 606              	.L40:
 607 005c 00000000 		.word	tcpip_mbox
 608 0060 00000000 		.word	.LC0
 609 0064 78000000 		.word	.LC3
 610 0068 50000000 		.word	.LC2
 611              		.cfi_endproc
 612              	.LFE142:
 614              		.section	.text.tcpip_try_callback,"ax",%progbits
 615              		.align	1
 616              		.global	tcpip_try_callback
 617              		.syntax unified
 618              		.thumb
 619              		.thumb_func
 620              		.fpu fpv4-sp-d16
 622              	tcpip_try_callback:
 623              	.LFB143:
 327:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 328:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 329:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 330:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Call a specific function in the thread context of
 331:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * tcpip_thread for easy access synchronization.
 332:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A function called in that way may access lwIP core code
 333:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * without fearing concurrent access.
 334:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Does NOT block when the request cannot be posted because the
 335:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * tcpip_mbox is full, but returns ERR_MEM instead.
 336:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Can be called from interrupt context.
 337:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 338:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param function the function to call
 339:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param ctx parameter passed to f
 340:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if the function was called, another err_t if not
 341:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 342:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_callback
 343:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 344:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 345:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_try_callback(tcpip_callback_fn function, void *ctx)
 346:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 624              		.loc 1 346 1
 625              		.cfi_startproc
 626              		@ args = 0, pretend = 0, frame = 16
ARM GAS  /tmp/cc312nRe.s 			page 18


 627              		@ frame_needed = 1, uses_anonymous_args = 0
 628 0000 80B5     		push	{r7, lr}
 629              	.LCFI28:
 630              		.cfi_def_cfa_offset 8
 631              		.cfi_offset 7, -8
 632              		.cfi_offset 14, -4
 633 0002 84B0     		sub	sp, sp, #16
 634              	.LCFI29:
 635              		.cfi_def_cfa_offset 24
 636 0004 00AF     		add	r7, sp, #0
 637              	.LCFI30:
 638              		.cfi_def_cfa_register 7
 639 0006 7860     		str	r0, [r7, #4]
 640 0008 3960     		str	r1, [r7]
 347:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 348:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 349:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 641              		.loc 1 349 3
 642 000a 1948     		ldr	r0, .L47
 643 000c FFF7FEFF 		bl	sys_mbox_valid
 644 0010 0346     		mov	r3, r0
 645 0012 002B     		cmp	r3, #0
 646 0014 06D1     		bne	.L43
 647              		.loc 1 349 3 is_stmt 0 discriminator 1
 648 0016 174B     		ldr	r3, .L47+4
 649 0018 40F25D12 		movw	r2, #349
 650 001c 1649     		ldr	r1, .L47+8
 651 001e 1748     		ldr	r0, .L47+12
 652 0020 FFF7FEFF 		bl	printf
 653              	.L43:
 350:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 351:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 654              		.loc 1 351 29 is_stmt 1
 655 0024 0820     		movs	r0, #8
 656 0026 FFF7FEFF 		bl	memp_malloc
 657 002a F860     		str	r0, [r7, #12]
 352:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 658              		.loc 1 352 6
 659 002c FB68     		ldr	r3, [r7, #12]
 660 002e 002B     		cmp	r3, #0
 661 0030 02D1     		bne	.L44
 353:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 662              		.loc 1 353 12
 663 0032 4FF0FF33 		mov	r3, #-1
 664 0036 17E0     		b	.L45
 665              	.L44:
 354:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 355:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 356:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_CALLBACK;
 666              		.loc 1 356 13
 667 0038 FB68     		ldr	r3, [r7, #12]
 668 003a 0122     		movs	r2, #1
 669 003c 1A70     		strb	r2, [r3]
 357:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 670              		.loc 1 357 24
 671 003e FB68     		ldr	r3, [r7, #12]
 672 0040 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/cc312nRe.s 			page 19


 673 0042 5A60     		str	r2, [r3, #4]
 358:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 674              		.loc 1 358 19
 675 0044 FB68     		ldr	r3, [r7, #12]
 676 0046 3A68     		ldr	r2, [r7]
 677 0048 9A60     		str	r2, [r3, #8]
 359:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 360:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_trypost(&tcpip_mbox, msg) != ERR_OK) {
 678              		.loc 1 360 7
 679 004a F968     		ldr	r1, [r7, #12]
 680 004c 0848     		ldr	r0, .L47
 681 004e FFF7FEFF 		bl	sys_mbox_trypost
 682 0052 0346     		mov	r3, r0
 683              		.loc 1 360 6
 684 0054 002B     		cmp	r3, #0
 685 0056 06D0     		beq	.L46
 361:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     memp_free(MEMP_TCPIP_MSG_API, msg);
 686              		.loc 1 361 5
 687 0058 F968     		ldr	r1, [r7, #12]
 688 005a 0820     		movs	r0, #8
 689 005c FFF7FEFF 		bl	memp_free
 362:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 690              		.loc 1 362 12
 691 0060 4FF0FF33 		mov	r3, #-1
 692 0064 00E0     		b	.L45
 693              	.L46:
 363:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 364:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 694              		.loc 1 364 10
 695 0066 0023     		movs	r3, #0
 696              	.L45:
 365:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 697              		.loc 1 365 1
 698 0068 1846     		mov	r0, r3
 699 006a 1037     		adds	r7, r7, #16
 700              	.LCFI31:
 701              		.cfi_def_cfa_offset 8
 702 006c BD46     		mov	sp, r7
 703              	.LCFI32:
 704              		.cfi_def_cfa_register 13
 705              		@ sp needed
 706 006e 80BD     		pop	{r7, pc}
 707              	.L48:
 708              		.align	2
 709              	.L47:
 710 0070 00000000 		.word	tcpip_mbox
 711 0074 00000000 		.word	.LC0
 712 0078 78000000 		.word	.LC3
 713 007c 50000000 		.word	.LC2
 714              		.cfi_endproc
 715              	.LFE143:
 717              		.section	.text.tcpip_send_msg_wait_sem,"ax",%progbits
 718              		.align	1
 719              		.global	tcpip_send_msg_wait_sem
 720              		.syntax unified
 721              		.thumb
 722              		.thumb_func
ARM GAS  /tmp/cc312nRe.s 			page 20


 723              		.fpu fpv4-sp-d16
 725              	tcpip_send_msg_wait_sem:
 726              	.LFB144:
 366:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 367:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_TIMEOUT && LWIP_TIMERS
 368:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 369:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * call sys_timeout in tcpip_thread
 370:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 371:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msecs time in milliseconds for timeout
 372:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param h function to be called on timeout
 373:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg argument to pass to timeout function h
 374:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_MEM on memory error, ERR_OK otherwise
 375:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 376:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 377:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_timeout(u32_t msecs, sys_timeout_handler h, void *arg)
 378:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 379:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 380:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 381:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 382:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 383:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 384:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 385:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 386:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 387:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 388:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_TIMEOUT;
 389:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.msecs = msecs;
 390:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.h = h;
 391:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.arg = arg;
 392:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&tcpip_mbox, msg);
 393:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 394:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 395:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 396:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 397:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * call sys_untimeout in tcpip_thread
 398:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 399:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param h function to be called on timeout
 400:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg argument to pass to timeout function h
 401:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_MEM on memory error, ERR_OK otherwise
 402:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 403:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 404:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_untimeout(sys_timeout_handler h, void *arg)
 405:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 406:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg;
 407:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 408:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 409:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 410:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 411:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 412:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return ERR_MEM;
 413:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 414:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 415:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_UNTIMEOUT;
 416:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.h = h;
 417:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.tmo.arg = arg;
 418:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&tcpip_mbox, msg);
 419:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
ARM GAS  /tmp/cc312nRe.s 			page 21


 420:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 421:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_TIMEOUT && LWIP_TIMERS */
 422:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 423:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 424:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 425:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Sends a message to TCPIP thread to call a function. Caller thread blocks on
 426:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * on a provided semaphore, which ist NOT automatically signalled by TCPIP thread,
 427:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * this has to be done by the user.
 428:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * It is recommended to use LWIP_TCPIP_CORE_LOCKING since this is the way
 429:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * with least runtime overhead.
 430:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 431:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param fn function to be called from TCPIP thread
 432:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param apimsg argument to API function
 433:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param sem semaphore to wait on
 434:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if the function was called, another err_t if not
 435:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 436:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 437:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_send_msg_wait_sem(tcpip_callback_fn fn, void *apimsg, sys_sem_t *sem)
 438:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 727              		.loc 1 438 1
 728              		.cfi_startproc
 729              		@ args = 0, pretend = 0, frame = 16
 730              		@ frame_needed = 1, uses_anonymous_args = 0
 731 0000 80B5     		push	{r7, lr}
 732              	.LCFI33:
 733              		.cfi_def_cfa_offset 8
 734              		.cfi_offset 7, -8
 735              		.cfi_offset 14, -4
 736 0002 84B0     		sub	sp, sp, #16
 737              	.LCFI34:
 738              		.cfi_def_cfa_offset 24
 739 0004 00AF     		add	r7, sp, #0
 740              	.LCFI35:
 741              		.cfi_def_cfa_register 7
 742 0006 F860     		str	r0, [r7, #12]
 743 0008 B960     		str	r1, [r7, #8]
 744 000a 7A60     		str	r2, [r7, #4]
 439:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 440:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_UNUSED_ARG(sem);
 441:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 745              		.loc 1 441 3
 746 000c 0648     		ldr	r0, .L51
 747 000e FFF7FEFF 		bl	sys_mutex_lock
 442:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   fn(apimsg);
 748              		.loc 1 442 3
 749 0012 FB68     		ldr	r3, [r7, #12]
 750 0014 B868     		ldr	r0, [r7, #8]
 751 0016 9847     		blx	r3
 752              	.LVL4:
 443:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 753              		.loc 1 443 3
 754 0018 0348     		ldr	r0, .L51
 755 001a FFF7FEFF 		bl	sys_mutex_unlock
 444:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 756              		.loc 1 444 10
 757 001e 0023     		movs	r3, #0
 445:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
ARM GAS  /tmp/cc312nRe.s 			page 22


 446:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_DECLARE(msg);
 447:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 448:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("semaphore not initialized", sys_sem_valid(sem));
 449:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 450:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 451:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_ALLOC(msg);
 452:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).type = TCPIP_MSG_API;
 453:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_msg.function = fn;
 454:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_msg.msg = apimsg;
 455:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&tcpip_mbox, &TCPIP_MSG_VAR_REF(msg));
 456:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_arch_sem_wait(sem, 0);
 457:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_FREE(msg);
 458:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return ERR_OK;
 459:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 460:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 758              		.loc 1 460 1
 759 0020 1846     		mov	r0, r3
 760 0022 1037     		adds	r7, r7, #16
 761              	.LCFI36:
 762              		.cfi_def_cfa_offset 8
 763 0024 BD46     		mov	sp, r7
 764              	.LCFI37:
 765              		.cfi_def_cfa_register 13
 766              		@ sp needed
 767 0026 80BD     		pop	{r7, pc}
 768              	.L52:
 769              		.align	2
 770              	.L51:
 771 0028 00000000 		.word	lock_tcpip_core
 772              		.cfi_endproc
 773              	.LFE144:
 775              		.section	.text.tcpip_api_call,"ax",%progbits
 776              		.align	1
 777              		.global	tcpip_api_call
 778              		.syntax unified
 779              		.thumb
 780              		.thumb_func
 781              		.fpu fpv4-sp-d16
 783              	tcpip_api_call:
 784              	.LFB145:
 461:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 462:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 463:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Synchronously calls function in TCPIP thread and waits for its completion.
 464:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * It is recommended to use LWIP_TCPIP_CORE_LOCKING (preferred) or
 465:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * LWIP_NETCONN_SEM_PER_THREAD.
 466:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * If not, a semaphore is created and destroyed on every call which is usually
 467:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * an expensive/slow operation.
 468:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param fn Function to call
 469:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param call Call parameters
 470:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return Return value from tcpip_api_call_fn
 471:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 472:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 473:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_api_call(tcpip_api_call_fn fn, struct tcpip_api_call_data *call)
 474:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 785              		.loc 1 474 1
 786              		.cfi_startproc
 787              		@ args = 0, pretend = 0, frame = 16
ARM GAS  /tmp/cc312nRe.s 			page 23


 788              		@ frame_needed = 1, uses_anonymous_args = 0
 789 0000 80B5     		push	{r7, lr}
 790              	.LCFI38:
 791              		.cfi_def_cfa_offset 8
 792              		.cfi_offset 7, -8
 793              		.cfi_offset 14, -4
 794 0002 84B0     		sub	sp, sp, #16
 795              	.LCFI39:
 796              		.cfi_def_cfa_offset 24
 797 0004 00AF     		add	r7, sp, #0
 798              	.LCFI40:
 799              		.cfi_def_cfa_register 7
 800 0006 7860     		str	r0, [r7, #4]
 801 0008 3960     		str	r1, [r7]
 475:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 476:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err_t err;
 477:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LOCK_TCPIP_CORE();
 802              		.loc 1 477 3
 803 000a 0848     		ldr	r0, .L55
 804 000c FFF7FEFF 		bl	sys_mutex_lock
 478:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err = fn(call);
 805              		.loc 1 478 9
 806 0010 7B68     		ldr	r3, [r7, #4]
 807 0012 3868     		ldr	r0, [r7]
 808 0014 9847     		blx	r3
 809              	.LVL5:
 810 0016 0346     		mov	r3, r0
 811 0018 FB73     		strb	r3, [r7, #15]
 479:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   UNLOCK_TCPIP_CORE();
 812              		.loc 1 479 3
 813 001a 0448     		ldr	r0, .L55
 814 001c FFF7FEFF 		bl	sys_mutex_unlock
 480:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return err;
 815              		.loc 1 480 10
 816 0020 97F90F30 		ldrsb	r3, [r7, #15]
 481:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_TCPIP_CORE_LOCKING */
 482:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_DECLARE(msg);
 483:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 484:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 485:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   err_t err = sys_sem_new(&call->sem, 0);
 486:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (err != ERR_OK) {
 487:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return err;
 488:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 489:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 490:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 491:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 492:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 493:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_ALLOC(msg);
 494:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).type = TCPIP_MSG_API_CALL;
 495:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.arg = call;
 496:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.function = fn;
 497:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_NETCONN_SEM_PER_THREAD
 498:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.sem = LWIP_NETCONN_THREAD_SEM_GET();
 499:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #else /* LWIP_NETCONN_SEM_PER_THREAD */
 500:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_REF(msg).msg.api_call.sem = &call->sem;
 501:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 502:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_mbox_post(&tcpip_mbox, &TCPIP_MSG_VAR_REF(msg));
ARM GAS  /tmp/cc312nRe.s 			page 24


 503:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_arch_sem_wait(TCPIP_MSG_VAR_REF(msg).msg.api_call.sem, 0);
 504:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   TCPIP_MSG_VAR_FREE(msg);
 505:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 506:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if !LWIP_NETCONN_SEM_PER_THREAD
 507:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_sem_free(&call->sem);
 508:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_NETCONN_SEM_PER_THREAD */
 509:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 510:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return call->err;
 511:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 512:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 817              		.loc 1 512 1
 818 0024 1846     		mov	r0, r3
 819 0026 1037     		adds	r7, r7, #16
 820              	.LCFI41:
 821              		.cfi_def_cfa_offset 8
 822 0028 BD46     		mov	sp, r7
 823              	.LCFI42:
 824              		.cfi_def_cfa_register 13
 825              		@ sp needed
 826 002a 80BD     		pop	{r7, pc}
 827              	.L56:
 828              		.align	2
 829              	.L55:
 830 002c 00000000 		.word	lock_tcpip_core
 831              		.cfi_endproc
 832              	.LFE145:
 834              		.section	.text.tcpip_callbackmsg_new,"ax",%progbits
 835              		.align	1
 836              		.global	tcpip_callbackmsg_new
 837              		.syntax unified
 838              		.thumb
 839              		.thumb_func
 840              		.fpu fpv4-sp-d16
 842              	tcpip_callbackmsg_new:
 843              	.LFB146:
 513:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 514:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 515:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 516:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Allocate a structure for a static callback message and initialize it.
 517:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * The message has a special type such that lwIP never frees it.
 518:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * This is intended to be used to send "static" messages from interrupt context,
 519:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * e.g. the message is allocated once and posted several times from an IRQ
 520:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * using tcpip_callbackmsg_trycallback().
 521:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Example usage: Trigger execution of an ethernet IRQ DPC routine in lwIP thread context.
 522:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * 
 523:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param function the function to call
 524:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param ctx parameter passed to function
 525:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return a struct pointer to pass to tcpip_callbackmsg_trycallback().
 526:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 527:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_callbackmsg_trycallback()
 528:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_callbackmsg_delete()
 529:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 530:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** struct tcpip_callback_msg *
 531:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callbackmsg_new(tcpip_callback_fn function, void *ctx)
 532:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 844              		.loc 1 532 1
 845              		.cfi_startproc
ARM GAS  /tmp/cc312nRe.s 			page 25


 846              		@ args = 0, pretend = 0, frame = 16
 847              		@ frame_needed = 1, uses_anonymous_args = 0
 848 0000 80B5     		push	{r7, lr}
 849              	.LCFI43:
 850              		.cfi_def_cfa_offset 8
 851              		.cfi_offset 7, -8
 852              		.cfi_offset 14, -4
 853 0002 84B0     		sub	sp, sp, #16
 854              	.LCFI44:
 855              		.cfi_def_cfa_offset 24
 856 0004 00AF     		add	r7, sp, #0
 857              	.LCFI45:
 858              		.cfi_def_cfa_register 7
 859 0006 7860     		str	r0, [r7, #4]
 860 0008 3960     		str	r1, [r7]
 533:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct tcpip_msg *msg = (struct tcpip_msg *)memp_malloc(MEMP_TCPIP_MSG_API);
 861              		.loc 1 533 47
 862 000a 0820     		movs	r0, #8
 863 000c FFF7FEFF 		bl	memp_malloc
 864 0010 F860     		str	r0, [r7, #12]
 534:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (msg == NULL) {
 865              		.loc 1 534 6
 866 0012 FB68     		ldr	r3, [r7, #12]
 867 0014 002B     		cmp	r3, #0
 868 0016 01D1     		bne	.L58
 535:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     return NULL;
 869              		.loc 1 535 12
 870 0018 0023     		movs	r3, #0
 871 001a 09E0     		b	.L59
 872              	.L58:
 536:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 537:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->type = TCPIP_MSG_CALLBACK_STATIC;
 873              		.loc 1 537 13
 874 001c FB68     		ldr	r3, [r7, #12]
 875 001e 0222     		movs	r2, #2
 876 0020 1A70     		strb	r2, [r3]
 538:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.function = function;
 877              		.loc 1 538 24
 878 0022 FB68     		ldr	r3, [r7, #12]
 879 0024 7A68     		ldr	r2, [r7, #4]
 880 0026 5A60     		str	r2, [r3, #4]
 539:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   msg->msg.cb.ctx = ctx;
 881              		.loc 1 539 19
 882 0028 FB68     		ldr	r3, [r7, #12]
 883 002a 3A68     		ldr	r2, [r7]
 884 002c 9A60     		str	r2, [r3, #8]
 540:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return (struct tcpip_callback_msg *)msg;
 885              		.loc 1 540 10
 886 002e FB68     		ldr	r3, [r7, #12]
 887              	.L59:
 541:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 888              		.loc 1 541 1
 889 0030 1846     		mov	r0, r3
 890 0032 1037     		adds	r7, r7, #16
 891              	.LCFI46:
 892              		.cfi_def_cfa_offset 8
 893 0034 BD46     		mov	sp, r7
ARM GAS  /tmp/cc312nRe.s 			page 26


 894              	.LCFI47:
 895              		.cfi_def_cfa_register 13
 896              		@ sp needed
 897 0036 80BD     		pop	{r7, pc}
 898              		.cfi_endproc
 899              	.LFE146:
 901              		.section	.text.tcpip_callbackmsg_delete,"ax",%progbits
 902              		.align	1
 903              		.global	tcpip_callbackmsg_delete
 904              		.syntax unified
 905              		.thumb
 906              		.thumb_func
 907              		.fpu fpv4-sp-d16
 909              	tcpip_callbackmsg_delete:
 910              	.LFB147:
 542:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 543:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 544:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 545:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Free a callback message allocated by tcpip_callbackmsg_new().
 546:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 547:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msg the message to free
 548:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 549:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_callbackmsg_new()
 550:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 551:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** void
 552:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callbackmsg_delete(struct tcpip_callback_msg *msg)
 553:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 911              		.loc 1 553 1
 912              		.cfi_startproc
 913              		@ args = 0, pretend = 0, frame = 8
 914              		@ frame_needed = 1, uses_anonymous_args = 0
 915 0000 80B5     		push	{r7, lr}
 916              	.LCFI48:
 917              		.cfi_def_cfa_offset 8
 918              		.cfi_offset 7, -8
 919              		.cfi_offset 14, -4
 920 0002 82B0     		sub	sp, sp, #8
 921              	.LCFI49:
 922              		.cfi_def_cfa_offset 16
 923 0004 00AF     		add	r7, sp, #0
 924              	.LCFI50:
 925              		.cfi_def_cfa_register 7
 926 0006 7860     		str	r0, [r7, #4]
 554:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   memp_free(MEMP_TCPIP_MSG_API, msg);
 927              		.loc 1 554 3
 928 0008 7968     		ldr	r1, [r7, #4]
 929 000a 0820     		movs	r0, #8
 930 000c FFF7FEFF 		bl	memp_free
 555:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 931              		.loc 1 555 1
 932 0010 00BF     		nop
 933 0012 0837     		adds	r7, r7, #8
 934              	.LCFI51:
 935              		.cfi_def_cfa_offset 8
 936 0014 BD46     		mov	sp, r7
 937              	.LCFI52:
 938              		.cfi_def_cfa_register 13
ARM GAS  /tmp/cc312nRe.s 			page 27


 939              		@ sp needed
 940 0016 80BD     		pop	{r7, pc}
 941              		.cfi_endproc
 942              	.LFE147:
 944              		.section	.text.tcpip_callbackmsg_trycallback,"ax",%progbits
 945              		.align	1
 946              		.global	tcpip_callbackmsg_trycallback
 947              		.syntax unified
 948              		.thumb
 949              		.thumb_func
 950              		.fpu fpv4-sp-d16
 952              	tcpip_callbackmsg_trycallback:
 953              	.LFB148:
 556:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 557:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 558:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 559:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Try to post a callback-message to the tcpip_thread tcpip_mbox.
 560:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 561:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msg pointer to the message to post
 562:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return sys_mbox_trypost() return code
 563:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 564:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_callbackmsg_new()
 565:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 566:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 567:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callbackmsg_trycallback(struct tcpip_callback_msg *msg)
 568:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 954              		.loc 1 568 1
 955              		.cfi_startproc
 956              		@ args = 0, pretend = 0, frame = 8
 957              		@ frame_needed = 1, uses_anonymous_args = 0
 958 0000 80B5     		push	{r7, lr}
 959              	.LCFI53:
 960              		.cfi_def_cfa_offset 8
 961              		.cfi_offset 7, -8
 962              		.cfi_offset 14, -4
 963 0002 82B0     		sub	sp, sp, #8
 964              	.LCFI54:
 965              		.cfi_def_cfa_offset 16
 966 0004 00AF     		add	r7, sp, #0
 967              	.LCFI55:
 968              		.cfi_def_cfa_register 7
 969 0006 7860     		str	r0, [r7, #4]
 569:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 970              		.loc 1 569 3
 971 0008 0A48     		ldr	r0, .L64
 972 000a FFF7FEFF 		bl	sys_mbox_valid
 973 000e 0346     		mov	r3, r0
 974 0010 002B     		cmp	r3, #0
 975 0012 06D1     		bne	.L62
 976              		.loc 1 569 3 is_stmt 0 discriminator 1
 977 0014 084B     		ldr	r3, .L64+4
 978 0016 40F23922 		movw	r2, #569
 979 001a 0849     		ldr	r1, .L64+8
 980 001c 0848     		ldr	r0, .L64+12
 981 001e FFF7FEFF 		bl	printf
 982              	.L62:
 570:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return sys_mbox_trypost(&tcpip_mbox, msg);
ARM GAS  /tmp/cc312nRe.s 			page 28


 983              		.loc 1 570 10 is_stmt 1
 984 0022 7968     		ldr	r1, [r7, #4]
 985 0024 0348     		ldr	r0, .L64
 986 0026 FFF7FEFF 		bl	sys_mbox_trypost
 987 002a 0346     		mov	r3, r0
 571:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 988              		.loc 1 571 1
 989 002c 1846     		mov	r0, r3
 990 002e 0837     		adds	r7, r7, #8
 991              	.LCFI56:
 992              		.cfi_def_cfa_offset 8
 993 0030 BD46     		mov	sp, r7
 994              	.LCFI57:
 995              		.cfi_def_cfa_register 13
 996              		@ sp needed
 997 0032 80BD     		pop	{r7, pc}
 998              	.L65:
 999              		.align	2
 1000              	.L64:
 1001 0034 00000000 		.word	tcpip_mbox
 1002 0038 00000000 		.word	.LC0
 1003 003c 78000000 		.word	.LC3
 1004 0040 50000000 		.word	.LC2
 1005              		.cfi_endproc
 1006              	.LFE148:
 1008              		.section	.text.tcpip_callbackmsg_trycallback_fromisr,"ax",%progbits
 1009              		.align	1
 1010              		.global	tcpip_callbackmsg_trycallback_fromisr
 1011              		.syntax unified
 1012              		.thumb
 1013              		.thumb_func
 1014              		.fpu fpv4-sp-d16
 1016              	tcpip_callbackmsg_trycallback_fromisr:
 1017              	.LFB149:
 572:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 573:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 574:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 575:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Try to post a callback-message to the tcpip_thread mbox.
 576:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Same as @ref tcpip_callbackmsg_trycallback but calls sys_mbox_trypost_fromisr(),
 577:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * mainly to help FreeRTOS, where calls differ between task level and ISR level.
 578:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 579:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param msg pointer to the message to post
 580:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return sys_mbox_trypost_fromisr() return code (without change, so this
 581:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *         knowledge can be used to e.g. propagate "bool needs_scheduling")
 582:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 583:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @see tcpip_callbackmsg_new()
 584:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 585:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 586:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_callbackmsg_trycallback_fromisr(struct tcpip_callback_msg *msg)
 587:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 1018              		.loc 1 587 1
 1019              		.cfi_startproc
 1020              		@ args = 0, pretend = 0, frame = 8
 1021              		@ frame_needed = 1, uses_anonymous_args = 0
 1022 0000 80B5     		push	{r7, lr}
 1023              	.LCFI58:
 1024              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc312nRe.s 			page 29


 1025              		.cfi_offset 7, -8
 1026              		.cfi_offset 14, -4
 1027 0002 82B0     		sub	sp, sp, #8
 1028              	.LCFI59:
 1029              		.cfi_def_cfa_offset 16
 1030 0004 00AF     		add	r7, sp, #0
 1031              	.LCFI60:
 1032              		.cfi_def_cfa_register 7
 1033 0006 7860     		str	r0, [r7, #4]
 588:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   LWIP_ASSERT("Invalid mbox", sys_mbox_valid_val(tcpip_mbox));
 1034              		.loc 1 588 3
 1035 0008 0A48     		ldr	r0, .L69
 1036 000a FFF7FEFF 		bl	sys_mbox_valid
 1037 000e 0346     		mov	r3, r0
 1038 0010 002B     		cmp	r3, #0
 1039 0012 06D1     		bne	.L67
 1040              		.loc 1 588 3 is_stmt 0 discriminator 1
 1041 0014 084B     		ldr	r3, .L69+4
 1042 0016 4FF41372 		mov	r2, #588
 1043 001a 0849     		ldr	r1, .L69+8
 1044 001c 0848     		ldr	r0, .L69+12
 1045 001e FFF7FEFF 		bl	printf
 1046              	.L67:
 589:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return sys_mbox_trypost_fromisr(&tcpip_mbox, msg);
 1047              		.loc 1 589 10 is_stmt 1
 1048 0022 7968     		ldr	r1, [r7, #4]
 1049 0024 0348     		ldr	r0, .L69
 1050 0026 FFF7FEFF 		bl	sys_mbox_trypost_fromisr
 1051 002a 0346     		mov	r3, r0
 590:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 1052              		.loc 1 590 1
 1053 002c 1846     		mov	r0, r3
 1054 002e 0837     		adds	r7, r7, #8
 1055              	.LCFI61:
 1056              		.cfi_def_cfa_offset 8
 1057 0030 BD46     		mov	sp, r7
 1058              	.LCFI62:
 1059              		.cfi_def_cfa_register 13
 1060              		@ sp needed
 1061 0032 80BD     		pop	{r7, pc}
 1062              	.L70:
 1063              		.align	2
 1064              	.L69:
 1065 0034 00000000 		.word	tcpip_mbox
 1066 0038 00000000 		.word	.LC0
 1067 003c 78000000 		.word	.LC3
 1068 0040 50000000 		.word	.LC2
 1069              		.cfi_endproc
 1070              	.LFE149:
 1072              		.section	.rodata
 1073 0085 000000   		.align	2
 1074              	.LC4:
 1075 0088 6661696C 		.ascii	"failed to create tcpip_thread mbox\000"
 1075      65642074 
 1075      6F206372 
 1075      65617465 
 1075      20746370 
ARM GAS  /tmp/cc312nRe.s 			page 30


 1076 00ab 00       		.align	2
 1077              	.LC5:
 1078 00ac 6661696C 		.ascii	"failed to create lock_tcpip_core\000"
 1078      65642074 
 1078      6F206372 
 1078      65617465 
 1078      206C6F63 
 1079 00cd 000000   		.align	2
 1080              	.LC6:
 1081 00d0 74637069 		.ascii	"tcpip_thread\000"
 1081      705F7468 
 1081      72656164 
 1081      00
 1082              		.section	.text.tcpip_init,"ax",%progbits
 1083              		.align	1
 1084              		.global	tcpip_init
 1085              		.syntax unified
 1086              		.thumb
 1087              		.thumb_func
 1088              		.fpu fpv4-sp-d16
 1090              	tcpip_init:
 1091              	.LFB150:
 591:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 592:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 593:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @ingroup lwip_os
 594:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Initialize this module:
 595:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * - initialize all sub modules
 596:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * - start the tcpip_thread
 597:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 598:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param initfunc a function to call when tcpip_thread is running and finished initializing
 599:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param arg argument to pass to initfunc
 600:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 601:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** void
 602:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** tcpip_init(tcpip_init_done_fn initfunc, void *arg)
 603:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 1092              		.loc 1 603 1
 1093              		.cfi_startproc
 1094              		@ args = 0, pretend = 0, frame = 8
 1095              		@ frame_needed = 1, uses_anonymous_args = 0
 1096 0000 80B5     		push	{r7, lr}
 1097              	.LCFI63:
 1098              		.cfi_def_cfa_offset 8
 1099              		.cfi_offset 7, -8
 1100              		.cfi_offset 14, -4
 1101 0002 84B0     		sub	sp, sp, #16
 1102              	.LCFI64:
 1103              		.cfi_def_cfa_offset 24
 1104 0004 02AF     		add	r7, sp, #8
 1105              	.LCFI65:
 1106              		.cfi_def_cfa 7, 16
 1107 0006 7860     		str	r0, [r7, #4]
 1108 0008 3960     		str	r1, [r7]
 604:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   lwip_init();
 1109              		.loc 1 604 3
 1110 000a FFF7FEFF 		bl	lwip_init
 605:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 606:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   tcpip_init_done = initfunc;
ARM GAS  /tmp/cc312nRe.s 			page 31


 1111              		.loc 1 606 19
 1112 000e 174A     		ldr	r2, .L74
 1113 0010 7B68     		ldr	r3, [r7, #4]
 1114 0012 1360     		str	r3, [r2]
 607:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   tcpip_init_done_arg = arg;
 1115              		.loc 1 607 23
 1116 0014 164A     		ldr	r2, .L74+4
 1117 0016 3B68     		ldr	r3, [r7]
 1118 0018 1360     		str	r3, [r2]
 608:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mbox_new(&tcpip_mbox, TCPIP_MBOX_SIZE) != ERR_OK) {
 1119              		.loc 1 608 7
 1120 001a 0621     		movs	r1, #6
 1121 001c 1548     		ldr	r0, .L74+8
 1122 001e FFF7FEFF 		bl	sys_mbox_new
 1123 0022 0346     		mov	r3, r0
 1124              		.loc 1 608 6
 1125 0024 002B     		cmp	r3, #0
 1126 0026 06D0     		beq	.L72
 609:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_ASSERT("failed to create tcpip_thread mbox", 0);
 1127              		.loc 1 609 5 discriminator 1
 1128 0028 134B     		ldr	r3, .L74+12
 1129 002a 40F26122 		movw	r2, #609
 1130 002e 1349     		ldr	r1, .L74+16
 1131 0030 1348     		ldr	r0, .L74+20
 1132 0032 FFF7FEFF 		bl	printf
 1133              	.L72:
 610:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 611:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #if LWIP_TCPIP_CORE_LOCKING
 612:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   if (sys_mutex_new(&lock_tcpip_core) != ERR_OK) {
 1134              		.loc 1 612 7
 1135 0036 1348     		ldr	r0, .L74+24
 1136 0038 FFF7FEFF 		bl	sys_mutex_new
 1137 003c 0346     		mov	r3, r0
 1138              		.loc 1 612 6
 1139 003e 002B     		cmp	r3, #0
 1140 0040 06D0     		beq	.L73
 613:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****     LWIP_ASSERT("failed to create lock_tcpip_core", 0);
 1141              		.loc 1 613 5 discriminator 1
 1142 0042 0D4B     		ldr	r3, .L74+12
 1143 0044 40F26522 		movw	r2, #613
 1144 0048 0F49     		ldr	r1, .L74+28
 1145 004a 0D48     		ldr	r0, .L74+20
 1146 004c FFF7FEFF 		bl	printf
 1147              	.L73:
 614:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   }
 615:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** #endif /* LWIP_TCPIP_CORE_LOCKING */
 616:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 617:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   sys_thread_new(TCPIP_THREAD_NAME, tcpip_thread, NULL, TCPIP_THREAD_STACKSIZE, TCPIP_THREAD_PRIO);
 1148              		.loc 1 617 3
 1149 0050 1823     		movs	r3, #24
 1150 0052 0093     		str	r3, [sp]
 1151 0054 4FF48063 		mov	r3, #1024
 1152 0058 0022     		movs	r2, #0
 1153 005a 0C49     		ldr	r1, .L74+32
 1154 005c 0C48     		ldr	r0, .L74+36
 1155 005e FFF7FEFF 		bl	sys_thread_new
 618:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
ARM GAS  /tmp/cc312nRe.s 			page 32


 1156              		.loc 1 618 1
 1157 0062 00BF     		nop
 1158 0064 0837     		adds	r7, r7, #8
 1159              	.LCFI66:
 1160              		.cfi_def_cfa_offset 8
 1161 0066 BD46     		mov	sp, r7
 1162              	.LCFI67:
 1163              		.cfi_def_cfa_register 13
 1164              		@ sp needed
 1165 0068 80BD     		pop	{r7, pc}
 1166              	.L75:
 1167 006a 00BF     		.align	2
 1168              	.L74:
 1169 006c 00000000 		.word	tcpip_init_done
 1170 0070 00000000 		.word	tcpip_init_done_arg
 1171 0074 00000000 		.word	tcpip_mbox
 1172 0078 00000000 		.word	.LC0
 1173 007c 88000000 		.word	.LC4
 1174 0080 50000000 		.word	.LC2
 1175 0084 00000000 		.word	lock_tcpip_core
 1176 0088 AC000000 		.word	.LC5
 1177 008c 00000000 		.word	tcpip_thread
 1178 0090 D0000000 		.word	.LC6
 1179              		.cfi_endproc
 1180              	.LFE150:
 1182              		.section	.text.pbuf_free_int,"ax",%progbits
 1183              		.align	1
 1184              		.syntax unified
 1185              		.thumb
 1186              		.thumb_func
 1187              		.fpu fpv4-sp-d16
 1189              	pbuf_free_int:
 1190              	.LFB151:
 619:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 620:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 621:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * Simple callback function used with tcpip_callback to free a pbuf
 622:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * (pbuf_free has a wrong signature for tcpip_callback)
 623:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 624:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p The pbuf (chain) to be dereferenced.
 625:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 626:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** static void
 627:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** pbuf_free_int(void *p)
 628:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 1191              		.loc 1 628 1
 1192              		.cfi_startproc
 1193              		@ args = 0, pretend = 0, frame = 16
 1194              		@ frame_needed = 1, uses_anonymous_args = 0
 1195 0000 80B5     		push	{r7, lr}
 1196              	.LCFI68:
 1197              		.cfi_def_cfa_offset 8
 1198              		.cfi_offset 7, -8
 1199              		.cfi_offset 14, -4
 1200 0002 84B0     		sub	sp, sp, #16
 1201              	.LCFI69:
 1202              		.cfi_def_cfa_offset 24
 1203 0004 00AF     		add	r7, sp, #0
 1204              	.LCFI70:
ARM GAS  /tmp/cc312nRe.s 			page 33


 1205              		.cfi_def_cfa_register 7
 1206 0006 7860     		str	r0, [r7, #4]
 629:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   struct pbuf *q = (struct pbuf *)p;
 1207              		.loc 1 629 16
 1208 0008 7B68     		ldr	r3, [r7, #4]
 1209 000a FB60     		str	r3, [r7, #12]
 630:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   pbuf_free(q);
 1210              		.loc 1 630 3
 1211 000c F868     		ldr	r0, [r7, #12]
 1212 000e FFF7FEFF 		bl	pbuf_free
 631:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 1213              		.loc 1 631 1
 1214 0012 00BF     		nop
 1215 0014 1037     		adds	r7, r7, #16
 1216              	.LCFI71:
 1217              		.cfi_def_cfa_offset 8
 1218 0016 BD46     		mov	sp, r7
 1219              	.LCFI72:
 1220              		.cfi_def_cfa_register 13
 1221              		@ sp needed
 1222 0018 80BD     		pop	{r7, pc}
 1223              		.cfi_endproc
 1224              	.LFE151:
 1226              		.section	.text.pbuf_free_callback,"ax",%progbits
 1227              		.align	1
 1228              		.global	pbuf_free_callback
 1229              		.syntax unified
 1230              		.thumb
 1231              		.thumb_func
 1232              		.fpu fpv4-sp-d16
 1234              	pbuf_free_callback:
 1235              	.LFB152:
 632:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 633:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 634:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A simple wrapper function that allows you to free a pbuf from interrupt context.
 635:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 636:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param p The pbuf (chain) to be dereferenced.
 637:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if callback could be enqueued, an err_t if not
 638:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 639:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 640:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** pbuf_free_callback(struct pbuf *p)
 641:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 1236              		.loc 1 641 1
 1237              		.cfi_startproc
 1238              		@ args = 0, pretend = 0, frame = 8
 1239              		@ frame_needed = 1, uses_anonymous_args = 0
 1240 0000 80B5     		push	{r7, lr}
 1241              	.LCFI73:
 1242              		.cfi_def_cfa_offset 8
 1243              		.cfi_offset 7, -8
 1244              		.cfi_offset 14, -4
 1245 0002 82B0     		sub	sp, sp, #8
 1246              	.LCFI74:
 1247              		.cfi_def_cfa_offset 16
 1248 0004 00AF     		add	r7, sp, #0
 1249              	.LCFI75:
 1250              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cc312nRe.s 			page 34


 1251 0006 7860     		str	r0, [r7, #4]
 642:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return tcpip_try_callback(pbuf_free_int, p);
 1252              		.loc 1 642 10
 1253 0008 7968     		ldr	r1, [r7, #4]
 1254 000a 0448     		ldr	r0, .L79
 1255 000c FFF7FEFF 		bl	tcpip_try_callback
 1256 0010 0346     		mov	r3, r0
 643:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 1257              		.loc 1 643 1
 1258 0012 1846     		mov	r0, r3
 1259 0014 0837     		adds	r7, r7, #8
 1260              	.LCFI76:
 1261              		.cfi_def_cfa_offset 8
 1262 0016 BD46     		mov	sp, r7
 1263              	.LCFI77:
 1264              		.cfi_def_cfa_register 13
 1265              		@ sp needed
 1266 0018 80BD     		pop	{r7, pc}
 1267              	.L80:
 1268 001a 00BF     		.align	2
 1269              	.L79:
 1270 001c 00000000 		.word	pbuf_free_int
 1271              		.cfi_endproc
 1272              	.LFE152:
 1274              		.section	.text.mem_free_callback,"ax",%progbits
 1275              		.align	1
 1276              		.global	mem_free_callback
 1277              		.syntax unified
 1278              		.thumb
 1279              		.thumb_func
 1280              		.fpu fpv4-sp-d16
 1282              	mem_free_callback:
 1283              	.LFB153:
 644:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** 
 645:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** /**
 646:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * A simple wrapper function that allows you to free heap memory from
 647:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * interrupt context.
 648:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  *
 649:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @param m the heap memory to free
 650:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  * @return ERR_OK if callback could be enqueued, an err_t if not
 651:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****  */
 652:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** err_t
 653:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** mem_free_callback(void *m)
 654:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** {
 1284              		.loc 1 654 1
 1285              		.cfi_startproc
 1286              		@ args = 0, pretend = 0, frame = 8
 1287              		@ frame_needed = 1, uses_anonymous_args = 0
 1288 0000 80B5     		push	{r7, lr}
 1289              	.LCFI78:
 1290              		.cfi_def_cfa_offset 8
 1291              		.cfi_offset 7, -8
 1292              		.cfi_offset 14, -4
 1293 0002 82B0     		sub	sp, sp, #8
 1294              	.LCFI79:
 1295              		.cfi_def_cfa_offset 16
 1296 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/cc312nRe.s 			page 35


 1297              	.LCFI80:
 1298              		.cfi_def_cfa_register 7
 1299 0006 7860     		str	r0, [r7, #4]
 655:Middlewares/Third_Party/LwIP/src/api/tcpip.c ****   return tcpip_try_callback(mem_free, m);
 1300              		.loc 1 655 10
 1301 0008 7968     		ldr	r1, [r7, #4]
 1302 000a 0448     		ldr	r0, .L83
 1303 000c FFF7FEFF 		bl	tcpip_try_callback
 1304 0010 0346     		mov	r3, r0
 656:Middlewares/Third_Party/LwIP/src/api/tcpip.c **** }
 1305              		.loc 1 656 1
 1306 0012 1846     		mov	r0, r3
 1307 0014 0837     		adds	r7, r7, #8
 1308              	.LCFI81:
 1309              		.cfi_def_cfa_offset 8
 1310 0016 BD46     		mov	sp, r7
 1311              	.LCFI82:
 1312              		.cfi_def_cfa_register 13
 1313              		@ sp needed
 1314 0018 80BD     		pop	{r7, pc}
 1315              	.L84:
 1316 001a 00BF     		.align	2
 1317              	.L83:
 1318 001c 00000000 		.word	mem_free
 1319              		.cfi_endproc
 1320              	.LFE153:
 1322              		.text
 1323              	.Letext0:
 1324              		.file 2 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/machine/_default_typ
 1325              		.file 3 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_stdint.h"
 1326              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1327              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1328              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1329              		.file 7 "/home/mego-ros2/microros_ws/firmware/toolchain/lib/gcc/arm-none-eabi/8.3.1/include/stddef
 1330              		.file 8 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_types.h"
 1331              		.file 9 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/reent.h"
 1332              		.file 10 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/lock.h"
 1333              		.file 11 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/stdlib.h"
 1334              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 1335              		.file 13 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/ctype.h"
 1336              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 1337              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 1338              		.file 16 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 1339              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/timeouts.h"
 1340              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 1341              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 1342              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 1343              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 1344              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 1345              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 1346              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpip.h"
 1347              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/tcpip_priv.h"
 1348              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 1349              		.file 27 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 1350              		.file 28 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ethernet.h"
 1351              		.file 29 "Middlewares/Third_Party/LwIP/src/include/netif/ethernet.h"
ARM GAS  /tmp/cc312nRe.s 			page 36


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tcpip.c
     /tmp/cc312nRe.s:18     .bss.tcpip_init_done:0000000000000000 $d
     /tmp/cc312nRe.s:21     .bss.tcpip_init_done:0000000000000000 tcpip_init_done
     /tmp/cc312nRe.s:24     .bss.tcpip_init_done_arg:0000000000000000 $d
     /tmp/cc312nRe.s:27     .bss.tcpip_init_done_arg:0000000000000000 tcpip_init_done_arg
     /tmp/cc312nRe.s:30     .bss.tcpip_mbox:0000000000000000 $d
     /tmp/cc312nRe.s:33     .bss.tcpip_mbox:0000000000000000 tcpip_mbox
                            *COM*:0000000000000004 lock_tcpip_core
     /tmp/cc312nRe.s:37     .text.tcpip_timeouts_mbox_fetch:0000000000000000 $t
     /tmp/cc312nRe.s:44     .text.tcpip_timeouts_mbox_fetch:0000000000000000 tcpip_timeouts_mbox_fetch
     /tmp/cc312nRe.s:128    .text.tcpip_timeouts_mbox_fetch:0000000000000068 $d
     /tmp/cc312nRe.s:133    .rodata:0000000000000000 $d
     /tmp/cc312nRe.s:143    .text.tcpip_thread:0000000000000000 $t
     /tmp/cc312nRe.s:149    .text.tcpip_thread:0000000000000000 tcpip_thread
     /tmp/cc312nRe.s:231    .text.tcpip_thread_handle_msg:0000000000000000 tcpip_thread_handle_msg
     /tmp/cc312nRe.s:214    .text.tcpip_thread:000000000000004c $d
     /tmp/cc312nRe.s:225    .text.tcpip_thread_handle_msg:0000000000000000 $t
     /tmp/cc312nRe.s:337    .text.tcpip_thread_handle_msg:000000000000007c $d
     /tmp/cc312nRe.s:348    .text.tcpip_inpkt:0000000000000000 $t
     /tmp/cc312nRe.s:355    .text.tcpip_inpkt:0000000000000000 tcpip_inpkt
     /tmp/cc312nRe.s:448    .text.tcpip_inpkt:0000000000000078 $d
     /tmp/cc312nRe.s:456    .text.tcpip_input:0000000000000000 $t
     /tmp/cc312nRe.s:463    .text.tcpip_input:0000000000000000 tcpip_input
     /tmp/cc312nRe.s:518    .text.tcpip_input:000000000000003c $d
     /tmp/cc312nRe.s:524    .text.tcpip_callback:0000000000000000 $t
     /tmp/cc312nRe.s:531    .text.tcpip_callback:0000000000000000 tcpip_callback
     /tmp/cc312nRe.s:607    .text.tcpip_callback:000000000000005c $d
     /tmp/cc312nRe.s:615    .text.tcpip_try_callback:0000000000000000 $t
     /tmp/cc312nRe.s:622    .text.tcpip_try_callback:0000000000000000 tcpip_try_callback
     /tmp/cc312nRe.s:710    .text.tcpip_try_callback:0000000000000070 $d
     /tmp/cc312nRe.s:718    .text.tcpip_send_msg_wait_sem:0000000000000000 $t
     /tmp/cc312nRe.s:725    .text.tcpip_send_msg_wait_sem:0000000000000000 tcpip_send_msg_wait_sem
     /tmp/cc312nRe.s:771    .text.tcpip_send_msg_wait_sem:0000000000000028 $d
     /tmp/cc312nRe.s:776    .text.tcpip_api_call:0000000000000000 $t
     /tmp/cc312nRe.s:783    .text.tcpip_api_call:0000000000000000 tcpip_api_call
     /tmp/cc312nRe.s:830    .text.tcpip_api_call:000000000000002c $d
     /tmp/cc312nRe.s:835    .text.tcpip_callbackmsg_new:0000000000000000 $t
     /tmp/cc312nRe.s:842    .text.tcpip_callbackmsg_new:0000000000000000 tcpip_callbackmsg_new
     /tmp/cc312nRe.s:902    .text.tcpip_callbackmsg_delete:0000000000000000 $t
     /tmp/cc312nRe.s:909    .text.tcpip_callbackmsg_delete:0000000000000000 tcpip_callbackmsg_delete
     /tmp/cc312nRe.s:945    .text.tcpip_callbackmsg_trycallback:0000000000000000 $t
     /tmp/cc312nRe.s:952    .text.tcpip_callbackmsg_trycallback:0000000000000000 tcpip_callbackmsg_trycallback
     /tmp/cc312nRe.s:1001   .text.tcpip_callbackmsg_trycallback:0000000000000034 $d
     /tmp/cc312nRe.s:1009   .text.tcpip_callbackmsg_trycallback_fromisr:0000000000000000 $t
     /tmp/cc312nRe.s:1016   .text.tcpip_callbackmsg_trycallback_fromisr:0000000000000000 tcpip_callbackmsg_trycallback_fromisr
     /tmp/cc312nRe.s:1065   .text.tcpip_callbackmsg_trycallback_fromisr:0000000000000034 $d
     /tmp/cc312nRe.s:1083   .text.tcpip_init:0000000000000000 $t
     /tmp/cc312nRe.s:1090   .text.tcpip_init:0000000000000000 tcpip_init
     /tmp/cc312nRe.s:1169   .text.tcpip_init:000000000000006c $d
     /tmp/cc312nRe.s:1183   .text.pbuf_free_int:0000000000000000 $t
     /tmp/cc312nRe.s:1189   .text.pbuf_free_int:0000000000000000 pbuf_free_int
     /tmp/cc312nRe.s:1227   .text.pbuf_free_callback:0000000000000000 $t
     /tmp/cc312nRe.s:1234   .text.pbuf_free_callback:0000000000000000 pbuf_free_callback
     /tmp/cc312nRe.s:1270   .text.pbuf_free_callback:000000000000001c $d
     /tmp/cc312nRe.s:1275   .text.mem_free_callback:0000000000000000 $t
     /tmp/cc312nRe.s:1282   .text.mem_free_callback:0000000000000000 mem_free_callback
ARM GAS  /tmp/cc312nRe.s 			page 37


     /tmp/cc312nRe.s:1318   .text.mem_free_callback:000000000000001c $d

UNDEFINED SYMBOLS
sys_timeouts_sleeptime
sys_mutex_unlock
sys_arch_mbox_fetch
sys_mutex_lock
sys_check_timeouts
printf
pbuf_free
memp_free
sys_mbox_valid
memp_malloc
sys_mbox_trypost
ethernet_input
ip4_input
sys_mbox_post
sys_mbox_trypost_fromisr
lwip_init
sys_mbox_new
sys_mutex_new
sys_thread_new
mem_free
