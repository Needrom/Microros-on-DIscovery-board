ARM GAS  /tmp/ccfh2Clp.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"mem.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.comm	ram_heap,1619,4
  18              		.section	.bss.ram,"aw",%nobits
  19              		.align	2
  22              	ram:
  23 0000 00000000 		.space	4
  24              		.section	.bss.ram_end,"aw",%nobits
  25              		.align	2
  28              	ram_end:
  29 0000 00000000 		.space	4
  30              		.section	.bss.mem_mutex,"aw",%nobits
  31              		.align	2
  34              	mem_mutex:
  35 0000 00000000 		.space	4
  36              		.section	.bss.lfree,"aw",%nobits
  37              		.align	2
  40              	lfree:
  41 0000 00000000 		.space	4
  42              		.section	.text.ptr_to_mem,"ax",%progbits
  43              		.align	1
  44              		.arch armv7e-m
  45              		.syntax unified
  46              		.thumb
  47              		.thumb_func
  48              		.fpu fpv4-sp-d16
  50              	ptr_to_mem:
  51              	.LFB137:
  52              		.file 1 "Middlewares/Third_Party/LwIP/src/core/mem.c"
   1:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Dynamic memory manager
   4:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This is a lightweight replacement for the standard C library malloc().
   6:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
   7:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * If you want to use the standard C library malloc() instead, define
   8:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MEM_LIBC_MALLOC to 1 in your lwipopts.h
   9:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  10:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * To let mem_malloc() use pools (prevents fragmentation and is much faster than
  11:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * a heap but might waste some memory), define MEM_USE_POOLS to 1, define
  12:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MEMP_USE_CUSTOM_POOLS to 1 and create a file "lwippools.h" that includes a list
  13:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * of pools like this (more pools can be added between _START and _END):
  14:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
ARM GAS  /tmp/ccfh2Clp.s 			page 2


  15:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Define three pools with sizes 256, 512, and 1512 bytes
  16:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL_START
  17:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL(20, 256)
  18:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL(10, 512)
  19:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL(5, 1512)
  20:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_MALLOC_MEMPOOL_END
  21:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  22:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  23:Middlewares/Third_Party/LwIP/src/core/mem.c **** /*
  24:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  25:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * All rights reserved.
  26:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  27:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Redistribution and use in source and binary forms, with or without modification,
  28:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * are permitted provided that the following conditions are met:
  29:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  30:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  31:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    this list of conditions and the following disclaimer.
  32:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  33:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    this list of conditions and the following disclaimer in the documentation
  34:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    and/or other materials provided with the distribution.
  35:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * 3. The name of the author may not be used to endorse or promote products
  36:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *    derived from this software without specific prior written permission.
  37:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  38:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  39:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  40:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  41:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  42:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  43:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  44:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  45:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  46:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  47:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * OF SUCH DAMAGE.
  48:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  49:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This file is part of the lwIP TCP/IP stack.
  50:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  51:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Author: Adam Dunkels <adam@sics.se>
  52:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *         Simon Goldschmidt
  53:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  54:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  55:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  56:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/opt.h"
  57:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/mem.h"
  58:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/def.h"
  59:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/sys.h"
  60:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/stats.h"
  61:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include "lwip/err.h"
  62:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  63:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include <string.h>
  64:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  65:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC
  66:Middlewares/Third_Party/LwIP/src/core/mem.c **** #include <stdlib.h> /* for malloc()/free() */
  67:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
  68:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  69:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* This is overridable for tests only... */
  70:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef LWIP_MEM_ILLEGAL_FREE
  71:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ILLEGAL_FREE(msg)         LWIP_ASSERT(msg, 0)
ARM GAS  /tmp/ccfh2Clp.s 			page 3


  72:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
  73:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  74:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_STATS_INC_LOCKED(x)         SYS_ARCH_LOCKED(MEM_STATS_INC(x))
  75:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_STATS_INC_USED_LOCKED(x, y) SYS_ARCH_LOCKED(MEM_STATS_INC_USED(x, y))
  76:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_STATS_DEC_USED_LOCKED(x, y) SYS_ARCH_LOCKED(MEM_STATS_DEC_USED(x, y))
  77:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  78:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
  79:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SANITY_OFFSET   MEM_SANITY_REGION_BEFORE_ALIGNED
  80:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SANITY_OVERHEAD (MEM_SANITY_REGION_BEFORE_ALIGNED + MEM_SANITY_REGION_AFTER_ALIGNED)
  81:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else
  82:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SANITY_OFFSET   0
  83:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SANITY_OVERHEAD 0
  84:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
  85:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
  86:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK || MEMP_OVERFLOW_CHECK
  87:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
  88:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Check if a mep element was victim of an overflow or underflow
  89:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * (e.g. the restricted area after/before it has been altered)
  90:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
  91:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param p the mem element to check
  92:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size allocated size of the element
  93:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param descr1 description of the element source shown on error
  94:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param descr2 description of the element source shown on error
  95:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
  96:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
  97:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_overflow_check_raw(void *p, size_t size, const char *descr1, const char *descr2)
  98:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
  99:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_REGION_AFTER_ALIGNED || MEM_SANITY_REGION_BEFORE_ALIGNED
 100:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u16_t k;
 101:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t *m;
 102:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 103:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_REGION_AFTER_ALIGNED > 0
 104:Middlewares/Third_Party/LwIP/src/core/mem.c ****   m = (u8_t *)p + size;
 105:Middlewares/Third_Party/LwIP/src/core/mem.c ****   for (k = 0; k < MEM_SANITY_REGION_AFTER_ALIGNED; k++) {
 106:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (m[k] != 0xcd) {
 107:Middlewares/Third_Party/LwIP/src/core/mem.c ****       char errstr[128];
 108:Middlewares/Third_Party/LwIP/src/core/mem.c ****       snprintf(errstr, sizeof(errstr), "detected mem overflow in %s%s", descr1, descr2);
 109:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_ASSERT(errstr, 0);
 110:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 111:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 112:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_SANITY_REGION_AFTER_ALIGNED > 0 */
 113:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 114:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_REGION_BEFORE_ALIGNED > 0
 115:Middlewares/Third_Party/LwIP/src/core/mem.c ****   m = (u8_t *)p - MEM_SANITY_REGION_BEFORE_ALIGNED;
 116:Middlewares/Third_Party/LwIP/src/core/mem.c ****   for (k = 0; k < MEM_SANITY_REGION_BEFORE_ALIGNED; k++) {
 117:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (m[k] != 0xcd) {
 118:Middlewares/Third_Party/LwIP/src/core/mem.c ****       char errstr[128];
 119:Middlewares/Third_Party/LwIP/src/core/mem.c ****       snprintf(errstr, sizeof(errstr), "detected mem underflow in %s%s", descr1, descr2);
 120:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_ASSERT(errstr, 0);
 121:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 122:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 123:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_SANITY_REGION_BEFORE_ALIGNED > 0 */
 124:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else
 125:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(p);
 126:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(desc);
 127:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(descr);
 128:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
ARM GAS  /tmp/ccfh2Clp.s 			page 4


 129:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 130:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 131:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 132:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Initialize the restricted area of a mem element.
 133:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 134:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 135:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_overflow_init_raw(void *p, size_t size)
 136:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 137:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_REGION_BEFORE_ALIGNED > 0 || MEM_SANITY_REGION_AFTER_ALIGNED > 0
 138:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t *m;
 139:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_REGION_BEFORE_ALIGNED > 0
 140:Middlewares/Third_Party/LwIP/src/core/mem.c ****   m = (u8_t *)p - MEM_SANITY_REGION_BEFORE_ALIGNED;
 141:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memset(m, 0xcd, MEM_SANITY_REGION_BEFORE_ALIGNED);
 142:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 143:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_REGION_AFTER_ALIGNED > 0
 144:Middlewares/Third_Party/LwIP/src/core/mem.c ****   m = (u8_t *)p + size;
 145:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memset(m, 0xcd, MEM_SANITY_REGION_AFTER_ALIGNED);
 146:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 147:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* MEM_SANITY_REGION_BEFORE_ALIGNED > 0 || MEM_SANITY_REGION_AFTER_ALIGNED > 0 */
 148:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(p);
 149:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(desc);
 150:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_SANITY_REGION_BEFORE_ALIGNED > 0 || MEM_SANITY_REGION_AFTER_ALIGNED > 0 */
 151:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 152:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_OVERFLOW_CHECK || MEMP_OVERFLOW_CHECK */
 153:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 154:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC || MEM_USE_POOLS
 155:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 156:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** mem_init is not used when using pools instead of a heap or using
 157:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * C library malloc().
 158:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 159:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 160:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_init(void)
 161:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 162:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 163:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 164:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** mem_trim is not used when using pools instead of a heap or using
 165:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * C library malloc(): we can't free part of a pool element and the stack
 166:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * support mem_trim() to return a different pointer
 167:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 168:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 169:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_trim(void *mem, mem_size_t size)
 170:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 171:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_UNUSED_ARG(size);
 172:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return mem;
 173:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 174:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_LIBC_MALLOC || MEM_USE_POOLS */
 175:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 176:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC
 177:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* lwIP heap implemented using C library malloc() */
 178:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 179:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* in case C library malloc() needs extra protection,
 180:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * allow these defines to be overridden.
 181:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 182:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef mem_clib_free
 183:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_clib_free free
 184:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 185:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef mem_clib_malloc
ARM GAS  /tmp/ccfh2Clp.s 			page 5


 186:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_clib_malloc malloc
 187:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 188:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef mem_clib_calloc
 189:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_clib_calloc calloc
 190:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 191:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 192:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_STATS && MEM_STATS
 193:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_LIBC_STATSHELPER_SIZE LWIP_MEM_ALIGN_SIZE(sizeof(mem_size_t))
 194:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else
 195:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_LIBC_STATSHELPER_SIZE 0
 196:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 197:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 198:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 199:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Allocate a block of memory with a minimum of 'size' bytes.
 200:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 201:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size is the minimum size of the requested block in bytes.
 202:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return pointer to allocated memory or NULL if no free memory was found.
 203:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 204:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Note that the returned value must always be aligned (as defined by MEM_ALIGNMENT).
 205:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 206:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 207:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc(mem_size_t size)
 208:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 209:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *ret = mem_clib_malloc(size + MEM_LIBC_STATSHELPER_SIZE);
 210:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (ret == NULL) {
 211:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(err);
 212:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } else {
 213:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("malloc() must return aligned memory", LWIP_MEM_ALIGN(ret) == ret);
 214:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_STATS && MEM_STATS
 215:Middlewares/Third_Party/LwIP/src/core/mem.c ****     *(mem_size_t *)ret = size;
 216:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ret = (u8_t *)ret + MEM_LIBC_STATSHELPER_SIZE;
 217:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_USED_LOCKED(used, size);
 218:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 219:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 220:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return ret;
 221:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 222:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 223:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** Put memory back on the heap
 224:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 225:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem is the pointer as returned by a previous call to mem_malloc()
 226:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 227:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 228:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_free(void *rmem)
 229:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 230:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem != NULL", (rmem != NULL));
 231:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem == MEM_ALIGN(rmem)", (rmem == LWIP_MEM_ALIGN(rmem)));
 232:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_STATS && MEM_STATS
 233:Middlewares/Third_Party/LwIP/src/core/mem.c ****   rmem = (u8_t *)rmem - MEM_LIBC_STATSHELPER_SIZE;
 234:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_DEC_USED_LOCKED(used, *(mem_size_t *)rmem);
 235:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 236:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_clib_free(rmem);
 237:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 238:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 239:Middlewares/Third_Party/LwIP/src/core/mem.c **** #elif MEM_USE_POOLS
 240:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 241:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* lwIP heap implemented with different sized pools */
 242:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
ARM GAS  /tmp/ccfh2Clp.s 			page 6


 243:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 244:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Allocate memory: determine the smallest pool that is big enough
 245:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * to contain an element of 'size' and get an element from that pool.
 246:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 247:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size the size in bytes of the memory needed
 248:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return a pointer to the allocated memory or NULL if the pool is empty
 249:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 250:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 251:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc(mem_size_t size)
 252:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 253:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *ret;
 254:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct memp_malloc_helper *element = NULL;
 255:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memp_t poolnr;
 256:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t required_size = size + LWIP_MEM_ALIGN_SIZE(sizeof(struct memp_malloc_helper));
 257:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 258:Middlewares/Third_Party/LwIP/src/core/mem.c ****   for (poolnr = MEMP_POOL_FIRST; poolnr <= MEMP_POOL_LAST; poolnr = (memp_t)(poolnr + 1)) {
 259:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* is this pool big enough to hold an element of the required size
 260:Middlewares/Third_Party/LwIP/src/core/mem.c ****        plus a struct memp_malloc_helper that saves the pool this element came from? */
 261:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (required_size <= memp_pools[poolnr]->size) {
 262:Middlewares/Third_Party/LwIP/src/core/mem.c ****       element = (struct memp_malloc_helper *)memp_malloc(poolnr);
 263:Middlewares/Third_Party/LwIP/src/core/mem.c ****       if (element == NULL) {
 264:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* No need to DEBUGF or ASSERT: This error is already taken care of in memp.c */
 265:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_USE_POOLS_TRY_BIGGER_POOL
 266:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /** Try a bigger pool if this one is empty! */
 267:Middlewares/Third_Party/LwIP/src/core/mem.c ****         if (poolnr < MEMP_POOL_LAST) {
 268:Middlewares/Third_Party/LwIP/src/core/mem.c ****           continue;
 269:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 270:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_USE_POOLS_TRY_BIGGER_POOL */
 271:Middlewares/Third_Party/LwIP/src/core/mem.c ****         MEM_STATS_INC_LOCKED(err);
 272:Middlewares/Third_Party/LwIP/src/core/mem.c ****         return NULL;
 273:Middlewares/Third_Party/LwIP/src/core/mem.c ****       }
 274:Middlewares/Third_Party/LwIP/src/core/mem.c ****       break;
 275:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 276:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 277:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (poolnr > MEMP_POOL_LAST) {
 278:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("mem_malloc(): no pool is that big!", 0);
 279:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(err);
 280:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 281:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 282:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 283:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* save the pool number this element came from */
 284:Middlewares/Third_Party/LwIP/src/core/mem.c ****   element->poolnr = poolnr;
 285:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* and return a pointer to the memory directly after the struct memp_malloc_helper */
 286:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ret = (u8_t *)element + LWIP_MEM_ALIGN_SIZE(sizeof(struct memp_malloc_helper));
 287:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 288:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEMP_OVERFLOW_CHECK || (LWIP_STATS && MEM_STATS)
 289:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* truncating to u16_t is safe because struct memp_desc::size is u16_t */
 290:Middlewares/Third_Party/LwIP/src/core/mem.c ****   element->size = (u16_t)size;
 291:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_INC_USED_LOCKED(used, element->size);
 292:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEMP_OVERFLOW_CHECK || (LWIP_STATS && MEM_STATS) */
 293:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEMP_OVERFLOW_CHECK
 294:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize unused memory (diff between requested size and selected pool's size) */
 295:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memset((u8_t *)ret + size, 0xcd, memp_pools[poolnr]->size - size);
 296:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEMP_OVERFLOW_CHECK */
 297:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return ret;
 298:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 299:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
ARM GAS  /tmp/ccfh2Clp.s 			page 7


 300:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 301:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Free memory previously allocated by mem_malloc. Loads the pool number
 302:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * and calls memp_free with that pool number to put the element back into
 303:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * its pool
 304:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 305:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem the memory element to free
 306:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 307:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 308:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_free(void *rmem)
 309:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 310:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct memp_malloc_helper *hmem;
 311:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 312:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem != NULL", (rmem != NULL));
 313:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("rmem == MEM_ALIGN(rmem)", (rmem == LWIP_MEM_ALIGN(rmem)));
 314:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 315:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* get the original struct memp_malloc_helper */
 316:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* cast through void* to get rid of alignment warnings */
 317:Middlewares/Third_Party/LwIP/src/core/mem.c ****   hmem = (struct memp_malloc_helper *)(void *)((u8_t *)rmem - LWIP_MEM_ALIGN_SIZE(sizeof(struct mem
 318:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 319:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("hmem != NULL", (hmem != NULL));
 320:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("hmem == MEM_ALIGN(hmem)", (hmem == LWIP_MEM_ALIGN(hmem)));
 321:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("hmem->poolnr < MEMP_MAX", (hmem->poolnr < MEMP_MAX));
 322:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 323:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_DEC_USED_LOCKED(used, hmem->size);
 324:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEMP_OVERFLOW_CHECK
 325:Middlewares/Third_Party/LwIP/src/core/mem.c ****   {
 326:Middlewares/Third_Party/LwIP/src/core/mem.c ****     u16_t i;
 327:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("MEM_USE_POOLS: invalid chunk size",
 328:Middlewares/Third_Party/LwIP/src/core/mem.c ****                 hmem->size <= memp_pools[hmem->poolnr]->size);
 329:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* check that unused memory remained untouched (diff between requested size and selected pool's
 330:Middlewares/Third_Party/LwIP/src/core/mem.c ****     for (i = hmem->size; i < memp_pools[hmem->poolnr]->size; i++) {
 331:Middlewares/Third_Party/LwIP/src/core/mem.c ****       u8_t data = *((u8_t *)rmem + i);
 332:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_ASSERT("MEM_USE_POOLS: mem overflow detected", data == 0xcd);
 333:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 334:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 335:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEMP_OVERFLOW_CHECK */
 336:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 337:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* and put it in the pool we saved earlier */
 338:Middlewares/Third_Party/LwIP/src/core/mem.c ****   memp_free(hmem->poolnr, hmem);
 339:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 340:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 341:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* MEM_USE_POOLS */
 342:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* lwIP replacement for your libc malloc() */
 343:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 344:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 345:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * The heap is made up as a list of structs of this type.
 346:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This does not have to be aligned since for getting its size,
 347:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * we only use the macro SIZEOF_STRUCT_MEM, which automatically aligns.
 348:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 349:Middlewares/Third_Party/LwIP/src/core/mem.c **** struct mem {
 350:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** index (-> ram[next]) of the next struct */
 351:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t next;
 352:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** index (-> ram[prev]) of the previous struct */
 353:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t prev;
 354:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** 1: this area is used; 0: this area is unused */
 355:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t used;
 356:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
ARM GAS  /tmp/ccfh2Clp.s 			page 8


 357:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /** this keeps track of the user allocation size for guard checks */
 358:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t user_size;
 359:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 360:Middlewares/Third_Party/LwIP/src/core/mem.c **** };
 361:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 362:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** All allocated blocks will be MIN_SIZE bytes big, at least!
 363:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * MIN_SIZE can be overridden to suit your needs. Smaller values save space,
 364:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * larger values could prevent too small blocks to fragment the RAM too much. */
 365:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef MIN_SIZE
 366:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MIN_SIZE             12
 367:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MIN_SIZE */
 368:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* some alignment macros: we define them here for better source code layout */
 369:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MIN_SIZE_ALIGNED     LWIP_MEM_ALIGN_SIZE(MIN_SIZE)
 370:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define SIZEOF_STRUCT_MEM    LWIP_MEM_ALIGN_SIZE(sizeof(struct mem))
 371:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SIZE_ALIGNED     LWIP_MEM_ALIGN_SIZE(MEM_SIZE)
 372:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 373:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** If you want to relocate the heap to external memory, simply define
 374:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * LWIP_RAM_HEAP_POINTER as a void-pointer to that location.
 375:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * If so, make sure the memory at that location is big enough (see below on
 376:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * how that space is calculated). */
 377:Middlewares/Third_Party/LwIP/src/core/mem.c **** #ifndef LWIP_RAM_HEAP_POINTER
 378:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** the heap. we need one struct mem at the end and some room for alignment */
 379:Middlewares/Third_Party/LwIP/src/core/mem.c **** LWIP_DECLARE_MEMORY_ALIGNED(ram_heap, MEM_SIZE_ALIGNED + (2U * SIZEOF_STRUCT_MEM));
 380:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_RAM_HEAP_POINTER ram_heap
 381:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_RAM_HEAP_POINTER */
 382:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 383:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** pointer to the heap (ram_heap): for alignment, ram is now a pointer instead of an array */
 384:Middlewares/Third_Party/LwIP/src/core/mem.c **** static u8_t *ram;
 385:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** the last entry, always unused! */
 386:Middlewares/Third_Party/LwIP/src/core/mem.c **** static struct mem *ram_end;
 387:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 388:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** concurrent access protection */
 389:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if !NO_SYS
 390:Middlewares/Third_Party/LwIP/src/core/mem.c **** static sys_mutex_t mem_mutex;
 391:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 392:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 393:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 394:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 395:Middlewares/Third_Party/LwIP/src/core/mem.c **** static volatile u8_t mem_free_count;
 396:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 397:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* Allow mem_free from other (e.g. interrupt) context */
 398:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_DECL_PROTECT()  SYS_ARCH_DECL_PROTECT(lev_free)
 399:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_PROTECT()       SYS_ARCH_PROTECT(lev_free)
 400:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_UNPROTECT()     SYS_ARCH_UNPROTECT(lev_free)
 401:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_DECL_PROTECT() SYS_ARCH_DECL_PROTECT(lev_alloc)
 402:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_PROTECT()      SYS_ARCH_PROTECT(lev_alloc)
 403:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_UNPROTECT()    SYS_ARCH_UNPROTECT(lev_alloc)
 404:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_LFREE_VOLATILE       volatile
 405:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 406:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 407:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 408:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* Protect the heap only by using a mutex */
 409:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_DECL_PROTECT()
 410:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_PROTECT()    sys_mutex_lock(&mem_mutex)
 411:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_FREE_UNPROTECT()  sys_mutex_unlock(&mem_mutex)
 412:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* mem_malloc is protected using mutex AND LWIP_MEM_ALLOC_PROTECT */
 413:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_DECL_PROTECT()
ARM GAS  /tmp/ccfh2Clp.s 			page 9


 414:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_PROTECT()
 415:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_ALLOC_UNPROTECT()
 416:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define LWIP_MEM_LFREE_VOLATILE
 417:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 418:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 419:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 420:Middlewares/Third_Party/LwIP/src/core/mem.c **** /** pointer to the lowest free block, this is used for faster search */
 421:Middlewares/Third_Party/LwIP/src/core/mem.c **** static struct mem * LWIP_MEM_LFREE_VOLATILE lfree;
 422:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 423:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_CHECK
 424:Middlewares/Third_Party/LwIP/src/core/mem.c **** static void mem_sanity(void);
 425:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SANITY() mem_sanity()
 426:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else
 427:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define MEM_SANITY()
 428:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 429:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 430:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 431:Middlewares/Third_Party/LwIP/src/core/mem.c **** static void
 432:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_overflow_init_element(struct mem *mem, mem_size_t user_size)
 433:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 434:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *p = (u8_t *)mem + SIZEOF_STRUCT_MEM + MEM_SANITY_OFFSET;
 435:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->user_size = user_size;
 436:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_overflow_init_raw(p, user_size);
 437:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 438:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 439:Middlewares/Third_Party/LwIP/src/core/mem.c **** static void
 440:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_overflow_check_element(struct mem *mem)
 441:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 442:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *p = (u8_t *)mem + SIZEOF_STRUCT_MEM + MEM_SANITY_OFFSET;
 443:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_overflow_check_raw(p, mem->user_size, "heap", "");
 444:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 445:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* MEM_OVERFLOW_CHECK */
 446:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_overflow_init_element(mem, size)
 447:Middlewares/Third_Party/LwIP/src/core/mem.c **** #define mem_overflow_check_element(mem)
 448:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_OVERFLOW_CHECK */
 449:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 450:Middlewares/Third_Party/LwIP/src/core/mem.c **** static struct mem *
 451:Middlewares/Third_Party/LwIP/src/core/mem.c **** ptr_to_mem(mem_size_t ptr)
 452:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
  53              		.loc 1 452 1
  54              		.cfi_startproc
  55              		@ args = 0, pretend = 0, frame = 8
  56              		@ frame_needed = 1, uses_anonymous_args = 0
  57              		@ link register save eliminated.
  58 0000 80B4     		push	{r7}
  59              	.LCFI0:
  60              		.cfi_def_cfa_offset 4
  61              		.cfi_offset 7, -4
  62 0002 83B0     		sub	sp, sp, #12
  63              	.LCFI1:
  64              		.cfi_def_cfa_offset 16
  65 0004 00AF     		add	r7, sp, #0
  66              	.LCFI2:
  67              		.cfi_def_cfa_register 7
  68 0006 0346     		mov	r3, r0
  69 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 453:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return (struct mem *)(void *)&ram[ptr];
ARM GAS  /tmp/ccfh2Clp.s 			page 10


  70              		.loc 1 453 32
  71 000a 054B     		ldr	r3, .L3
  72 000c 1A68     		ldr	r2, [r3]
  73 000e FB88     		ldrh	r3, [r7, #6]
  74              		.loc 1 453 10
  75 0010 1344     		add	r3, r3, r2
 454:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
  76              		.loc 1 454 1
  77 0012 1846     		mov	r0, r3
  78 0014 0C37     		adds	r7, r7, #12
  79              	.LCFI3:
  80              		.cfi_def_cfa_offset 4
  81 0016 BD46     		mov	sp, r7
  82              	.LCFI4:
  83              		.cfi_def_cfa_register 13
  84              		@ sp needed
  85 0018 5DF8047B 		ldr	r7, [sp], #4
  86              	.LCFI5:
  87              		.cfi_restore 7
  88              		.cfi_def_cfa_offset 0
  89 001c 7047     		bx	lr
  90              	.L4:
  91 001e 00BF     		.align	2
  92              	.L3:
  93 0020 00000000 		.word	ram
  94              		.cfi_endproc
  95              	.LFE137:
  97              		.section	.text.mem_to_ptr,"ax",%progbits
  98              		.align	1
  99              		.syntax unified
 100              		.thumb
 101              		.thumb_func
 102              		.fpu fpv4-sp-d16
 104              	mem_to_ptr:
 105              	.LFB138:
 455:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 456:Middlewares/Third_Party/LwIP/src/core/mem.c **** static mem_size_t
 457:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_to_ptr(void *mem)
 458:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 106              		.loc 1 458 1
 107              		.cfi_startproc
 108              		@ args = 0, pretend = 0, frame = 8
 109              		@ frame_needed = 1, uses_anonymous_args = 0
 110              		@ link register save eliminated.
 111 0000 80B4     		push	{r7}
 112              	.LCFI6:
 113              		.cfi_def_cfa_offset 4
 114              		.cfi_offset 7, -4
 115 0002 83B0     		sub	sp, sp, #12
 116              	.LCFI7:
 117              		.cfi_def_cfa_offset 16
 118 0004 00AF     		add	r7, sp, #0
 119              	.LCFI8:
 120              		.cfi_def_cfa_register 7
 121 0006 7860     		str	r0, [r7, #4]
 459:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return (mem_size_t)((u8_t *)mem - ram);
 122              		.loc 1 459 35
ARM GAS  /tmp/ccfh2Clp.s 			page 11


 123 0008 054B     		ldr	r3, .L7
 124 000a 1B68     		ldr	r3, [r3]
 125 000c 7A68     		ldr	r2, [r7, #4]
 126 000e D31A     		subs	r3, r2, r3
 127              		.loc 1 459 10
 128 0010 9BB2     		uxth	r3, r3
 460:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 129              		.loc 1 460 1
 130 0012 1846     		mov	r0, r3
 131 0014 0C37     		adds	r7, r7, #12
 132              	.LCFI9:
 133              		.cfi_def_cfa_offset 4
 134 0016 BD46     		mov	sp, r7
 135              	.LCFI10:
 136              		.cfi_def_cfa_register 13
 137              		@ sp needed
 138 0018 5DF8047B 		ldr	r7, [sp], #4
 139              	.LCFI11:
 140              		.cfi_restore 7
 141              		.cfi_def_cfa_offset 0
 142 001c 7047     		bx	lr
 143              	.L8:
 144 001e 00BF     		.align	2
 145              	.L7:
 146 0020 00000000 		.word	ram
 147              		.cfi_endproc
 148              	.LFE138:
 150              		.section	.rodata
 151              		.align	2
 152              	.LC0:
 153 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/core/mem.c\000"
 153      6C657761 
 153      7265732F 
 153      54686972 
 153      645F5061 
 154              		.align	2
 155              	.LC1:
 156 002c 706C7567 		.ascii	"plug_holes: mem >= ram\000"
 156      5F686F6C 
 156      65733A20 
 156      6D656D20 
 156      3E3D2072 
 157 0043 00       		.align	2
 158              	.LC2:
 159 0044 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 159      7274696F 
 159      6E202225 
 159      73222066 
 159      61696C65 
 160              		.align	2
 161              	.LC3:
 162 006c 706C7567 		.ascii	"plug_holes: mem < ram_end\000"
 162      5F686F6C 
 162      65733A20 
 162      6D656D20 
 162      3C207261 
 163 0086 0000     		.align	2
ARM GAS  /tmp/ccfh2Clp.s 			page 12


 164              	.LC4:
 165 0088 706C7567 		.ascii	"plug_holes: mem->used == 0\000"
 165      5F686F6C 
 165      65733A20 
 165      6D656D2D 
 165      3E757365 
 166 00a3 00       		.align	2
 167              	.LC5:
 168 00a4 706C7567 		.ascii	"plug_holes: mem->next <= MEM_SIZE_ALIGNED\000"
 168      5F686F6C 
 168      65733A20 
 168      6D656D2D 
 168      3E6E6578 
 169              		.section	.text.plug_holes,"ax",%progbits
 170              		.align	1
 171              		.syntax unified
 172              		.thumb
 173              		.thumb_func
 174              		.fpu fpv4-sp-d16
 176              	plug_holes:
 177              	.LFB139:
 461:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 462:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 463:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * "Plug holes" by combining adjacent empty struct mems.
 464:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * After this function is through, there should not exist
 465:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * one empty struct mem pointing to another empty struct mem.
 466:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 467:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param mem this points to a struct mem which just has been freed
 468:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @internal this function is only called by mem_free() and mem_trim()
 469:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 470:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * This assumes access to the heap is protected by the calling function
 471:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * already.
 472:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 473:Middlewares/Third_Party/LwIP/src/core/mem.c **** static void
 474:Middlewares/Third_Party/LwIP/src/core/mem.c **** plug_holes(struct mem *mem)
 475:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 178              		.loc 1 475 1
 179              		.cfi_startproc
 180              		@ args = 0, pretend = 0, frame = 16
 181              		@ frame_needed = 1, uses_anonymous_args = 0
 182 0000 90B5     		push	{r4, r7, lr}
 183              	.LCFI12:
 184              		.cfi_def_cfa_offset 12
 185              		.cfi_offset 4, -12
 186              		.cfi_offset 7, -8
 187              		.cfi_offset 14, -4
 188 0002 85B0     		sub	sp, sp, #20
 189              	.LCFI13:
 190              		.cfi_def_cfa_offset 32
 191 0004 00AF     		add	r7, sp, #0
 192              	.LCFI14:
 193              		.cfi_def_cfa_register 7
 194 0006 7860     		str	r0, [r7, #4]
 476:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *nmem;
 477:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *pmem;
 478:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 479:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem >= ram", (u8_t *)mem >= ram);
ARM GAS  /tmp/ccfh2Clp.s 			page 13


 195              		.loc 1 479 3
 196 0008 454B     		ldr	r3, .L19
 197 000a 1B68     		ldr	r3, [r3]
 198 000c 7A68     		ldr	r2, [r7, #4]
 199 000e 9A42     		cmp	r2, r3
 200 0010 06D2     		bcs	.L10
 201              		.loc 1 479 3 is_stmt 0 discriminator 1
 202 0012 444B     		ldr	r3, .L19+4
 203 0014 40F2DF12 		movw	r2, #479
 204 0018 4349     		ldr	r1, .L19+8
 205 001a 4448     		ldr	r0, .L19+12
 206 001c FFF7FEFF 		bl	printf
 207              	.L10:
 480:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem < ram_end", (u8_t *)mem < (u8_t *)ram_end);
 208              		.loc 1 480 3 is_stmt 1
 209 0020 434B     		ldr	r3, .L19+16
 210 0022 1B68     		ldr	r3, [r3]
 211 0024 7A68     		ldr	r2, [r7, #4]
 212 0026 9A42     		cmp	r2, r3
 213 0028 06D3     		bcc	.L11
 214              		.loc 1 480 3 is_stmt 0 discriminator 1
 215 002a 3E4B     		ldr	r3, .L19+4
 216 002c 4FF4F072 		mov	r2, #480
 217 0030 4049     		ldr	r1, .L19+20
 218 0032 3E48     		ldr	r0, .L19+12
 219 0034 FFF7FEFF 		bl	printf
 220              	.L11:
 481:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem->used == 0", mem->used == 0);
 221              		.loc 1 481 3 is_stmt 1
 222 0038 7B68     		ldr	r3, [r7, #4]
 223 003a 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 224 003c 002B     		cmp	r3, #0
 225 003e 06D0     		beq	.L12
 226              		.loc 1 481 3 is_stmt 0 discriminator 1
 227 0040 384B     		ldr	r3, .L19+4
 228 0042 40F2E112 		movw	r2, #481
 229 0046 3C49     		ldr	r1, .L19+24
 230 0048 3848     		ldr	r0, .L19+12
 231 004a FFF7FEFF 		bl	printf
 232              	.L12:
 482:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 483:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* plug hole forward */
 484:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("plug_holes: mem->next <= MEM_SIZE_ALIGNED", mem->next <= MEM_SIZE_ALIGNED);
 233              		.loc 1 484 3 is_stmt 1
 234 004e 7B68     		ldr	r3, [r7, #4]
 235 0050 1B88     		ldrh	r3, [r3]
 236 0052 B3F5C86F 		cmp	r3, #1600
 237 0056 06D9     		bls	.L13
 238              		.loc 1 484 3 is_stmt 0 discriminator 1
 239 0058 324B     		ldr	r3, .L19+4
 240 005a 4FF4F272 		mov	r2, #484
 241 005e 3749     		ldr	r1, .L19+28
 242 0060 3248     		ldr	r0, .L19+12
 243 0062 FFF7FEFF 		bl	printf
 244              	.L13:
 485:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 486:Middlewares/Third_Party/LwIP/src/core/mem.c ****   nmem = ptr_to_mem(mem->next);
ARM GAS  /tmp/ccfh2Clp.s 			page 14


 245              		.loc 1 486 10 is_stmt 1
 246 0066 7B68     		ldr	r3, [r7, #4]
 247 0068 1B88     		ldrh	r3, [r3]
 248 006a 1846     		mov	r0, r3
 249 006c FFF7FEFF 		bl	ptr_to_mem
 250 0070 F860     		str	r0, [r7, #12]
 487:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (mem != nmem && nmem->used == 0 && (u8_t *)nmem != (u8_t *)ram_end) {
 251              		.loc 1 487 6
 252 0072 7A68     		ldr	r2, [r7, #4]
 253 0074 FB68     		ldr	r3, [r7, #12]
 254 0076 9A42     		cmp	r2, r3
 255 0078 24D0     		beq	.L14
 256              		.loc 1 487 26 discriminator 1
 257 007a FB68     		ldr	r3, [r7, #12]
 258 007c 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 259              		.loc 1 487 19 discriminator 1
 260 007e 002B     		cmp	r3, #0
 261 0080 20D1     		bne	.L14
 262              		.loc 1 487 57 discriminator 2
 263 0082 2B4B     		ldr	r3, .L19+16
 264 0084 1B68     		ldr	r3, [r3]
 265              		.loc 1 487 38 discriminator 2
 266 0086 FA68     		ldr	r2, [r7, #12]
 267 0088 9A42     		cmp	r2, r3
 268 008a 1BD0     		beq	.L14
 488:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* if mem->next is unused and not end of ram, combine mem and mem->next */
 489:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (lfree == nmem) {
 269              		.loc 1 489 15
 270 008c 2C4B     		ldr	r3, .L19+32
 271 008e 1B68     		ldr	r3, [r3]
 272              		.loc 1 489 8
 273 0090 FA68     		ldr	r2, [r7, #12]
 274 0092 9A42     		cmp	r2, r3
 275 0094 02D1     		bne	.L15
 490:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = mem;
 276              		.loc 1 490 13
 277 0096 2A4A     		ldr	r2, .L19+32
 278 0098 7B68     		ldr	r3, [r7, #4]
 279 009a 1360     		str	r3, [r2]
 280              	.L15:
 491:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 492:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = nmem->next;
 281              		.loc 1 492 21
 282 009c FB68     		ldr	r3, [r7, #12]
 283 009e 1A88     		ldrh	r2, [r3]
 284              		.loc 1 492 15
 285 00a0 7B68     		ldr	r3, [r7, #4]
 286 00a2 1A80     		strh	r2, [r3]	@ movhi
 493:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (nmem->next != MEM_SIZE_ALIGNED) {
 287              		.loc 1 493 13
 288 00a4 FB68     		ldr	r3, [r7, #12]
 289 00a6 1B88     		ldrh	r3, [r3]
 290              		.loc 1 493 8
 291 00a8 B3F5C86F 		cmp	r3, #1600
 292 00ac 0AD0     		beq	.L14
 494:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ptr_to_mem(nmem->next)->prev = mem_to_ptr(mem);
 293              		.loc 1 494 7
ARM GAS  /tmp/ccfh2Clp.s 			page 15


 294 00ae FB68     		ldr	r3, [r7, #12]
 295 00b0 1B88     		ldrh	r3, [r3]
 296 00b2 1846     		mov	r0, r3
 297 00b4 FFF7FEFF 		bl	ptr_to_mem
 298 00b8 0446     		mov	r4, r0
 299              		.loc 1 494 38
 300 00ba 7868     		ldr	r0, [r7, #4]
 301 00bc FFF7FEFF 		bl	mem_to_ptr
 302 00c0 0346     		mov	r3, r0
 303              		.loc 1 494 36
 304 00c2 6380     		strh	r3, [r4, #2]	@ movhi
 305              	.L14:
 495:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 496:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 497:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 498:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* plug hole backward */
 499:Middlewares/Third_Party/LwIP/src/core/mem.c ****   pmem = ptr_to_mem(mem->prev);
 306              		.loc 1 499 10
 307 00c4 7B68     		ldr	r3, [r7, #4]
 308 00c6 5B88     		ldrh	r3, [r3, #2]
 309 00c8 1846     		mov	r0, r3
 310 00ca FFF7FEFF 		bl	ptr_to_mem
 311 00ce B860     		str	r0, [r7, #8]
 500:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (pmem != mem && pmem->used == 0) {
 312              		.loc 1 500 6
 313 00d0 BA68     		ldr	r2, [r7, #8]
 314 00d2 7B68     		ldr	r3, [r7, #4]
 315 00d4 9A42     		cmp	r2, r3
 316 00d6 1FD0     		beq	.L18
 317              		.loc 1 500 26 discriminator 1
 318 00d8 BB68     		ldr	r3, [r7, #8]
 319 00da 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 320              		.loc 1 500 19 discriminator 1
 321 00dc 002B     		cmp	r3, #0
 322 00de 1BD1     		bne	.L18
 501:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* if mem->prev is unused, combine mem and mem->prev */
 502:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (lfree == mem) {
 323              		.loc 1 502 15
 324 00e0 174B     		ldr	r3, .L19+32
 325 00e2 1B68     		ldr	r3, [r3]
 326              		.loc 1 502 8
 327 00e4 7A68     		ldr	r2, [r7, #4]
 328 00e6 9A42     		cmp	r2, r3
 329 00e8 02D1     		bne	.L17
 503:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = pmem;
 330              		.loc 1 503 13
 331 00ea 154A     		ldr	r2, .L19+32
 332 00ec BB68     		ldr	r3, [r7, #8]
 333 00ee 1360     		str	r3, [r2]
 334              	.L17:
 504:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 505:Middlewares/Third_Party/LwIP/src/core/mem.c ****     pmem->next = mem->next;
 335              		.loc 1 505 21
 336 00f0 7B68     		ldr	r3, [r7, #4]
 337 00f2 1A88     		ldrh	r2, [r3]
 338              		.loc 1 505 16
 339 00f4 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccfh2Clp.s 			page 16


 340 00f6 1A80     		strh	r2, [r3]	@ movhi
 506:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem->next != MEM_SIZE_ALIGNED) {
 341              		.loc 1 506 12
 342 00f8 7B68     		ldr	r3, [r7, #4]
 343 00fa 1B88     		ldrh	r3, [r3]
 344              		.loc 1 506 8
 345 00fc B3F5C86F 		cmp	r3, #1600
 346 0100 0AD0     		beq	.L18
 507:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ptr_to_mem(mem->next)->prev = mem_to_ptr(pmem);
 347              		.loc 1 507 7
 348 0102 7B68     		ldr	r3, [r7, #4]
 349 0104 1B88     		ldrh	r3, [r3]
 350 0106 1846     		mov	r0, r3
 351 0108 FFF7FEFF 		bl	ptr_to_mem
 352 010c 0446     		mov	r4, r0
 353              		.loc 1 507 37
 354 010e B868     		ldr	r0, [r7, #8]
 355 0110 FFF7FEFF 		bl	mem_to_ptr
 356 0114 0346     		mov	r3, r0
 357              		.loc 1 507 35
 358 0116 6380     		strh	r3, [r4, #2]	@ movhi
 359              	.L18:
 508:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 509:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 510:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 360              		.loc 1 510 1
 361 0118 00BF     		nop
 362 011a 1437     		adds	r7, r7, #20
 363              	.LCFI15:
 364              		.cfi_def_cfa_offset 12
 365 011c BD46     		mov	sp, r7
 366              	.LCFI16:
 367              		.cfi_def_cfa_register 13
 368              		@ sp needed
 369 011e 90BD     		pop	{r4, r7, pc}
 370              	.L20:
 371              		.align	2
 372              	.L19:
 373 0120 00000000 		.word	ram
 374 0124 00000000 		.word	.LC0
 375 0128 2C000000 		.word	.LC1
 376 012c 44000000 		.word	.LC2
 377 0130 00000000 		.word	ram_end
 378 0134 6C000000 		.word	.LC3
 379 0138 88000000 		.word	.LC4
 380 013c A4000000 		.word	.LC5
 381 0140 00000000 		.word	lfree
 382              		.cfi_endproc
 383              	.LFE139:
 385              		.section	.rodata
 386 00ce 0000     		.align	2
 387              	.LC6:
 388 00d0 6661696C 		.ascii	"failed to create mem_mutex\000"
 388      65642074 
 388      6F206372 
 388      65617465 
 388      206D656D 
ARM GAS  /tmp/ccfh2Clp.s 			page 17


 389              		.section	.text.mem_init,"ax",%progbits
 390              		.align	1
 391              		.global	mem_init
 392              		.syntax unified
 393              		.thumb
 394              		.thumb_func
 395              		.fpu fpv4-sp-d16
 397              	mem_init:
 398              	.LFB140:
 511:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 512:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 513:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Zero the heap and initialize start, end and lowest-free
 514:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 515:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 516:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_init(void)
 517:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 399              		.loc 1 517 1
 400              		.cfi_startproc
 401              		@ args = 0, pretend = 0, frame = 8
 402              		@ frame_needed = 1, uses_anonymous_args = 0
 403 0000 80B5     		push	{r7, lr}
 404              	.LCFI17:
 405              		.cfi_def_cfa_offset 8
 406              		.cfi_offset 7, -8
 407              		.cfi_offset 14, -4
 408 0002 82B0     		sub	sp, sp, #8
 409              	.LCFI18:
 410              		.cfi_def_cfa_offset 16
 411 0004 00AF     		add	r7, sp, #0
 412              	.LCFI19:
 413              		.cfi_def_cfa_register 7
 518:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem;
 519:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 520:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("Sanity check alignment",
 521:Middlewares/Third_Party/LwIP/src/core/mem.c ****               (SIZEOF_STRUCT_MEM & (MEM_ALIGNMENT - 1)) == 0);
 522:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 523:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* align the heap */
 524:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram = (u8_t *)LWIP_MEM_ALIGN(LWIP_RAM_HEAP_POINTER);
 414              		.loc 1 524 17
 415 0006 1F4B     		ldr	r3, .L24
 416 0008 0333     		adds	r3, r3, #3
 417 000a 23F00303 		bic	r3, r3, #3
 418              		.loc 1 524 9
 419 000e 1A46     		mov	r2, r3
 420              		.loc 1 524 7
 421 0010 1D4B     		ldr	r3, .L24+4
 422 0012 1A60     		str	r2, [r3]
 525:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize the start of the heap */
 526:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)(void *)ram;
 423              		.loc 1 526 7
 424 0014 1C4B     		ldr	r3, .L24+4
 425 0016 1B68     		ldr	r3, [r3]
 426 0018 7B60     		str	r3, [r7, #4]
 527:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->next = MEM_SIZE_ALIGNED;
 427              		.loc 1 527 13
 428 001a 7B68     		ldr	r3, [r7, #4]
 429 001c 4FF4C862 		mov	r2, #1600
ARM GAS  /tmp/ccfh2Clp.s 			page 18


 430 0020 1A80     		strh	r2, [r3]	@ movhi
 528:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->prev = 0;
 431              		.loc 1 528 13
 432 0022 7B68     		ldr	r3, [r7, #4]
 433 0024 0022     		movs	r2, #0
 434 0026 5A80     		strh	r2, [r3, #2]	@ movhi
 529:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->used = 0;
 435              		.loc 1 529 13
 436 0028 7B68     		ldr	r3, [r7, #4]
 437 002a 0022     		movs	r2, #0
 438 002c 1A71     		strb	r2, [r3, #4]
 530:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize the end of the heap */
 531:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end = ptr_to_mem(MEM_SIZE_ALIGNED);
 439              		.loc 1 531 13
 440 002e 4FF4C860 		mov	r0, #1600
 441 0032 FFF7FEFF 		bl	ptr_to_mem
 442 0036 0246     		mov	r2, r0
 443              		.loc 1 531 11
 444 0038 144B     		ldr	r3, .L24+8
 445 003a 1A60     		str	r2, [r3]
 532:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end->used = 1;
 446              		.loc 1 532 10
 447 003c 134B     		ldr	r3, .L24+8
 448 003e 1B68     		ldr	r3, [r3]
 449              		.loc 1 532 17
 450 0040 0122     		movs	r2, #1
 451 0042 1A71     		strb	r2, [r3, #4]
 533:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end->next = MEM_SIZE_ALIGNED;
 452              		.loc 1 533 10
 453 0044 114B     		ldr	r3, .L24+8
 454 0046 1B68     		ldr	r3, [r3]
 455              		.loc 1 533 17
 456 0048 4FF4C862 		mov	r2, #1600
 457 004c 1A80     		strh	r2, [r3]	@ movhi
 534:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ram_end->prev = MEM_SIZE_ALIGNED;
 458              		.loc 1 534 10
 459 004e 0F4B     		ldr	r3, .L24+8
 460 0050 1B68     		ldr	r3, [r3]
 461              		.loc 1 534 17
 462 0052 4FF4C862 		mov	r2, #1600
 463 0056 5A80     		strh	r2, [r3, #2]	@ movhi
 535:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_SANITY();
 536:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 537:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* initialize the lowest-free pointer to the start of the heap */
 538:Middlewares/Third_Party/LwIP/src/core/mem.c ****   lfree = (struct mem *)(void *)ram;
 464              		.loc 1 538 9
 465 0058 0B4B     		ldr	r3, .L24+4
 466 005a 1B68     		ldr	r3, [r3]
 467 005c 0C4A     		ldr	r2, .L24+12
 468 005e 1360     		str	r3, [r2]
 539:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 540:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_AVAIL(avail, MEM_SIZE_ALIGNED);
 541:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 542:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (sys_mutex_new(&mem_mutex) != ERR_OK) {
 469              		.loc 1 542 7
 470 0060 0C48     		ldr	r0, .L24+16
 471 0062 FFF7FEFF 		bl	sys_mutex_new
ARM GAS  /tmp/ccfh2Clp.s 			page 19


 472 0066 0346     		mov	r3, r0
 473              		.loc 1 542 6
 474 0068 002B     		cmp	r3, #0
 475 006a 06D0     		beq	.L23
 543:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("failed to create mem_mutex", 0);
 476              		.loc 1 543 5 discriminator 1
 477 006c 0A4B     		ldr	r3, .L24+20
 478 006e 40F21F22 		movw	r2, #543
 479 0072 0A49     		ldr	r1, .L24+24
 480 0074 0A48     		ldr	r0, .L24+28
 481 0076 FFF7FEFF 		bl	printf
 482              	.L23:
 544:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 545:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 483              		.loc 1 545 1
 484 007a 00BF     		nop
 485 007c 0837     		adds	r7, r7, #8
 486              	.LCFI20:
 487              		.cfi_def_cfa_offset 8
 488 007e BD46     		mov	sp, r7
 489              	.LCFI21:
 490              		.cfi_def_cfa_register 13
 491              		@ sp needed
 492 0080 80BD     		pop	{r7, pc}
 493              	.L25:
 494 0082 00BF     		.align	2
 495              	.L24:
 496 0084 00000000 		.word	ram_heap
 497 0088 00000000 		.word	ram
 498 008c 00000000 		.word	ram_end
 499 0090 00000000 		.word	lfree
 500 0094 00000000 		.word	mem_mutex
 501 0098 00000000 		.word	.LC0
 502 009c D0000000 		.word	.LC6
 503 00a0 44000000 		.word	.LC2
 504              		.cfi_endproc
 505              	.LFE140:
 507              		.section	.text.mem_link_valid,"ax",%progbits
 508              		.align	1
 509              		.syntax unified
 510              		.thumb
 511              		.thumb_func
 512              		.fpu fpv4-sp-d16
 514              	mem_link_valid:
 515              	.LFB141:
 546:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 547:Middlewares/Third_Party/LwIP/src/core/mem.c **** /* Check if a struct mem is correctly linked.
 548:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * If not, double-free is a possible reason.
 549:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 550:Middlewares/Third_Party/LwIP/src/core/mem.c **** static int
 551:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_link_valid(struct mem *mem)
 552:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 516              		.loc 1 552 1
 517              		.cfi_startproc
 518              		@ args = 0, pretend = 0, frame = 24
 519              		@ frame_needed = 1, uses_anonymous_args = 0
 520 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/ccfh2Clp.s 			page 20


 521              	.LCFI22:
 522              		.cfi_def_cfa_offset 8
 523              		.cfi_offset 7, -8
 524              		.cfi_offset 14, -4
 525 0002 86B0     		sub	sp, sp, #24
 526              	.LCFI23:
 527              		.cfi_def_cfa_offset 32
 528 0004 00AF     		add	r7, sp, #0
 529              	.LCFI24:
 530              		.cfi_def_cfa_register 7
 531 0006 7860     		str	r0, [r7, #4]
 553:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *nmem, *pmem;
 554:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t rmem_idx;
 555:Middlewares/Third_Party/LwIP/src/core/mem.c ****   rmem_idx = mem_to_ptr(mem);
 532              		.loc 1 555 14
 533 0008 7868     		ldr	r0, [r7, #4]
 534 000a FFF7FEFF 		bl	mem_to_ptr
 535 000e 0346     		mov	r3, r0
 536 0010 FB82     		strh	r3, [r7, #22]	@ movhi
 556:Middlewares/Third_Party/LwIP/src/core/mem.c ****   nmem = ptr_to_mem(mem->next);
 537              		.loc 1 556 10
 538 0012 7B68     		ldr	r3, [r7, #4]
 539 0014 1B88     		ldrh	r3, [r3]
 540 0016 1846     		mov	r0, r3
 541 0018 FFF7FEFF 		bl	ptr_to_mem
 542 001c 3861     		str	r0, [r7, #16]
 557:Middlewares/Third_Party/LwIP/src/core/mem.c ****   pmem = ptr_to_mem(mem->prev);
 543              		.loc 1 557 10
 544 001e 7B68     		ldr	r3, [r7, #4]
 545 0020 5B88     		ldrh	r3, [r3, #2]
 546 0022 1846     		mov	r0, r3
 547 0024 FFF7FEFF 		bl	ptr_to_mem
 548 0028 F860     		str	r0, [r7, #12]
 558:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((mem->next > MEM_SIZE_ALIGNED) || (mem->prev > MEM_SIZE_ALIGNED) ||
 549              		.loc 1 558 11
 550 002a 7B68     		ldr	r3, [r7, #4]
 551 002c 1B88     		ldrh	r3, [r3]
 552              		.loc 1 558 6
 553 002e B3F5C86F 		cmp	r3, #1600
 554 0032 18D8     		bhi	.L27
 555              		.loc 1 558 45 discriminator 1
 556 0034 7B68     		ldr	r3, [r7, #4]
 557 0036 5B88     		ldrh	r3, [r3, #2]
 558              		.loc 1 558 38 discriminator 1
 559 0038 B3F5C86F 		cmp	r3, #1600
 560 003c 13D8     		bhi	.L27
 559:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ((mem->prev != rmem_idx) && (pmem->next != rmem_idx)) ||
 561              		.loc 1 559 12 discriminator 2
 562 003e 7B68     		ldr	r3, [r7, #4]
 563 0040 5B88     		ldrh	r3, [r3, #2]
 558:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((mem->next > MEM_SIZE_ALIGNED) || (mem->prev > MEM_SIZE_ALIGNED) ||
 564              		.loc 1 558 72 discriminator 2
 565 0042 FA8A     		ldrh	r2, [r7, #22]
 566 0044 9A42     		cmp	r2, r3
 567 0046 04D0     		beq	.L28
 568              		.loc 1 559 40
 569 0048 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccfh2Clp.s 			page 21


 570 004a 1B88     		ldrh	r3, [r3]
 571              		.loc 1 559 32
 572 004c FA8A     		ldrh	r2, [r7, #22]
 573 004e 9A42     		cmp	r2, r3
 574 0050 09D1     		bne	.L27
 575              	.L28:
 560:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ((nmem != ram_end) && (nmem->prev != rmem_idx))) {
 576              		.loc 1 560 14 discriminator 1
 577 0052 084B     		ldr	r3, .L31
 578 0054 1B68     		ldr	r3, [r3]
 559:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ((mem->prev != rmem_idx) && (pmem->next != rmem_idx)) ||
 579              		.loc 1 559 61 discriminator 1
 580 0056 3A69     		ldr	r2, [r7, #16]
 581 0058 9A42     		cmp	r2, r3
 582 005a 06D0     		beq	.L29
 583              		.loc 1 560 34
 584 005c 3B69     		ldr	r3, [r7, #16]
 585 005e 5B88     		ldrh	r3, [r3, #2]
 586              		.loc 1 560 26
 587 0060 FA8A     		ldrh	r2, [r7, #22]
 588 0062 9A42     		cmp	r2, r3
 589 0064 01D0     		beq	.L29
 590              	.L27:
 561:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return 0;
 591              		.loc 1 561 12
 592 0066 0023     		movs	r3, #0
 593 0068 00E0     		b	.L30
 594              	.L29:
 562:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 563:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return 1;
 595              		.loc 1 563 10
 596 006a 0123     		movs	r3, #1
 597              	.L30:
 564:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 598              		.loc 1 564 1
 599 006c 1846     		mov	r0, r3
 600 006e 1837     		adds	r7, r7, #24
 601              	.LCFI25:
 602              		.cfi_def_cfa_offset 8
 603 0070 BD46     		mov	sp, r7
 604              	.LCFI26:
 605              		.cfi_def_cfa_register 13
 606              		@ sp needed
 607 0072 80BD     		pop	{r7, pc}
 608              	.L32:
 609              		.align	2
 610              	.L31:
 611 0074 00000000 		.word	ram_end
 612              		.cfi_endproc
 613              	.LFE141:
 615              		.section	.rodata
 616 00eb 00       		.align	2
 617              	.LC7:
 618 00ec 6D656D5F 		.ascii	"mem_free: sanity check alignment\000"
 618      66726565 
 618      3A207361 
 618      6E697479 
ARM GAS  /tmp/ccfh2Clp.s 			page 22


 618      20636865 
 619 010d 000000   		.align	2
 620              	.LC8:
 621 0110 6D656D5F 		.ascii	"mem_free: illegal memory\000"
 621      66726565 
 621      3A20696C 
 621      6C656761 
 621      6C206D65 
 622 0129 000000   		.align	2
 623              	.LC9:
 624 012c 6D656D5F 		.ascii	"mem_free: illegal memory: double free\000"
 624      66726565 
 624      3A20696C 
 624      6C656761 
 624      6C206D65 
 625 0152 0000     		.align	2
 626              	.LC10:
 627 0154 6D656D5F 		.ascii	"mem_free: illegal memory: non-linked: double free\000"
 627      66726565 
 627      3A20696C 
 627      6C656761 
 627      6C206D65 
 628              		.section	.text.mem_free,"ax",%progbits
 629              		.align	1
 630              		.global	mem_free
 631              		.syntax unified
 632              		.thumb
 633              		.thumb_func
 634              		.fpu fpv4-sp-d16
 636              	mem_free:
 637              	.LFB142:
 565:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 566:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_SANITY_CHECK
 567:Middlewares/Third_Party/LwIP/src/core/mem.c **** static void
 568:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_sanity(void)
 569:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 570:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem;
 571:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t last_used;
 572:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 573:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* begin with first element here */
 574:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)ram;
 575:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element used valid", (mem->used == 0) || (mem->used == 1));
 576:Middlewares/Third_Party/LwIP/src/core/mem.c ****   last_used = mem->used;
 577:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element prev ptr valid", mem->prev == 0);
 578:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element next ptr valid", mem->next <= MEM_SIZE_ALIGNED);
 579:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element next ptr aligned", LWIP_MEM_ALIGN(ptr_to_mem(mem->next) == ptr_to_mem(m
 580:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 581:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* check all elements before the end of the heap */
 582:Middlewares/Third_Party/LwIP/src/core/mem.c ****   for (mem = ptr_to_mem(mem->next);
 583:Middlewares/Third_Party/LwIP/src/core/mem.c ****        ((u8_t *)mem > ram) && (mem < ram_end);
 584:Middlewares/Third_Party/LwIP/src/core/mem.c ****        mem = ptr_to_mem(mem->next)) {
 585:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("heap element aligned", LWIP_MEM_ALIGN(mem) == mem);
 586:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("heap element prev ptr valid", mem->prev <= MEM_SIZE_ALIGNED);
 587:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("heap element next ptr valid", mem->next <= MEM_SIZE_ALIGNED);
 588:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("heap element prev ptr aligned", LWIP_MEM_ALIGN(ptr_to_mem(mem->prev) == ptr_to_mem
 589:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("heap element next ptr aligned", LWIP_MEM_ALIGN(ptr_to_mem(mem->next) == ptr_to_mem
 590:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
ARM GAS  /tmp/ccfh2Clp.s 			page 23


 591:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (last_used == 0) {
 592:Middlewares/Third_Party/LwIP/src/core/mem.c ****       /* 2 unused elements in a row? */
 593:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_ASSERT("heap element unused?", mem->used == 1);
 594:Middlewares/Third_Party/LwIP/src/core/mem.c ****     } else {
 595:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_ASSERT("heap element unused member", (mem->used == 0) || (mem->used == 1));
 596:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 597:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 598:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("heap element link valid", mem_link_valid(mem));
 599:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 600:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* used/unused altering */
 601:Middlewares/Third_Party/LwIP/src/core/mem.c ****     last_used = mem->used;
 602:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 603:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap end ptr sanity", mem == ptr_to_mem(MEM_SIZE_ALIGNED));
 604:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element used valid", mem->used == 1);
 605:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element prev ptr valid", mem->prev == MEM_SIZE_ALIGNED);
 606:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("heap element next ptr valid", mem->next == MEM_SIZE_ALIGNED);
 607:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 608:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_SANITY_CHECK */
 609:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 610:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 611:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Put a struct mem back on the heap
 612:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 613:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem is the data portion of a struct mem as returned by a previous
 614:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *             call to mem_malloc()
 615:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 616:Middlewares/Third_Party/LwIP/src/core/mem.c **** void
 617:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_free(void *rmem)
 618:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 638              		.loc 1 618 1
 639              		.cfi_startproc
 640              		@ args = 0, pretend = 0, frame = 32
 641              		@ frame_needed = 1, uses_anonymous_args = 0
 642 0000 80B5     		push	{r7, lr}
 643              	.LCFI27:
 644              		.cfi_def_cfa_offset 8
 645              		.cfi_offset 7, -8
 646              		.cfi_offset 14, -4
 647 0002 88B0     		sub	sp, sp, #32
 648              	.LCFI28:
 649              		.cfi_def_cfa_offset 40
 650 0004 00AF     		add	r7, sp, #0
 651              	.LCFI29:
 652              		.cfi_def_cfa_register 7
 653 0006 7860     		str	r0, [r7, #4]
 619:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem;
 620:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_DECL_PROTECT();
 621:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 622:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (rmem == NULL) {
 654              		.loc 1 622 6
 655 0008 7B68     		ldr	r3, [r7, #4]
 656 000a 002B     		cmp	r3, #0
 657 000c 70D0     		beq	.L42
 623:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_TRACE | LWIP_DBG_LEVEL_SERIOUS, ("mem_free(p == NULL) was call
 624:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 625:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 626:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((((mem_ptr_t)rmem) & (MEM_ALIGNMENT - 1)) != 0) {
 658              		.loc 1 626 9
ARM GAS  /tmp/ccfh2Clp.s 			page 24


 659 000e 7B68     		ldr	r3, [r7, #4]
 660              		.loc 1 626 26
 661 0010 03F00303 		and	r3, r3, #3
 662              		.loc 1 626 6
 663 0014 002B     		cmp	r3, #0
 664 0016 0DD0     		beq	.L36
 627:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_MEM_ILLEGAL_FREE("mem_free: sanity check alignment");
 665              		.loc 1 627 5 discriminator 1
 666 0018 374B     		ldr	r3, .L43
 667 001a 40F27322 		movw	r2, #627
 668 001e 3749     		ldr	r1, .L43+4
 669 0020 3748     		ldr	r0, .L43+8
 670 0022 FFF7FEFF 		bl	printf
 671              	.LBB2:
 628:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_free: sanity check alignment\n"));
 629:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 630:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(illegal);
 672              		.loc 1 630 5 discriminator 1
 673 0026 FFF7FEFF 		bl	sys_arch_protect
 674 002a F861     		str	r0, [r7, #28]
 675 002c F869     		ldr	r0, [r7, #28]
 676 002e FFF7FEFF 		bl	sys_arch_unprotect
 677              	.LBE2:
 631:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 678              		.loc 1 631 5 discriminator 1
 679 0032 5EE0     		b	.L33
 680              	.L36:
 632:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 633:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 634:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Get the corresponding struct mem: */
 635:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* cast through void* to get rid of alignment warnings */
 636:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)(void *)((u8_t *)rmem - (SIZEOF_STRUCT_MEM + MEM_SANITY_OFFSET));
 681              		.loc 1 636 7
 682 0034 7B68     		ldr	r3, [r7, #4]
 683 0036 083B     		subs	r3, r3, #8
 684 0038 BB61     		str	r3, [r7, #24]
 637:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 638:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((u8_t *)mem < ram || (u8_t *)rmem + MIN_SIZE_ALIGNED > (u8_t *)ram_end) {
 685              		.loc 1 638 19
 686 003a 324B     		ldr	r3, .L43+12
 687 003c 1B68     		ldr	r3, [r3]
 688              		.loc 1 638 6
 689 003e BA69     		ldr	r2, [r7, #24]
 690 0040 9A42     		cmp	r2, r3
 691 0042 06D3     		bcc	.L37
 692              		.loc 1 638 41 discriminator 1
 693 0044 7B68     		ldr	r3, [r7, #4]
 694 0046 03F10C02 		add	r2, r3, #12
 695              		.loc 1 638 62 discriminator 1
 696 004a 2F4B     		ldr	r3, .L43+16
 697 004c 1B68     		ldr	r3, [r3]
 698              		.loc 1 638 25 discriminator 1
 699 004e 9A42     		cmp	r2, r3
 700 0050 0DD9     		bls	.L38
 701              	.L37:
 639:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_MEM_ILLEGAL_FREE("mem_free: illegal memory");
 702              		.loc 1 639 5 discriminator 1
ARM GAS  /tmp/ccfh2Clp.s 			page 25


 703 0052 294B     		ldr	r3, .L43
 704 0054 40F27F22 		movw	r2, #639
 705 0058 2C49     		ldr	r1, .L43+20
 706 005a 2948     		ldr	r0, .L43+8
 707 005c FFF7FEFF 		bl	printf
 708              	.LBB3:
 640:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_free: illegal memory\n"));
 641:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 642:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(illegal);
 709              		.loc 1 642 5 discriminator 1
 710 0060 FFF7FEFF 		bl	sys_arch_protect
 711 0064 F860     		str	r0, [r7, #12]
 712 0066 F868     		ldr	r0, [r7, #12]
 713 0068 FFF7FEFF 		bl	sys_arch_unprotect
 714              	.LBE3:
 643:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 715              		.loc 1 643 5 discriminator 1
 716 006c 41E0     		b	.L33
 717              	.L38:
 644:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 645:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 646:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_overflow_check_element(mem);
 647:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 648:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* protect the heap from concurrent access */
 649:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_PROTECT();
 718              		.loc 1 649 3
 719 006e 2848     		ldr	r0, .L43+24
 720 0070 FFF7FEFF 		bl	sys_mutex_lock
 650:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* mem has to be in a used state */
 651:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (!mem->used) {
 721              		.loc 1 651 11
 722 0074 BB69     		ldr	r3, [r7, #24]
 723 0076 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 724              		.loc 1 651 6
 725 0078 002B     		cmp	r3, #0
 726 007a 10D1     		bne	.L39
 652:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_MEM_ILLEGAL_FREE("mem_free: illegal memory: double free");
 727              		.loc 1 652 5 discriminator 1
 728 007c 1E4B     		ldr	r3, .L43
 729 007e 4FF42372 		mov	r2, #652
 730 0082 2449     		ldr	r1, .L43+28
 731 0084 1E48     		ldr	r0, .L43+8
 732 0086 FFF7FEFF 		bl	printf
 653:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_MEM_FREE_UNPROTECT();
 733              		.loc 1 653 5 discriminator 1
 734 008a 2148     		ldr	r0, .L43+24
 735 008c FFF7FEFF 		bl	sys_mutex_unlock
 736              	.LBB4:
 654:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_free: illegal memory: double free?\n"));
 655:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 656:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(illegal);
 737              		.loc 1 656 5 discriminator 1
 738 0090 FFF7FEFF 		bl	sys_arch_protect
 739 0094 7861     		str	r0, [r7, #20]
 740 0096 7869     		ldr	r0, [r7, #20]
 741 0098 FFF7FEFF 		bl	sys_arch_unprotect
 742              	.LBE4:
ARM GAS  /tmp/ccfh2Clp.s 			page 26


 657:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 743              		.loc 1 657 5 discriminator 1
 744 009c 29E0     		b	.L33
 745              	.L39:
 658:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 659:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 660:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (!mem_link_valid(mem)) {
 746              		.loc 1 660 8
 747 009e B869     		ldr	r0, [r7, #24]
 748 00a0 FFF7FEFF 		bl	mem_link_valid
 749 00a4 0346     		mov	r3, r0
 750              		.loc 1 660 6
 751 00a6 002B     		cmp	r3, #0
 752 00a8 10D1     		bne	.L40
 661:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_MEM_ILLEGAL_FREE("mem_free: illegal memory: non-linked: double free");
 753              		.loc 1 661 5 discriminator 1
 754 00aa 134B     		ldr	r3, .L43
 755 00ac 40F29522 		movw	r2, #661
 756 00b0 1949     		ldr	r1, .L43+32
 757 00b2 1348     		ldr	r0, .L43+8
 758 00b4 FFF7FEFF 		bl	printf
 662:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_MEM_FREE_UNPROTECT();
 759              		.loc 1 662 5 discriminator 1
 760 00b8 1548     		ldr	r0, .L43+24
 761 00ba FFF7FEFF 		bl	sys_mutex_unlock
 762              	.LBB5:
 663:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_free: illegal memory: non-linked: double f
 664:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 665:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(illegal);
 763              		.loc 1 665 5 discriminator 1
 764 00be FFF7FEFF 		bl	sys_arch_protect
 765 00c2 3861     		str	r0, [r7, #16]
 766 00c4 3869     		ldr	r0, [r7, #16]
 767 00c6 FFF7FEFF 		bl	sys_arch_unprotect
 768              	.LBE5:
 666:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return;
 769              		.loc 1 666 5 discriminator 1
 770 00ca 12E0     		b	.L33
 771              	.L40:
 667:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 668:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 669:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* mem is now unused. */
 670:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem->used = 0;
 772              		.loc 1 670 13
 773 00cc BB69     		ldr	r3, [r7, #24]
 774 00ce 0022     		movs	r2, #0
 775 00d0 1A71     		strb	r2, [r3, #4]
 671:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 672:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (mem < lfree) {
 776              		.loc 1 672 11
 777 00d2 124B     		ldr	r3, .L43+36
 778 00d4 1B68     		ldr	r3, [r3]
 779              		.loc 1 672 6
 780 00d6 BA69     		ldr	r2, [r7, #24]
 781 00d8 9A42     		cmp	r2, r3
 782 00da 02D2     		bcs	.L41
 673:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* the newly freed struct is now the lowest */
ARM GAS  /tmp/ccfh2Clp.s 			page 27


 674:Middlewares/Third_Party/LwIP/src/core/mem.c ****     lfree = mem;
 783              		.loc 1 674 11
 784 00dc 0F4A     		ldr	r2, .L43+36
 785 00de BB69     		ldr	r3, [r7, #24]
 786 00e0 1360     		str	r3, [r2]
 787              	.L41:
 675:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 676:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 677:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_DEC_USED(used, mem->next - (mem_size_t)(((u8_t *)mem - ram)));
 678:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 679:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* finally, see if prev or next are free also */
 680:Middlewares/Third_Party/LwIP/src/core/mem.c ****   plug_holes(mem);
 788              		.loc 1 680 3
 789 00e2 B869     		ldr	r0, [r7, #24]
 790 00e4 FFF7FEFF 		bl	plug_holes
 681:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_SANITY();
 682:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 683:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_free_count = 1;
 684:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 685:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_UNPROTECT();
 791              		.loc 1 685 3
 792 00e8 0948     		ldr	r0, .L43+24
 793 00ea FFF7FEFF 		bl	sys_mutex_unlock
 794 00ee 00E0     		b	.L33
 795              	.L42:
 624:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 796              		.loc 1 624 5
 797 00f0 00BF     		nop
 798              	.L33:
 686:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 799              		.loc 1 686 1
 800 00f2 2037     		adds	r7, r7, #32
 801              	.LCFI30:
 802              		.cfi_def_cfa_offset 8
 803 00f4 BD46     		mov	sp, r7
 804              	.LCFI31:
 805              		.cfi_def_cfa_register 13
 806              		@ sp needed
 807 00f6 80BD     		pop	{r7, pc}
 808              	.L44:
 809              		.align	2
 810              	.L43:
 811 00f8 00000000 		.word	.LC0
 812 00fc EC000000 		.word	.LC7
 813 0100 44000000 		.word	.LC2
 814 0104 00000000 		.word	ram
 815 0108 00000000 		.word	ram_end
 816 010c 10010000 		.word	.LC8
 817 0110 00000000 		.word	mem_mutex
 818 0114 2C010000 		.word	.LC9
 819 0118 54010000 		.word	.LC10
 820 011c 00000000 		.word	lfree
 821              		.cfi_endproc
 822              	.LFE142:
 824              		.section	.rodata
 825 0186 0000     		.align	2
 826              	.LC11:
ARM GAS  /tmp/ccfh2Clp.s 			page 28


 827 0188 6D656D5F 		.ascii	"mem_trim: legal memory\000"
 827      7472696D 
 827      3A206C65 
 827      67616C20 
 827      6D656D6F 
 828 019f 00       		.align	2
 829              	.LC12:
 830 01a0 6D656D5F 		.ascii	"mem_trim can only shrink memory\000"
 830      7472696D 
 830      2063616E 
 830      206F6E6C 
 830      79207368 
 831              		.align	2
 832              	.LC13:
 833 01c0 696E7661 		.ascii	"invalid next ptr\000"
 833      6C696420 
 833      6E657874 
 833      20707472 
 833      00
 834              		.section	.text.mem_trim,"ax",%progbits
 835              		.align	1
 836              		.global	mem_trim
 837              		.syntax unified
 838              		.thumb
 839              		.thumb_func
 840              		.fpu fpv4-sp-d16
 842              	mem_trim:
 843              	.LFB143:
 687:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 688:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 689:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Shrink memory returned by mem_malloc().
 690:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 691:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param rmem pointer to memory allocated by mem_malloc the is to be shrinked
 692:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param new_size required size after shrinking (needs to be smaller than or
 693:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *                equal to the previous size)
 694:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return for compatibility reasons: is always == rmem, at the moment
 695:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *         or NULL if newsize is > old size, in which case rmem is NOT touched
 696:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *         or freed!
 697:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 698:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 699:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_trim(void *rmem, mem_size_t new_size)
 700:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 844              		.loc 1 700 1
 845              		.cfi_startproc
 846              		@ args = 0, pretend = 0, frame = 32
 847              		@ frame_needed = 1, uses_anonymous_args = 0
 848 0000 80B5     		push	{r7, lr}
 849              	.LCFI32:
 850              		.cfi_def_cfa_offset 8
 851              		.cfi_offset 7, -8
 852              		.cfi_offset 14, -4
 853 0002 88B0     		sub	sp, sp, #32
 854              	.LCFI33:
 855              		.cfi_def_cfa_offset 40
 856 0004 00AF     		add	r7, sp, #0
 857              	.LCFI34:
 858              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccfh2Clp.s 			page 29


 859 0006 7860     		str	r0, [r7, #4]
 860 0008 0B46     		mov	r3, r1
 861 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 701:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t size, newsize;
 702:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t ptr, ptr2;
 703:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem, *mem2;
 704:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* use the FREE_PROTECT here: it protects with sem OR SYS_ARCH_PROTECT */
 705:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_DECL_PROTECT();
 706:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 707:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Expand the size of the allocated memory region so that we can
 708:Middlewares/Third_Party/LwIP/src/core/mem.c ****      adjust for alignment. */
 709:Middlewares/Third_Party/LwIP/src/core/mem.c ****   newsize = (mem_size_t)LWIP_MEM_ALIGN_SIZE(new_size);
 862              		.loc 1 709 25
 863 000c 7B88     		ldrh	r3, [r7, #2]	@ movhi
 864 000e 0333     		adds	r3, r3, #3
 865 0010 9BB2     		uxth	r3, r3
 866              		.loc 1 709 11
 867 0012 23F00303 		bic	r3, r3, #3
 868 0016 FB83     		strh	r3, [r7, #30]	@ movhi
 710:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize < MIN_SIZE_ALIGNED) {
 869              		.loc 1 710 6
 870 0018 FB8B     		ldrh	r3, [r7, #30]
 871 001a 0B2B     		cmp	r3, #11
 872 001c 01D8     		bhi	.L46
 711:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* every data block must be at least MIN_SIZE_ALIGNED long */
 712:Middlewares/Third_Party/LwIP/src/core/mem.c ****     newsize = MIN_SIZE_ALIGNED;
 873              		.loc 1 712 13
 874 001e 0C23     		movs	r3, #12
 875 0020 FB83     		strh	r3, [r7, #30]	@ movhi
 876              	.L46:
 713:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 714:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 715:Middlewares/Third_Party/LwIP/src/core/mem.c ****   newsize += MEM_SANITY_REGION_BEFORE_ALIGNED + MEM_SANITY_REGION_AFTER_ALIGNED;
 716:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 717:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((newsize > MEM_SIZE_ALIGNED) || (newsize < new_size)) {
 877              		.loc 1 717 6
 878 0022 FB8B     		ldrh	r3, [r7, #30]
 879 0024 B3F5C86F 		cmp	r3, #1600
 880 0028 03D8     		bhi	.L47
 881              		.loc 1 717 36 discriminator 1
 882 002a FA8B     		ldrh	r2, [r7, #30]
 883 002c 7B88     		ldrh	r3, [r7, #2]
 884 002e 9A42     		cmp	r2, r3
 885 0030 01D2     		bcs	.L48
 886              	.L47:
 718:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 887              		.loc 1 718 12
 888 0032 0023     		movs	r3, #0
 889 0034 D8E0     		b	.L49
 890              	.L48:
 719:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 720:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 721:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_trim: legal memory", (u8_t *)rmem >= (u8_t *)ram &&
 891              		.loc 1 721 3
 892 0036 6E4B     		ldr	r3, .L64
 893 0038 1B68     		ldr	r3, [r3]
 894 003a 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/ccfh2Clp.s 			page 30


 895 003c 9A42     		cmp	r2, r3
 896 003e 04D3     		bcc	.L50
 897              		.loc 1 721 3 is_stmt 0 discriminator 2
 898 0040 6C4B     		ldr	r3, .L64+4
 899 0042 1B68     		ldr	r3, [r3]
 900 0044 7A68     		ldr	r2, [r7, #4]
 901 0046 9A42     		cmp	r2, r3
 902 0048 06D3     		bcc	.L51
 903              	.L50:
 904              		.loc 1 721 3 discriminator 3
 905 004a 6B4B     		ldr	r3, .L64+8
 906 004c 40F2D222 		movw	r2, #722
 907 0050 6A49     		ldr	r1, .L64+12
 908 0052 6B48     		ldr	r0, .L64+16
 909 0054 FFF7FEFF 		bl	printf
 910              	.L51:
 722:Middlewares/Third_Party/LwIP/src/core/mem.c ****               (u8_t *)rmem < (u8_t *)ram_end);
 723:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 724:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((u8_t *)rmem < (u8_t *)ram || (u8_t *)rmem >= (u8_t *)ram_end) {
 911              		.loc 1 724 20 is_stmt 1
 912 0058 654B     		ldr	r3, .L64
 913 005a 1B68     		ldr	r3, [r3]
 914              		.loc 1 724 6
 915 005c 7A68     		ldr	r2, [r7, #4]
 916 005e 9A42     		cmp	r2, r3
 917 0060 04D3     		bcc	.L52
 918              		.loc 1 724 53 discriminator 1
 919 0062 644B     		ldr	r3, .L64+4
 920 0064 1B68     		ldr	r3, [r3]
 921              		.loc 1 724 34 discriminator 1
 922 0066 7A68     		ldr	r2, [r7, #4]
 923 0068 9A42     		cmp	r2, r3
 924 006a 07D3     		bcc	.L53
 925              	.L52:
 926              	.LBB6:
 725:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("mem_trim: illegal memory\n"));
 726:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* protect mem stats from concurrent access */
 727:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_INC_LOCKED(illegal);
 927              		.loc 1 727 5
 928 006c FFF7FEFF 		bl	sys_arch_protect
 929 0070 B860     		str	r0, [r7, #8]
 930 0072 B868     		ldr	r0, [r7, #8]
 931 0074 FFF7FEFF 		bl	sys_arch_unprotect
 932              	.LBE6:
 728:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return rmem;
 933              		.loc 1 728 12
 934 0078 7B68     		ldr	r3, [r7, #4]
 935 007a B5E0     		b	.L49
 936              	.L53:
 729:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 730:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Get the corresponding struct mem ... */
 731:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* cast through void* to get rid of alignment warnings */
 732:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem = (struct mem *)(void *)((u8_t *)rmem - (SIZEOF_STRUCT_MEM + MEM_SANITY_OFFSET));
 937              		.loc 1 732 7
 938 007c 7B68     		ldr	r3, [r7, #4]
 939 007e 083B     		subs	r3, r3, #8
 940 0080 BB61     		str	r3, [r7, #24]
ARM GAS  /tmp/ccfh2Clp.s 			page 31


 733:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 734:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_overflow_check_element(mem);
 735:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 736:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* ... and its offset pointer */
 737:Middlewares/Third_Party/LwIP/src/core/mem.c ****   ptr = mem_to_ptr(mem);
 941              		.loc 1 737 9
 942 0082 B869     		ldr	r0, [r7, #24]
 943 0084 FFF7FEFF 		bl	mem_to_ptr
 944 0088 0346     		mov	r3, r0
 945 008a FB82     		strh	r3, [r7, #22]	@ movhi
 738:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 739:Middlewares/Third_Party/LwIP/src/core/mem.c ****   size = (mem_size_t)((mem_size_t)(mem->next - ptr) - (SIZEOF_STRUCT_MEM + MEM_SANITY_OVERHEAD));
 946              		.loc 1 739 39
 947 008c BB69     		ldr	r3, [r7, #24]
 948 008e 1A88     		ldrh	r2, [r3]
 949              		.loc 1 739 23
 950 0090 FB8A     		ldrh	r3, [r7, #22]	@ movhi
 951 0092 D31A     		subs	r3, r2, r3
 952 0094 9BB2     		uxth	r3, r3
 953              		.loc 1 739 8
 954 0096 083B     		subs	r3, r3, #8
 955 0098 BB82     		strh	r3, [r7, #20]	@ movhi
 740:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_ASSERT("mem_trim can only shrink memory", newsize <= size);
 956              		.loc 1 740 3
 957 009a FA8B     		ldrh	r2, [r7, #30]
 958 009c BB8A     		ldrh	r3, [r7, #20]
 959 009e 9A42     		cmp	r2, r3
 960 00a0 06D9     		bls	.L54
 961              		.loc 1 740 3 is_stmt 0 discriminator 1
 962 00a2 554B     		ldr	r3, .L64+8
 963 00a4 4FF43972 		mov	r2, #740
 964 00a8 5649     		ldr	r1, .L64+20
 965 00aa 5548     		ldr	r0, .L64+16
 966 00ac FFF7FEFF 		bl	printf
 967              	.L54:
 741:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize > size) {
 968              		.loc 1 741 6 is_stmt 1
 969 00b0 FA8B     		ldrh	r2, [r7, #30]
 970 00b2 BB8A     		ldrh	r3, [r7, #20]
 971 00b4 9A42     		cmp	r2, r3
 972 00b6 01D9     		bls	.L55
 742:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* not supported */
 743:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 973              		.loc 1 743 12
 974 00b8 0023     		movs	r3, #0
 975 00ba 95E0     		b	.L49
 976              	.L55:
 744:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 745:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (newsize == size) {
 977              		.loc 1 745 6
 978 00bc FA8B     		ldrh	r2, [r7, #30]
 979 00be BB8A     		ldrh	r3, [r7, #20]
 980 00c0 9A42     		cmp	r2, r3
 981 00c2 01D1     		bne	.L56
 746:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* No change in size, simply return */
 747:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return rmem;
 982              		.loc 1 747 12
ARM GAS  /tmp/ccfh2Clp.s 			page 32


 983 00c4 7B68     		ldr	r3, [r7, #4]
 984 00c6 8FE0     		b	.L49
 985              	.L56:
 748:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 749:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 750:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* protect the heap from concurrent access */
 751:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_PROTECT();
 986              		.loc 1 751 3
 987 00c8 4F48     		ldr	r0, .L64+24
 988 00ca FFF7FEFF 		bl	sys_mutex_lock
 752:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 753:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem2 = ptr_to_mem(mem->next);
 989              		.loc 1 753 10
 990 00ce BB69     		ldr	r3, [r7, #24]
 991 00d0 1B88     		ldrh	r3, [r3]
 992 00d2 1846     		mov	r0, r3
 993 00d4 FFF7FEFF 		bl	ptr_to_mem
 994 00d8 3861     		str	r0, [r7, #16]
 754:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (mem2->used == 0) {
 995              		.loc 1 754 11
 996 00da 3B69     		ldr	r3, [r7, #16]
 997 00dc 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 998              		.loc 1 754 6
 999 00de 002B     		cmp	r3, #0
 1000 00e0 3FD1     		bne	.L57
 1001              	.LBB7:
 755:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* The next struct is unused, we can simply move it at little */
 756:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem_size_t next;
 757:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("invalid next ptr", mem->next != MEM_SIZE_ALIGNED);
 1002              		.loc 1 757 5
 1003 00e2 BB69     		ldr	r3, [r7, #24]
 1004 00e4 1B88     		ldrh	r3, [r3]
 1005 00e6 B3F5C86F 		cmp	r3, #1600
 1006 00ea 06D1     		bne	.L58
 1007              		.loc 1 757 5 is_stmt 0 discriminator 1
 1008 00ec 424B     		ldr	r3, .L64+8
 1009 00ee 40F2F522 		movw	r2, #757
 1010 00f2 4649     		ldr	r1, .L64+28
 1011 00f4 4248     		ldr	r0, .L64+16
 1012 00f6 FFF7FEFF 		bl	printf
 1013              	.L58:
 758:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* remember the old next pointer */
 759:Middlewares/Third_Party/LwIP/src/core/mem.c ****     next = mem2->next;
 1014              		.loc 1 759 10 is_stmt 1
 1015 00fa 3B69     		ldr	r3, [r7, #16]
 1016 00fc 1B88     		ldrh	r3, [r3]	@ movhi
 1017 00fe FB81     		strh	r3, [r7, #14]	@ movhi
 760:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* create new struct mem which is moved directly after the shrinked mem */
 761:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ptr2 = (mem_size_t)(ptr + SIZEOF_STRUCT_MEM + newsize);
 1018              		.loc 1 761 49
 1019 0100 FA8A     		ldrh	r2, [r7, #22]	@ movhi
 1020 0102 FB8B     		ldrh	r3, [r7, #30]	@ movhi
 1021 0104 1344     		add	r3, r3, r2
 1022 0106 9BB2     		uxth	r3, r3
 1023              		.loc 1 761 10
 1024 0108 0833     		adds	r3, r3, #8
 1025 010a BB81     		strh	r3, [r7, #12]	@ movhi
ARM GAS  /tmp/ccfh2Clp.s 			page 33


 762:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (lfree == mem2) {
 1026              		.loc 1 762 15
 1027 010c 404B     		ldr	r3, .L64+32
 1028 010e 1B68     		ldr	r3, [r3]
 1029              		.loc 1 762 8
 1030 0110 3A69     		ldr	r2, [r7, #16]
 1031 0112 9A42     		cmp	r2, r3
 1032 0114 06D1     		bne	.L59
 763:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = ptr_to_mem(ptr2);
 1033              		.loc 1 763 15
 1034 0116 BB89     		ldrh	r3, [r7, #12]
 1035 0118 1846     		mov	r0, r3
 1036 011a FFF7FEFF 		bl	ptr_to_mem
 1037 011e 0246     		mov	r2, r0
 1038              		.loc 1 763 13
 1039 0120 3B4B     		ldr	r3, .L64+32
 1040 0122 1A60     		str	r2, [r3]
 1041              	.L59:
 764:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 765:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2 = ptr_to_mem(ptr2);
 1042              		.loc 1 765 12
 1043 0124 BB89     		ldrh	r3, [r7, #12]
 1044 0126 1846     		mov	r0, r3
 1045 0128 FFF7FEFF 		bl	ptr_to_mem
 1046 012c 3861     		str	r0, [r7, #16]
 766:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->used = 0;
 1047              		.loc 1 766 16
 1048 012e 3B69     		ldr	r3, [r7, #16]
 1049 0130 0022     		movs	r2, #0
 1050 0132 1A71     		strb	r2, [r3, #4]
 767:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* restore the next pointer */
 768:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->next = next;
 1051              		.loc 1 768 16
 1052 0134 3B69     		ldr	r3, [r7, #16]
 1053 0136 FA89     		ldrh	r2, [r7, #14]	@ movhi
 1054 0138 1A80     		strh	r2, [r3]	@ movhi
 769:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* link it back to mem */
 770:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->prev = ptr;
 1055              		.loc 1 770 16
 1056 013a 3B69     		ldr	r3, [r7, #16]
 1057 013c FA8A     		ldrh	r2, [r7, #22]	@ movhi
 1058 013e 5A80     		strh	r2, [r3, #2]	@ movhi
 771:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* link mem to it */
 772:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = ptr2;
 1059              		.loc 1 772 15
 1060 0140 BB69     		ldr	r3, [r7, #24]
 1061 0142 BA89     		ldrh	r2, [r7, #12]	@ movhi
 1062 0144 1A80     		strh	r2, [r3]	@ movhi
 773:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* last thing to restore linked list: as we have moved mem2,
 774:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * let 'mem2->next->prev' point to mem2 again. but only if mem2->next is not
 775:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * the end of the heap */
 776:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2->next != MEM_SIZE_ALIGNED) {
 1063              		.loc 1 776 13
 1064 0146 3B69     		ldr	r3, [r7, #16]
 1065 0148 1B88     		ldrh	r3, [r3]
 1066              		.loc 1 776 8
 1067 014a B3F5C86F 		cmp	r3, #1600
ARM GAS  /tmp/ccfh2Clp.s 			page 34


 1068 014e 47D0     		beq	.L61
 777:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ptr_to_mem(mem2->next)->prev = ptr2;
 1069              		.loc 1 777 7
 1070 0150 3B69     		ldr	r3, [r7, #16]
 1071 0152 1B88     		ldrh	r3, [r3]
 1072 0154 1846     		mov	r0, r3
 1073 0156 FFF7FEFF 		bl	ptr_to_mem
 1074 015a 0246     		mov	r2, r0
 1075              		.loc 1 777 36
 1076 015c BB89     		ldrh	r3, [r7, #12]	@ movhi
 1077 015e 5380     		strh	r3, [r2, #2]	@ movhi
 1078 0160 3EE0     		b	.L61
 1079              	.L57:
 1080              	.LBE7:
 778:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 779:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_DEC_USED(used, (size - newsize));
 780:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* no need to plug holes, we've already done that */
 781:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } else if (newsize + SIZEOF_STRUCT_MEM + MIN_SIZE_ALIGNED <= size) {
 1081              		.loc 1 781 42
 1082 0162 FB8B     		ldrh	r3, [r7, #30]
 1083 0164 03F11402 		add	r2, r3, #20
 1084              		.loc 1 781 61
 1085 0168 BB8A     		ldrh	r3, [r7, #20]
 1086              		.loc 1 781 13
 1087 016a 9A42     		cmp	r2, r3
 1088 016c 38D8     		bhi	.L61
 782:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* Next struct is used but there's room for another struct mem with
 783:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * at least MIN_SIZE_ALIGNED of data.
 784:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * Old size ('size') must be big enough to contain at least 'newsize' plus a struct mem
 785:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * ('SIZEOF_STRUCT_MEM') with some data ('MIN_SIZE_ALIGNED').
 786:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * @todo we could leave out MIN_SIZE_ALIGNED. We would create an empty
 787:Middlewares/Third_Party/LwIP/src/core/mem.c ****      *       region that couldn't hold data, but when mem->next gets freed,
 788:Middlewares/Third_Party/LwIP/src/core/mem.c ****      *       the 2 regions would be combined, resulting in more free memory */
 789:Middlewares/Third_Party/LwIP/src/core/mem.c ****     ptr2 = (mem_size_t)(ptr + SIZEOF_STRUCT_MEM + newsize);
 1089              		.loc 1 789 49
 1090 016e FA8A     		ldrh	r2, [r7, #22]	@ movhi
 1091 0170 FB8B     		ldrh	r3, [r7, #30]	@ movhi
 1092 0172 1344     		add	r3, r3, r2
 1093 0174 9BB2     		uxth	r3, r3
 1094              		.loc 1 789 10
 1095 0176 0833     		adds	r3, r3, #8
 1096 0178 BB81     		strh	r3, [r7, #12]	@ movhi
 790:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_ASSERT("invalid next ptr", mem->next != MEM_SIZE_ALIGNED);
 1097              		.loc 1 790 5
 1098 017a BB69     		ldr	r3, [r7, #24]
 1099 017c 1B88     		ldrh	r3, [r3]
 1100 017e B3F5C86F 		cmp	r3, #1600
 1101 0182 06D1     		bne	.L62
 1102              		.loc 1 790 5 is_stmt 0 discriminator 1
 1103 0184 1C4B     		ldr	r3, .L64+8
 1104 0186 40F21632 		movw	r2, #790
 1105 018a 2049     		ldr	r1, .L64+28
 1106 018c 1C48     		ldr	r0, .L64+16
 1107 018e FFF7FEFF 		bl	printf
 1108              	.L62:
 791:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2 = ptr_to_mem(ptr2);
 1109              		.loc 1 791 12 is_stmt 1
ARM GAS  /tmp/ccfh2Clp.s 			page 35


 1110 0192 BB89     		ldrh	r3, [r7, #12]
 1111 0194 1846     		mov	r0, r3
 1112 0196 FFF7FEFF 		bl	ptr_to_mem
 1113 019a 3861     		str	r0, [r7, #16]
 792:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2 < lfree) {
 1114              		.loc 1 792 14
 1115 019c 1C4B     		ldr	r3, .L64+32
 1116 019e 1B68     		ldr	r3, [r3]
 1117              		.loc 1 792 8
 1118 01a0 3A69     		ldr	r2, [r7, #16]
 1119 01a2 9A42     		cmp	r2, r3
 1120 01a4 02D2     		bcs	.L63
 793:Middlewares/Third_Party/LwIP/src/core/mem.c ****       lfree = mem2;
 1121              		.loc 1 793 13
 1122 01a6 1A4A     		ldr	r2, .L64+32
 1123 01a8 3B69     		ldr	r3, [r7, #16]
 1124 01aa 1360     		str	r3, [r2]
 1125              	.L63:
 794:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 795:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->used = 0;
 1126              		.loc 1 795 16
 1127 01ac 3B69     		ldr	r3, [r7, #16]
 1128 01ae 0022     		movs	r2, #0
 1129 01b0 1A71     		strb	r2, [r3, #4]
 796:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->next = mem->next;
 1130              		.loc 1 796 21
 1131 01b2 BB69     		ldr	r3, [r7, #24]
 1132 01b4 1A88     		ldrh	r2, [r3]
 1133              		.loc 1 796 16
 1134 01b6 3B69     		ldr	r3, [r7, #16]
 1135 01b8 1A80     		strh	r2, [r3]	@ movhi
 797:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem2->prev = ptr;
 1136              		.loc 1 797 16
 1137 01ba 3B69     		ldr	r3, [r7, #16]
 1138 01bc FA8A     		ldrh	r2, [r7, #22]	@ movhi
 1139 01be 5A80     		strh	r2, [r3, #2]	@ movhi
 798:Middlewares/Third_Party/LwIP/src/core/mem.c ****     mem->next = ptr2;
 1140              		.loc 1 798 15
 1141 01c0 BB69     		ldr	r3, [r7, #24]
 1142 01c2 BA89     		ldrh	r2, [r7, #12]	@ movhi
 1143 01c4 1A80     		strh	r2, [r3]	@ movhi
 799:Middlewares/Third_Party/LwIP/src/core/mem.c ****     if (mem2->next != MEM_SIZE_ALIGNED) {
 1144              		.loc 1 799 13
 1145 01c6 3B69     		ldr	r3, [r7, #16]
 1146 01c8 1B88     		ldrh	r3, [r3]
 1147              		.loc 1 799 8
 1148 01ca B3F5C86F 		cmp	r3, #1600
 1149 01ce 07D0     		beq	.L61
 800:Middlewares/Third_Party/LwIP/src/core/mem.c ****       ptr_to_mem(mem2->next)->prev = ptr2;
 1150              		.loc 1 800 7
 1151 01d0 3B69     		ldr	r3, [r7, #16]
 1152 01d2 1B88     		ldrh	r3, [r3]
 1153 01d4 1846     		mov	r0, r3
 1154 01d6 FFF7FEFF 		bl	ptr_to_mem
 1155 01da 0246     		mov	r2, r0
 1156              		.loc 1 800 36
 1157 01dc BB89     		ldrh	r3, [r7, #12]	@ movhi
ARM GAS  /tmp/ccfh2Clp.s 			page 36


 1158 01de 5380     		strh	r3, [r2, #2]	@ movhi
 1159              	.L61:
 801:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 802:Middlewares/Third_Party/LwIP/src/core/mem.c ****     MEM_STATS_DEC_USED(used, (size - newsize));
 803:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* the original mem->next is used, so no need to plug holes! */
 804:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 805:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* else {
 806:Middlewares/Third_Party/LwIP/src/core/mem.c ****     next struct mem is used but size between mem and mem2 is not big enough
 807:Middlewares/Third_Party/LwIP/src/core/mem.c ****     to create another struct mem
 808:Middlewares/Third_Party/LwIP/src/core/mem.c ****     -> don't do anyhting.
 809:Middlewares/Third_Party/LwIP/src/core/mem.c ****     -> the remaining space stays unused since it is too small
 810:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } */
 811:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 812:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_overflow_init_element(mem, new_size);
 813:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 814:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_SANITY();
 815:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 816:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_free_count = 1;
 817:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 818:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_FREE_UNPROTECT();
 1160              		.loc 1 818 3
 1161 01e0 0948     		ldr	r0, .L64+24
 1162 01e2 FFF7FEFF 		bl	sys_mutex_unlock
 819:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return rmem;
 1163              		.loc 1 819 10
 1164 01e6 7B68     		ldr	r3, [r7, #4]
 1165              	.L49:
 820:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 1166              		.loc 1 820 1
 1167 01e8 1846     		mov	r0, r3
 1168 01ea 2037     		adds	r7, r7, #32
 1169              	.LCFI35:
 1170              		.cfi_def_cfa_offset 8
 1171 01ec BD46     		mov	sp, r7
 1172              	.LCFI36:
 1173              		.cfi_def_cfa_register 13
 1174              		@ sp needed
 1175 01ee 80BD     		pop	{r7, pc}
 1176              	.L65:
 1177              		.align	2
 1178              	.L64:
 1179 01f0 00000000 		.word	ram
 1180 01f4 00000000 		.word	ram_end
 1181 01f8 00000000 		.word	.LC0
 1182 01fc 88010000 		.word	.LC11
 1183 0200 44000000 		.word	.LC2
 1184 0204 A0010000 		.word	.LC12
 1185 0208 00000000 		.word	mem_mutex
 1186 020c C0010000 		.word	.LC13
 1187 0210 00000000 		.word	lfree
 1188              		.cfi_endproc
 1189              	.LFE143:
 1191              		.section	.rodata
 1192 01d1 000000   		.align	2
 1193              	.LC14:
 1194 01d4 6D656D5F 		.ascii	"mem_malloc: !lfree->used\000"
 1194      6D616C6C 
ARM GAS  /tmp/ccfh2Clp.s 			page 37


 1194      6F633A20 
 1194      216C6672 
 1194      65652D3E 
 1195 01ed 000000   		.align	2
 1196              	.LC15:
 1197 01f0 6D656D5F 		.ascii	"mem_malloc: allocated memory not above ram_end.\000"
 1197      6D616C6C 
 1197      6F633A20 
 1197      616C6C6F 
 1197      63617465 
 1198              		.align	2
 1199              	.LC16:
 1200 0220 6D656D5F 		.ascii	"mem_malloc: allocated memory properly aligned.\000"
 1200      6D616C6C 
 1200      6F633A20 
 1200      616C6C6F 
 1200      63617465 
 1201 024f 00       		.align	2
 1202              	.LC17:
 1203 0250 6D656D5F 		.ascii	"mem_malloc: sanity check alignment\000"
 1203      6D616C6C 
 1203      6F633A20 
 1203      73616E69 
 1203      74792063 
 1204              		.section	.text.mem_malloc,"ax",%progbits
 1205              		.align	1
 1206              		.global	mem_malloc
 1207              		.syntax unified
 1208              		.thumb
 1209              		.thumb_func
 1210              		.fpu fpv4-sp-d16
 1212              	mem_malloc:
 1213              	.LFB144:
 821:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 822:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 823:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Allocate a block of memory with a minimum of 'size' bytes.
 824:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 825:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size_in is the minimum size of the requested block in bytes.
 826:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return pointer to allocated memory or NULL if no free memory was found.
 827:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 828:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Note that the returned value will always be aligned (as defined by MEM_ALIGNMENT).
 829:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 830:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 831:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc(mem_size_t size_in)
 832:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 1214              		.loc 1 832 1
 1215              		.cfi_startproc
 1216              		@ args = 0, pretend = 0, frame = 32
 1217              		@ frame_needed = 1, uses_anonymous_args = 0
 1218 0000 80B5     		push	{r7, lr}
 1219              	.LCFI37:
 1220              		.cfi_def_cfa_offset 8
 1221              		.cfi_offset 7, -8
 1222              		.cfi_offset 14, -4
 1223 0002 88B0     		sub	sp, sp, #32
 1224              	.LCFI38:
 1225              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccfh2Clp.s 			page 38


 1226 0004 00AF     		add	r7, sp, #0
 1227              	.LCFI39:
 1228              		.cfi_def_cfa_register 7
 1229 0006 0346     		mov	r3, r0
 1230 0008 FB80     		strh	r3, [r7, #6]	@ movhi
 833:Middlewares/Third_Party/LwIP/src/core/mem.c ****   mem_size_t ptr, ptr2, size;
 834:Middlewares/Third_Party/LwIP/src/core/mem.c ****   struct mem *mem, *mem2;
 835:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 836:Middlewares/Third_Party/LwIP/src/core/mem.c ****   u8_t local_mem_free_count = 0;
 837:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 838:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_ALLOC_DECL_PROTECT();
 839:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 840:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (size_in == 0) {
 1231              		.loc 1 840 6
 1232 000a FB88     		ldrh	r3, [r7, #6]
 1233 000c 002B     		cmp	r3, #0
 1234 000e 01D1     		bne	.L67
 841:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 1235              		.loc 1 841 12
 1236 0010 0023     		movs	r3, #0
 1237 0012 E2E0     		b	.L68
 1238              	.L67:
 842:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 843:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 844:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* Expand the size of the allocated memory region so that we can
 845:Middlewares/Third_Party/LwIP/src/core/mem.c ****      adjust for alignment. */
 846:Middlewares/Third_Party/LwIP/src/core/mem.c ****   size = (mem_size_t)LWIP_MEM_ALIGN_SIZE(size_in);
 1239              		.loc 1 846 22
 1240 0014 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1241 0016 0333     		adds	r3, r3, #3
 1242 0018 9BB2     		uxth	r3, r3
 1243              		.loc 1 846 8
 1244 001a 23F00303 		bic	r3, r3, #3
 1245 001e BB83     		strh	r3, [r7, #28]	@ movhi
 847:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (size < MIN_SIZE_ALIGNED) {
 1246              		.loc 1 847 6
 1247 0020 BB8B     		ldrh	r3, [r7, #28]
 1248 0022 0B2B     		cmp	r3, #11
 1249 0024 01D8     		bhi	.L69
 848:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* every data block must be at least MIN_SIZE_ALIGNED long */
 849:Middlewares/Third_Party/LwIP/src/core/mem.c ****     size = MIN_SIZE_ALIGNED;
 1250              		.loc 1 849 10
 1251 0026 0C23     		movs	r3, #12
 1252 0028 BB83     		strh	r3, [r7, #28]	@ movhi
 1253              	.L69:
 850:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 851:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 852:Middlewares/Third_Party/LwIP/src/core/mem.c ****   size += MEM_SANITY_REGION_BEFORE_ALIGNED + MEM_SANITY_REGION_AFTER_ALIGNED;
 853:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 854:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((size > MEM_SIZE_ALIGNED) || (size < size_in)) {
 1254              		.loc 1 854 6
 1255 002a BB8B     		ldrh	r3, [r7, #28]
 1256 002c B3F5C86F 		cmp	r3, #1600
 1257 0030 03D8     		bhi	.L70
 1258              		.loc 1 854 33 discriminator 1
 1259 0032 BA8B     		ldrh	r2, [r7, #28]
 1260 0034 FB88     		ldrh	r3, [r7, #6]
ARM GAS  /tmp/ccfh2Clp.s 			page 39


 1261 0036 9A42     		cmp	r2, r3
 1262 0038 01D2     		bcs	.L71
 1263              	.L70:
 855:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 1264              		.loc 1 855 12
 1265 003a 0023     		movs	r3, #0
 1266 003c CDE0     		b	.L68
 1267              	.L71:
 856:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
 857:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 858:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* protect the heap from concurrent access */
 859:Middlewares/Third_Party/LwIP/src/core/mem.c ****   sys_mutex_lock(&mem_mutex);
 1268              		.loc 1 859 3
 1269 003e 6948     		ldr	r0, .L86
 1270 0040 FFF7FEFF 		bl	sys_mutex_lock
 860:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_ALLOC_PROTECT();
 861:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 862:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* run as long as a mem_free disturbed mem_malloc or mem_trim */
 863:Middlewares/Third_Party/LwIP/src/core/mem.c ****   do {
 864:Middlewares/Third_Party/LwIP/src/core/mem.c ****     local_mem_free_count = 0;
 865:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 866:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 867:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* Scan through the heap searching for a free block that is big enough,
 868:Middlewares/Third_Party/LwIP/src/core/mem.c ****      * beginning with the lowest free block.
 869:Middlewares/Third_Party/LwIP/src/core/mem.c ****      */
 870:Middlewares/Third_Party/LwIP/src/core/mem.c ****     for (ptr = mem_to_ptr(lfree); ptr < MEM_SIZE_ALIGNED - size;
 1271              		.loc 1 870 16
 1272 0044 684B     		ldr	r3, .L86+4
 1273 0046 1B68     		ldr	r3, [r3]
 1274 0048 1846     		mov	r0, r3
 1275 004a FFF7FEFF 		bl	mem_to_ptr
 1276 004e 0346     		mov	r3, r0
 1277 0050 FB83     		strh	r3, [r7, #30]	@ movhi
 1278              		.loc 1 870 5
 1279 0052 B7E0     		b	.L72
 1280              	.L85:
 871:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ptr = ptr_to_mem(ptr)->next) {
 872:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem = ptr_to_mem(ptr);
 1281              		.loc 1 872 13
 1282 0054 FB8B     		ldrh	r3, [r7, #30]
 1283 0056 1846     		mov	r0, r3
 1284 0058 FFF7FEFF 		bl	ptr_to_mem
 1285 005c 7861     		str	r0, [r7, #20]
 873:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 874:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem_free_count = 0;
 875:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_MEM_ALLOC_UNPROTECT();
 876:Middlewares/Third_Party/LwIP/src/core/mem.c ****       /* allow mem_free or mem_trim to run */
 877:Middlewares/Third_Party/LwIP/src/core/mem.c ****       LWIP_MEM_ALLOC_PROTECT();
 878:Middlewares/Third_Party/LwIP/src/core/mem.c ****       if (mem_free_count != 0) {
 879:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* If mem_free or mem_trim have run, we have to restart since they
 880:Middlewares/Third_Party/LwIP/src/core/mem.c ****            could have altered our current struct mem. */
 881:Middlewares/Third_Party/LwIP/src/core/mem.c ****         local_mem_free_count = 1;
 882:Middlewares/Third_Party/LwIP/src/core/mem.c ****         break;
 883:Middlewares/Third_Party/LwIP/src/core/mem.c ****       }
 884:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 885:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 886:Middlewares/Third_Party/LwIP/src/core/mem.c ****       if ((!mem->used) &&
ARM GAS  /tmp/ccfh2Clp.s 			page 40


 1286              		.loc 1 886 16
 1287 005e 7B69     		ldr	r3, [r7, #20]
 1288 0060 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1289              		.loc 1 886 10
 1290 0062 002B     		cmp	r3, #0
 1291 0064 40F0A780 		bne	.L73
 887:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (mem->next - (ptr + SIZEOF_STRUCT_MEM)) >= size) {
 1292              		.loc 1 887 15 discriminator 1
 1293 0068 7B69     		ldr	r3, [r7, #20]
 1294 006a 1B88     		ldrh	r3, [r3]
 1295 006c 1A46     		mov	r2, r3
 1296              		.loc 1 887 22 discriminator 1
 1297 006e FB8B     		ldrh	r3, [r7, #30]
 1298 0070 D31A     		subs	r3, r2, r3
 1299 0072 A3F10802 		sub	r2, r3, #8
 1300              		.loc 1 887 51 discriminator 1
 1301 0076 BB8B     		ldrh	r3, [r7, #28]
 886:Middlewares/Third_Party/LwIP/src/core/mem.c ****           (mem->next - (ptr + SIZEOF_STRUCT_MEM)) >= size) {
 1302              		.loc 1 886 24 discriminator 1
 1303 0078 9A42     		cmp	r2, r3
 1304 007a C0F09C80 		bcc	.L73
 888:Middlewares/Third_Party/LwIP/src/core/mem.c ****         /* mem is not used and at least perfect fit is possible:
 889:Middlewares/Third_Party/LwIP/src/core/mem.c ****          * mem->next - (ptr + SIZEOF_STRUCT_MEM) gives us the 'user data size' of mem */
 890:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 891:Middlewares/Third_Party/LwIP/src/core/mem.c ****         if (mem->next - (ptr + SIZEOF_STRUCT_MEM) >= (size + SIZEOF_STRUCT_MEM + MIN_SIZE_ALIGNED))
 1305              		.loc 1 891 16
 1306 007e 7B69     		ldr	r3, [r7, #20]
 1307 0080 1B88     		ldrh	r3, [r3]
 1308 0082 1A46     		mov	r2, r3
 1309              		.loc 1 891 23
 1310 0084 FB8B     		ldrh	r3, [r7, #30]
 1311 0086 D31A     		subs	r3, r2, r3
 1312 0088 A3F10802 		sub	r2, r3, #8
 1313              		.loc 1 891 80
 1314 008c BB8B     		ldrh	r3, [r7, #28]
 1315 008e 1433     		adds	r3, r3, #20
 1316              		.loc 1 891 12
 1317 0090 9A42     		cmp	r2, r3
 1318 0092 33D3     		bcc	.L74
 892:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* (in addition to the above, we test if another struct mem (SIZEOF_STRUCT_MEM) containin
 893:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * at least MIN_SIZE_ALIGNED of data also fits in the 'user data space' of 'mem')
 894:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * -> split large block, create empty remainder,
 895:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * remainder must be large enough to contain MIN_SIZE_ALIGNED data: if
 896:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * mem->next - (ptr + (2*SIZEOF_STRUCT_MEM)) == size,
 897:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * struct mem would fit in but no data between mem2 and mem2->next
 898:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * @todo we could leave out MIN_SIZE_ALIGNED. We would create an empty
 899:Middlewares/Third_Party/LwIP/src/core/mem.c ****            *       region that couldn't hold data, but when mem->next gets freed,
 900:Middlewares/Third_Party/LwIP/src/core/mem.c ****            *       the 2 regions would be combined, resulting in more free memory
 901:Middlewares/Third_Party/LwIP/src/core/mem.c ****            */
 902:Middlewares/Third_Party/LwIP/src/core/mem.c ****           ptr2 = (mem_size_t)(ptr + SIZEOF_STRUCT_MEM + size);
 1319              		.loc 1 902 55
 1320 0094 FA8B     		ldrh	r2, [r7, #30]	@ movhi
 1321 0096 BB8B     		ldrh	r3, [r7, #28]	@ movhi
 1322 0098 1344     		add	r3, r3, r2
 1323 009a 9BB2     		uxth	r3, r3
 1324              		.loc 1 902 16
 1325 009c 0833     		adds	r3, r3, #8
ARM GAS  /tmp/ccfh2Clp.s 			page 41


 1326 009e 7B82     		strh	r3, [r7, #18]	@ movhi
 903:Middlewares/Third_Party/LwIP/src/core/mem.c ****           LWIP_ASSERT("invalid next ptr",ptr2 != MEM_SIZE_ALIGNED);
 1327              		.loc 1 903 11
 1328 00a0 7B8A     		ldrh	r3, [r7, #18]
 1329 00a2 B3F5C86F 		cmp	r3, #1600
 1330 00a6 06D1     		bne	.L75
 1331              		.loc 1 903 11 is_stmt 0 discriminator 1
 1332 00a8 504B     		ldr	r3, .L86+8
 1333 00aa 40F28732 		movw	r2, #903
 1334 00ae 5049     		ldr	r1, .L86+12
 1335 00b0 5048     		ldr	r0, .L86+16
 1336 00b2 FFF7FEFF 		bl	printf
 1337              	.L75:
 904:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* create mem2 struct */
 905:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2 = ptr_to_mem(ptr2);
 1338              		.loc 1 905 18 is_stmt 1
 1339 00b6 7B8A     		ldrh	r3, [r7, #18]
 1340 00b8 1846     		mov	r0, r3
 1341 00ba FFF7FEFF 		bl	ptr_to_mem
 1342 00be F860     		str	r0, [r7, #12]
 906:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->used = 0;
 1343              		.loc 1 906 22
 1344 00c0 FB68     		ldr	r3, [r7, #12]
 1345 00c2 0022     		movs	r2, #0
 1346 00c4 1A71     		strb	r2, [r3, #4]
 907:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->next = mem->next;
 1347              		.loc 1 907 27
 1348 00c6 7B69     		ldr	r3, [r7, #20]
 1349 00c8 1A88     		ldrh	r2, [r3]
 1350              		.loc 1 907 22
 1351 00ca FB68     		ldr	r3, [r7, #12]
 1352 00cc 1A80     		strh	r2, [r3]	@ movhi
 908:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem2->prev = ptr;
 1353              		.loc 1 908 22
 1354 00ce FB68     		ldr	r3, [r7, #12]
 1355 00d0 FA8B     		ldrh	r2, [r7, #30]	@ movhi
 1356 00d2 5A80     		strh	r2, [r3, #2]	@ movhi
 909:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* and insert it between mem and mem->next */
 910:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->next = ptr2;
 1357              		.loc 1 910 21
 1358 00d4 7B69     		ldr	r3, [r7, #20]
 1359 00d6 7A8A     		ldrh	r2, [r7, #18]	@ movhi
 1360 00d8 1A80     		strh	r2, [r3]	@ movhi
 911:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->used = 1;
 1361              		.loc 1 911 21
 1362 00da 7B69     		ldr	r3, [r7, #20]
 1363 00dc 0122     		movs	r2, #1
 1364 00de 1A71     		strb	r2, [r3, #4]
 912:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 913:Middlewares/Third_Party/LwIP/src/core/mem.c ****           if (mem2->next != MEM_SIZE_ALIGNED) {
 1365              		.loc 1 913 19
 1366 00e0 FB68     		ldr	r3, [r7, #12]
 1367 00e2 1B88     		ldrh	r3, [r3]
 1368              		.loc 1 913 14
 1369 00e4 B3F5C86F 		cmp	r3, #1600
 1370 00e8 0BD0     		beq	.L77
 914:Middlewares/Third_Party/LwIP/src/core/mem.c ****             ptr_to_mem(mem2->next)->prev = ptr2;
ARM GAS  /tmp/ccfh2Clp.s 			page 42


 1371              		.loc 1 914 13
 1372 00ea FB68     		ldr	r3, [r7, #12]
 1373 00ec 1B88     		ldrh	r3, [r3]
 1374 00ee 1846     		mov	r0, r3
 1375 00f0 FFF7FEFF 		bl	ptr_to_mem
 1376 00f4 0246     		mov	r2, r0
 1377              		.loc 1 914 42
 1378 00f6 7B8A     		ldrh	r3, [r7, #18]	@ movhi
 1379 00f8 5380     		strh	r3, [r2, #2]	@ movhi
 1380 00fa 02E0     		b	.L77
 1381              	.L74:
 915:Middlewares/Third_Party/LwIP/src/core/mem.c ****           }
 916:Middlewares/Third_Party/LwIP/src/core/mem.c ****           MEM_STATS_INC_USED(used, (size + SIZEOF_STRUCT_MEM));
 917:Middlewares/Third_Party/LwIP/src/core/mem.c ****         } else {
 918:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* (a mem2 struct does no fit into the user data space of mem and mem->next will always
 919:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * be used at this point: if not we have 2 unused structs in a row, plug_holes should hav
 920:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * take care of this).
 921:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * -> near fit or exact fit: do not split, no mem2 creation
 922:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * also can't move mem->next directly behind mem, since mem->next
 923:Middlewares/Third_Party/LwIP/src/core/mem.c ****            * will always be used at this point!
 924:Middlewares/Third_Party/LwIP/src/core/mem.c ****            */
 925:Middlewares/Third_Party/LwIP/src/core/mem.c ****           mem->used = 1;
 1382              		.loc 1 925 21
 1383 00fc 7B69     		ldr	r3, [r7, #20]
 1384 00fe 0122     		movs	r2, #1
 1385 0100 1A71     		strb	r2, [r3, #4]
 1386              	.L77:
 926:Middlewares/Third_Party/LwIP/src/core/mem.c ****           MEM_STATS_INC_USED(used, mem->next - mem_to_ptr(mem));
 927:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 928:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 929:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_malloc_adjust_lfree:
 930:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 931:Middlewares/Third_Party/LwIP/src/core/mem.c ****         if (mem == lfree) {
 1387              		.loc 1 931 17
 1388 0102 394B     		ldr	r3, .L86+4
 1389 0104 1B68     		ldr	r3, [r3]
 1390              		.loc 1 931 12
 1391 0106 7A69     		ldr	r2, [r7, #20]
 1392 0108 9A42     		cmp	r2, r3
 1393 010a 27D1     		bne	.L78
 1394              	.LBB8:
 932:Middlewares/Third_Party/LwIP/src/core/mem.c ****           struct mem *cur = lfree;
 1395              		.loc 1 932 23
 1396 010c 364B     		ldr	r3, .L86+4
 1397 010e 1B68     		ldr	r3, [r3]
 1398 0110 BB61     		str	r3, [r7, #24]
 933:Middlewares/Third_Party/LwIP/src/core/mem.c ****           /* Find next free block after mem and update lowest free pointer */
 934:Middlewares/Third_Party/LwIP/src/core/mem.c ****           while (cur->used && cur != ram_end) {
 1399              		.loc 1 934 17
 1400 0112 05E0     		b	.L79
 1401              	.L81:
 935:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 936:Middlewares/Third_Party/LwIP/src/core/mem.c ****             mem_free_count = 0;
 937:Middlewares/Third_Party/LwIP/src/core/mem.c ****             LWIP_MEM_ALLOC_UNPROTECT();
 938:Middlewares/Third_Party/LwIP/src/core/mem.c ****             /* prevent high interrupt latency... */
 939:Middlewares/Third_Party/LwIP/src/core/mem.c ****             LWIP_MEM_ALLOC_PROTECT();
 940:Middlewares/Third_Party/LwIP/src/core/mem.c ****             if (mem_free_count != 0) {
ARM GAS  /tmp/ccfh2Clp.s 			page 43


 941:Middlewares/Third_Party/LwIP/src/core/mem.c ****               /* If mem_free or mem_trim have run, we have to restart since they
 942:Middlewares/Third_Party/LwIP/src/core/mem.c ****                  could have altered our current struct mem or lfree. */
 943:Middlewares/Third_Party/LwIP/src/core/mem.c ****               goto mem_malloc_adjust_lfree;
 944:Middlewares/Third_Party/LwIP/src/core/mem.c ****             }
 945:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 946:Middlewares/Third_Party/LwIP/src/core/mem.c ****             cur = ptr_to_mem(cur->next);
 1402              		.loc 1 946 19
 1403 0114 BB69     		ldr	r3, [r7, #24]
 1404 0116 1B88     		ldrh	r3, [r3]
 1405 0118 1846     		mov	r0, r3
 1406 011a FFF7FEFF 		bl	ptr_to_mem
 1407 011e B861     		str	r0, [r7, #24]
 1408              	.L79:
 934:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 1409              		.loc 1 934 21
 1410 0120 BB69     		ldr	r3, [r7, #24]
 1411 0122 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 934:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 1412              		.loc 1 934 17
 1413 0124 002B     		cmp	r3, #0
 1414 0126 04D0     		beq	.L80
 934:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 1415              		.loc 1 934 35 discriminator 1
 1416 0128 334B     		ldr	r3, .L86+20
 1417 012a 1B68     		ldr	r3, [r3]
 934:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 1418              		.loc 1 934 28 discriminator 1
 1419 012c BA69     		ldr	r2, [r7, #24]
 1420 012e 9A42     		cmp	r2, r3
 1421 0130 F0D1     		bne	.L81
 1422              	.L80:
 947:Middlewares/Third_Party/LwIP/src/core/mem.c ****           }
 948:Middlewares/Third_Party/LwIP/src/core/mem.c ****           lfree = cur;
 1423              		.loc 1 948 17
 1424 0132 2D4A     		ldr	r2, .L86+4
 1425 0134 BB69     		ldr	r3, [r7, #24]
 1426 0136 1360     		str	r3, [r2]
 949:Middlewares/Third_Party/LwIP/src/core/mem.c ****           LWIP_ASSERT("mem_malloc: !lfree->used", ((lfree == ram_end) || (!lfree->used)));
 1427              		.loc 1 949 11
 1428 0138 2B4B     		ldr	r3, .L86+4
 1429 013a 1A68     		ldr	r2, [r3]
 1430 013c 2E4B     		ldr	r3, .L86+20
 1431 013e 1B68     		ldr	r3, [r3]
 1432 0140 9A42     		cmp	r2, r3
 1433 0142 0BD0     		beq	.L78
 1434              		.loc 1 949 11 is_stmt 0 discriminator 1
 1435 0144 284B     		ldr	r3, .L86+4
 1436 0146 1B68     		ldr	r3, [r3]
 1437 0148 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1438 014a 002B     		cmp	r3, #0
 1439 014c 06D0     		beq	.L78
 1440              		.loc 1 949 11 discriminator 2
 1441 014e 274B     		ldr	r3, .L86+8
 1442 0150 40F2B532 		movw	r2, #949
 1443 0154 2949     		ldr	r1, .L86+24
 1444 0156 2748     		ldr	r0, .L86+16
 1445 0158 FFF7FEFF 		bl	printf
ARM GAS  /tmp/ccfh2Clp.s 			page 44


 1446              	.L78:
 1447              	.LBE8:
 950:Middlewares/Third_Party/LwIP/src/core/mem.c ****         }
 951:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_MEM_ALLOC_UNPROTECT();
 952:Middlewares/Third_Party/LwIP/src/core/mem.c ****         sys_mutex_unlock(&mem_mutex);
 1448              		.loc 1 952 9 is_stmt 1
 1449 015c 2148     		ldr	r0, .L86
 1450 015e FFF7FEFF 		bl	sys_mutex_unlock
 953:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("mem_malloc: allocated memory not above ram_end.",
 1451              		.loc 1 953 9
 1452 0162 BA8B     		ldrh	r2, [r7, #28]
 1453 0164 7B69     		ldr	r3, [r7, #20]
 1454 0166 1344     		add	r3, r3, r2
 1455 0168 0833     		adds	r3, r3, #8
 1456 016a 234A     		ldr	r2, .L86+20
 1457 016c 1268     		ldr	r2, [r2]
 1458 016e 9342     		cmp	r3, r2
 1459 0170 06D9     		bls	.L82
 1460              		.loc 1 953 9 is_stmt 0 discriminator 1
 1461 0172 1E4B     		ldr	r3, .L86+8
 1462 0174 40F2BA32 		movw	r2, #954
 1463 0178 2149     		ldr	r1, .L86+28
 1464 017a 1E48     		ldr	r0, .L86+16
 1465 017c FFF7FEFF 		bl	printf
 1466              	.L82:
 954:Middlewares/Third_Party/LwIP/src/core/mem.c ****                     (mem_ptr_t)mem + SIZEOF_STRUCT_MEM + size <= (mem_ptr_t)ram_end);
 955:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("mem_malloc: allocated memory properly aligned.",
 1467              		.loc 1 955 9 is_stmt 1
 1468 0180 7B69     		ldr	r3, [r7, #20]
 1469 0182 03F00303 		and	r3, r3, #3
 1470 0186 002B     		cmp	r3, #0
 1471 0188 06D0     		beq	.L83
 1472              		.loc 1 955 9 is_stmt 0 discriminator 1
 1473 018a 184B     		ldr	r3, .L86+8
 1474 018c 4FF46F72 		mov	r2, #956
 1475 0190 1C49     		ldr	r1, .L86+32
 1476 0192 1848     		ldr	r0, .L86+16
 1477 0194 FFF7FEFF 		bl	printf
 1478              	.L83:
 956:Middlewares/Third_Party/LwIP/src/core/mem.c ****                     ((mem_ptr_t)mem + SIZEOF_STRUCT_MEM) % MEM_ALIGNMENT == 0);
 957:Middlewares/Third_Party/LwIP/src/core/mem.c ****         LWIP_ASSERT("mem_malloc: sanity check alignment",
 1479              		.loc 1 957 9 is_stmt 1
 1480 0198 7B69     		ldr	r3, [r7, #20]
 1481 019a 03F00303 		and	r3, r3, #3
 1482 019e 002B     		cmp	r3, #0
 1483 01a0 06D0     		beq	.L84
 1484              		.loc 1 957 9 is_stmt 0 discriminator 1
 1485 01a2 124B     		ldr	r3, .L86+8
 1486 01a4 40F2BE32 		movw	r2, #958
 1487 01a8 1749     		ldr	r1, .L86+36
 1488 01aa 1248     		ldr	r0, .L86+16
 1489 01ac FFF7FEFF 		bl	printf
 1490              	.L84:
 958:Middlewares/Third_Party/LwIP/src/core/mem.c ****                     (((mem_ptr_t)mem) & (MEM_ALIGNMENT - 1)) == 0);
 959:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 960:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_OVERFLOW_CHECK
 961:Middlewares/Third_Party/LwIP/src/core/mem.c ****         mem_overflow_init_element(mem, size_in);
ARM GAS  /tmp/ccfh2Clp.s 			page 45


 962:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif
 963:Middlewares/Third_Party/LwIP/src/core/mem.c ****         MEM_SANITY();
 964:Middlewares/Third_Party/LwIP/src/core/mem.c ****         return (u8_t *)mem + SIZEOF_STRUCT_MEM + MEM_SANITY_OFFSET;
 1491              		.loc 1 964 48 is_stmt 1
 1492 01b0 7B69     		ldr	r3, [r7, #20]
 1493 01b2 0833     		adds	r3, r3, #8
 1494 01b4 11E0     		b	.L68
 1495              	.L73:
 871:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem = ptr_to_mem(ptr);
 1496              		.loc 1 871 16
 1497 01b6 FB8B     		ldrh	r3, [r7, #30]
 1498 01b8 1846     		mov	r0, r3
 1499 01ba FFF7FEFF 		bl	ptr_to_mem
 1500 01be 0346     		mov	r3, r0
 871:Middlewares/Third_Party/LwIP/src/core/mem.c ****       mem = ptr_to_mem(ptr);
 1501              		.loc 1 871 14
 1502 01c0 1B88     		ldrh	r3, [r3]	@ movhi
 1503 01c2 FB83     		strh	r3, [r7, #30]	@ movhi
 1504              	.L72:
 870:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ptr = ptr_to_mem(ptr)->next) {
 1505              		.loc 1 870 39 discriminator 1
 1506 01c4 FA8B     		ldrh	r2, [r7, #30]
 870:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ptr = ptr_to_mem(ptr)->next) {
 1507              		.loc 1 870 58 discriminator 1
 1508 01c6 BB8B     		ldrh	r3, [r7, #28]
 1509 01c8 C3F5C863 		rsb	r3, r3, #1600
 870:Middlewares/Third_Party/LwIP/src/core/mem.c ****          ptr = ptr_to_mem(ptr)->next) {
 1510              		.loc 1 870 5 discriminator 1
 1511 01cc 9A42     		cmp	r2, r3
 1512 01ce FFF441AF 		bcc	.L85
 965:Middlewares/Third_Party/LwIP/src/core/mem.c ****       }
 966:Middlewares/Third_Party/LwIP/src/core/mem.c ****     }
 967:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT
 968:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* if we got interrupted by a mem_free, try again */
 969:Middlewares/Third_Party/LwIP/src/core/mem.c ****   } while (local_mem_free_count != 0);
 970:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* LWIP_ALLOW_MEM_FREE_FROM_OTHER_CONTEXT */
 971:Middlewares/Third_Party/LwIP/src/core/mem.c ****   MEM_STATS_INC(err);
 972:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_MEM_ALLOC_UNPROTECT();
 973:Middlewares/Third_Party/LwIP/src/core/mem.c ****   sys_mutex_unlock(&mem_mutex);
 1513              		.loc 1 973 3
 1514 01d2 0448     		ldr	r0, .L86
 1515 01d4 FFF7FEFF 		bl	sys_mutex_unlock
 974:Middlewares/Third_Party/LwIP/src/core/mem.c ****   LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("mem_malloc: could not allocate %"S16_F" bytes\n
 975:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return NULL;
 1516              		.loc 1 975 10
 1517 01d8 0023     		movs	r3, #0
 1518              	.L68:
 976:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 1519              		.loc 1 976 1
 1520 01da 1846     		mov	r0, r3
 1521 01dc 2037     		adds	r7, r7, #32
 1522              	.LCFI40:
 1523              		.cfi_def_cfa_offset 8
 1524 01de BD46     		mov	sp, r7
 1525              	.LCFI41:
 1526              		.cfi_def_cfa_register 13
 1527              		@ sp needed
ARM GAS  /tmp/ccfh2Clp.s 			page 46


 1528 01e0 80BD     		pop	{r7, pc}
 1529              	.L87:
 1530 01e2 00BF     		.align	2
 1531              	.L86:
 1532 01e4 00000000 		.word	mem_mutex
 1533 01e8 00000000 		.word	lfree
 1534 01ec 00000000 		.word	.LC0
 1535 01f0 C0010000 		.word	.LC13
 1536 01f4 44000000 		.word	.LC2
 1537 01f8 00000000 		.word	ram_end
 1538 01fc D4010000 		.word	.LC14
 1539 0200 F0010000 		.word	.LC15
 1540 0204 20020000 		.word	.LC16
 1541 0208 50020000 		.word	.LC17
 1542              		.cfi_endproc
 1543              	.LFE144:
 1545              		.section	.text.mem_calloc,"ax",%progbits
 1546              		.align	1
 1547              		.global	mem_calloc
 1548              		.syntax unified
 1549              		.thumb
 1550              		.thumb_func
 1551              		.fpu fpv4-sp-d16
 1553              	mem_calloc:
 1554              	.LFB145:
 977:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 978:Middlewares/Third_Party/LwIP/src/core/mem.c **** #endif /* MEM_USE_POOLS */
 979:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 980:Middlewares/Third_Party/LwIP/src/core/mem.c **** #if MEM_LIBC_MALLOC && (!LWIP_STATS || !MEM_STATS)
 981:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 982:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_calloc(mem_size_t count, mem_size_t size)
 983:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 984:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return mem_clib_calloc(count, size);
 985:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 986:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
 987:Middlewares/Third_Party/LwIP/src/core/mem.c **** #else /* MEM_LIBC_MALLOC && (!LWIP_STATS || !MEM_STATS) */
 988:Middlewares/Third_Party/LwIP/src/core/mem.c **** /**
 989:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * Contiguously allocates enough space for count objects that are size bytes
 990:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * of memory each and returns a pointer to the allocated memory.
 991:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 992:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * The allocated memory is filled with bytes of value zero.
 993:Middlewares/Third_Party/LwIP/src/core/mem.c ****  *
 994:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param count number of objects to allocate
 995:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @param size size of the objects to allocate
 996:Middlewares/Third_Party/LwIP/src/core/mem.c ****  * @return pointer to allocated memory / NULL pointer if there is an error
 997:Middlewares/Third_Party/LwIP/src/core/mem.c ****  */
 998:Middlewares/Third_Party/LwIP/src/core/mem.c **** void *
 999:Middlewares/Third_Party/LwIP/src/core/mem.c **** mem_calloc(mem_size_t count, mem_size_t size)
1000:Middlewares/Third_Party/LwIP/src/core/mem.c **** {
 1555              		.loc 1 1000 1
 1556              		.cfi_startproc
 1557              		@ args = 0, pretend = 0, frame = 16
 1558              		@ frame_needed = 1, uses_anonymous_args = 0
 1559 0000 80B5     		push	{r7, lr}
 1560              	.LCFI42:
 1561              		.cfi_def_cfa_offset 8
 1562              		.cfi_offset 7, -8
ARM GAS  /tmp/ccfh2Clp.s 			page 47


 1563              		.cfi_offset 14, -4
 1564 0002 84B0     		sub	sp, sp, #16
 1565              	.LCFI43:
 1566              		.cfi_def_cfa_offset 24
 1567 0004 00AF     		add	r7, sp, #0
 1568              	.LCFI44:
 1569              		.cfi_def_cfa_register 7
 1570 0006 0346     		mov	r3, r0
 1571 0008 0A46     		mov	r2, r1
 1572 000a FB80     		strh	r3, [r7, #6]	@ movhi
 1573 000c 1346     		mov	r3, r2	@ movhi
 1574 000e BB80     		strh	r3, [r7, #4]	@ movhi
1001:Middlewares/Third_Party/LwIP/src/core/mem.c ****   void *p;
1002:Middlewares/Third_Party/LwIP/src/core/mem.c ****   size_t alloc_size = (size_t)count * (size_t)size;
 1575              		.loc 1 1002 23
 1576 0010 FB88     		ldrh	r3, [r7, #6]
 1577              		.loc 1 1002 39
 1578 0012 BA88     		ldrh	r2, [r7, #4]
 1579              		.loc 1 1002 10
 1580 0014 02FB03F3 		mul	r3, r2, r3
 1581 0018 FB60     		str	r3, [r7, #12]
1003:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
1004:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if ((size_t)(mem_size_t)alloc_size != alloc_size) {
 1582              		.loc 1 1004 15
 1583 001a FB68     		ldr	r3, [r7, #12]
 1584 001c 9BB2     		uxth	r3, r3
 1585              		.loc 1 1004 7
 1586 001e 1A46     		mov	r2, r3
 1587              		.loc 1 1004 6
 1588 0020 FB68     		ldr	r3, [r7, #12]
 1589 0022 9342     		cmp	r3, r2
 1590 0024 01D0     		beq	.L89
1005:Middlewares/Third_Party/LwIP/src/core/mem.c ****     LWIP_DEBUGF(MEM_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("mem_calloc: could not allocate %"SZT_F" bytes
1006:Middlewares/Third_Party/LwIP/src/core/mem.c ****     return NULL;
 1591              		.loc 1 1006 12
 1592 0026 0023     		movs	r3, #0
 1593 0028 0EE0     		b	.L90
 1594              	.L89:
1007:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
1008:Middlewares/Third_Party/LwIP/src/core/mem.c **** 
1009:Middlewares/Third_Party/LwIP/src/core/mem.c ****   /* allocate 'count' objects of size 'size' */
1010:Middlewares/Third_Party/LwIP/src/core/mem.c ****   p = mem_malloc((mem_size_t)alloc_size);
 1595              		.loc 1 1010 7
 1596 002a FB68     		ldr	r3, [r7, #12]
 1597 002c 9BB2     		uxth	r3, r3
 1598 002e 1846     		mov	r0, r3
 1599 0030 FFF7FEFF 		bl	mem_malloc
 1600 0034 B860     		str	r0, [r7, #8]
1011:Middlewares/Third_Party/LwIP/src/core/mem.c ****   if (p) {
 1601              		.loc 1 1011 6
 1602 0036 BB68     		ldr	r3, [r7, #8]
 1603 0038 002B     		cmp	r3, #0
 1604 003a 04D0     		beq	.L91
1012:Middlewares/Third_Party/LwIP/src/core/mem.c ****     /* zero the memory */
1013:Middlewares/Third_Party/LwIP/src/core/mem.c ****     memset(p, 0, alloc_size);
 1605              		.loc 1 1013 5
 1606 003c FA68     		ldr	r2, [r7, #12]
ARM GAS  /tmp/ccfh2Clp.s 			page 48


 1607 003e 0021     		movs	r1, #0
 1608 0040 B868     		ldr	r0, [r7, #8]
 1609 0042 FFF7FEFF 		bl	memset
 1610              	.L91:
1014:Middlewares/Third_Party/LwIP/src/core/mem.c ****   }
1015:Middlewares/Third_Party/LwIP/src/core/mem.c ****   return p;
 1611              		.loc 1 1015 10
 1612 0046 BB68     		ldr	r3, [r7, #8]
 1613              	.L90:
1016:Middlewares/Third_Party/LwIP/src/core/mem.c **** }
 1614              		.loc 1 1016 1
 1615 0048 1846     		mov	r0, r3
 1616 004a 1037     		adds	r7, r7, #16
 1617              	.LCFI45:
 1618              		.cfi_def_cfa_offset 8
 1619 004c BD46     		mov	sp, r7
 1620              	.LCFI46:
 1621              		.cfi_def_cfa_register 13
 1622              		@ sp needed
 1623 004e 80BD     		pop	{r7, pc}
 1624              		.cfi_endproc
 1625              	.LFE145:
 1627              		.text
 1628              	.Letext0:
 1629              		.file 2 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/machine/_default_typ
 1630              		.file 3 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_stdint.h"
 1631              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 1632              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 1633              		.file 6 "/home/mego-ros2/microros_ws/firmware/toolchain/lib/gcc/arm-none-eabi/8.3.1/include/stddef
 1634              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1635              		.file 8 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_types.h"
 1636              		.file 9 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/reent.h"
 1637              		.file 10 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/lock.h"
 1638              		.file 11 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/stdlib.h"
 1639              		.file 12 "Middlewares/Third_Party/LwIP/system/arch/cc.h"
 1640              		.file 13 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 1641              		.file 14 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/ctype.h"
 1642              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/mem.h"
 1643              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 1644              		.file 17 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 1645              		.file 18 "Middlewares/Third_Party/LwIP/system/arch/sys_arch.h"
 1646              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 1647              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
ARM GAS  /tmp/ccfh2Clp.s 			page 49


DEFINED SYMBOLS
                            *ABS*:0000000000000000 mem.c
                            *COM*:0000000000000653 ram_heap
     /tmp/ccfh2Clp.s:19     .bss.ram:0000000000000000 $d
     /tmp/ccfh2Clp.s:22     .bss.ram:0000000000000000 ram
     /tmp/ccfh2Clp.s:25     .bss.ram_end:0000000000000000 $d
     /tmp/ccfh2Clp.s:28     .bss.ram_end:0000000000000000 ram_end
     /tmp/ccfh2Clp.s:31     .bss.mem_mutex:0000000000000000 $d
     /tmp/ccfh2Clp.s:34     .bss.mem_mutex:0000000000000000 mem_mutex
     /tmp/ccfh2Clp.s:37     .bss.lfree:0000000000000000 $d
     /tmp/ccfh2Clp.s:40     .bss.lfree:0000000000000000 lfree
     /tmp/ccfh2Clp.s:43     .text.ptr_to_mem:0000000000000000 $t
     /tmp/ccfh2Clp.s:50     .text.ptr_to_mem:0000000000000000 ptr_to_mem
     /tmp/ccfh2Clp.s:93     .text.ptr_to_mem:0000000000000020 $d
     /tmp/ccfh2Clp.s:98     .text.mem_to_ptr:0000000000000000 $t
     /tmp/ccfh2Clp.s:104    .text.mem_to_ptr:0000000000000000 mem_to_ptr
     /tmp/ccfh2Clp.s:146    .text.mem_to_ptr:0000000000000020 $d
     /tmp/ccfh2Clp.s:151    .rodata:0000000000000000 $d
     /tmp/ccfh2Clp.s:170    .text.plug_holes:0000000000000000 $t
     /tmp/ccfh2Clp.s:176    .text.plug_holes:0000000000000000 plug_holes
     /tmp/ccfh2Clp.s:373    .text.plug_holes:0000000000000120 $d
     /tmp/ccfh2Clp.s:390    .text.mem_init:0000000000000000 $t
     /tmp/ccfh2Clp.s:397    .text.mem_init:0000000000000000 mem_init
     /tmp/ccfh2Clp.s:496    .text.mem_init:0000000000000084 $d
     /tmp/ccfh2Clp.s:508    .text.mem_link_valid:0000000000000000 $t
     /tmp/ccfh2Clp.s:514    .text.mem_link_valid:0000000000000000 mem_link_valid
     /tmp/ccfh2Clp.s:611    .text.mem_link_valid:0000000000000074 $d
     /tmp/ccfh2Clp.s:629    .text.mem_free:0000000000000000 $t
     /tmp/ccfh2Clp.s:636    .text.mem_free:0000000000000000 mem_free
     /tmp/ccfh2Clp.s:811    .text.mem_free:00000000000000f8 $d
     /tmp/ccfh2Clp.s:835    .text.mem_trim:0000000000000000 $t
     /tmp/ccfh2Clp.s:842    .text.mem_trim:0000000000000000 mem_trim
     /tmp/ccfh2Clp.s:1179   .text.mem_trim:00000000000001f0 $d
     /tmp/ccfh2Clp.s:1205   .text.mem_malloc:0000000000000000 $t
     /tmp/ccfh2Clp.s:1212   .text.mem_malloc:0000000000000000 mem_malloc
     /tmp/ccfh2Clp.s:1532   .text.mem_malloc:00000000000001e4 $d
     /tmp/ccfh2Clp.s:1546   .text.mem_calloc:0000000000000000 $t
     /tmp/ccfh2Clp.s:1553   .text.mem_calloc:0000000000000000 mem_calloc

UNDEFINED SYMBOLS
printf
sys_mutex_new
sys_arch_protect
sys_arch_unprotect
sys_mutex_lock
sys_mutex_unlock
memset
