ARM GAS  /tmp/cc6RPj0P.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"tcp_out.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.tcp_route,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	tcp_route:
  26              	.LFB133:
  27              		.file 1 "Middlewares/Third_Party/LwIP/src/core/tcp_out.c"
   1:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
   2:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @file
   3:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Transmission Control Protocol, outgoing traffic
   4:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
   5:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The output functions of TCP.
   6:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
   7:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * There are two distinct ways for TCP segments to get sent:
   8:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - queued data: these are segments transferring data or segments containing
   9:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   SYN or FIN (which both count as one sequence number). They are created as
  10:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   struct @ref pbuf together with a struct tcp_seg and enqueue to the
  11:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   unsent list of the pcb. They are sent by tcp_output:
  12:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_write : creates data segments
  13:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_split_unsent_seg : splits a data segment
  14:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_enqueue_flags : creates SYN-only or FIN-only segments
  15:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_output / tcp_output_segment : finalize the tcp header
  16:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *      (e.g. sequence numbers, options, checksum) and output to IP
  17:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - the various tcp_rexmit functions shuffle around segments between the
  18:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *     unsent an unacked lists to retransmit them
  19:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - tcp_create_segment and tcp_pbuf_prealloc allocate pbuf and
  20:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *     segment for these functions
  21:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - direct send: these segments don't contain data but control the connection
  22:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   behaviour. They are created as pbuf only and sent directly without
  23:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   enqueueing them:
  24:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_send_empty_ack sends an ACK-only segment
  25:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_rst sends a RST segment
  26:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_keepalive sends a keepalive segment
  27:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - @ref tcp_zero_window_probe sends a window probe segment
  28:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   - tcp_output_alloc_header allocates a header-only pbuf for these functions
  29:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
  30:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  31:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /*
ARM GAS  /tmp/cc6RPj0P.s 			page 2


  32:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  33:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * All rights reserved.
  34:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  35:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Redistribution and use in source and binary forms, with or without modification,
  36:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * are permitted provided that the following conditions are met:
  37:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  38:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  39:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    this list of conditions and the following disclaimer.
  40:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  41:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    this list of conditions and the following disclaimer in the documentation
  42:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    and/or other materials provided with the distribution.
  43:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 3. The name of the author may not be used to endorse or promote products
  44:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *    derived from this software without specific prior written permission.
  45:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  46:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  47:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  48:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  49:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  50:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  51:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  52:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  53:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  54:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  55:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * OF SUCH DAMAGE.
  56:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  57:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This file is part of the lwIP TCP/IP stack.
  58:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  59:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Author: Adam Dunkels <adam@sics.se>
  60:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
  61:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
  62:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  63:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/opt.h"
  64:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  65:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP /* don't build if not configured for use in lwipopts.h */
  66:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  67:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/priv/tcp_priv.h"
  68:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/def.h"
  69:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/mem.h"
  70:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/memp.h"
  71:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip_addr.h"
  72:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/netif.h"
  73:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/inet_chksum.h"
  74:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/stats.h"
  75:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip6.h"
  76:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/ip6_addr.h"
  77:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
  78:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include "lwip/sys.h"
  79:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  80:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  81:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include <string.h>
  82:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  83:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_FILENAME
  84:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #include LWIP_HOOK_FILENAME
  85:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  86:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  87:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Allow to add custom TCP header options by defining this hook */
  88:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_TCP_OUT_TCPOPT_LENGTH
ARM GAS  /tmp/cc6RPj0P.s 			page 3


  89:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define LWIP_TCP_OPT_LENGTH_SEGMENT(flags, pcb) LWIP_HOOK_TCP_OUT_TCPOPT_LENGTH(pcb, LWIP_TCP_OPT_L
  90:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
  91:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define LWIP_TCP_OPT_LENGTH_SEGMENT(flags, pcb) LWIP_TCP_OPT_LENGTH(flags)
  92:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
  93:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
  94:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Define some copy-macros for checksum-on-copy so that the code looks
  95:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    nicer by preventing too many ifdef's. */
  96:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
  97:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY(dst, src, len, seg) do { \
  98:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(LWIP_CHKSUM_COPY(dst, src, len), \
  99:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      len, &seg->chksum, &seg->chksum_swapped); \
 100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags |= TF_SEG_DATA_CHECKSUMMED; } while(0)
 101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY2(dst, src, len, chksum, chksum_swapped)  \
 102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(LWIP_CHKSUM_COPY(dst, src, len), len, chksum, chksum_swapped);
 103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CHECKSUM_ON_COPY*/
 104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY(dst, src, len, seg)                     MEMCPY(dst, src, len)
 105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_DATA_COPY2(dst, src, len, chksum, chksum_swapped) MEMCPY(dst, src, len)
 106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY*/
 107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Define this to 1 for an extra check that the output checksum is valid
 109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (usefule when the checksum is generated by the application, not the stack) */
 110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_CHECKSUM_ON_COPY_SANITY_CHECK
 111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_CHECKSUM_ON_COPY_SANITY_CHECK   0
 112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Allow to override the failure of sanity check from warning to e.g. hard failure */
 114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
 115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL
 116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL(msg) LWIP_DEBUGF(TCP_DEBUG | LWIP_DBG_LEVEL_WARNING,
 117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** The size of segment pbufs created when TCP_OVERSIZE is enabled */
 122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifndef TCP_OVERSIZE_CALC_LENGTH
 123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define TCP_OVERSIZE_CALC_LENGTH(length) ((length) + TCP_OVERSIZE)
 124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
 126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Forward declarations.*/
 128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t tcp_output_segment(struct tcp_seg *seg, struct tcp_pcb *pcb, struct netif *netif);
 129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* tcp_route: common code that returns a fixed bound netif or calls ip_route */
 131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct netif *
 132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_route(const struct tcp_pcb *pcb, const ip_addr_t *src, const ip_addr_t *dst)
 133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
  28              		.loc 1 133 1
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 1, uses_anonymous_args = 0
  32 0000 80B5     		push	{r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 7, -8
  36              		.cfi_offset 14, -4
  37 0002 84B0     		sub	sp, sp, #16
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/cc6RPj0P.s 			page 4


  40 0004 00AF     		add	r7, sp, #0
  41              	.LCFI2:
  42              		.cfi_def_cfa_register 7
  43 0006 F860     		str	r0, [r7, #12]
  44 0008 B960     		str	r1, [r7, #8]
  45 000a 7A60     		str	r2, [r7, #4]
 134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(src); /* in case IPv4-only and source-based routing is disabled */
 135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb != NULL) && (pcb->netif_idx != NETIF_NO_INDEX)) {
  46              		.loc 1 136 6
  47 000c FB68     		ldr	r3, [r7, #12]
  48 000e 002B     		cmp	r3, #0
  49 0010 0AD0     		beq	.L2
  50              		.loc 1 136 28 discriminator 1
  51 0012 FB68     		ldr	r3, [r7, #12]
  52 0014 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
  53              		.loc 1 136 21 discriminator 1
  54 0016 002B     		cmp	r3, #0
  55 0018 06D0     		beq	.L2
 137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return netif_get_by_index(pcb->netif_idx);
  56              		.loc 1 137 12
  57 001a FB68     		ldr	r3, [r7, #12]
  58 001c 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
  59 001e 1846     		mov	r0, r3
  60 0020 FFF7FEFF 		bl	netif_get_by_index
  61 0024 0346     		mov	r3, r0
  62 0026 03E0     		b	.L3
  63              	.L2:
 138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ip_route(src, dst);
  64              		.loc 1 139 12
  65 0028 7868     		ldr	r0, [r7, #4]
  66 002a FFF7FEFF 		bl	ip4_route
  67 002e 0346     		mov	r3, r0
  68              	.L3:
 140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
  69              		.loc 1 141 1
  70 0030 1846     		mov	r0, r3
  71 0032 1037     		adds	r7, r7, #16
  72              	.LCFI3:
  73              		.cfi_def_cfa_offset 8
  74 0034 BD46     		mov	sp, r7
  75              	.LCFI4:
  76              		.cfi_def_cfa_register 13
  77              		@ sp needed
  78 0036 80BD     		pop	{r7, pc}
  79              		.cfi_endproc
  80              	.LFE133:
  82              		.section	.rodata
  83              		.align	2
  84              	.LC0:
  85 0000 4D696464 		.ascii	"Middlewares/Third_Party/LwIP/src/core/tcp_out.c\000"
  85      6C657761 
  85      7265732F 
  85      54686972 
  85      645F5061 
ARM GAS  /tmp/cc6RPj0P.s 			page 5


  86              		.align	2
  87              	.LC1:
  88 0030 7463705F 		.ascii	"tcp_create_segment: invalid pcb\000"
  88      63726561 
  88      74655F73 
  88      65676D65 
  88      6E743A20 
  89              		.align	2
  90              	.LC2:
  91 0050 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
  91      7274696F 
  91      6E202225 
  91      73222066 
  91      61696C65 
  92              		.align	2
  93              	.LC3:
  94 0078 7463705F 		.ascii	"tcp_create_segment: invalid pbuf\000"
  94      63726561 
  94      74655F73 
  94      65676D65 
  94      6E743A20 
  95 0099 000000   		.align	2
  96              	.LC4:
  97 009c 702D3E74 		.ascii	"p->tot_len >= optlen\000"
  97      6F745F6C 
  97      656E203E 
  97      3D206F70 
  97      746C656E 
  98              		.section	.text.tcp_create_segment,"ax",%progbits
  99              		.align	1
 100              		.syntax unified
 101              		.thumb
 102              		.thumb_func
 103              		.fpu fpv4-sp-d16
 105              	tcp_create_segment:
 106              	.LFB134:
 142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Create a TCP segment with prefilled header.
 145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by @ref tcp_write, @ref tcp_enqueue_flags and @ref tcp_split_unsent_seg
 147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection.
 149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param p pbuf that is used to hold the TCP header.
 150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param hdrflags TCP flags for header.
 151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno TCP sequence number of this packet
 152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optflags options to include in TCP header
 153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return a new tcp_seg pointing to p, or NULL.
 154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The TCP header is filled in except ackno and wnd.
 155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * p is freed on failure.
 156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct tcp_seg *
 158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_create_segment(const struct tcp_pcb *pcb, struct pbuf *p, u8_t hdrflags, u32_t seqno, u8_t optf
 159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 107              		.loc 1 159 1
 108              		.cfi_startproc
 109              		@ args = 4, pretend = 0, frame = 24
ARM GAS  /tmp/cc6RPj0P.s 			page 6


 110              		@ frame_needed = 1, uses_anonymous_args = 0
 111 0000 90B5     		push	{r4, r7, lr}
 112              	.LCFI5:
 113              		.cfi_def_cfa_offset 12
 114              		.cfi_offset 4, -12
 115              		.cfi_offset 7, -8
 116              		.cfi_offset 14, -4
 117 0002 87B0     		sub	sp, sp, #28
 118              	.LCFI6:
 119              		.cfi_def_cfa_offset 40
 120 0004 00AF     		add	r7, sp, #0
 121              	.LCFI7:
 122              		.cfi_def_cfa_register 7
 123 0006 F860     		str	r0, [r7, #12]
 124 0008 B960     		str	r1, [r7, #8]
 125 000a 3B60     		str	r3, [r7]
 126 000c 1346     		mov	r3, r2
 127 000e FB71     		strb	r3, [r7, #7]
 160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
 161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
 162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_create_segment: invalid pcb", pcb != NULL);
 128              		.loc 1 163 3
 129 0010 FB68     		ldr	r3, [r7, #12]
 130 0012 002B     		cmp	r3, #0
 131 0014 05D1     		bne	.L5
 132              		.loc 1 163 3 is_stmt 0 discriminator 1
 133 0016 444B     		ldr	r3, .L11
 134 0018 A322     		movs	r2, #163
 135 001a 4449     		ldr	r1, .L11+4
 136 001c 4448     		ldr	r0, .L11+8
 137 001e FFF7FEFF 		bl	printf
 138              	.L5:
 164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_create_segment: invalid pbuf", p != NULL);
 139              		.loc 1 164 3 is_stmt 1
 140 0022 BB68     		ldr	r3, [r7, #8]
 141 0024 002B     		cmp	r3, #0
 142 0026 05D1     		bne	.L6
 143              		.loc 1 164 3 is_stmt 0 discriminator 1
 144 0028 3F4B     		ldr	r3, .L11
 145 002a A422     		movs	r2, #164
 146 002c 4149     		ldr	r1, .L11+12
 147 002e 4048     		ldr	r0, .L11+8
 148 0030 FFF7FEFF 		bl	printf
 149              	.L6:
 165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(optflags, pcb);
 150              		.loc 1 166 12 is_stmt 1
 151 0034 97F82830 		ldrb	r3, [r7, #40]	@ zero_extendqisi2
 152 0038 9B00     		lsls	r3, r3, #2
 153 003a DBB2     		uxtb	r3, r3
 154              		.loc 1 166 10
 155 003c 03F00403 		and	r3, r3, #4
 156 0040 FB75     		strb	r3, [r7, #23]
 167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((seg = (struct tcp_seg *)memp_malloc(MEMP_TCP_SEG)) == NULL) {
 157              		.loc 1 168 32
ARM GAS  /tmp/cc6RPj0P.s 			page 7


 158 0042 0320     		movs	r0, #3
 159 0044 FFF7FEFF 		bl	memp_malloc
 160 0048 3861     		str	r0, [r7, #16]
 161              		.loc 1 168 6
 162 004a 3B69     		ldr	r3, [r7, #16]
 163 004c 002B     		cmp	r3, #0
 164 004e 04D1     		bne	.L7
 169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no memory.\n"));
 170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(p);
 165              		.loc 1 170 5
 166 0050 B868     		ldr	r0, [r7, #8]
 167 0052 FFF7FEFF 		bl	pbuf_free
 171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 168              		.loc 1 171 12
 169 0056 0023     		movs	r3, #0
 170 0058 61E0     		b	.L8
 171              	.L7:
 172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags = optflags;
 172              		.loc 1 173 14
 173 005a 3B69     		ldr	r3, [r7, #16]
 174 005c 97F82820 		ldrb	r2, [r7, #40]
 175 0060 9A72     		strb	r2, [r3, #10]
 174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = NULL;
 176              		.loc 1 174 13
 177 0062 3B69     		ldr	r3, [r7, #16]
 178 0064 0022     		movs	r2, #0
 179 0066 1A60     		str	r2, [r3]
 175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p = p;
 180              		.loc 1 175 10
 181 0068 3B69     		ldr	r3, [r7, #16]
 182 006a BA68     		ldr	r2, [r7, #8]
 183 006c 5A60     		str	r2, [r3, #4]
 176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("p->tot_len >= optlen", p->tot_len >= optlen);
 184              		.loc 1 176 3
 185 006e BB68     		ldr	r3, [r7, #8]
 186 0070 1A89     		ldrh	r2, [r3, #8]
 187 0072 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 188 0074 9BB2     		uxth	r3, r3
 189 0076 9A42     		cmp	r2, r3
 190 0078 05D2     		bcs	.L9
 191              		.loc 1 176 3 is_stmt 0 discriminator 1
 192 007a 2B4B     		ldr	r3, .L11
 193 007c B022     		movs	r2, #176
 194 007e 2E49     		ldr	r1, .L11+16
 195 0080 2B48     		ldr	r0, .L11+8
 196 0082 FFF7FEFF 		bl	printf
 197              	.L9:
 177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->len = p->tot_len - optlen;
 198              		.loc 1 177 15 is_stmt 1
 199 0086 BB68     		ldr	r3, [r7, #8]
 200 0088 1A89     		ldrh	r2, [r3, #8]
 201              		.loc 1 177 25
 202 008a FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 203 008c 9BB2     		uxth	r3, r3
 204 008e D31A     		subs	r3, r2, r3
 205 0090 9AB2     		uxth	r2, r3
ARM GAS  /tmp/cc6RPj0P.s 			page 8


 206              		.loc 1 177 12
 207 0092 3B69     		ldr	r3, [r7, #16]
 208 0094 1A81     		strh	r2, [r3, #8]	@ movhi
 178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->oversize_left = 0;
 180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum = 0;
 183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum_swapped = 0;
 184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check optflags */
 185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("invalid optflags passed: TF_SEG_DATA_CHECKSUMMED",
 186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (optflags & TF_SEG_DATA_CHECKSUMMED) == 0);
 187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* build TCP header */
 190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pbuf_add_header(p, TCP_HLEN)) {
 209              		.loc 1 190 7
 210 0096 1421     		movs	r1, #20
 211 0098 B868     		ldr	r0, [r7, #8]
 212 009a FFF7FEFF 		bl	pbuf_add_header
 213 009e 0346     		mov	r3, r0
 214              		.loc 1 190 6
 215 00a0 002B     		cmp	r3, #0
 216 00a2 04D0     		beq	.L10
 191:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_create_segment: no room for TCP he
 192:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.err);
 193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_free(seg);
 217              		.loc 1 193 5
 218 00a4 3869     		ldr	r0, [r7, #16]
 219 00a6 FFF7FEFF 		bl	tcp_seg_free
 194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 220              		.loc 1 194 12
 221 00aa 0023     		movs	r3, #0
 222 00ac 37E0     		b	.L8
 223              	.L10:
 195:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr = (struct tcp_hdr *)seg->p->payload;
 224              		.loc 1 196 38
 225 00ae 3B69     		ldr	r3, [r7, #16]
 226 00b0 5B68     		ldr	r3, [r3, #4]
 227              		.loc 1 196 41
 228 00b2 5A68     		ldr	r2, [r3, #4]
 229              		.loc 1 196 15
 230 00b4 3B69     		ldr	r3, [r7, #16]
 231 00b6 DA60     		str	r2, [r3, #12]
 197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->src = lwip_htons(pcb->local_port);
 232              		.loc 1 197 22
 233 00b8 FB68     		ldr	r3, [r7, #12]
 234 00ba DA8A     		ldrh	r2, [r3, #22]
 235              		.loc 1 197 6
 236 00bc 3B69     		ldr	r3, [r7, #16]
 237 00be DC68     		ldr	r4, [r3, #12]
 238              		.loc 1 197 22
 239 00c0 1046     		mov	r0, r2
 240 00c2 FFF7FEFF 		bl	lwip_htons
 241 00c6 0346     		mov	r3, r0
 242              		.loc 1 197 20
ARM GAS  /tmp/cc6RPj0P.s 			page 9


 243 00c8 2380     		strh	r3, [r4]	@ unaligned
 198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->dest = lwip_htons(pcb->remote_port);
 244              		.loc 1 198 23
 245 00ca FB68     		ldr	r3, [r7, #12]
 246 00cc 1A8B     		ldrh	r2, [r3, #24]
 247              		.loc 1 198 6
 248 00ce 3B69     		ldr	r3, [r7, #16]
 249 00d0 DC68     		ldr	r4, [r3, #12]
 250              		.loc 1 198 23
 251 00d2 1046     		mov	r0, r2
 252 00d4 FFF7FEFF 		bl	lwip_htons
 253 00d8 0346     		mov	r3, r0
 254              		.loc 1 198 21
 255 00da 6380     		strh	r3, [r4, #2]	@ unaligned
 199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->seqno = lwip_htonl(seqno);
 256              		.loc 1 199 6
 257 00dc 3B69     		ldr	r3, [r7, #16]
 258 00de DC68     		ldr	r4, [r3, #12]
 259              		.loc 1 199 24
 260 00e0 3868     		ldr	r0, [r7]
 261 00e2 FFF7FEFF 		bl	lwip_htonl
 262 00e6 0346     		mov	r3, r0
 263              		.loc 1 199 22
 264 00e8 6360     		str	r3, [r4, #4]	@ unaligned
 200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* ackno is set in tcp_output */
 201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_HDRLEN_FLAGS_SET(seg->tcphdr, (5 + optlen / 4), hdrflags);
 265              		.loc 1 201 3
 266 00ea FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 267 00ec 9B08     		lsrs	r3, r3, #2
 268 00ee DBB2     		uxtb	r3, r3
 269 00f0 9BB2     		uxth	r3, r3
 270 00f2 0533     		adds	r3, r3, #5
 271 00f4 9BB2     		uxth	r3, r3
 272 00f6 1B03     		lsls	r3, r3, #12
 273 00f8 9AB2     		uxth	r2, r3
 274 00fa FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 275 00fc 9BB2     		uxth	r3, r3
 276 00fe 1343     		orrs	r3, r3, r2
 277 0100 9AB2     		uxth	r2, r3
 278 0102 3B69     		ldr	r3, [r7, #16]
 279 0104 DC68     		ldr	r4, [r3, #12]
 280 0106 1046     		mov	r0, r2
 281 0108 FFF7FEFF 		bl	lwip_htons
 282 010c 0346     		mov	r3, r0
 283 010e A381     		strh	r3, [r4, #12]	@ unaligned
 202:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* wnd and chksum are set in tcp_output */
 203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->urgp = 0;
 284              		.loc 1 203 6
 285 0110 3B69     		ldr	r3, [r7, #16]
 286 0112 DB68     		ldr	r3, [r3, #12]
 287              		.loc 1 203 21
 288 0114 0022     		movs	r2, #0
 289 0116 9A74     		strb	r2, [r3, #18]
 290 0118 0022     		movs	r2, #0
 291 011a DA74     		strb	r2, [r3, #19]
 204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return seg;
 292              		.loc 1 204 10
ARM GAS  /tmp/cc6RPj0P.s 			page 10


 293 011c 3B69     		ldr	r3, [r7, #16]
 294              	.L8:
 205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 295              		.loc 1 205 1
 296 011e 1846     		mov	r0, r3
 297 0120 1C37     		adds	r7, r7, #28
 298              	.LCFI8:
 299              		.cfi_def_cfa_offset 12
 300 0122 BD46     		mov	sp, r7
 301              	.LCFI9:
 302              		.cfi_def_cfa_register 13
 303              		@ sp needed
 304 0124 90BD     		pop	{r4, r7, pc}
 305              	.L12:
 306 0126 00BF     		.align	2
 307              	.L11:
 308 0128 00000000 		.word	.LC0
 309 012c 30000000 		.word	.LC1
 310 0130 50000000 		.word	.LC2
 311 0134 78000000 		.word	.LC3
 312 0138 9C000000 		.word	.LC4
 313              		.cfi_endproc
 314              	.LFE134:
 316              		.section	.rodata
 317 00b1 000000   		.align	2
 318              	.LC5:
 319 00b4 7463705F 		.ascii	"tcp_pbuf_prealloc: invalid oversize\000"
 319      70627566 
 319      5F707265 
 319      616C6C6F 
 319      633A2069 
 320              		.align	2
 321              	.LC6:
 322 00d8 7463705F 		.ascii	"tcp_pbuf_prealloc: invalid pcb\000"
 322      70627566 
 322      5F707265 
 322      616C6C6F 
 322      633A2069 
 323 00f7 00       		.align	2
 324              	.LC7:
 325 00f8 6E656564 		.ascii	"need unchained pbuf\000"
 325      20756E63 
 325      6861696E 
 325      65642070 
 325      62756600 
 326              		.section	.text.tcp_pbuf_prealloc,"ax",%progbits
 327              		.align	1
 328              		.syntax unified
 329              		.thumb
 330              		.thumb_func
 331              		.fpu fpv4-sp-d16
 333              	tcp_pbuf_prealloc:
 334              	.LFB135:
 206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Allocate a PBUF_RAM pbuf, perhaps with extra space at the end.
 209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
ARM GAS  /tmp/cc6RPj0P.s 			page 11


 210:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This function is like pbuf_alloc(layer, length, PBUF_RAM) except
 211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * there may be extra bytes available at the end.
 212:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by @ref tcp_write
 214:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param layer flag to define header size.
 216:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param length size of the pbuf's payload.
 217:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param max_length maximum usable size of payload+oversize.
 218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param oversize pointer to a u16_t that will receive the number of usable tail bytes.
 219:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb The TCP connection that will enqueue the pbuf.
 220:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param apiflags API flags given to tcp_write.
 221:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param first_seg true when this pbuf will be used in the first enqueued segment.
 222:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
 225:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_pbuf_prealloc(pbuf_layer layer, u16_t length, u16_t max_length,
 226:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   u16_t *oversize, const struct tcp_pcb *pcb, u8_t apiflags,
 227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   u8_t first_seg)
 228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 335              		.loc 1 228 1
 336              		.cfi_startproc
 337              		@ args = 12, pretend = 0, frame = 24
 338              		@ frame_needed = 1, uses_anonymous_args = 0
 339 0000 80B5     		push	{r7, lr}
 340              	.LCFI10:
 341              		.cfi_def_cfa_offset 8
 342              		.cfi_offset 7, -8
 343              		.cfi_offset 14, -4
 344 0002 86B0     		sub	sp, sp, #24
 345              	.LCFI11:
 346              		.cfi_def_cfa_offset 32
 347 0004 00AF     		add	r7, sp, #0
 348              	.LCFI12:
 349              		.cfi_def_cfa_register 7
 350 0006 7B60     		str	r3, [r7, #4]
 351 0008 0346     		mov	r3, r0
 352 000a FB73     		strb	r3, [r7, #15]
 353 000c 0B46     		mov	r3, r1	@ movhi
 354 000e BB81     		strh	r3, [r7, #12]	@ movhi
 355 0010 1346     		mov	r3, r2	@ movhi
 356 0012 7B81     		strh	r3, [r7, #10]	@ movhi
 229:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
 230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t alloc = length;
 357              		.loc 1 230 9
 358 0014 BB89     		ldrh	r3, [r7, #12]	@ movhi
 359 0016 FB82     		strh	r3, [r7, #22]	@ movhi
 231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_pbuf_prealloc: invalid oversize", oversize != NULL);
 360              		.loc 1 232 3
 361 0018 7B68     		ldr	r3, [r7, #4]
 362 001a 002B     		cmp	r3, #0
 363 001c 05D1     		bne	.L14
 364              		.loc 1 232 3 is_stmt 0 discriminator 1
 365 001e 304B     		ldr	r3, .L21
 366 0020 E822     		movs	r2, #232
 367 0022 3049     		ldr	r1, .L21+4
 368 0024 3048     		ldr	r0, .L21+8
ARM GAS  /tmp/cc6RPj0P.s 			page 12


 369 0026 FFF7FEFF 		bl	printf
 370              	.L14:
 233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_pbuf_prealloc: invalid pcb", pcb != NULL);
 371              		.loc 1 233 3 is_stmt 1
 372 002a 3B6A     		ldr	r3, [r7, #32]
 373 002c 002B     		cmp	r3, #0
 374 002e 05D1     		bne	.L15
 375              		.loc 1 233 3 is_stmt 0 discriminator 1
 376 0030 2B4B     		ldr	r3, .L21
 377 0032 E922     		movs	r2, #233
 378 0034 2D49     		ldr	r1, .L21+12
 379 0036 2C48     		ldr	r0, .L21+8
 380 0038 FFF7FEFF 		bl	printf
 381              	.L15:
 234:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 235:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(max_length);
 237:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(pcb);
 238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(apiflags);
 239:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(first_seg);
 240:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   alloc = max_length;
 241:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* LWIP_NETIF_TX_SINGLE_PBUF */
 242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (length < max_length) {
 382              		.loc 1 242 6 is_stmt 1
 383 003c BA89     		ldrh	r2, [r7, #12]
 384 003e 7B89     		ldrh	r3, [r7, #10]
 385 0040 9A42     		cmp	r2, r3
 386 0042 21D2     		bcs	.L16
 243:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Should we allocate an oversized pbuf, or just the minimum
 244:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * length required? If tcp_write is going to be called again
 245:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * before this segment is transmitted, we want the oversized
 246:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * buffer. If the segment will be transmitted immediately, we can
 247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * save memory by allocating only length. We use a simple
 248:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * heuristic based on the following information:
 249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 250:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Did the user set TCP_WRITE_FLAG_MORE?
 251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Will the Nagle algorithm defer transmission of this segment?
 253:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((apiflags & TCP_WRITE_FLAG_MORE) ||
 387              		.loc 1 254 19
 388 0044 97F82430 		ldrb	r3, [r7, #36]	@ zero_extendqisi2
 389 0048 03F00203 		and	r3, r3, #2
 390              		.loc 1 254 8
 391 004c 002B     		cmp	r3, #0
 392 004e 11D1     		bne	.L17
 255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 393              		.loc 1 255 15 discriminator 1
 394 0050 3B6A     		ldr	r3, [r7, #32]
 395 0052 5B8B     		ldrh	r3, [r3, #26]
 396              		.loc 1 255 23 discriminator 1
 397 0054 03F04003 		and	r3, r3, #64
 254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         (!(pcb->flags & TF_NODELAY) &&
 398              		.loc 1 254 42 discriminator 1
 399 0058 002B     		cmp	r3, #0
 400 005a 15D1     		bne	.L16
 401              		.loc 1 255 37
ARM GAS  /tmp/cc6RPj0P.s 			page 13


 402 005c 97F82830 		ldrb	r3, [r7, #40]	@ zero_extendqisi2
 403 0060 002B     		cmp	r3, #0
 404 0062 07D0     		beq	.L17
 256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unsent != NULL ||
 405              		.loc 1 257 14
 406 0064 3B6A     		ldr	r3, [r7, #32]
 407 0066 DB6E     		ldr	r3, [r3, #108]
 256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          (!first_seg ||
 408              		.loc 1 256 22
 409 0068 002B     		cmp	r3, #0
 410 006a 03D1     		bne	.L17
 258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 411              		.loc 1 258 14
 412 006c 3B6A     		ldr	r3, [r7, #32]
 413 006e 1B6F     		ldr	r3, [r3, #112]
 257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           pcb->unacked != NULL))) {
 414              		.loc 1 257 31
 415 0070 002B     		cmp	r3, #0
 416 0072 09D0     		beq	.L16
 417              	.L17:
 259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       alloc = LWIP_MIN(max_length, LWIP_MEM_ALIGN_SIZE(TCP_OVERSIZE_CALC_LENGTH(length)));
 418              		.loc 1 259 15
 419 0074 BB89     		ldrh	r3, [r7, #12]
 420 0076 03F21B23 		addw	r3, r3, #539
 421 007a 23F00302 		bic	r2, r3, #3
 422 007e 7B89     		ldrh	r3, [r7, #10]
 423 0080 9342     		cmp	r3, r2
 424 0082 28BF     		it	cs
 425 0084 1346     		movcs	r3, r2
 426              		.loc 1 259 13
 427 0086 FB82     		strh	r3, [r7, #22]	@ movhi
 428              	.L16:
 260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(layer, alloc, PBUF_RAM);
 429              		.loc 1 263 7
 430 0088 F98A     		ldrh	r1, [r7, #22]
 431 008a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 432 008c 4FF42072 		mov	r2, #640
 433 0090 1846     		mov	r0, r3
 434 0092 FFF7FEFF 		bl	pbuf_alloc
 435 0096 3861     		str	r0, [r7, #16]
 264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 436              		.loc 1 264 6
 437 0098 3B69     		ldr	r3, [r7, #16]
 438 009a 002B     		cmp	r3, #0
 439 009c 01D1     		bne	.L18
 265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return NULL;
 440              		.loc 1 265 12
 441 009e 0023     		movs	r3, #0
 442 00a0 19E0     		b	.L19
 443              	.L18:
 266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("need unchained pbuf", p->next == NULL);
 444              		.loc 1 267 3
ARM GAS  /tmp/cc6RPj0P.s 			page 14


 445 00a2 3B69     		ldr	r3, [r7, #16]
 446 00a4 1B68     		ldr	r3, [r3]
 447 00a6 002B     		cmp	r3, #0
 448 00a8 06D0     		beq	.L20
 449              		.loc 1 267 3 is_stmt 0 discriminator 1
 450 00aa 0D4B     		ldr	r3, .L21
 451 00ac 40F20B12 		movw	r2, #267
 452 00b0 0F49     		ldr	r1, .L21+16
 453 00b2 0D48     		ldr	r0, .L21+8
 454 00b4 FFF7FEFF 		bl	printf
 455              	.L20:
 268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *oversize = p->len - length;
 456              		.loc 1 268 16 is_stmt 1
 457 00b8 3B69     		ldr	r3, [r7, #16]
 458 00ba 5A89     		ldrh	r2, [r3, #10]
 459              		.loc 1 268 22
 460 00bc BB89     		ldrh	r3, [r7, #12]	@ movhi
 461 00be D31A     		subs	r3, r2, r3
 462 00c0 9AB2     		uxth	r2, r3
 463              		.loc 1 268 13
 464 00c2 7B68     		ldr	r3, [r7, #4]
 465 00c4 1A80     		strh	r2, [r3]	@ movhi
 269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* trim p->len to the currently used size */
 270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p->len = p->tot_len = length;
 466              		.loc 1 270 23
 467 00c6 3B69     		ldr	r3, [r7, #16]
 468 00c8 BA89     		ldrh	r2, [r7, #12]	@ movhi
 469 00ca 1A81     		strh	r2, [r3, #8]	@ movhi
 470              		.loc 1 270 13
 471 00cc 3B69     		ldr	r3, [r7, #16]
 472 00ce 1A89     		ldrh	r2, [r3, #8]
 473              		.loc 1 270 10
 474 00d0 3B69     		ldr	r3, [r7, #16]
 475 00d2 5A81     		strh	r2, [r3, #10]	@ movhi
 271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 476              		.loc 1 271 10
 477 00d4 3B69     		ldr	r3, [r7, #16]
 478              	.L19:
 272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 479              		.loc 1 272 1
 480 00d6 1846     		mov	r0, r3
 481 00d8 1837     		adds	r7, r7, #24
 482              	.LCFI13:
 483              		.cfi_def_cfa_offset 8
 484 00da BD46     		mov	sp, r7
 485              	.LCFI14:
 486              		.cfi_def_cfa_register 13
 487              		@ sp needed
 488 00dc 80BD     		pop	{r7, pc}
 489              	.L22:
 490 00de 00BF     		.align	2
 491              	.L21:
 492 00e0 00000000 		.word	.LC0
 493 00e4 B4000000 		.word	.LC5
 494 00e8 50000000 		.word	.LC2
 495 00ec D8000000 		.word	.LC6
 496 00f0 F8000000 		.word	.LC7
ARM GAS  /tmp/cc6RPj0P.s 			page 15


 497              		.cfi_endproc
 498              	.LFE135:
 500              		.section	.rodata
 501              		.align	2
 502              	.LC8:
 503 010c 7463705F 		.ascii	"tcp_write_checks: invalid pcb\000"
 503      77726974 
 503      655F6368 
 503      65636B73 
 503      3A20696E 
 504 012a 0000     		.align	2
 505              	.LC9:
 506 012c 7463705F 		.ascii	"tcp_write: pbufs on queue => at least one queue non"
 506      77726974 
 506      653A2070 
 506      62756673 
 506      206F6E20 
 507 015f 2D656D70 		.ascii	"-empty\000"
 507      747900
 508 0166 0000     		.align	2
 509              	.LC10:
 510 0168 7463705F 		.ascii	"tcp_write: no pbufs on queue => both queues empty\000"
 510      77726974 
 510      653A206E 
 510      6F207062 
 510      75667320 
 511              		.section	.text.tcp_write_checks,"ax",%progbits
 512              		.align	1
 513              		.syntax unified
 514              		.thumb
 515              		.thumb_func
 516              		.fpu fpv4-sp-d16
 518              	tcp_write_checks:
 519              	.LFB136:
 273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_OVERSIZE */
 274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #define tcp_pbuf_prealloc(layer, length, mx, os, pcb, api, fst) pbuf_alloc((layer), (length), PBUF_
 275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 278:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Add a checksum of newly added data to the segment.
 279:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_write and tcp_split_unsent_seg.
 281:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 282:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
 283:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_seg_add_chksum(u16_t chksum, u16_t len, u16_t *seg_chksum,
 284:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                    u8_t *seg_chksum_swapped)
 285:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 286:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t helper;
 287:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* add chksum to old chksum and fold to u16_t */
 288:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   helper = chksum + *seg_chksum;
 289:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   chksum = FOLD_U32T(helper);
 290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((len & 1) != 0) {
 291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *seg_chksum_swapped = 1 - *seg_chksum_swapped;
 292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     chksum = SWAP_BYTES_IN_WORD(chksum);
 293:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 294:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *seg_chksum = chksum;
 295:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
ARM GAS  /tmp/cc6RPj0P.s 			page 16


 296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 297:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Checks if tcp_write is allowed or not (checks state, snd_buf and snd_queuelen).
 299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 300:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp pcb to check for
 301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param len length of data to send (checked agains snd_buf)
 302:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if tcp_write is allowed to proceed, another err_t otherwise
 303:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 304:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
 305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_write_checks(struct tcp_pcb *pcb, u16_t len)
 306:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 520              		.loc 1 306 1
 521              		.cfi_startproc
 522              		@ args = 0, pretend = 0, frame = 8
 523              		@ frame_needed = 1, uses_anonymous_args = 0
 524 0000 80B5     		push	{r7, lr}
 525              	.LCFI15:
 526              		.cfi_def_cfa_offset 8
 527              		.cfi_offset 7, -8
 528              		.cfi_offset 14, -4
 529 0002 82B0     		sub	sp, sp, #8
 530              	.LCFI16:
 531              		.cfi_def_cfa_offset 16
 532 0004 00AF     		add	r7, sp, #0
 533              	.LCFI17:
 534              		.cfi_def_cfa_register 7
 535 0006 7860     		str	r0, [r7, #4]
 536 0008 0B46     		mov	r3, r1
 537 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_write_checks: invalid pcb", pcb != NULL);
 538              		.loc 1 307 3
 539 000c 7B68     		ldr	r3, [r7, #4]
 540 000e 002B     		cmp	r3, #0
 541 0010 06D1     		bne	.L24
 542              		.loc 1 307 3 is_stmt 0 discriminator 1
 543 0012 334B     		ldr	r3, .L34
 544 0014 40F23312 		movw	r2, #307
 545 0018 3249     		ldr	r1, .L34+4
 546 001a 3348     		ldr	r0, .L34+8
 547 001c FFF7FEFF 		bl	printf
 548              	.L24:
 308:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 309:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* connection is in invalid state for data transmission? */
 310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->state != ESTABLISHED) &&
 549              		.loc 1 310 11 is_stmt 1
 550 0020 7B68     		ldr	r3, [r7, #4]
 551 0022 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 552              		.loc 1 310 6
 553 0024 042B     		cmp	r3, #4
 554 0026 0ED0     		beq	.L25
 311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != CLOSE_WAIT) &&
 555              		.loc 1 311 11 discriminator 1
 556 0028 7B68     		ldr	r3, [r7, #4]
 557 002a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != CLOSE_WAIT) &&
 558              		.loc 1 310 35 discriminator 1
 559 002c 072B     		cmp	r3, #7
ARM GAS  /tmp/cc6RPj0P.s 			page 17


 560 002e 0AD0     		beq	.L25
 312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_SENT) &&
 561              		.loc 1 312 11
 562 0030 7B68     		ldr	r3, [r7, #4]
 563 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != CLOSE_WAIT) &&
 564              		.loc 1 311 34
 565 0034 022B     		cmp	r3, #2
 566 0036 06D0     		beq	.L25
 313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_RCVD)) {
 567              		.loc 1 313 11
 568 0038 7B68     		ldr	r3, [r7, #4]
 569 003a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       (pcb->state != SYN_SENT) &&
 570              		.loc 1 312 32
 571 003c 032B     		cmp	r3, #3
 572 003e 02D0     		beq	.L25
 314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_STATE | LWIP_DBG_LEVEL_SEVERE, ("tcp_write() called in 
 315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_CONN;
 573              		.loc 1 315 12
 574 0040 6FF00A03 		mvn	r3, #10
 575 0044 48E0     		b	.L26
 576              	.L25:
 316:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (len == 0) {
 577              		.loc 1 316 13
 578 0046 7B88     		ldrh	r3, [r7, #2]
 579 0048 002B     		cmp	r3, #0
 580 004a 01D1     		bne	.L27
 317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 581              		.loc 1 317 12
 582 004c 0023     		movs	r3, #0
 583 004e 43E0     		b	.L26
 584              	.L27:
 318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 320:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* fail on too much data */
 321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len > pcb->snd_buf) {
 585              		.loc 1 321 16
 586 0050 7B68     		ldr	r3, [r7, #4]
 587 0052 B3F86430 		ldrh	r3, [r3, #100]
 588              		.loc 1 321 6
 589 0056 7A88     		ldrh	r2, [r7, #2]
 590 0058 9A42     		cmp	r2, r3
 591 005a 09D9     		bls	.L28
 322:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_write: too much data (len=%"U16_F" 
 323:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 len, pcb->snd_buf));
 324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 592              		.loc 1 324 5
 593 005c 7B68     		ldr	r3, [r7, #4]
 594 005e 5B8B     		ldrh	r3, [r3, #26]
 595 0060 43F08003 		orr	r3, r3, #128
 596 0064 9AB2     		uxth	r2, r3
 597 0066 7B68     		ldr	r3, [r7, #4]
 598 0068 5A83     		strh	r2, [r3, #26]	@ movhi
 325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 599              		.loc 1 325 12
 600 006a 4FF0FF33 		mov	r3, #-1
ARM GAS  /tmp/cc6RPj0P.s 			page 18


 601 006e 33E0     		b	.L26
 602              	.L28:
 326:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_write: queuelen: %"TCPWNDSIZE_F"\n", (tcpwnd_size_t)pcb->snd_qu
 329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 330:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If total number of pbufs on the unsent/unacked queues exceeds the
 331:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * configured maximum, return an error */
 332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* check for configured max queuelen and possible overflow */
 333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen >= LWIP_MIN(TCP_SND_QUEUELEN, (TCP_SNDQUEUELEN_OVERFLOW + 1))) {
 603              		.loc 1 333 10
 604 0070 7B68     		ldr	r3, [r7, #4]
 605 0072 B3F86630 		ldrh	r3, [r3, #102]
 606              		.loc 1 333 6
 607 0076 082B     		cmp	r3, #8
 608 0078 09D9     		bls	.L29
 334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SEVERE, ("tcp_write: too long queue %"U16_F" (max
 335:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->snd_queuelen, (u16_t)TCP_SND_QUEUELEN));
 336:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
 337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 609              		.loc 1 337 5
 610 007a 7B68     		ldr	r3, [r7, #4]
 611 007c 5B8B     		ldrh	r3, [r3, #26]
 612 007e 43F08003 		orr	r3, r3, #128
 613 0082 9AB2     		uxth	r2, r3
 614 0084 7B68     		ldr	r3, [r7, #4]
 615 0086 5A83     		strh	r2, [r3, #26]	@ movhi
 338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 616              		.loc 1 338 12
 617 0088 4FF0FF33 		mov	r3, #-1
 618 008c 24E0     		b	.L26
 619              	.L29:
 339:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 340:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 620              		.loc 1 340 10
 621 008e 7B68     		ldr	r3, [r7, #4]
 622 0090 B3F86630 		ldrh	r3, [r3, #102]
 623              		.loc 1 340 6
 624 0094 002B     		cmp	r3, #0
 625 0096 0FD0     		beq	.L30
 341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: pbufs on queue => at least one queue non-empty",
 626              		.loc 1 341 5
 627 0098 7B68     		ldr	r3, [r7, #4]
 628 009a 1B6F     		ldr	r3, [r3, #112]
 629 009c 002B     		cmp	r3, #0
 630 009e 1AD1     		bne	.L32
 631              		.loc 1 341 5 is_stmt 0 discriminator 1
 632 00a0 7B68     		ldr	r3, [r7, #4]
 633 00a2 DB6E     		ldr	r3, [r3, #108]
 634 00a4 002B     		cmp	r3, #0
 635 00a6 16D1     		bne	.L32
 636              		.loc 1 341 5 discriminator 2
 637 00a8 0D4B     		ldr	r3, .L34
 638 00aa 4FF4AB72 		mov	r2, #342
 639 00ae 0F49     		ldr	r1, .L34+12
 640 00b0 0D48     		ldr	r0, .L34+8
 641 00b2 FFF7FEFF 		bl	printf
ARM GAS  /tmp/cc6RPj0P.s 			page 19


 642 00b6 0EE0     		b	.L32
 643              	.L30:
 342:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: no pbufs on queue => both queues empty",
 644              		.loc 1 344 5 is_stmt 1
 645 00b8 7B68     		ldr	r3, [r7, #4]
 646 00ba 1B6F     		ldr	r3, [r3, #112]
 647 00bc 002B     		cmp	r3, #0
 648 00be 03D1     		bne	.L33
 649              		.loc 1 344 5 is_stmt 0 discriminator 2
 650 00c0 7B68     		ldr	r3, [r7, #4]
 651 00c2 DB6E     		ldr	r3, [r3, #108]
 652 00c4 002B     		cmp	r3, #0
 653 00c6 06D0     		beq	.L32
 654              	.L33:
 655              		.loc 1 344 5 discriminator 3
 656 00c8 054B     		ldr	r3, .L34
 657 00ca 40F25912 		movw	r2, #345
 658 00ce 0849     		ldr	r1, .L34+16
 659 00d0 0548     		ldr	r0, .L34+8
 660 00d2 FFF7FEFF 		bl	printf
 661              	.L32:
 345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked == NULL && pcb->unsent == NULL);
 346:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 347:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 662              		.loc 1 347 10 is_stmt 1
 663 00d6 0023     		movs	r3, #0
 664              	.L26:
 348:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 665              		.loc 1 348 1
 666 00d8 1846     		mov	r0, r3
 667 00da 0837     		adds	r7, r7, #8
 668              	.LCFI18:
 669              		.cfi_def_cfa_offset 8
 670 00dc BD46     		mov	sp, r7
 671              	.LCFI19:
 672              		.cfi_def_cfa_register 13
 673              		@ sp needed
 674 00de 80BD     		pop	{r7, pc}
 675              	.L35:
 676              		.align	2
 677              	.L34:
 678 00e0 00000000 		.word	.LC0
 679 00e4 0C010000 		.word	.LC8
 680 00e8 50000000 		.word	.LC2
 681 00ec 2C010000 		.word	.LC9
 682 00f0 68010000 		.word	.LC10
 683              		.cfi_endproc
 684              	.LFE136:
 686              		.section	.rodata
 687 019a 0000     		.align	2
 688              	.LC11:
 689 019c 7463705F 		.ascii	"tcp_write: invalid pcb\000"
 689      77726974 
 689      653A2069 
 689      6E76616C 
ARM GAS  /tmp/cc6RPj0P.s 			page 20


 689      69642070 
 690 01b3 00       		.align	2
 691              	.LC12:
 692 01b4 7463705F 		.ascii	"tcp_write: arg == NULL (programmer violates API)\000"
 692      77726974 
 692      653A2061 
 692      7267203D 
 692      3D204E55 
 693 01e5 000000   		.align	2
 694              	.LC13:
 695 01e8 6D73735F 		.ascii	"mss_local is too small\000"
 695      6C6F6361 
 695      6C206973 
 695      20746F6F 
 695      20736D61 
 696 01ff 00       		.align	2
 697              	.LC14:
 698 0200 696E636F 		.ascii	"inconsistent oversize vs. space\000"
 698      6E736973 
 698      74656E74 
 698      206F7665 
 698      7273697A 
 699              		.align	2
 700              	.LC15:
 701 0220 696E636F 		.ascii	"inconsistent oversize vs. len\000"
 701      6E736973 
 701      74656E74 
 701      206F7665 
 701      7273697A 
 702 023e 0000     		.align	2
 703              	.LC16:
 704 0240 7463705F 		.ascii	"tcp_write: ROM pbufs cannot be oversized\000"
 704      77726974 
 704      653A2052 
 704      4F4D2070 
 704      62756673 
 705 0269 000000   		.align	2
 706              	.LC17:
 707 026c 756E7365 		.ascii	"unsent_oversize mismatch (pcb->unsent is NULL)\000"
 707      6E745F6F 
 707      76657273 
 707      697A6520 
 707      6D69736D 
 708 029b 00       		.align	2
 709              	.LC18:
 710 029c 7463705F 		.ascii	"tcp_write: check that first pbuf can hold the compl"
 710      77726974 
 710      653A2063 
 710      6865636B 
 710      20746861 
 711 02cf 65746520 		.ascii	"ete seglen\000"
 711      7365676C 
 711      656E00
 712 02da 0000     		.align	2
 713              	.LC19:
 714 02dc 6F766572 		.ascii	"oversize == 0\000"
 714      73697A65 
ARM GAS  /tmp/cc6RPj0P.s 			page 21


 714      203D3D20 
 714      3000
 715 02ea 0000     		.align	2
 716              	.LC20:
 717 02ec 70726576 		.ascii	"prev_seg != NULL\000"
 717      5F736567 
 717      20213D20 
 717      4E554C4C 
 717      00
 718 02fd 000000   		.align	2
 719              	.LC21:
 720 0300 7463705F 		.ascii	"tcp_write: cannot concatenate when pcb->unsent is e"
 720      77726974 
 720      653A2063 
 720      616E6E6F 
 720      7420636F 
 721 0333 6D707479 		.ascii	"mpty\000"
 721      00
 722              		.align	2
 723              	.LC22:
 724 0338 7463705F 		.ascii	"tcp_write: extension of reference requires referenc"
 724      77726974 
 724      653A2065 
 724      7874656E 
 724      73696F6E 
 725 036b 6500     		.ascii	"e\000"
 726 036d 000000   		.align	2
 727              	.LC23:
 728 0370 7463705F 		.ascii	"tcp_write: valid queue length\000"
 728      77726974 
 728      653A2076 
 728      616C6964 
 728      20717565 
 729              		.section	.text.tcp_write,"ax",%progbits
 730              		.align	1
 731              		.global	tcp_write
 732              		.syntax unified
 733              		.thumb
 734              		.thumb_func
 735              		.fpu fpv4-sp-d16
 737              	tcp_write:
 738              	.LFB137:
 349:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 350:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 351:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @ingroup tcp_raw
 352:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Write data for sending (but does not send it immediately).
 353:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 354:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * It waits in the expectation of more data being sent soon (as
 355:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * it can send them more efficiently by combining them together).
 356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * To prompt the system to send data now, call tcp_output() after
 357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * calling tcp_write().
 358:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * 
 359:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This function enqueues the data pointed to by the argument dataptr. The length of
 360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the data is passed as the len parameter. The apiflags can be one or more of:
 361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_COPY: indicates whether the new memory should be allocated
 362:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   for the data to be copied into. If this flag is not given, no new memory
 363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   should be allocated and the data should only be referenced by pointer. This
ARM GAS  /tmp/cc6RPj0P.s 			page 22


 364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   also means that the memory behind dataptr must not change until the data is
 365:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   ACKed by the remote host
 366:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_MORE: indicates that more data follows. If this is omitted,
 367:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   the PSH flag is set in the last segment created by this call to tcp_write.
 368:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *   If this flag is given, the PSH flag is not set.
 369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The tcp_write() function will fail and return ERR_MEM if the length
 371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * of the data exceeds the current send buffer size or if the length of
 372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the queue of outgoing segment is larger than the upper limit defined
 373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * in lwipopts.h. The number of bytes available in the output queue can
 374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * be retrieved with the tcp_sndbuf() function.
 375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 376:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The proper way to use this function is to call the function with at
 377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * most tcp_sndbuf() bytes of data. If the function returns ERR_MEM,
 378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the application should wait until some of the currently enqueued
 379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * data has been successfully received by the other host and try again.
 380:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to enqueue data for.
 382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param arg Pointer to the data to be enqueued for sending.
 383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param len Data length in bytes
 384:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param apiflags combination of following flags :
 385:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_COPY (0x01) data will be copied into memory belonging to the stack
 386:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * - TCP_WRITE_FLAG_MORE (0x02) for TCP connection, PSH flag will not be set on last segment sent,
 387:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if enqueued, another err_t on error
 388:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 390:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_write(struct tcp_pcb *pcb, const void *arg, u16_t len, u8_t apiflags)
 391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 739              		.loc 1 391 1
 740              		.cfi_startproc
 741              		@ args = 0, pretend = 0, frame = 88
 742              		@ frame_needed = 1, uses_anonymous_args = 0
 743 0000 90B5     		push	{r4, r7, lr}
 744              	.LCFI20:
 745              		.cfi_def_cfa_offset 12
 746              		.cfi_offset 4, -12
 747              		.cfi_offset 7, -8
 748              		.cfi_offset 14, -4
 749 0002 9BB0     		sub	sp, sp, #108
 750              	.LCFI21:
 751              		.cfi_def_cfa_offset 120
 752 0004 04AF     		add	r7, sp, #16
 753              	.LCFI22:
 754              		.cfi_def_cfa 7, 104
 755 0006 F860     		str	r0, [r7, #12]
 756 0008 B960     		str	r1, [r7, #8]
 757 000a 1146     		mov	r1, r2
 758 000c 1A46     		mov	r2, r3
 759 000e 0B46     		mov	r3, r1	@ movhi
 760 0010 FB80     		strh	r3, [r7, #6]	@ movhi
 761 0012 1346     		mov	r3, r2
 762 0014 7B71     		strb	r3, [r7, #5]
 392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *concat_p = NULL;
 763              		.loc 1 392 16
 764 0016 0023     		movs	r3, #0
 765 0018 7B65     		str	r3, [r7, #84]
 393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *last_unsent = NULL, *seg = NULL, *prev_seg = NULL, *queue = NULL;
ARM GAS  /tmp/cc6RPj0P.s 			page 23


 766              		.loc 1 393 19
 767 001a 0023     		movs	r3, #0
 768 001c 3B65     		str	r3, [r7, #80]
 769              		.loc 1 393 40
 770 001e 0023     		movs	r3, #0
 771 0020 FB64     		str	r3, [r7, #76]
 772              		.loc 1 393 53
 773 0022 0023     		movs	r3, #0
 774 0024 BB64     		str	r3, [r7, #72]
 775              		.loc 1 393 71
 776 0026 0023     		movs	r3, #0
 777 0028 7B64     		str	r3, [r7, #68]
 394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t pos = 0; /* position in 'arg' data */
 778              		.loc 1 394 9
 779 002a 0023     		movs	r3, #0
 780 002c A7F84230 		strh	r3, [r7, #66]	@ movhi
 395:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t queuelen;
 396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
 397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags = 0;
 781              		.loc 1 397 8
 782 0030 0023     		movs	r3, #0
 783 0032 87F82730 		strb	r3, [r7, #39]
 398:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize = 0;
 784              		.loc 1 399 9
 785 0036 0023     		movs	r3, #0
 786 0038 7B82     		strh	r3, [r7, #18]	@ movhi
 400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_used = 0;
 787              		.loc 1 400 9
 788 003a 0023     		movs	r3, #0
 789 003c FB87     		strh	r3, [r7, #62]	@ movhi
 401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 402:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t oversize_add = 0;
 403:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK*/
 404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t extendlen = 0;
 790              		.loc 1 405 9
 791 003e 0023     		movs	r3, #0
 792 0040 BB87     		strh	r3, [r7, #60]	@ movhi
 406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 407:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t concat_chksum = 0;
 408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t concat_chksum_swapped = 0;
 409:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t concat_chksummed = 0;
 410:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
 412:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t mss_local;
 413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ERROR("tcp_write: invalid pcb", pcb != NULL, return ERR_ARG);
 793              		.loc 1 414 3
 794 0042 FB68     		ldr	r3, [r7, #12]
 795 0044 002B     		cmp	r3, #0
 796 0046 09D1     		bne	.L37
 797              		.loc 1 414 3 is_stmt 0 discriminator 1
 798 0048 A44B     		ldr	r3, .L99
 799 004a 4FF4CF72 		mov	r2, #414
 800 004e A449     		ldr	r1, .L99+4
 801 0050 A448     		ldr	r0, .L99+8
ARM GAS  /tmp/cc6RPj0P.s 			page 24


 802 0052 FFF7FEFF 		bl	printf
 803 0056 6FF00F03 		mvn	r3, #15
 804 005a 2AE3     		b	.L93
 805              	.L37:
 415:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 416:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* don't allocate segments bigger than half the maximum window we ever received */
 417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = LWIP_MIN(pcb->mss, TCPWND_MIN16(pcb->snd_wnd_max / 2));
 806              		.loc 1 417 15 is_stmt 1
 807 005c FB68     		ldr	r3, [r7, #12]
 808 005e B3F86230 		ldrh	r3, [r3, #98]
 809 0062 5B08     		lsrs	r3, r3, #1
 810 0064 9AB2     		uxth	r2, r3
 811 0066 FB68     		ldr	r3, [r7, #12]
 812 0068 5B8E     		ldrh	r3, [r3, #50]
 813              		.loc 1 417 13
 814 006a 9342     		cmp	r3, r2
 815 006c 28BF     		it	cs
 816 006e 1346     		movcs	r3, r2
 817 0070 BB84     		strh	r3, [r7, #36]	@ movhi
 418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   mss_local = mss_local ? mss_local : pcb->mss;
 818              		.loc 1 418 13
 819 0072 BB8C     		ldrh	r3, [r7, #36]
 820 0074 002B     		cmp	r3, #0
 821 0076 02D1     		bne	.L39
 822              		.loc 1 418 13 is_stmt 0 discriminator 1
 823 0078 FB68     		ldr	r3, [r7, #12]
 824 007a 5B8E     		ldrh	r3, [r3, #50]
 825 007c 00E0     		b	.L40
 826              	.L39:
 827              		.loc 1 418 13 discriminator 2
 828 007e BB8C     		ldrh	r3, [r7, #36]
 829              	.L40:
 830              		.loc 1 418 13 discriminator 4
 831 0080 BB84     		strh	r3, [r7, #36]	@ movhi
 419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT_CORE_LOCKED();
 421:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 422:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_NETIF_TX_SINGLE_PBUF
 423:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Always copy to try to create single pbufs for TX */
 424:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   apiflags |= TCP_WRITE_FLAG_COPY;
 425:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_NETIF_TX_SINGLE_PBUF */
 426:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 427:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_write(pcb=%p, data=%p, len=%"U16_F", apiflags=%"U16_F")\n",
 428:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  (void *)pcb, arg, len, (u16_t)apiflags));
 429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ERROR("tcp_write: arg == NULL (programmer violates API)",
 832              		.loc 1 429 3 is_stmt 1 discriminator 4
 833 0082 BB68     		ldr	r3, [r7, #8]
 834 0084 002B     		cmp	r3, #0
 835 0086 09D1     		bne	.L41
 836              		.loc 1 429 3 is_stmt 0 discriminator 1
 837 0088 944B     		ldr	r3, .L99
 838 008a 4FF4D772 		mov	r2, #430
 839 008e 9649     		ldr	r1, .L99+12
 840 0090 9448     		ldr	r0, .L99+8
 841 0092 FFF7FEFF 		bl	printf
 842 0096 6FF00F03 		mvn	r3, #15
 843 009a 0AE3     		b	.L93
ARM GAS  /tmp/cc6RPj0P.s 			page 25


 844              	.L41:
 430:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****              arg != NULL, return ERR_ARG;);
 431:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_write_checks(pcb, len);
 845              		.loc 1 432 9 is_stmt 1
 846 009c FB88     		ldrh	r3, [r7, #6]
 847 009e 1946     		mov	r1, r3
 848 00a0 F868     		ldr	r0, [r7, #12]
 849 00a2 FFF7FEFF 		bl	tcp_write_checks
 850 00a6 0346     		mov	r3, r0
 851 00a8 87F82330 		strb	r3, [r7, #35]
 433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 852              		.loc 1 433 6
 853 00ac 97F92330 		ldrsb	r3, [r7, #35]
 854 00b0 002B     		cmp	r3, #0
 855 00b2 02D0     		beq	.L42
 434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return err;
 856              		.loc 1 434 12
 857 00b4 97F92330 		ldrsb	r3, [r7, #35]
 858 00b8 FBE2     		b	.L93
 859              	.L42:
 435:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   queuelen = pcb->snd_queuelen;
 860              		.loc 1 436 12
 861 00ba FB68     		ldr	r3, [r7, #12]
 862 00bc B3F86630 		ldrh	r3, [r3, #102]	@ movhi
 863 00c0 A7F84030 		strh	r3, [r7, #64]	@ movhi
 437:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 438:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
 439:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->flags & TF_TIMESTAMP)) {
 440:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Make sure the timestamp option is only included in data segments if we
 441:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        agreed about it with the remote host. */
 442:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_TS;
 443:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(TF_SEG_OPTS_TS, pcb);
 444:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* ensure that segments can hold at least one data byte... */
 445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss_local = LWIP_MAX(mss_local, LWIP_TCP_OPT_LEN_TS + 1);
 446:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else
 447:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS */
 448:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   {
 449:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
 864              		.loc 1 449 12
 865 00c4 0023     		movs	r3, #0
 866 00c6 87F82230 		strb	r3, [r7, #34]
 450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 452:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 453:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * TCP segmentation is done in three phases with increasing complexity:
 455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 1. Copy data directly into an oversized pbuf.
 457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 2. Chain a new pbuf to the end of pcb->unsent.
 458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * 3. Create new segments.
 459:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 460:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * We may run out of memory at any point. In that case we must
 461:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * return ERR_MEM and not change anything in pcb. Therefore, all
 462:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * changes are recorded in local variables and committed at the end
 463:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * of the function. Some pcb fields are maintained in local copies:
ARM GAS  /tmp/cc6RPj0P.s 			page 26


 464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * queuelen = pcb->snd_queuelen
 466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * oversize = pcb->unsent_oversize
 467:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * These variables are set consistently by the phases:
 469:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 470:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * seg points to the last segment tampered with.
 471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * pos records progress as data is segmented.
 473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Find the tail of the unsent queue. */
 476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent != NULL) {
 867              		.loc 1 476 10
 868 00ca FB68     		ldr	r3, [r7, #12]
 869 00cc DB6E     		ldr	r3, [r3, #108]
 870              		.loc 1 476 6
 871 00ce 002B     		cmp	r3, #0
 872 00d0 00F0F680 		beq	.L43
 873              	.LBB2:
 477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t space;
 478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t unsent_optlen;
 479:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 480:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* @todo: this could be sped up by keeping last_unsent in the pcb */
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (last_unsent = pcb->unsent; last_unsent->next != NULL;
 874              		.loc 1 481 22
 875 00d4 FB68     		ldr	r3, [r7, #12]
 876 00d6 DB6E     		ldr	r3, [r3, #108]
 877 00d8 3B65     		str	r3, [r7, #80]
 878              		.loc 1 481 5
 879 00da 02E0     		b	.L44
 880              	.L45:
 482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 881              		.loc 1 482 22
 882 00dc 3B6D     		ldr	r3, [r7, #80]
 883 00de 1B68     		ldr	r3, [r3]
 884 00e0 3B65     		str	r3, [r7, #80]
 885              	.L44:
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 886              		.loc 1 481 48 discriminator 1
 887 00e2 3B6D     		ldr	r3, [r7, #80]
 888 00e4 1B68     		ldr	r3, [r3]
 481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 889              		.loc 1 481 5 discriminator 1
 890 00e6 002B     		cmp	r3, #0
 891 00e8 F8D1     		bne	.L45
 483:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 484:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Usable space at the end of the last unsent segment */
 485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     unsent_optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(last_unsent->flags, pcb);
 892              		.loc 1 485 21
 893 00ea 3B6D     		ldr	r3, [r7, #80]
 894 00ec 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 895 00ee 9B00     		lsls	r3, r3, #2
 896 00f0 9BB2     		uxth	r3, r3
 897              		.loc 1 485 19
 898 00f2 03F00403 		and	r3, r3, #4
 899 00f6 3B84     		strh	r3, [r7, #32]	@ movhi
ARM GAS  /tmp/cc6RPj0P.s 			page 27


 486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("mss_local is too small", mss_local >= last_unsent->len + unsent_optlen);
 900              		.loc 1 486 5
 901 00f8 BA8C     		ldrh	r2, [r7, #36]
 902 00fa 3B6D     		ldr	r3, [r7, #80]
 903 00fc 1B89     		ldrh	r3, [r3, #8]
 904 00fe 1946     		mov	r1, r3
 905 0100 3B8C     		ldrh	r3, [r7, #32]
 906 0102 0B44     		add	r3, r3, r1
 907 0104 9A42     		cmp	r2, r3
 908 0106 06DA     		bge	.L46
 909              		.loc 1 486 5 is_stmt 0 discriminator 1
 910 0108 744B     		ldr	r3, .L99
 911 010a 4FF4F372 		mov	r2, #486
 912 010e 7749     		ldr	r1, .L99+16
 913 0110 7448     		ldr	r0, .L99+8
 914 0112 FFF7FEFF 		bl	printf
 915              	.L46:
 487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     space = mss_local - (last_unsent->len + unsent_optlen);
 916              		.loc 1 487 37 is_stmt 1
 917 0116 3B6D     		ldr	r3, [r7, #80]
 918 0118 1A89     		ldrh	r2, [r3, #8]
 919              		.loc 1 487 43
 920 011a 3B8C     		ldrh	r3, [r7, #32]	@ movhi
 921 011c 1344     		add	r3, r3, r2
 922 011e 9BB2     		uxth	r3, r3
 923              		.loc 1 487 11
 924 0120 BA8C     		ldrh	r2, [r7, #36]	@ movhi
 925 0122 D31A     		subs	r3, r2, r3
 926 0124 7B87     		strh	r3, [r7, #58]	@ movhi
 488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 489:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*
 490:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Phase 1: Copy data directly into an oversized pbuf.
 491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 492:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * The number of bytes copied is recorded in the oversize_used
 493:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * variable. The actual copying is done at the bottom of the
 494:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * function.
 495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 498:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* check that pcb->unsent_oversize matches last_unsent->oversize_left */
 499:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("unsent_oversize mismatch (pcb vs. last_unsent)",
 500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == last_unsent->oversize_left);
 501:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     oversize = pcb->unsent_oversize;
 927              		.loc 1 502 19
 928 0126 FB68     		ldr	r3, [r7, #12]
 929 0128 B3F86830 		ldrh	r3, [r3, #104]
 930              		.loc 1 502 14
 931 012c 7B82     		strh	r3, [r7, #18]	@ movhi
 503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (oversize > 0) {
 932              		.loc 1 503 18
 933 012e 7B8A     		ldrh	r3, [r7, #18]
 934              		.loc 1 503 8
 935 0130 002B     		cmp	r3, #0
 936 0132 26D0     		beq	.L47
 504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("inconsistent oversize vs. space", oversize <= space);
 937              		.loc 1 504 7
ARM GAS  /tmp/cc6RPj0P.s 			page 28


 938 0134 7B8A     		ldrh	r3, [r7, #18]
 939 0136 7A8F     		ldrh	r2, [r7, #58]
 940 0138 9A42     		cmp	r2, r3
 941 013a 06D2     		bcs	.L48
 942              		.loc 1 504 7 is_stmt 0 discriminator 1
 943 013c 674B     		ldr	r3, .L99
 944 013e 4FF4FC72 		mov	r2, #504
 945 0142 6B49     		ldr	r1, .L99+20
 946 0144 6748     		ldr	r0, .L99+8
 947 0146 FFF7FEFF 		bl	printf
 948              	.L48:
 505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 949              		.loc 1 505 11 is_stmt 1
 950 014a 3B6D     		ldr	r3, [r7, #80]
 951 014c FB64     		str	r3, [r7, #76]
 506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize_used = LWIP_MIN(space, LWIP_MIN(oversize, len));
 952              		.loc 1 506 23
 953 014e 7B8A     		ldrh	r3, [r7, #18]
 954 0150 FA88     		ldrh	r2, [r7, #6]
 955 0152 9342     		cmp	r3, r2
 956 0154 28BF     		it	cs
 957 0156 1346     		movcs	r3, r2
 958 0158 9BB2     		uxth	r3, r3
 959              		.loc 1 506 21
 960 015a 7A8F     		ldrh	r2, [r7, #58]
 961 015c 9342     		cmp	r3, r2
 962 015e 28BF     		it	cs
 963 0160 1346     		movcs	r3, r2
 964 0162 FB87     		strh	r3, [r7, #62]	@ movhi
 507:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += oversize_used;
 965              		.loc 1 507 11
 966 0164 B7F84220 		ldrh	r2, [r7, #66]	@ movhi
 967 0168 FB8F     		ldrh	r3, [r7, #62]	@ movhi
 968 016a 1344     		add	r3, r3, r2
 969 016c A7F84230 		strh	r3, [r7, #66]	@ movhi
 508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       oversize -= oversize_used;
 970              		.loc 1 508 16
 971 0170 7A8A     		ldrh	r2, [r7, #18]
 972 0172 FB8F     		ldrh	r3, [r7, #62]	@ movhi
 973 0174 D31A     		subs	r3, r2, r3
 974 0176 9BB2     		uxth	r3, r3
 975 0178 7B82     		strh	r3, [r7, #18]	@ movhi
 509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       space -= oversize_used;
 976              		.loc 1 509 13
 977 017a 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 978 017c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 979 017e D31A     		subs	r3, r2, r3
 980 0180 7B87     		strh	r3, [r7, #58]	@ movhi
 981              	.L47:
 510:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 511:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* now we are either finished or oversize is zero */
 512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("inconsistent oversize vs. len", (oversize == 0) || (pos == len));
 982              		.loc 1 512 5
 983 0182 7B8A     		ldrh	r3, [r7, #18]
 984 0184 002B     		cmp	r3, #0
 985 0186 0BD0     		beq	.L49
 986              		.loc 1 512 5 is_stmt 0 discriminator 1
ARM GAS  /tmp/cc6RPj0P.s 			page 29


 987 0188 B7F84220 		ldrh	r2, [r7, #66]
 988 018c FB88     		ldrh	r3, [r7, #6]
 989 018e 9A42     		cmp	r2, r3
 990 0190 06D0     		beq	.L49
 991              		.loc 1 512 5 discriminator 2
 992 0192 524B     		ldr	r3, .L99
 993 0194 4FF40072 		mov	r2, #512
 994 0198 5649     		ldr	r1, .L99+24
 995 019a 5248     		ldr	r0, .L99+8
 996 019c FFF7FEFF 		bl	printf
 997              	.L49:
 513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 514:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 515:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if !LWIP_NETIF_TX_SINGLE_PBUF
 516:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*
 517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Phase 2: Chain a new pbuf to the end of pcb->unsent.
 518:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 519:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * As an exception when NOT copying the data, if the given data buffer
 520:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * directly follows the last unsent data buffer in memory, extend the last
 521:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * ROM pbuf reference to the buffer, thus saving a ROM pbuf allocation.
 522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * We don't extend segments containing SYN/FIN flags or options
 524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * (len==0). The new pbuf is kept in concat_p and pbuf_cat'ed at
 525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * the end.
 526:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *
 527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * This phase is skipped for LWIP_NETIF_TX_SINGLE_PBUF as we could only execute
 528:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * it after rexmit puts a segment from unacked to unsent and at this point,
 529:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * oversize info is lost.
 530:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
 531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pos < len) && (space > 0) && (last_unsent->len > 0)) {
 998              		.loc 1 531 8 is_stmt 1
 999 01a0 B7F84220 		ldrh	r2, [r7, #66]
 1000 01a4 FB88     		ldrh	r3, [r7, #6]
 1001 01a6 9A42     		cmp	r2, r3
 1002 01a8 80F06781 		bcs	.L61
 1003              		.loc 1 531 21 discriminator 1
 1004 01ac 7B8F     		ldrh	r3, [r7, #58]
 1005 01ae 002B     		cmp	r3, #0
 1006 01b0 00F06381 		beq	.L61
 1007              		.loc 1 531 51 discriminator 2
 1008 01b4 3B6D     		ldr	r3, [r7, #80]
 1009 01b6 1B89     		ldrh	r3, [r3, #8]
 1010              		.loc 1 531 36 discriminator 2
 1011 01b8 002B     		cmp	r3, #0
 1012 01ba 00F05E81 		beq	.L61
 1013              	.LBB3:
 532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       u16_t seglen = LWIP_MIN(space, len - pos);
 1014              		.loc 1 532 22
 1015 01be FA88     		ldrh	r2, [r7, #6]
 1016 01c0 B7F84230 		ldrh	r3, [r7, #66]
 1017 01c4 D21A     		subs	r2, r2, r3
 1018 01c6 7B8F     		ldrh	r3, [r7, #58]
 1019 01c8 9342     		cmp	r3, r2
 1020 01ca A8BF     		it	ge
 1021 01cc 1346     		movge	r3, r2
 1022              		.loc 1 532 13
 1023 01ce FB83     		strh	r3, [r7, #30]	@ movhi
ARM GAS  /tmp/cc6RPj0P.s 			page 30


 533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg = last_unsent;
 1024              		.loc 1 533 11
 1025 01d0 3B6D     		ldr	r3, [r7, #80]
 1026 01d2 FB64     		str	r3, [r7, #76]
 534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Create a pbuf with a copy or reference to seglen bytes. We
 536:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * can use PBUF_RAW here since the data appears in the middle of
 537:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * a segment. A header will never be prepended. */
 538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (apiflags & TCP_WRITE_FLAG_COPY) {
 1027              		.loc 1 538 20
 1028 01d4 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1029 01d6 03F00103 		and	r3, r3, #1
 1030              		.loc 1 538 10
 1031 01da 002B     		cmp	r3, #0
 1032 01dc 27D0     		beq	.L51
 539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is copied */
 540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if ((concat_p = tcp_pbuf_prealloc(PBUF_RAW, seglen, space, &oversize, pcb, apiflags, 1)) ==
 1033              		.loc 1 540 25
 1034 01de 07F11200 		add	r0, r7, #18
 1035 01e2 7A8F     		ldrh	r2, [r7, #58]
 1036 01e4 F98B     		ldrh	r1, [r7, #30]
 1037 01e6 0123     		movs	r3, #1
 1038 01e8 0293     		str	r3, [sp, #8]
 1039 01ea 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1040 01ec 0193     		str	r3, [sp, #4]
 1041 01ee FB68     		ldr	r3, [r7, #12]
 1042 01f0 0093     		str	r3, [sp]
 1043 01f2 0346     		mov	r3, r0
 1044 01f4 0020     		movs	r0, #0
 1045 01f6 FFF7FEFF 		bl	tcp_pbuf_prealloc
 1046 01fa 7865     		str	r0, [r7, #84]
 1047              		.loc 1 540 12
 1048 01fc 7B6D     		ldr	r3, [r7, #84]
 1049 01fe 002B     		cmp	r3, #0
 1050 0200 00F02582 		beq	.L94
 541:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 542:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                       ("tcp_write : could not allocate memory for pbuf copy size %"U16_F"\n",
 543:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        seglen));
 544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           goto memerr;
 545:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 546:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 547:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         oversize_add = oversize;
 548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY2(concat_p->payload, (const u8_t *)arg + pos, seglen, &concat_chksum, &concat_
 1051              		.loc 1 549 9
 1052 0204 7B6D     		ldr	r3, [r7, #84]
 1053 0206 5868     		ldr	r0, [r3, #4]
 1054 0208 B7F84230 		ldrh	r3, [r7, #66]
 1055 020c BA68     		ldr	r2, [r7, #8]
 1056 020e 1344     		add	r3, r3, r2
 1057 0210 FA8B     		ldrh	r2, [r7, #30]
 1058 0212 1946     		mov	r1, r3
 1059 0214 FFF7FEFF 		bl	memcpy
 550:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 551:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_chksummed += seglen;
 552:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         queuelen += pbuf_clen(concat_p);
ARM GAS  /tmp/cc6RPj0P.s 			page 31


 1060              		.loc 1 553 21
 1061 0218 786D     		ldr	r0, [r7, #84]
 1062 021a FFF7FEFF 		bl	pbuf_clen
 1063 021e 0346     		mov	r3, r0
 1064 0220 1A46     		mov	r2, r3
 1065              		.loc 1 553 18
 1066 0222 B7F84030 		ldrh	r3, [r7, #64]	@ movhi
 1067 0226 1344     		add	r3, r3, r2
 1068 0228 A7F84030 		strh	r3, [r7, #64]	@ movhi
 1069 022c 41E0     		b	.L54
 1070              	.L51:
 1071              	.LBB4:
 554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
 555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* Data is not copied */
 556:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If the last unsent pbuf is of type PBUF_ROM, try to extend it. */
 557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         struct pbuf *p;
 558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         for (p = last_unsent->p; p->next != NULL; p = p->next);
 1072              		.loc 1 558 16
 1073 022e 3B6D     		ldr	r3, [r7, #80]
 1074 0230 5B68     		ldr	r3, [r3, #4]
 1075 0232 7B63     		str	r3, [r7, #52]
 1076              		.loc 1 558 9
 1077 0234 02E0     		b	.L55
 1078              	.L56:
 1079              		.loc 1 558 53 discriminator 3
 1080 0236 7B6B     		ldr	r3, [r7, #52]
 1081 0238 1B68     		ldr	r3, [r3]
 1082 023a 7B63     		str	r3, [r7, #52]
 1083              	.L55:
 1084              		.loc 1 558 35 discriminator 1
 1085 023c 7B6B     		ldr	r3, [r7, #52]
 1086 023e 1B68     		ldr	r3, [r3]
 1087              		.loc 1 558 9 discriminator 1
 1088 0240 002B     		cmp	r3, #0
 1089 0242 F8D1     		bne	.L56
 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (((p->type_internal & (PBUF_TYPE_FLAG_STRUCT_DATA_CONTIGUOUS | PBUF_TYPE_FLAG_DATA_VOLAT
 1090              		.loc 1 559 16
 1091 0244 7B6B     		ldr	r3, [r7, #52]
 1092 0246 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1093              		.loc 1 559 32
 1094 0248 03F0C003 		and	r3, r3, #192
 1095              		.loc 1 559 12
 1096 024c 002B     		cmp	r3, #0
 1097 024e 15D1     		bne	.L57
 560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             (const u8_t *)p->payload + p->len == (const u8_t *)arg) {
 1098              		.loc 1 560 28 discriminator 1
 1099 0250 7B6B     		ldr	r3, [r7, #52]
 1100 0252 5B68     		ldr	r3, [r3, #4]
 1101              		.loc 1 560 41 discriminator 1
 1102 0254 7A6B     		ldr	r2, [r7, #52]
 1103 0256 5289     		ldrh	r2, [r2, #10]
 1104              		.loc 1 560 38 discriminator 1
 1105 0258 1344     		add	r3, r3, r2
 559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (((p->type_internal & (PBUF_TYPE_FLAG_STRUCT_DATA_CONTIGUOUS | PBUF_TYPE_FLAG_DATA_VOLAT
 1106              		.loc 1 559 112 discriminator 1
 1107 025a BA68     		ldr	r2, [r7, #8]
 1108 025c 9A42     		cmp	r2, r3
ARM GAS  /tmp/cc6RPj0P.s 			page 32


 1109 025e 0DD1     		bne	.L57
 561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           LWIP_ASSERT("tcp_write: ROM pbufs cannot be oversized", pos == 0);
 1110              		.loc 1 561 11
 1111 0260 B7F84230 		ldrh	r3, [r7, #66]
 1112 0264 002B     		cmp	r3, #0
 1113 0266 06D0     		beq	.L58
 1114              		.loc 1 561 11 is_stmt 0 discriminator 1
 1115 0268 1C4B     		ldr	r3, .L99
 1116 026a 40F23122 		movw	r2, #561
 1117 026e 2249     		ldr	r1, .L99+28
 1118 0270 1C48     		ldr	r0, .L99+8
 1119 0272 FFF7FEFF 		bl	printf
 1120              	.L58:
 562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           extendlen = seglen;
 1121              		.loc 1 562 21 is_stmt 1
 1122 0276 FB8B     		ldrh	r3, [r7, #30]	@ movhi
 1123 0278 BB87     		strh	r3, [r7, #60]	@ movhi
 1124 027a 1AE0     		b	.L54
 1125              	.L57:
 563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
 564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           if ((concat_p = pbuf_alloc(PBUF_RAW, seglen, PBUF_ROM)) == NULL) {
 1126              		.loc 1 564 27
 1127 027c FB8B     		ldrh	r3, [r7, #30]
 1128 027e 0122     		movs	r2, #1
 1129 0280 1946     		mov	r1, r3
 1130 0282 0020     		movs	r0, #0
 1131 0284 FFF7FEFF 		bl	pbuf_alloc
 1132 0288 7865     		str	r0, [r7, #84]
 1133              		.loc 1 564 14
 1134 028a 7B6D     		ldr	r3, [r7, #84]
 1135 028c 002B     		cmp	r3, #0
 1136 028e 00F0E081 		beq	.L95
 565:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 566:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         ("tcp_write: could not allocate memory for zero-copy pbuf\n"));
 567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             goto memerr;
 568:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
 569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* reference the non-volatile payload data */
 570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           ((struct pbuf_rom *)concat_p)->payload = (const u8_t *)arg + pos;
 1137              		.loc 1 570 70
 1138 0292 B7F84230 		ldrh	r3, [r7, #66]
 1139 0296 BA68     		ldr	r2, [r7, #8]
 1140 0298 1A44     		add	r2, r2, r3
 1141              		.loc 1 570 50
 1142 029a 7B6D     		ldr	r3, [r7, #84]
 1143 029c 5A60     		str	r2, [r3, #4]
 571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           queuelen += pbuf_clen(concat_p);
 1144              		.loc 1 571 23
 1145 029e 786D     		ldr	r0, [r7, #84]
 1146 02a0 FFF7FEFF 		bl	pbuf_clen
 1147 02a4 0346     		mov	r3, r0
 1148 02a6 1A46     		mov	r2, r3
 1149              		.loc 1 571 20
 1150 02a8 B7F84030 		ldrh	r3, [r7, #64]	@ movhi
 1151 02ac 1344     		add	r3, r3, r2
 1152 02ae A7F84030 		strh	r3, [r7, #64]	@ movhi
 1153              	.L54:
 1154              	.LBE4:
ARM GAS  /tmp/cc6RPj0P.s 			page 33


 572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 573:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 574:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* calculate the checksum of nocopy-data */
 575:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         tcp_seg_add_chksum(~inet_chksum((const u8_t *)arg + pos, seglen), seglen,
 576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                            &concat_chksum, &concat_chksum_swapped);
 577:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         concat_chksummed += seglen;
 578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 579:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 580:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pos += seglen;
 1155              		.loc 1 581 11
 1156 02b2 B7F84220 		ldrh	r2, [r7, #66]	@ movhi
 1157 02b6 FB8B     		ldrh	r3, [r7, #30]	@ movhi
 1158 02b8 1344     		add	r3, r3, r2
 1159 02ba A7F84230 		strh	r3, [r7, #66]	@ movhi
 1160 02be DCE0     		b	.L61
 1161              	.L43:
 1162              	.LBE3:
 1163              	.LBE2:
 582:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 583:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* !LWIP_NETIF_TX_SINGLE_PBUF */
 584:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 585:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("unsent_oversize mismatch (pcb->unsent is NULL)",
 1164              		.loc 1 586 5
 1165 02c0 FB68     		ldr	r3, [r7, #12]
 1166 02c2 B3F86830 		ldrh	r3, [r3, #104]
 1167 02c6 002B     		cmp	r3, #0
 1168 02c8 00F0D780 		beq	.L61
 1169              		.loc 1 586 5 is_stmt 0 discriminator 1
 1170 02cc 034B     		ldr	r3, .L99
 1171 02ce 40F24B22 		movw	r2, #587
 1172 02d2 0A49     		ldr	r1, .L99+32
 1173 02d4 0348     		ldr	r0, .L99+8
 1174 02d6 FFF7FEFF 		bl	printf
 587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent_oversize == 0);
 588:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 590:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 591:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 592:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 3: Create new segments.
 593:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    *
 594:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * The new segments are chained together in the local 'queue'
 595:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * variable, ready to be appended to pcb->unsent.
 596:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (pos < len) {
 1175              		.loc 1 597 9 is_stmt 1 discriminator 1
 1176 02da CEE0     		b	.L61
 1177              	.L100:
 1178              		.align	2
 1179              	.L99:
 1180 02dc 00000000 		.word	.LC0
 1181 02e0 9C010000 		.word	.LC11
 1182 02e4 50000000 		.word	.LC2
 1183 02e8 B4010000 		.word	.LC12
 1184 02ec E8010000 		.word	.LC13
 1185 02f0 00020000 		.word	.LC14
ARM GAS  /tmp/cc6RPj0P.s 			page 34


 1186 02f4 20020000 		.word	.LC15
 1187 02f8 40020000 		.word	.LC16
 1188 02fc 6C020000 		.word	.LC17
 1189              	.L74:
 1190              	.LBB7:
 598:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t left = len - pos;
 1191              		.loc 1 599 11
 1192 0300 FA88     		ldrh	r2, [r7, #6]	@ movhi
 1193 0302 B7F84230 		ldrh	r3, [r7, #66]	@ movhi
 1194 0306 D31A     		subs	r3, r2, r3
 1195 0308 BB83     		strh	r3, [r7, #28]	@ movhi
 600:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t max_len = mss_local - optlen;
 1196              		.loc 1 600 31
 1197 030a 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 1198 030e 9BB2     		uxth	r3, r3
 1199              		.loc 1 600 11
 1200 0310 BA8C     		ldrh	r2, [r7, #36]	@ movhi
 1201 0312 D31A     		subs	r3, r2, r3
 1202 0314 7B83     		strh	r3, [r7, #26]	@ movhi
 601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t seglen = LWIP_MIN(left, max_len);
 1203              		.loc 1 601 11
 1204 0316 7A8B     		ldrh	r2, [r7, #26]
 1205 0318 BB8B     		ldrh	r3, [r7, #28]
 1206 031a 9342     		cmp	r3, r2
 1207 031c 28BF     		it	cs
 1208 031e 1346     		movcs	r3, r2
 1209 0320 3B83     		strh	r3, [r7, #24]	@ movhi
 602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 603:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t chksum = 0;
 604:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t chksum_swapped = 0;
 605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 606:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (apiflags & TCP_WRITE_FLAG_COPY) {
 1210              		.loc 1 607 18
 1211 0322 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1212 0324 03F00103 		and	r3, r3, #1
 1213              		.loc 1 607 8
 1214 0328 002B     		cmp	r3, #0
 1215 032a 36D0     		beq	.L62
 608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* If copy is set, memory should be allocated and data copied
 609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * into pbuf */
 610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p = tcp_pbuf_prealloc(PBUF_TRANSPORT, seglen + optlen, mss_local, &oversize, pcb, apifla
 1216              		.loc 1 610 16
 1217 032c 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 1218 0330 9AB2     		uxth	r2, r3
 1219 0332 3B8B     		ldrh	r3, [r7, #24]	@ movhi
 1220 0334 1344     		add	r3, r3, r2
 1221 0336 99B2     		uxth	r1, r3
 1222 0338 7B6C     		ldr	r3, [r7, #68]
 1223 033a 002B     		cmp	r3, #0
 1224 033c 0CBF     		ite	eq
 1225 033e 0123     		moveq	r3, #1
 1226 0340 0023     		movne	r3, #0
 1227 0342 DBB2     		uxtb	r3, r3
 1228 0344 07F11200 		add	r0, r7, #18
 1229 0348 BA8C     		ldrh	r2, [r7, #36]
ARM GAS  /tmp/cc6RPj0P.s 			page 35


 1230 034a 0293     		str	r3, [sp, #8]
 1231 034c 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1232 034e 0193     		str	r3, [sp, #4]
 1233 0350 FB68     		ldr	r3, [r7, #12]
 1234 0352 0093     		str	r3, [sp]
 1235 0354 0346     		mov	r3, r0
 1236 0356 3620     		movs	r0, #54
 1237 0358 FFF7FEFF 		bl	tcp_pbuf_prealloc
 1238 035c 3863     		str	r0, [r7, #48]
 1239              		.loc 1 610 10
 1240 035e 3B6B     		ldr	r3, [r7, #48]
 1241 0360 002B     		cmp	r3, #0
 1242 0362 00F07881 		beq	.L96
 611:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write : could not allocate mem
 612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("tcp_write: check that first pbuf can hold the complete seglen",
 1243              		.loc 1 614 7
 1244 0366 3B6B     		ldr	r3, [r7, #48]
 1245 0368 5B89     		ldrh	r3, [r3, #10]
 1246 036a 3A8B     		ldrh	r2, [r7, #24]
 1247 036c 9A42     		cmp	r2, r3
 1248 036e 06D9     		bls	.L64
 1249              		.loc 1 614 7 is_stmt 0 discriminator 1
 1250 0370 8C4B     		ldr	r3, .L101
 1251 0372 40F26722 		movw	r2, #615
 1252 0376 8C49     		ldr	r1, .L101+4
 1253 0378 8C48     		ldr	r0, .L101+8
 1254 037a FFF7FEFF 		bl	printf
 1255              	.L64:
 615:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   (p->len >= seglen));
 616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCP_DATA_COPY2((char *)p->payload + optlen, (const u8_t *)arg + pos, seglen, &chksum, &chksum
 1256              		.loc 1 616 7 is_stmt 1
 1257 037e 3B6B     		ldr	r3, [r7, #48]
 1258 0380 5A68     		ldr	r2, [r3, #4]
 1259 0382 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 1260 0386 D018     		adds	r0, r2, r3
 1261 0388 B7F84230 		ldrh	r3, [r7, #66]
 1262 038c BA68     		ldr	r2, [r7, #8]
 1263 038e 1344     		add	r3, r3, r2
 1264 0390 3A8B     		ldrh	r2, [r7, #24]
 1265 0392 1946     		mov	r1, r3
 1266 0394 FFF7FEFF 		bl	memcpy
 1267 0398 2FE0     		b	.L65
 1268              	.L62:
 1269              	.LBB8:
 617:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 618:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Copy is not set: First allocate a pbuf for holding the data.
 619:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * Since the referenced data is available at least until it is
 620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * sent out on the link (as it has to be ACKed by the remote
 621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * party) we can safely use PBUF_ROM instead of PBUF_REF here.
 622:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        */
 623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       struct pbuf *p2;
 624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("oversize == 0", oversize == 0);
 1270              		.loc 1 625 7
 1271 039a 7B8A     		ldrh	r3, [r7, #18]
ARM GAS  /tmp/cc6RPj0P.s 			page 36


 1272 039c 002B     		cmp	r3, #0
 1273 039e 06D0     		beq	.L66
 1274              		.loc 1 625 7 is_stmt 0 discriminator 1
 1275 03a0 804B     		ldr	r3, .L101
 1276 03a2 40F27122 		movw	r2, #625
 1277 03a6 8249     		ldr	r1, .L101+12
 1278 03a8 8048     		ldr	r0, .L101+8
 1279 03aa FFF7FEFF 		bl	printf
 1280              	.L66:
 626:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p2 = pbuf_alloc(PBUF_TRANSPORT, seglen, PBUF_ROM)) == NULL) {
 1281              		.loc 1 627 17 is_stmt 1
 1282 03ae 3B8B     		ldrh	r3, [r7, #24]
 1283 03b0 0122     		movs	r2, #1
 1284 03b2 1946     		mov	r1, r3
 1285 03b4 3620     		movs	r0, #54
 1286 03b6 FFF7FEFF 		bl	pbuf_alloc
 1287 03ba 7861     		str	r0, [r7, #20]
 1288              		.loc 1 627 10
 1289 03bc 7B69     		ldr	r3, [r7, #20]
 1290 03be 002B     		cmp	r3, #0
 1291 03c0 00F04B81 		beq	.L97
 628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 630:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 631:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* calculate the checksum of nocopy-data */
 633:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       chksum = ~inet_chksum((const u8_t *)arg + pos, seglen);
 634:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (seglen & 1) {
 635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         chksum_swapped = 1;
 636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         chksum = SWAP_BYTES_IN_WORD(chksum);
 637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 639:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* reference the non-volatile payload data */
 640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ((struct pbuf_rom *)p2)->payload = (const u8_t *)arg + pos;
 1292              		.loc 1 640 60
 1293 03c4 B7F84230 		ldrh	r3, [r7, #66]
 1294 03c8 BA68     		ldr	r2, [r7, #8]
 1295 03ca 1A44     		add	r2, r2, r3
 1296              		.loc 1 640 40
 1297 03cc 7B69     		ldr	r3, [r7, #20]
 1298 03ce 5A60     		str	r2, [r3, #4]
 641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Second, allocate a pbuf for the headers. */
 643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if ((p = pbuf_alloc(PBUF_TRANSPORT, optlen, PBUF_RAM)) == NULL) {
 1299              		.loc 1 643 16
 1300 03d0 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 1301 03d4 9BB2     		uxth	r3, r3
 1302 03d6 4FF42072 		mov	r2, #640
 1303 03da 1946     		mov	r1, r3
 1304 03dc 3620     		movs	r0, #54
 1305 03de FFF7FEFF 		bl	pbuf_alloc
 1306 03e2 3863     		str	r0, [r7, #48]
 1307              		.loc 1 643 10
 1308 03e4 3B6B     		ldr	r3, [r7, #48]
 1309 03e6 002B     		cmp	r3, #0
 1310 03e8 03D1     		bne	.L68
ARM GAS  /tmp/cc6RPj0P.s 			page 37


 644:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* If allocation fails, we have to deallocate the data pbuf as
 645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * well. */
 646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pbuf_free(p2);
 1311              		.loc 1 646 9
 1312 03ea 7869     		ldr	r0, [r7, #20]
 1313 03ec FFF7FEFF 		bl	pbuf_free
 647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: could not allocate memo
 648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         goto memerr;
 1314              		.loc 1 648 9
 1315 03f0 36E1     		b	.L53
 1316              	.L68:
 649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 650:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Concatenate the headers and data pbufs together. */
 651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pbuf_cat(p/*header*/, p2/*data*/);
 1317              		.loc 1 651 7
 1318 03f2 7969     		ldr	r1, [r7, #20]
 1319 03f4 386B     		ldr	r0, [r7, #48]
 1320 03f6 FFF7FEFF 		bl	pbuf_cat
 1321              	.L65:
 1322              	.LBE8:
 652:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     queuelen += pbuf_clen(p);
 1323              		.loc 1 654 17
 1324 03fa 386B     		ldr	r0, [r7, #48]
 1325 03fc FFF7FEFF 		bl	pbuf_clen
 1326 0400 0346     		mov	r3, r0
 1327 0402 1A46     		mov	r2, r3
 1328              		.loc 1 654 14
 1329 0404 B7F84030 		ldrh	r3, [r7, #64]	@ movhi
 1330 0408 1344     		add	r3, r3, r2
 1331 040a A7F84030 		strh	r3, [r7, #64]	@ movhi
 655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Now that there are more segments queued, we check again if the
 657:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * length of the queue exceeds the configured maximum or
 658:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * overflows. */
 659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (queuelen > LWIP_MIN(TCP_SND_QUEUELEN, TCP_SNDQUEUELEN_OVERFLOW)) {
 1332              		.loc 1 659 8
 1333 040e B7F84030 		ldrh	r3, [r7, #64]
 1334 0412 092B     		cmp	r3, #9
 1335 0414 03D9     		bls	.L69
 660:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_write: queue too long %"U16_F" (
 661:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   queuelen, (int)TCP_SND_QUEUELEN));
 662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pbuf_free(p);
 1336              		.loc 1 662 7
 1337 0416 386B     		ldr	r0, [r7, #48]
 1338 0418 FFF7FEFF 		bl	pbuf_free
 663:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 1339              		.loc 1 663 7
 1340 041c 20E1     		b	.L53
 1341              	.L69:
 664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 665:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((seg = tcp_create_segment(pcb, p, 0, pcb->snd_lbb + pos, optflags)) == NULL) {
 1342              		.loc 1 666 49
 1343 041e FB68     		ldr	r3, [r7, #12]
 1344 0420 DA6D     		ldr	r2, [r3, #92]
ARM GAS  /tmp/cc6RPj0P.s 			page 38


 1345              		.loc 1 666 16
 1346 0422 B7F84230 		ldrh	r3, [r7, #66]
 1347 0426 1A44     		add	r2, r2, r3
 1348 0428 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 1349 042c 0093     		str	r3, [sp]
 1350 042e 1346     		mov	r3, r2
 1351 0430 0022     		movs	r2, #0
 1352 0432 396B     		ldr	r1, [r7, #48]
 1353 0434 F868     		ldr	r0, [r7, #12]
 1354 0436 FFF7FEFF 		bl	tcp_create_segment
 1355 043a F864     		str	r0, [r7, #76]
 1356              		.loc 1 666 8
 1357 043c FB6C     		ldr	r3, [r7, #76]
 1358 043e 002B     		cmp	r3, #0
 1359 0440 00F00D81 		beq	.L98
 667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       goto memerr;
 668:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 670:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->oversize_left = oversize;
 671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 672:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum = chksum;
 674:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum_swapped = chksum_swapped;
 675:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->flags |= TF_SEG_DATA_CHECKSUMMED;
 676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 677:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 678:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* first segment of to-be-queued data? */
 679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (queue == NULL) {
 1360              		.loc 1 679 8
 1361 0444 7B6C     		ldr	r3, [r7, #68]
 1362 0446 002B     		cmp	r3, #0
 1363 0448 02D1     		bne	.L71
 680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       queue = seg;
 1364              		.loc 1 680 13
 1365 044a FB6C     		ldr	r3, [r7, #76]
 1366 044c 7B64     		str	r3, [r7, #68]
 1367 044e 0CE0     		b	.L72
 1368              	.L71:
 681:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
 682:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Attach the segment to the end of the queued segments */
 683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("prev_seg != NULL", prev_seg != NULL);
 1369              		.loc 1 683 7
 1370 0450 BB6C     		ldr	r3, [r7, #72]
 1371 0452 002B     		cmp	r3, #0
 1372 0454 06D1     		bne	.L73
 1373              		.loc 1 683 7 is_stmt 0 discriminator 1
 1374 0456 534B     		ldr	r3, .L101
 1375 0458 40F2AB22 		movw	r2, #683
 1376 045c 5549     		ldr	r1, .L101+16
 1377 045e 5348     		ldr	r0, .L101+8
 1378 0460 FFF7FEFF 		bl	printf
 1379              	.L73:
 684:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       prev_seg->next = seg;
 1380              		.loc 1 684 22 is_stmt 1
 1381 0464 BB6C     		ldr	r3, [r7, #72]
 1382 0466 FA6C     		ldr	r2, [r7, #76]
 1383 0468 1A60     		str	r2, [r3]
ARM GAS  /tmp/cc6RPj0P.s 			page 39


 1384              	.L72:
 685:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 686:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* remember last segment of to-be-queued data for next iteration */
 687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     prev_seg = seg;
 1385              		.loc 1 687 14
 1386 046a FB6C     		ldr	r3, [r7, #76]
 1387 046c BB64     		str	r3, [r7, #72]
 688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 689:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_TRACE, ("tcp_write: queueing %"U32_F":%"U32_F"\n",
 690:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 lwip_ntohl(seg->tcphdr->seqno),
 691:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg)));
 692:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 693:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pos += seglen;
 1388              		.loc 1 693 9
 1389 046e B7F84220 		ldrh	r2, [r7, #66]	@ movhi
 1390 0472 3B8B     		ldrh	r3, [r7, #24]	@ movhi
 1391 0474 1344     		add	r3, r3, r2
 1392 0476 A7F84230 		strh	r3, [r7, #66]	@ movhi
 1393              	.L61:
 1394              	.LBE7:
 597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 1395              		.loc 1 597 9
 1396 047a B7F84220 		ldrh	r2, [r7, #66]
 1397 047e FB88     		ldrh	r3, [r7, #6]
 1398 0480 9A42     		cmp	r2, r3
 1399 0482 FFF43DAF 		bcc	.L74
 694:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 695:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 696:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 697:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * All three segmentation phases were successful. We can commit the
 698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * transaction.
 699:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 700:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 701:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((last_unsent != NULL) && (oversize_add != 0)) {
 702:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->oversize_left += oversize_add;
 703:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 705:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 707:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 1: If data has been added to the preallocated tail of
 708:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * last_unsent, we update the length fields of the pbuf chain.
 709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 710:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (oversize_used > 0) {
 1400              		.loc 1 711 6
 1401 0486 FB8F     		ldrh	r3, [r7, #62]
 1402 0488 002B     		cmp	r3, #0
 1403 048a 2CD0     		beq	.L75
 1404              	.LBB10:
 712:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 713:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Bump tot_len of whole chain, len of tail */
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (p = last_unsent->p; p; p = p->next) {
 1405              		.loc 1 714 12
 1406 048c 3B6D     		ldr	r3, [r7, #80]
 1407 048e 5B68     		ldr	r3, [r3, #4]
 1408 0490 FB62     		str	r3, [r7, #44]
 1409              		.loc 1 714 5
ARM GAS  /tmp/cc6RPj0P.s 			page 40


 1410 0492 1EE0     		b	.L76
 1411              	.L78:
 715:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1412              		.loc 1 715 18
 1413 0494 FB6A     		ldr	r3, [r7, #44]
 1414 0496 1A89     		ldrh	r2, [r3, #8]
 1415 0498 FB8F     		ldrh	r3, [r7, #62]	@ movhi
 1416 049a 1344     		add	r3, r3, r2
 1417 049c 9AB2     		uxth	r2, r3
 1418 049e FB6A     		ldr	r3, [r7, #44]
 1419 04a0 1A81     		strh	r2, [r3, #8]	@ movhi
 716:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (p->next == NULL) {
 1420              		.loc 1 716 12
 1421 04a2 FB6A     		ldr	r3, [r7, #44]
 1422 04a4 1B68     		ldr	r3, [r3]
 1423              		.loc 1 716 10
 1424 04a6 002B     		cmp	r3, #0
 1425 04a8 10D1     		bne	.L77
 717:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         TCP_DATA_COPY((char *)p->payload + p->len, arg, oversize_used, last_unsent);
 1426              		.loc 1 717 9
 1427 04aa FB6A     		ldr	r3, [r7, #44]
 1428 04ac 5B68     		ldr	r3, [r3, #4]
 1429 04ae FA6A     		ldr	r2, [r7, #44]
 1430 04b0 5289     		ldrh	r2, [r2, #10]
 1431 04b2 1344     		add	r3, r3, r2
 1432 04b4 FA8F     		ldrh	r2, [r7, #62]
 1433 04b6 B968     		ldr	r1, [r7, #8]
 1434 04b8 1846     		mov	r0, r3
 1435 04ba FFF7FEFF 		bl	memcpy
 718:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         p->len += oversize_used;
 1436              		.loc 1 718 16
 1437 04be FB6A     		ldr	r3, [r7, #44]
 1438 04c0 5A89     		ldrh	r2, [r3, #10]
 1439 04c2 FB8F     		ldrh	r3, [r7, #62]	@ movhi
 1440 04c4 1344     		add	r3, r3, r2
 1441 04c6 9AB2     		uxth	r2, r3
 1442 04c8 FB6A     		ldr	r3, [r7, #44]
 1443 04ca 5A81     		strh	r2, [r3, #10]	@ movhi
 1444              	.L77:
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1445              		.loc 1 714 35 discriminator 2
 1446 04cc FB6A     		ldr	r3, [r7, #44]
 1447 04ce 1B68     		ldr	r3, [r3]
 1448 04d0 FB62     		str	r3, [r7, #44]
 1449              	.L76:
 714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += oversize_used;
 1450              		.loc 1 714 5 discriminator 1
 1451 04d2 FB6A     		ldr	r3, [r7, #44]
 1452 04d4 002B     		cmp	r3, #0
 1453 04d6 DDD1     		bne	.L78
 719:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 720:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 721:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += oversize_used;
 1454              		.loc 1 721 22
 1455 04d8 3B6D     		ldr	r3, [r7, #80]
 1456 04da 1A89     		ldrh	r2, [r3, #8]
 1457 04dc FB8F     		ldrh	r3, [r7, #62]	@ movhi
ARM GAS  /tmp/cc6RPj0P.s 			page 41


 1458 04de 1344     		add	r3, r3, r2
 1459 04e0 9AB2     		uxth	r2, r3
 1460 04e2 3B6D     		ldr	r3, [r7, #80]
 1461 04e4 1A81     		strh	r2, [r3, #8]	@ movhi
 1462              	.L75:
 1463              	.LBE10:
 722:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 723:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("last_unsent->oversize_left >= oversize_used",
 724:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent->oversize_left >= oversize_used);
 725:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->oversize_left -= oversize_used;
 726:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 727:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 728:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent_oversize = oversize;
 1464              		.loc 1 728 24
 1465 04e6 7A8A     		ldrh	r2, [r7, #18]
 1466 04e8 FB68     		ldr	r3, [r7, #12]
 1467 04ea A3F86820 		strh	r2, [r3, #104]	@ movhi
 729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 730:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 731:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 2: concat_p can be concatenated onto last_unsent->p, unless we
 733:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * determined that the last ROM pbuf can be extended to include the new data.
 734:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_p != NULL) {
 1468              		.loc 1 735 6
 1469 04ee 7B6D     		ldr	r3, [r7, #84]
 1470 04f0 002B     		cmp	r3, #0
 1471 04f2 18D0     		beq	.L79
 736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: cannot concatenate when pcb->unsent is empty",
 1472              		.loc 1 736 5
 1473 04f4 3B6D     		ldr	r3, [r7, #80]
 1474 04f6 002B     		cmp	r3, #0
 1475 04f8 06D1     		bne	.L80
 1476              		.loc 1 736 5 is_stmt 0 discriminator 1
 1477 04fa 2A4B     		ldr	r3, .L101
 1478 04fc 40F2E122 		movw	r2, #737
 1479 0500 2D49     		ldr	r1, .L101+20
 1480 0502 2A48     		ldr	r0, .L101+8
 1481 0504 FFF7FEFF 		bl	printf
 1482              	.L80:
 737:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (last_unsent != NULL));
 738:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_cat(last_unsent->p, concat_p);
 1483              		.loc 1 738 5 is_stmt 1
 1484 0508 3B6D     		ldr	r3, [r7, #80]
 1485 050a 5B68     		ldr	r3, [r3, #4]
 1486 050c 796D     		ldr	r1, [r7, #84]
 1487 050e 1846     		mov	r0, r3
 1488 0510 FFF7FEFF 		bl	pbuf_cat
 739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += concat_p->tot_len;
 1489              		.loc 1 739 22
 1490 0514 3B6D     		ldr	r3, [r7, #80]
 1491 0516 1A89     		ldrh	r2, [r3, #8]
 1492              		.loc 1 739 33
 1493 0518 7B6D     		ldr	r3, [r7, #84]
 1494 051a 1B89     		ldrh	r3, [r3, #8]
 1495              		.loc 1 739 22
 1496 051c 1344     		add	r3, r3, r2
ARM GAS  /tmp/cc6RPj0P.s 			page 42


 1497 051e 9AB2     		uxth	r2, r3
 1498 0520 3B6D     		ldr	r3, [r7, #80]
 1499 0522 1A81     		strh	r2, [r3, #8]	@ movhi
 1500 0524 37E0     		b	.L81
 1501              	.L79:
 740:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else if (extendlen > 0) {
 1502              		.loc 1 740 13
 1503 0526 BB8F     		ldrh	r3, [r7, #60]
 1504 0528 002B     		cmp	r3, #0
 1505 052a 34D0     		beq	.L81
 1506              	.LBB11:
 741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct pbuf *p;
 742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: extension of reference requires reference",
 1507              		.loc 1 742 5
 1508 052c 3B6D     		ldr	r3, [r7, #80]
 1509 052e 002B     		cmp	r3, #0
 1510 0530 03D0     		beq	.L82
 1511              		.loc 1 742 5 is_stmt 0 discriminator 2
 1512 0532 3B6D     		ldr	r3, [r7, #80]
 1513 0534 5B68     		ldr	r3, [r3, #4]
 1514 0536 002B     		cmp	r3, #0
 1515 0538 06D1     		bne	.L83
 1516              	.L82:
 1517              		.loc 1 742 5 discriminator 3
 1518 053a 1A4B     		ldr	r3, .L101
 1519 053c 40F2E722 		movw	r2, #743
 1520 0540 1E49     		ldr	r1, .L101+24
 1521 0542 1A48     		ldr	r0, .L101+8
 1522 0544 FFF7FEFF 		bl	printf
 1523              	.L83:
 743:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 last_unsent != NULL && last_unsent->p != NULL);
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (p = last_unsent->p; p->next != NULL; p = p->next) {
 1524              		.loc 1 744 12 is_stmt 1
 1525 0548 3B6D     		ldr	r3, [r7, #80]
 1526 054a 5B68     		ldr	r3, [r3, #4]
 1527 054c BB62     		str	r3, [r7, #40]
 1528              		.loc 1 744 5
 1529 054e 09E0     		b	.L84
 1530              	.L85:
 745:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1531              		.loc 1 745 18 discriminator 3
 1532 0550 BB6A     		ldr	r3, [r7, #40]
 1533 0552 1A89     		ldrh	r2, [r3, #8]
 1534 0554 BB8F     		ldrh	r3, [r7, #60]	@ movhi
 1535 0556 1344     		add	r3, r3, r2
 1536 0558 9AB2     		uxth	r2, r3
 1537 055a BB6A     		ldr	r3, [r7, #40]
 1538 055c 1A81     		strh	r2, [r3, #8]	@ movhi
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1539              		.loc 1 744 49 discriminator 3
 1540 055e BB6A     		ldr	r3, [r7, #40]
 1541 0560 1B68     		ldr	r3, [r3]
 1542 0562 BB62     		str	r3, [r7, #40]
 1543              	.L84:
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1544              		.loc 1 744 31 discriminator 1
 1545 0564 BB6A     		ldr	r3, [r7, #40]
ARM GAS  /tmp/cc6RPj0P.s 			page 43


 1546 0566 1B68     		ldr	r3, [r3]
 744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       p->tot_len += extendlen;
 1547              		.loc 1 744 5 discriminator 1
 1548 0568 002B     		cmp	r3, #0
 1549 056a F1D1     		bne	.L85
 746:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->tot_len += extendlen;
 1550              		.loc 1 747 16
 1551 056c BB6A     		ldr	r3, [r7, #40]
 1552 056e 1A89     		ldrh	r2, [r3, #8]
 1553 0570 BB8F     		ldrh	r3, [r7, #60]	@ movhi
 1554 0572 1344     		add	r3, r3, r2
 1555 0574 9AB2     		uxth	r2, r3
 1556 0576 BB6A     		ldr	r3, [r7, #40]
 1557 0578 1A81     		strh	r2, [r3, #8]	@ movhi
 748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     p->len += extendlen;
 1558              		.loc 1 748 12
 1559 057a BB6A     		ldr	r3, [r7, #40]
 1560 057c 5A89     		ldrh	r2, [r3, #10]
 1561 057e BB8F     		ldrh	r3, [r7, #60]	@ movhi
 1562 0580 1344     		add	r3, r3, r2
 1563 0582 9AB2     		uxth	r2, r3
 1564 0584 BB6A     		ldr	r3, [r7, #40]
 1565 0586 5A81     		strh	r2, [r3, #10]	@ movhi
 749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->len += extendlen;
 1566              		.loc 1 749 22
 1567 0588 3B6D     		ldr	r3, [r7, #80]
 1568 058a 1A89     		ldrh	r2, [r3, #8]
 1569 058c BB8F     		ldrh	r3, [r7, #60]	@ movhi
 1570 058e 1344     		add	r3, r3, r2
 1571 0590 9AB2     		uxth	r2, r3
 1572 0592 3B6D     		ldr	r3, [r7, #80]
 1573 0594 1A81     		strh	r2, [r3, #8]	@ movhi
 1574              	.L81:
 1575              	.LBE11:
 750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 751:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 752:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_chksummed) {
 754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: concat checksum needs concatenated data",
 755:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 concat_p != NULL || extendlen > 0);
 756:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /*if concat checksumm swapped - swap it back */
 757:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (concat_chksum_swapped) {
 758:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       concat_chksum = SWAP_BYTES_IN_WORD(concat_chksum);
 759:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 760:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_add_chksum(concat_chksum, concat_chksummed, &last_unsent->chksum,
 761:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        &last_unsent->chksum_swapped);
 762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->flags |= TF_SEG_DATA_CHECKSUMMED;
 763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 764:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 765:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 766:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 767:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Phase 3: Append queue to pcb->unsent. Queue may be NULL, but that
 768:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * is harmless
 769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 770:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (last_unsent == NULL) {
 1576              		.loc 1 770 6
ARM GAS  /tmp/cc6RPj0P.s 			page 44


 1577 0596 3B6D     		ldr	r3, [r7, #80]
 1578 0598 002B     		cmp	r3, #0
 1579 059a 11D1     		bne	.L86
 771:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = queue;
 1580              		.loc 1 771 17
 1581 059c FB68     		ldr	r3, [r7, #12]
 1582 059e 7A6C     		ldr	r2, [r7, #68]
 1583 05a0 DA66     		str	r2, [r3, #108]
 1584 05a2 10E0     		b	.L87
 1585              	.L102:
 1586              		.align	2
 1587              	.L101:
 1588 05a4 00000000 		.word	.LC0
 1589 05a8 9C020000 		.word	.LC18
 1590 05ac 50000000 		.word	.LC2
 1591 05b0 DC020000 		.word	.LC19
 1592 05b4 EC020000 		.word	.LC20
 1593 05b8 00030000 		.word	.LC21
 1594 05bc 38030000 		.word	.LC22
 1595              	.L86:
 772:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     last_unsent->next = queue;
 1596              		.loc 1 773 23
 1597 05c0 3B6D     		ldr	r3, [r7, #80]
 1598 05c2 7A6C     		ldr	r2, [r7, #68]
 1599 05c4 1A60     		str	r2, [r3]
 1600              	.L87:
 774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 775:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 776:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /*
 777:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * Finally update the pcb state.
 778:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 779:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_lbb += len;
 1601              		.loc 1 779 16
 1602 05c6 FB68     		ldr	r3, [r7, #12]
 1603 05c8 DA6D     		ldr	r2, [r3, #92]
 1604 05ca FB88     		ldrh	r3, [r7, #6]
 1605 05cc 1A44     		add	r2, r2, r3
 1606 05ce FB68     		ldr	r3, [r7, #12]
 1607 05d0 DA65     		str	r2, [r3, #92]
 780:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_buf -= len;
 1608              		.loc 1 780 16
 1609 05d2 FB68     		ldr	r3, [r7, #12]
 1610 05d4 B3F86420 		ldrh	r2, [r3, #100]
 1611 05d8 FB88     		ldrh	r3, [r7, #6]	@ movhi
 1612 05da D31A     		subs	r3, r2, r3
 1613 05dc 9AB2     		uxth	r2, r3
 1614 05de FB68     		ldr	r3, [r7, #12]
 1615 05e0 A3F86420 		strh	r2, [r3, #100]	@ movhi
 781:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen = queuelen;
 1616              		.loc 1 781 21
 1617 05e4 FB68     		ldr	r3, [r7, #12]
 1618 05e6 B7F84020 		ldrh	r2, [r7, #64]	@ movhi
 1619 05ea A3F86620 		strh	r2, [r3, #102]	@ movhi
 782:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 783:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_write: %"S16_F" (after enqueued)\n",
 784:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                pcb->snd_queuelen));
ARM GAS  /tmp/cc6RPj0P.s 			page 45


 785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 1620              		.loc 1 785 10
 1621 05ee FB68     		ldr	r3, [r7, #12]
 1622 05f0 B3F86630 		ldrh	r3, [r3, #102]
 1623              		.loc 1 785 6
 1624 05f4 002B     		cmp	r3, #0
 1625 05f6 0ED0     		beq	.L88
 786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length",
 1626              		.loc 1 786 5
 1627 05f8 FB68     		ldr	r3, [r7, #12]
 1628 05fa 1B6F     		ldr	r3, [r3, #112]
 1629 05fc 002B     		cmp	r3, #0
 1630 05fe 0AD1     		bne	.L88
 1631              		.loc 1 786 5 is_stmt 0 discriminator 1
 1632 0600 FB68     		ldr	r3, [r7, #12]
 1633 0602 DB6E     		ldr	r3, [r3, #108]
 1634 0604 002B     		cmp	r3, #0
 1635 0606 06D1     		bne	.L88
 1636              		.loc 1 786 5 discriminator 2
 1637 0608 2C4B     		ldr	r3, .L103
 1638 060a 40F21332 		movw	r2, #787
 1639 060e 2C49     		ldr	r1, .L103+4
 1640 0610 2C48     		ldr	r0, .L103+8
 1641 0612 FFF7FEFF 		bl	printf
 1642              	.L88:
 787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
 788:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 789:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 790:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Set the PSH flag in the last segment that we enqueued. */
 791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg != NULL && seg->tcphdr != NULL && ((apiflags & TCP_WRITE_FLAG_MORE) == 0)) {
 1643              		.loc 1 791 6 is_stmt 1
 1644 0616 FB6C     		ldr	r3, [r7, #76]
 1645 0618 002B     		cmp	r3, #0
 1646 061a 16D0     		beq	.L89
 1647              		.loc 1 791 25 discriminator 1
 1648 061c FB6C     		ldr	r3, [r7, #76]
 1649 061e DB68     		ldr	r3, [r3, #12]
 1650              		.loc 1 791 19 discriminator 1
 1651 0620 002B     		cmp	r3, #0
 1652 0622 12D0     		beq	.L89
 1653              		.loc 1 791 56 discriminator 2
 1654 0624 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1655 0626 03F00203 		and	r3, r3, #2
 1656              		.loc 1 791 42 discriminator 2
 1657 062a 002B     		cmp	r3, #0
 1658 062c 0DD1     		bne	.L89
 792:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_SET_FLAG(seg->tcphdr, TCP_PSH);
 1659              		.loc 1 792 5
 1660 062e FB6C     		ldr	r3, [r7, #76]
 1661 0630 DB68     		ldr	r3, [r3, #12]
 1662 0632 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 1663 0634 9CB2     		uxth	r4, r3
 1664 0636 0820     		movs	r0, #8
 1665 0638 FFF7FEFF 		bl	lwip_htons
 1666 063c 0346     		mov	r3, r0
 1667 063e 1A46     		mov	r2, r3
 1668 0640 FB6C     		ldr	r3, [r7, #76]
ARM GAS  /tmp/cc6RPj0P.s 			page 46


 1669 0642 DB68     		ldr	r3, [r3, #12]
 1670 0644 2243     		orrs	r2, r2, r4
 1671 0646 92B2     		uxth	r2, r2
 1672 0648 9A81     		strh	r2, [r3, #12]	@ unaligned
 1673              	.L89:
 793:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 795:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 1674              		.loc 1 795 10
 1675 064a 0023     		movs	r3, #0
 1676 064c 31E0     		b	.L93
 1677              	.L94:
 1678              	.LBB12:
 1679              	.LBB6:
 544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
 1680              		.loc 1 544 11
 1681 064e 00BF     		nop
 1682 0650 06E0     		b	.L53
 1683              	.L95:
 1684              	.LBB5:
 567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
 1685              		.loc 1 567 13
 1686 0652 00BF     		nop
 1687 0654 04E0     		b	.L53
 1688              	.L96:
 1689              	.LBE5:
 1690              	.LBE6:
 1691              	.LBE12:
 1692              	.LBB13:
 612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 1693              		.loc 1 612 9
 1694 0656 00BF     		nop
 1695 0658 02E0     		b	.L53
 1696              	.L97:
 1697              	.LBB9:
 629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
 1698              		.loc 1 629 9
 1699 065a 00BF     		nop
 1700 065c 00E0     		b	.L53
 1701              	.L98:
 1702              	.LBE9:
 667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 1703              		.loc 1 667 7
 1704 065e 00BF     		nop
 1705              	.L53:
 1706              	.LBE13:
 796:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** memerr:
 797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_set_flags(pcb, TF_NAGLEMEMERR);
 1707              		.loc 1 797 3
 1708 0660 FB68     		ldr	r3, [r7, #12]
 1709 0662 5B8B     		ldrh	r3, [r3, #26]
 1710 0664 43F08003 		orr	r3, r3, #128
 1711 0668 9AB2     		uxth	r2, r3
 1712 066a FB68     		ldr	r3, [r7, #12]
 1713 066c 5A83     		strh	r2, [r3, #26]	@ movhi
 798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 799:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cc6RPj0P.s 			page 47


 800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (concat_p != NULL) {
 1714              		.loc 1 800 6
 1715 066e 7B6D     		ldr	r3, [r7, #84]
 1716 0670 002B     		cmp	r3, #0
 1717 0672 02D0     		beq	.L90
 801:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(concat_p);
 1718              		.loc 1 801 5
 1719 0674 786D     		ldr	r0, [r7, #84]
 1720 0676 FFF7FEFF 		bl	pbuf_free
 1721              	.L90:
 802:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (queue != NULL) {
 1722              		.loc 1 803 6
 1723 067a 7B6C     		ldr	r3, [r7, #68]
 1724 067c 002B     		cmp	r3, #0
 1725 067e 02D0     		beq	.L91
 804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_segs_free(queue);
 1726              		.loc 1 804 5
 1727 0680 786C     		ldr	r0, [r7, #68]
 1728 0682 FFF7FEFF 		bl	tcp_segs_free
 1729              	.L91:
 805:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 806:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 1730              		.loc 1 806 10
 1731 0686 FB68     		ldr	r3, [r7, #12]
 1732 0688 B3F86630 		ldrh	r3, [r3, #102]
 1733              		.loc 1 806 6
 1734 068c 002B     		cmp	r3, #0
 1735 068e 0ED0     		beq	.L92
 807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_write: valid queue length", pcb->unacked != NULL ||
 1736              		.loc 1 807 5
 1737 0690 FB68     		ldr	r3, [r7, #12]
 1738 0692 1B6F     		ldr	r3, [r3, #112]
 1739 0694 002B     		cmp	r3, #0
 1740 0696 0AD1     		bne	.L92
 1741              		.loc 1 807 5 is_stmt 0 discriminator 1
 1742 0698 FB68     		ldr	r3, [r7, #12]
 1743 069a DB6E     		ldr	r3, [r3, #108]
 1744 069c 002B     		cmp	r3, #0
 1745 069e 06D1     		bne	.L92
 1746              		.loc 1 807 5 discriminator 2
 1747 06a0 064B     		ldr	r3, .L103
 1748 06a2 4FF44A72 		mov	r2, #808
 1749 06a6 0649     		ldr	r1, .L103+4
 1750 06a8 0648     		ldr	r0, .L103+8
 1751 06aa FFF7FEFF 		bl	printf
 1752              	.L92:
 808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unsent != NULL);
 809:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 810:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG | LWIP_DBG_STATE, ("tcp_write: %"S16_F" (with mem err)\n", pcb->snd_qu
 811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_MEM;
 1753              		.loc 1 811 10 is_stmt 1
 1754 06ae 4FF0FF33 		mov	r3, #-1
 1755              	.L93:
 812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 1756              		.loc 1 812 1 discriminator 2
 1757 06b2 1846     		mov	r0, r3
ARM GAS  /tmp/cc6RPj0P.s 			page 48


 1758 06b4 5C37     		adds	r7, r7, #92
 1759              	.LCFI23:
 1760              		.cfi_def_cfa_offset 12
 1761 06b6 BD46     		mov	sp, r7
 1762              	.LCFI24:
 1763              		.cfi_def_cfa_register 13
 1764              		@ sp needed
 1765 06b8 90BD     		pop	{r4, r7, pc}
 1766              	.L104:
 1767 06ba 00BF     		.align	2
 1768              	.L103:
 1769 06bc 00000000 		.word	.LC0
 1770 06c0 70030000 		.word	.LC23
 1771 06c4 50000000 		.word	.LC2
 1772              		.cfi_endproc
 1773              	.LFE137:
 1775              		.section	.rodata
 1776 038e 0000     		.align	2
 1777              	.LC24:
 1778 0390 7463705F 		.ascii	"tcp_split_unsent_seg: invalid pcb\000"
 1778      73706C69 
 1778      745F756E 
 1778      73656E74 
 1778      5F736567 
 1779 03b2 0000     		.align	2
 1780              	.LC25:
 1781 03b4 43616E27 		.ascii	"Can't split segment into length 0\000"
 1781      74207370 
 1781      6C697420 
 1781      7365676D 
 1781      656E7420 
 1782 03d6 0000     		.align	2
 1783              	.LC26:
 1784 03d8 73706C69 		.ascii	"split <= mss\000"
 1784      74203C3D 
 1784      206D7373 
 1784      00
 1785 03e5 000000   		.align	2
 1786              	.LC27:
 1787 03e8 75736567 		.ascii	"useg->len > 0\000"
 1787      2D3E6C65 
 1787      6E203E20 
 1787      3000
 1788 03f6 0000     		.align	2
 1789              	.LC28:
 1790 03f8 73656720 		.ascii	"seg == NULL\000"
 1790      3D3D204E 
 1790      554C4C00 
 1791              		.section	.text.tcp_split_unsent_seg,"ax",%progbits
 1792              		.align	1
 1793              		.global	tcp_split_unsent_seg
 1794              		.syntax unified
 1795              		.thumb
 1796              		.thumb_func
 1797              		.fpu fpv4-sp-d16
 1799              	tcp_split_unsent_seg:
 1800              	.LFB138:
ARM GAS  /tmp/cc6RPj0P.s 			page 49


 813:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 814:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 815:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Split segment on the head of the unsent queue.  If return is not
 816:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * ERR_OK, existing head remains intact
 817:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 818:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * The split is accomplished by creating a new TCP segment and pbuf
 819:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * which holds the remainder payload after the split.  The original
 820:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * pbuf is trimmed to new length.  This allows splitting of read-only
 821:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * pbufs
 822:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 823:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to split the unsent head
 824:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param split the amount of payload to remain in the head
 825:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
 826:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
 827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_split_unsent_seg(struct tcp_pcb *pcb, u16_t split)
 828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 1801              		.loc 1 828 1
 1802              		.cfi_startproc
 1803              		@ args = 0, pretend = 0, frame = 32
 1804              		@ frame_needed = 1, uses_anonymous_args = 0
 1805 0000 90B5     		push	{r4, r7, lr}
 1806              	.LCFI25:
 1807              		.cfi_def_cfa_offset 12
 1808              		.cfi_offset 4, -12
 1809              		.cfi_offset 7, -8
 1810              		.cfi_offset 14, -4
 1811 0002 8BB0     		sub	sp, sp, #44
 1812              	.LCFI26:
 1813              		.cfi_def_cfa_offset 56
 1814 0004 02AF     		add	r7, sp, #8
 1815              	.LCFI27:
 1816              		.cfi_def_cfa 7, 48
 1817 0006 7860     		str	r0, [r7, #4]
 1818 0008 0B46     		mov	r3, r1
 1819 000a 7B80     		strh	r3, [r7, #2]	@ movhi
 829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg = NULL, *useg = NULL;
 1820              		.loc 1 829 19
 1821 000c 0023     		movs	r3, #0
 1822 000e FB61     		str	r3, [r7, #28]
 1823              		.loc 1 829 32
 1824 0010 0023     		movs	r3, #0
 1825 0012 7B61     		str	r3, [r7, #20]
 830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p = NULL;
 1826              		.loc 1 830 16
 1827 0014 0023     		movs	r3, #0
 1828 0016 3B61     		str	r3, [r7, #16]
 831:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
 832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags;
 833:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t split_flags;
 834:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t remainder_flags;
 835:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t remainder;
 836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t offset;
 837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 838:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t chksum = 0;
 839:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t chksum_swapped = 0;
 840:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *q;
 841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
ARM GAS  /tmp/cc6RPj0P.s 			page 50


 842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_split_unsent_seg: invalid pcb", pcb != NULL);
 1829              		.loc 1 843 3
 1830 0018 7B68     		ldr	r3, [r7, #4]
 1831 001a 002B     		cmp	r3, #0
 1832 001c 06D1     		bne	.L106
 1833              		.loc 1 843 3 is_stmt 0 discriminator 1
 1834 001e 954B     		ldr	r3, .L125
 1835 0020 40F24B32 		movw	r2, #843
 1836 0024 9449     		ldr	r1, .L125+4
 1837 0026 9548     		ldr	r0, .L125+8
 1838 0028 FFF7FEFF 		bl	printf
 1839              	.L106:
 844:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 845:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg = pcb->unsent;
 1840              		.loc 1 845 8 is_stmt 1
 1841 002c 7B68     		ldr	r3, [r7, #4]
 1842 002e DB6E     		ldr	r3, [r3, #108]
 1843 0030 7B61     		str	r3, [r7, #20]
 846:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg == NULL) {
 1844              		.loc 1 846 6
 1845 0032 7B69     		ldr	r3, [r7, #20]
 1846 0034 002B     		cmp	r3, #0
 1847 0036 02D1     		bne	.L107
 847:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 1848              		.loc 1 847 12
 1849 0038 4FF0FF33 		mov	r3, #-1
 1850 003c 16E1     		b	.L108
 1851              	.L107:
 848:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 849:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 850:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (split == 0) {
 1852              		.loc 1 850 6
 1853 003e 7B88     		ldrh	r3, [r7, #2]
 1854 0040 002B     		cmp	r3, #0
 1855 0042 09D1     		bne	.L109
 851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("Can't split segment into length 0", 0);
 1856              		.loc 1 851 5 discriminator 1
 1857 0044 8B4B     		ldr	r3, .L125
 1858 0046 40F25332 		movw	r2, #851
 1859 004a 8D49     		ldr	r1, .L125+12
 1860 004c 8B48     		ldr	r0, .L125+8
 1861 004e FFF7FEFF 		bl	printf
 852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 1862              		.loc 1 852 12 discriminator 1
 1863 0052 6FF00503 		mvn	r3, #5
 1864 0056 09E1     		b	.L108
 1865              	.L109:
 853:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 854:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg->len <= split) {
 1866              		.loc 1 855 11
 1867 0058 7B69     		ldr	r3, [r7, #20]
 1868 005a 1B89     		ldrh	r3, [r3, #8]
 1869              		.loc 1 855 6
 1870 005c 7A88     		ldrh	r2, [r7, #2]
 1871 005e 9A42     		cmp	r2, r3
ARM GAS  /tmp/cc6RPj0P.s 			page 51


 1872 0060 01D3     		bcc	.L110
 856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 1873              		.loc 1 856 12
 1874 0062 0023     		movs	r3, #0
 1875 0064 02E1     		b	.L108
 1876              	.L110:
 857:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("split <= mss", split <= pcb->mss);
 1877              		.loc 1 859 3
 1878 0066 7B68     		ldr	r3, [r7, #4]
 1879 0068 5B8E     		ldrh	r3, [r3, #50]
 1880 006a 7A88     		ldrh	r2, [r7, #2]
 1881 006c 9A42     		cmp	r2, r3
 1882 006e 06D9     		bls	.L111
 1883              		.loc 1 859 3 is_stmt 0 discriminator 1
 1884 0070 804B     		ldr	r3, .L125
 1885 0072 40F25B32 		movw	r2, #859
 1886 0076 8349     		ldr	r1, .L125+16
 1887 0078 8048     		ldr	r0, .L125+8
 1888 007a FFF7FEFF 		bl	printf
 1889              	.L111:
 860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("useg->len > 0", useg->len > 0);
 1890              		.loc 1 860 3 is_stmt 1
 1891 007e 7B69     		ldr	r3, [r7, #20]
 1892 0080 1B89     		ldrh	r3, [r3, #8]
 1893 0082 002B     		cmp	r3, #0
 1894 0084 06D1     		bne	.L112
 1895              		.loc 1 860 3 is_stmt 0 discriminator 1
 1896 0086 7B4B     		ldr	r3, .L125
 1897 0088 4FF45772 		mov	r2, #860
 1898 008c 7E49     		ldr	r1, .L125+20
 1899 008e 7B48     		ldr	r0, .L125+8
 1900 0090 FFF7FEFF 		bl	printf
 1901              	.L112:
 861:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 862:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* We should check that we don't exceed TCP_SND_QUEUELEN but we need
 863:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * to split this packet so we may actually exceed the max value by
 864:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * one!
 865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    */
 866:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue: split_unsent_seg: %u\n", (unsigned int)pcb->snd_queuel
 867:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optflags = useg->flags;
 1902              		.loc 1 868 12 is_stmt 1
 1903 0094 7B69     		ldr	r3, [r7, #20]
 1904 0096 9B7A     		ldrb	r3, [r3, #10]
 1905 0098 FB73     		strb	r3, [r7, #15]
 869:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 870:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Remove since checksum is not stored until after tcp_create_segment() */
 871:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optflags &= ~TF_SEG_DATA_CHECKSUMMED;
 872:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH(optflags);
 1906              		.loc 1 873 12
 1907 009a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1908 009c 9B00     		lsls	r3, r3, #2
 1909 009e DBB2     		uxtb	r3, r3
 1910              		.loc 1 873 10
ARM GAS  /tmp/cc6RPj0P.s 			page 52


 1911 00a0 03F00403 		and	r3, r3, #4
 1912 00a4 BB73     		strb	r3, [r7, #14]
 874:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder = useg->len - split;
 1913              		.loc 1 874 19
 1914 00a6 7B69     		ldr	r3, [r7, #20]
 1915 00a8 1A89     		ldrh	r2, [r3, #8]
 1916              		.loc 1 874 13
 1917 00aa 7B88     		ldrh	r3, [r7, #2]	@ movhi
 1918 00ac D31A     		subs	r3, r2, r3
 1919 00ae BB81     		strh	r3, [r7, #12]	@ movhi
 875:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Create new pbuf for the remainder of the split */
 877:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(PBUF_TRANSPORT, remainder + optlen, PBUF_RAM);
 1920              		.loc 1 877 7
 1921 00b0 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 1922 00b2 9AB2     		uxth	r2, r3
 1923 00b4 BB89     		ldrh	r3, [r7, #12]	@ movhi
 1924 00b6 1344     		add	r3, r3, r2
 1925 00b8 9BB2     		uxth	r3, r3
 1926 00ba 4FF42072 		mov	r2, #640
 1927 00be 1946     		mov	r1, r3
 1928 00c0 3620     		movs	r0, #54
 1929 00c2 FFF7FEFF 		bl	pbuf_alloc
 1930 00c6 3861     		str	r0, [r7, #16]
 878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 1931              		.loc 1 878 6
 1932 00c8 3B69     		ldr	r3, [r7, #16]
 1933 00ca 002B     		cmp	r3, #0
 1934 00cc 00F0B780 		beq	.L122
 879:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_split_unsent_seg: could not allocate memory for pbuf remainder %u\n", remaind
 881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto memerr;
 882:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 883:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 884:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Offset into the original pbuf is past TCP/IP headers, options, and split amount */
 885:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   offset = useg->p->tot_len - useg->len + split;
 1935              		.loc 1 885 16
 1936 00d0 7B69     		ldr	r3, [r7, #20]
 1937 00d2 5B68     		ldr	r3, [r3, #4]
 1938              		.loc 1 885 19
 1939 00d4 1A89     		ldrh	r2, [r3, #8]
 1940              		.loc 1 885 35
 1941 00d6 7B69     		ldr	r3, [r7, #20]
 1942 00d8 1B89     		ldrh	r3, [r3, #8]
 1943              		.loc 1 885 29
 1944 00da D31A     		subs	r3, r2, r3
 1945 00dc 9AB2     		uxth	r2, r3
 1946              		.loc 1 885 10
 1947 00de 7B88     		ldrh	r3, [r7, #2]	@ movhi
 1948 00e0 1344     		add	r3, r3, r2
 1949 00e2 7B81     		strh	r3, [r7, #10]	@ movhi
 886:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Copy remainder into new pbuf, headers and options will not be filled out */
 887:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pbuf_copy_partial(useg->p, (u8_t *)p->payload + optlen, remainder, offset ) != remainder) {
 1950              		.loc 1 887 29
 1951 00e4 7B69     		ldr	r3, [r7, #20]
 1952 00e6 5868     		ldr	r0, [r3, #4]
 1953              		.loc 1 887 43
ARM GAS  /tmp/cc6RPj0P.s 			page 53


 1954 00e8 3B69     		ldr	r3, [r7, #16]
 1955 00ea 5A68     		ldr	r2, [r3, #4]
 1956              		.loc 1 887 7
 1957 00ec BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 1958 00ee D118     		adds	r1, r2, r3
 1959 00f0 7B89     		ldrh	r3, [r7, #10]
 1960 00f2 BA89     		ldrh	r2, [r7, #12]
 1961 00f4 FFF7FEFF 		bl	pbuf_copy_partial
 1962 00f8 0346     		mov	r3, r0
 1963 00fa 1A46     		mov	r2, r3
 1964              		.loc 1 887 6
 1965 00fc BB89     		ldrh	r3, [r7, #12]
 1966 00fe 9342     		cmp	r3, r2
 1967 0100 40F09F80 		bne	.L123
 888:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 889:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_split_unsent_seg: could not copy pbuf remainder %u\n", remainder));
 890:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto memerr;
 891:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 892:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 893:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* calculate the checksum on remainder data */
 894:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_seg_add_chksum(~inet_chksum((const u8_t *)p->payload + optlen, remainder), remainder,
 895:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      &chksum, &chksum_swapped);
 896:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 897:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 898:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Options are created when calling tcp_output() */
 899:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 900:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Migrate flags from original segment */
 901:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   split_flags = TCPH_FLAGS(useg->tcphdr);
 1968              		.loc 1 901 17
 1969 0104 7B69     		ldr	r3, [r7, #20]
 1970 0106 DB68     		ldr	r3, [r3, #12]
 1971 0108 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 1972 010a 9BB2     		uxth	r3, r3
 1973 010c 1846     		mov	r0, r3
 1974 010e FFF7FEFF 		bl	lwip_htons
 1975 0112 0346     		mov	r3, r0
 1976 0114 DBB2     		uxtb	r3, r3
 1977              		.loc 1 901 15
 1978 0116 03F03F03 		and	r3, r3, #63
 1979 011a FB76     		strb	r3, [r7, #27]
 902:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   remainder_flags = 0; /* ACK added in tcp_output() */
 1980              		.loc 1 902 19
 1981 011c 0023     		movs	r3, #0
 1982 011e BB76     		strb	r3, [r7, #26]
 903:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 904:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (split_flags & TCP_PSH) {
 1983              		.loc 1 904 19
 1984 0120 FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 1985 0122 03F00803 		and	r3, r3, #8
 1986              		.loc 1 904 6
 1987 0126 002B     		cmp	r3, #0
 1988 0128 07D0     		beq	.L116
 905:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     split_flags &= ~TCP_PSH;
 1989              		.loc 1 905 17
 1990 012a FB7E     		ldrb	r3, [r7, #27]
 1991 012c 23F00803 		bic	r3, r3, #8
 1992 0130 FB76     		strb	r3, [r7, #27]
ARM GAS  /tmp/cc6RPj0P.s 			page 54


 906:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remainder_flags |= TCP_PSH;
 1993              		.loc 1 906 21
 1994 0132 BB7E     		ldrb	r3, [r7, #26]
 1995 0134 43F00803 		orr	r3, r3, #8
 1996 0138 BB76     		strb	r3, [r7, #26]
 1997              	.L116:
 907:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 908:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (split_flags & TCP_FIN) {
 1998              		.loc 1 908 19
 1999 013a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 2000 013c 03F00103 		and	r3, r3, #1
 2001              		.loc 1 908 6
 2002 0140 002B     		cmp	r3, #0
 2003 0142 07D0     		beq	.L117
 909:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     split_flags &= ~TCP_FIN;
 2004              		.loc 1 909 17
 2005 0144 FB7E     		ldrb	r3, [r7, #27]
 2006 0146 23F00103 		bic	r3, r3, #1
 2007 014a FB76     		strb	r3, [r7, #27]
 910:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remainder_flags |= TCP_FIN;
 2008              		.loc 1 910 21
 2009 014c BB7E     		ldrb	r3, [r7, #26]
 2010 014e 43F00103 		orr	r3, r3, #1
 2011 0152 BB76     		strb	r3, [r7, #26]
 2012              	.L117:
 911:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 912:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* SYN should be left on split, RST should not be present with data */
 913:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 914:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = tcp_create_segment(pcb, p, remainder_flags, lwip_ntohl(useg->tcphdr->seqno) + split, optfla
 2013              		.loc 1 914 53
 2014 0154 7B69     		ldr	r3, [r7, #20]
 2015 0156 DB68     		ldr	r3, [r3, #12]
 2016 0158 5B68     		ldr	r3, [r3, #4]	@ unaligned
 2017 015a 1846     		mov	r0, r3
 2018 015c FFF7FEFF 		bl	lwip_htonl
 2019 0160 0246     		mov	r2, r0
 2020              		.loc 1 914 9
 2021 0162 7B88     		ldrh	r3, [r7, #2]
 2022 0164 D118     		adds	r1, r2, r3
 2023 0166 BA7E     		ldrb	r2, [r7, #26]	@ zero_extendqisi2
 2024 0168 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2025 016a 0093     		str	r3, [sp]
 2026 016c 0B46     		mov	r3, r1
 2027 016e 3969     		ldr	r1, [r7, #16]
 2028 0170 7868     		ldr	r0, [r7, #4]
 2029 0172 FFF7FEFF 		bl	tcp_create_segment
 2030 0176 F861     		str	r0, [r7, #28]
 915:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 2031              		.loc 1 915 6
 2032 0178 FB69     		ldr	r3, [r7, #28]
 2033 017a 002B     		cmp	r3, #0
 2034 017c 63D0     		beq	.L124
 916:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 917:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_split_unsent_seg: could not create new TCP segment\n"));
 918:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto memerr;
 919:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 920:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cc6RPj0P.s 			page 55


 921:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 922:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum = chksum;
 923:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->chksum_swapped = chksum_swapped;
 924:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->flags |= TF_SEG_DATA_CHECKSUMMED;
 925:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 926:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 927:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Remove this segment from the queue since trimming it may free pbufs */
 928:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen -= pbuf_clen(useg->p);
 2035              		.loc 1 928 38
 2036 017e 7B69     		ldr	r3, [r7, #20]
 2037 0180 5B68     		ldr	r3, [r3, #4]
 2038              		.loc 1 928 24
 2039 0182 1846     		mov	r0, r3
 2040 0184 FFF7FEFF 		bl	pbuf_clen
 2041 0188 0346     		mov	r3, r0
 2042 018a 1A46     		mov	r2, r3
 2043              		.loc 1 928 21
 2044 018c 7B68     		ldr	r3, [r7, #4]
 2045 018e B3F86630 		ldrh	r3, [r3, #102]
 2046 0192 9B1A     		subs	r3, r3, r2
 2047 0194 9AB2     		uxth	r2, r3
 2048 0196 7B68     		ldr	r3, [r7, #4]
 2049 0198 A3F86620 		strh	r2, [r3, #102]	@ movhi
 929:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 930:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Trim the original pbuf into our split size.  At this point our remainder segment must be setup
 931:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   successfully because we are modifying the original segment */
 932:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_realloc(useg->p, useg->p->tot_len - remainder);
 2050              		.loc 1 932 3
 2051 019c 7B69     		ldr	r3, [r7, #20]
 2052 019e 5868     		ldr	r0, [r3, #4]
 2053              		.loc 1 932 29
 2054 01a0 7B69     		ldr	r3, [r7, #20]
 2055 01a2 5B68     		ldr	r3, [r3, #4]
 2056              		.loc 1 932 32
 2057 01a4 1A89     		ldrh	r2, [r3, #8]
 2058              		.loc 1 932 3
 2059 01a6 BB89     		ldrh	r3, [r7, #12]	@ movhi
 2060 01a8 D31A     		subs	r3, r2, r3
 2061 01aa 9BB2     		uxth	r3, r3
 2062 01ac 1946     		mov	r1, r3
 2063 01ae FFF7FEFF 		bl	pbuf_realloc
 933:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->len -= remainder;
 2064              		.loc 1 933 13
 2065 01b2 7B69     		ldr	r3, [r7, #20]
 2066 01b4 1A89     		ldrh	r2, [r3, #8]
 2067 01b6 BB89     		ldrh	r3, [r7, #12]	@ movhi
 2068 01b8 D31A     		subs	r3, r2, r3
 2069 01ba 9AB2     		uxth	r2, r3
 2070 01bc 7B69     		ldr	r3, [r7, #20]
 2071 01be 1A81     		strh	r2, [r3, #8]	@ movhi
 934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCPH_SET_FLAG(useg->tcphdr, split_flags);
 2072              		.loc 1 934 3
 2073 01c0 7B69     		ldr	r3, [r7, #20]
 2074 01c2 DB68     		ldr	r3, [r3, #12]
 2075 01c4 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2076 01c6 9CB2     		uxth	r4, r3
 2077 01c8 FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
ARM GAS  /tmp/cc6RPj0P.s 			page 56


 2078 01ca 9BB2     		uxth	r3, r3
 2079 01cc 1846     		mov	r0, r3
 2080 01ce FFF7FEFF 		bl	lwip_htons
 2081 01d2 0346     		mov	r3, r0
 2082 01d4 1A46     		mov	r2, r3
 2083 01d6 7B69     		ldr	r3, [r7, #20]
 2084 01d8 DB68     		ldr	r3, [r3, #12]
 2085 01da 2243     		orrs	r2, r2, r4
 2086 01dc 92B2     		uxth	r2, r2
 2087 01de 9A81     		strh	r2, [r3, #12]	@ unaligned
 935:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
 936:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* By trimming, realloc may have actually shrunk the pbuf, so clear oversize_left */
 937:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->oversize_left = 0;
 938:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
 939:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 940:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Add back to the queue with new trimmed pbuf */
 941:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(useg->p);
 2088              		.loc 1 941 38
 2089 01e0 7B69     		ldr	r3, [r7, #20]
 2090 01e2 5B68     		ldr	r3, [r3, #4]
 2091              		.loc 1 941 24
 2092 01e4 1846     		mov	r0, r3
 2093 01e6 FFF7FEFF 		bl	pbuf_clen
 2094 01ea 0346     		mov	r3, r0
 2095 01ec 1A46     		mov	r2, r3
 2096              		.loc 1 941 21
 2097 01ee 7B68     		ldr	r3, [r7, #4]
 2098 01f0 B3F86630 		ldrh	r3, [r3, #102]
 2099 01f4 1344     		add	r3, r3, r2
 2100 01f6 9AB2     		uxth	r2, r3
 2101 01f8 7B68     		ldr	r3, [r7, #4]
 2102 01fa A3F86620 		strh	r2, [r3, #102]	@ movhi
 942:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 943:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
 944:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The checksum on the split segment is now incorrect. We need to re-run it over the split */
 945:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->chksum = 0;
 946:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->chksum_swapped = 0;
 947:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   q = useg->p;
 948:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   offset = q->tot_len - useg->len; /* Offset due to exposed headers */
 949:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 950:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Advance to the pbuf where the offset ends */
 951:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (q != NULL && offset > q->len) {
 952:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     offset -= q->len;
 953:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     q = q->next;
 954:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 955:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("Found start of payload pbuf", q != NULL);
 956:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Checksum the first payload pbuf accounting for offset, then other pbufs are all payload */
 957:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (; q != NULL; offset = 0, q = q->next) {
 958:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_seg_add_chksum(~inet_chksum((const u8_t *)q->payload + offset, q->len - offset), q->len - o
 959:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                        &useg->chksum, &useg->chksum_swapped);
 960:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 961:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
 962:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 963:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Update number of segments on the queues. Note that length now may
 964:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * exceed TCP_SND_QUEUELEN! We don't have to touch pcb->snd_buf
 965:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * because the total amount of data is constant when packet is split */
 966:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(seg->p);
ARM GAS  /tmp/cc6RPj0P.s 			page 57


 2103              		.loc 1 966 37
 2104 01fe FB69     		ldr	r3, [r7, #28]
 2105 0200 5B68     		ldr	r3, [r3, #4]
 2106              		.loc 1 966 24
 2107 0202 1846     		mov	r0, r3
 2108 0204 FFF7FEFF 		bl	pbuf_clen
 2109 0208 0346     		mov	r3, r0
 2110 020a 1A46     		mov	r2, r3
 2111              		.loc 1 966 21
 2112 020c 7B68     		ldr	r3, [r7, #4]
 2113 020e B3F86630 		ldrh	r3, [r3, #102]
 2114 0212 1344     		add	r3, r3, r2
 2115 0214 9AB2     		uxth	r2, r3
 2116 0216 7B68     		ldr	r3, [r7, #4]
 2117 0218 A3F86620 		strh	r2, [r3, #102]	@ movhi
 967:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 968:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Finally insert remainder into queue after split (which stays head) */
 969:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = useg->next;
 2118              		.loc 1 969 19
 2119 021c 7B69     		ldr	r3, [r7, #20]
 2120 021e 1A68     		ldr	r2, [r3]
 2121              		.loc 1 969 13
 2122 0220 FB69     		ldr	r3, [r7, #28]
 2123 0222 1A60     		str	r2, [r3]
 970:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg->next = seg;
 2124              		.loc 1 970 14
 2125 0224 7B69     		ldr	r3, [r7, #20]
 2126 0226 FA69     		ldr	r2, [r7, #28]
 2127 0228 1A60     		str	r2, [r3]
 971:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 972:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
 973:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If remainder is last segment on the unsent, ensure we clear the oversize amount
 974:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    * because the remainder is always sized to the exact remaining amount */
 975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->next == NULL) {
 2128              		.loc 1 975 10
 2129 022a FB69     		ldr	r3, [r7, #28]
 2130 022c 1B68     		ldr	r3, [r3]
 2131              		.loc 1 975 6
 2132 022e 002B     		cmp	r3, #0
 2133 0230 03D1     		bne	.L119
 976:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
 2134              		.loc 1 976 26
 2135 0232 7B68     		ldr	r3, [r7, #4]
 2136 0234 0022     		movs	r2, #0
 2137 0236 A3F86820 		strh	r2, [r3, #104]	@ movhi
 2138              	.L119:
 977:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 978:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
 979:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 980:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 2139              		.loc 1 980 10
 2140 023a 0023     		movs	r3, #0
 2141 023c 16E0     		b	.L108
 2142              	.L122:
 881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2143              		.loc 1 881 5
 2144 023e 00BF     		nop
ARM GAS  /tmp/cc6RPj0P.s 			page 58


 2145 0240 02E0     		b	.L114
 2146              	.L123:
 890:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2147              		.loc 1 890 5
 2148 0242 00BF     		nop
 2149 0244 00E0     		b	.L114
 2150              	.L124:
 918:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 2151              		.loc 1 918 5
 2152 0246 00BF     		nop
 2153              	.L114:
 981:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** memerr:
 982:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.memerr);
 983:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("seg == NULL", seg == NULL);
 2154              		.loc 1 984 3
 2155 0248 FB69     		ldr	r3, [r7, #28]
 2156 024a 002B     		cmp	r3, #0
 2157 024c 06D0     		beq	.L120
 2158              		.loc 1 984 3 is_stmt 0 discriminator 1
 2159 024e 094B     		ldr	r3, .L125
 2160 0250 4FF47672 		mov	r2, #984
 2161 0254 0D49     		ldr	r1, .L125+24
 2162 0256 0948     		ldr	r0, .L125+8
 2163 0258 FFF7FEFF 		bl	printf
 2164              	.L120:
 985:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 2165              		.loc 1 985 6 is_stmt 1
 2166 025c 3B69     		ldr	r3, [r7, #16]
 2167 025e 002B     		cmp	r3, #0
 2168 0260 02D0     		beq	.L121
 986:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_free(p);
 2169              		.loc 1 986 5
 2170 0262 3869     		ldr	r0, [r7, #16]
 2171 0264 FFF7FEFF 		bl	pbuf_free
 2172              	.L121:
 987:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 988:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_MEM;
 2173              		.loc 1 989 10
 2174 0268 4FF0FF33 		mov	r3, #-1
 2175              	.L108:
 990:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2176              		.loc 1 990 1
 2177 026c 1846     		mov	r0, r3
 2178 026e 2437     		adds	r7, r7, #36
 2179              	.LCFI28:
 2180              		.cfi_def_cfa_offset 12
 2181 0270 BD46     		mov	sp, r7
 2182              	.LCFI29:
 2183              		.cfi_def_cfa_register 13
 2184              		@ sp needed
 2185 0272 90BD     		pop	{r4, r7, pc}
 2186              	.L126:
 2187              		.align	2
 2188              	.L125:
 2189 0274 00000000 		.word	.LC0
ARM GAS  /tmp/cc6RPj0P.s 			page 59


 2190 0278 90030000 		.word	.LC24
 2191 027c 50000000 		.word	.LC2
 2192 0280 B4030000 		.word	.LC25
 2193 0284 D8030000 		.word	.LC26
 2194 0288 E8030000 		.word	.LC27
 2195 028c F8030000 		.word	.LC28
 2196              		.cfi_endproc
 2197              	.LFE138:
 2199              		.section	.rodata
 2200              		.align	2
 2201              	.LC29:
 2202 0404 7463705F 		.ascii	"tcp_send_fin: invalid pcb\000"
 2202      73656E64 
 2202      5F66696E 
 2202      3A20696E 
 2202      76616C69 
 2203              		.section	.text.tcp_send_fin,"ax",%progbits
 2204              		.align	1
 2205              		.global	tcp_send_fin
 2206              		.syntax unified
 2207              		.thumb
 2208              		.thumb_func
 2209              		.fpu fpv4-sp-d16
 2211              	tcp_send_fin:
 2212              	.LFB139:
 991:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
 992:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
 993:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_close() to send a segment including FIN flag but not data.
 994:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This FIN may be added to an existing segment or a new, otherwise empty
 995:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * segment is enqueued.
 996:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
 997:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb over which to send a segment
 998:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if sent, another err_t otherwise
 999:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1000:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1001:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_send_fin(struct tcp_pcb *pcb)
1002:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2213              		.loc 1 1002 1
 2214              		.cfi_startproc
 2215              		@ args = 0, pretend = 0, frame = 16
 2216              		@ frame_needed = 1, uses_anonymous_args = 0
 2217 0000 90B5     		push	{r4, r7, lr}
 2218              	.LCFI30:
 2219              		.cfi_def_cfa_offset 12
 2220              		.cfi_offset 4, -12
 2221              		.cfi_offset 7, -8
 2222              		.cfi_offset 14, -4
 2223 0002 85B0     		sub	sp, sp, #20
 2224              	.LCFI31:
 2225              		.cfi_def_cfa_offset 32
 2226 0004 00AF     		add	r7, sp, #0
 2227              	.LCFI32:
 2228              		.cfi_def_cfa_register 7
 2229 0006 7860     		str	r0, [r7, #4]
1003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_send_fin: invalid pcb", pcb != NULL);
 2230              		.loc 1 1003 3
 2231 0008 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6RPj0P.s 			page 60


 2232 000a 002B     		cmp	r3, #0
 2233 000c 06D1     		bne	.L128
 2234              		.loc 1 1003 3 is_stmt 0 discriminator 1
 2235 000e 214B     		ldr	r3, .L133
 2236 0010 40F2EB32 		movw	r2, #1003
 2237 0014 2049     		ldr	r1, .L133+4
 2238 0016 2148     		ldr	r0, .L133+8
 2239 0018 FFF7FEFF 		bl	printf
 2240              	.L128:
1004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1005:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* first, try to add the fin to the last unsent segment */
1006:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent != NULL) {
 2241              		.loc 1 1006 10 is_stmt 1
 2242 001c 7B68     		ldr	r3, [r7, #4]
 2243 001e DB6E     		ldr	r3, [r3, #108]
 2244              		.loc 1 1006 6
 2245 0020 002B     		cmp	r3, #0
 2246 0022 2ED0     		beq	.L129
 2247              	.LBB14:
1007:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *last_unsent;
1008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (last_unsent = pcb->unsent; last_unsent->next != NULL;
 2248              		.loc 1 1008 22
 2249 0024 7B68     		ldr	r3, [r7, #4]
 2250 0026 DB6E     		ldr	r3, [r3, #108]
 2251 0028 FB60     		str	r3, [r7, #12]
 2252              		.loc 1 1008 5
 2253 002a 02E0     		b	.L130
 2254              	.L131:
1009:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 2255              		.loc 1 1009 22
 2256 002c FB68     		ldr	r3, [r7, #12]
 2257 002e 1B68     		ldr	r3, [r3]
 2258 0030 FB60     		str	r3, [r7, #12]
 2259              	.L130:
1008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 2260              		.loc 1 1008 48 discriminator 1
 2261 0032 FB68     		ldr	r3, [r7, #12]
 2262 0034 1B68     		ldr	r3, [r3]
1008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          last_unsent = last_unsent->next);
 2263              		.loc 1 1008 5 discriminator 1
 2264 0036 002B     		cmp	r3, #0
 2265 0038 F8D1     		bne	.L131
1010:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((TCPH_FLAGS(last_unsent->tcphdr) & (TCP_SYN | TCP_FIN | TCP_RST)) == 0) {
 2266              		.loc 1 1011 10
 2267 003a FB68     		ldr	r3, [r7, #12]
 2268 003c DB68     		ldr	r3, [r3, #12]
 2269 003e 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2270 0040 9BB2     		uxth	r3, r3
 2271 0042 1846     		mov	r0, r3
 2272 0044 FFF7FEFF 		bl	lwip_htons
 2273 0048 0346     		mov	r3, r0
 2274 004a DBB2     		uxtb	r3, r3
 2275              		.loc 1 1011 42
 2276 004c 03F00703 		and	r3, r3, #7
 2277              		.loc 1 1011 8
 2278 0050 002B     		cmp	r3, #0
ARM GAS  /tmp/cc6RPj0P.s 			page 61


 2279 0052 16D1     		bne	.L129
1012:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* no SYN/FIN/RST flag in the header, we can add the FIN flag */
1013:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(last_unsent->tcphdr, TCP_FIN);
 2280              		.loc 1 1013 7
 2281 0054 FB68     		ldr	r3, [r7, #12]
 2282 0056 DB68     		ldr	r3, [r3, #12]
 2283 0058 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2284 005a 9CB2     		uxth	r4, r3
 2285 005c 0120     		movs	r0, #1
 2286 005e FFF7FEFF 		bl	lwip_htons
 2287 0062 0346     		mov	r3, r0
 2288 0064 1A46     		mov	r2, r3
 2289 0066 FB68     		ldr	r3, [r7, #12]
 2290 0068 DB68     		ldr	r3, [r3, #12]
 2291 006a 2243     		orrs	r2, r2, r4
 2292 006c 92B2     		uxth	r2, r2
 2293 006e 9A81     		strh	r2, [r3, #12]	@ unaligned
1014:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_FIN);
 2294              		.loc 1 1014 7
 2295 0070 7B68     		ldr	r3, [r7, #4]
 2296 0072 5B8B     		ldrh	r3, [r3, #26]
 2297 0074 43F02003 		orr	r3, r3, #32
 2298 0078 9AB2     		uxth	r2, r3
 2299 007a 7B68     		ldr	r3, [r7, #4]
 2300 007c 5A83     		strh	r2, [r3, #26]	@ movhi
1015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_OK;
 2301              		.loc 1 1015 14
 2302 007e 0023     		movs	r3, #0
 2303 0080 04E0     		b	.L132
 2304              	.L129:
 2305              	.LBE14:
1016:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1017:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1018:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* no data, no length, flags, copy=1, no optdata */
1019:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return tcp_enqueue_flags(pcb, TCP_FIN);
 2306              		.loc 1 1019 10
 2307 0082 0121     		movs	r1, #1
 2308 0084 7868     		ldr	r0, [r7, #4]
 2309 0086 FFF7FEFF 		bl	tcp_enqueue_flags
 2310 008a 0346     		mov	r3, r0
 2311              	.L132:
1020:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2312              		.loc 1 1020 1
 2313 008c 1846     		mov	r0, r3
 2314 008e 1437     		adds	r7, r7, #20
 2315              	.LCFI33:
 2316              		.cfi_def_cfa_offset 12
 2317 0090 BD46     		mov	sp, r7
 2318              	.LCFI34:
 2319              		.cfi_def_cfa_register 13
 2320              		@ sp needed
 2321 0092 90BD     		pop	{r4, r7, pc}
 2322              	.L134:
 2323              		.align	2
 2324              	.L133:
 2325 0094 00000000 		.word	.LC0
 2326 0098 04040000 		.word	.LC29
ARM GAS  /tmp/cc6RPj0P.s 			page 62


 2327 009c 50000000 		.word	.LC2
 2328              		.cfi_endproc
 2329              	.LFE139:
 2331              		.section	.rodata
 2332 041e 0000     		.align	2
 2333              	.LC30:
 2334 0420 7463705F 		.ascii	"tcp_enqueue_flags: need either TCP_SYN or TCP_FIN i"
 2334      656E7175 
 2334      6575655F 
 2334      666C6167 
 2334      733A206E 
 2335 0453 6E20666C 		.ascii	"n flags (programmer violates API)\000"
 2335      61677320 
 2335      2870726F 
 2335      6772616D 
 2335      6D657220 
 2336 0475 000000   		.align	2
 2337              	.LC31:
 2338 0478 7463705F 		.ascii	"tcp_enqueue_flags: invalid pcb\000"
 2338      656E7175 
 2338      6575655F 
 2338      666C6167 
 2338      733A2069 
 2339 0497 00       		.align	2
 2340              	.LC32:
 2341 0498 7463705F 		.ascii	"tcp_enqueue_flags: check that first pbuf can hold o"
 2341      656E7175 
 2341      6575655F 
 2341      666C6167 
 2341      733A2063 
 2342 04cb 70746C65 		.ascii	"ptlen\000"
 2342      6E00
 2343 04d1 000000   		.align	2
 2344              	.LC33:
 2345 04d4 7365672D 		.ascii	"seg->tcphdr not aligned\000"
 2345      3E746370 
 2345      68647220 
 2345      6E6F7420 
 2345      616C6967 
 2346              		.align	2
 2347              	.LC34:
 2348 04ec 7463705F 		.ascii	"tcp_enqueue_flags: invalid segment length\000"
 2348      656E7175 
 2348      6575655F 
 2348      666C6167 
 2348      733A2069 
 2349 0516 0000     		.align	2
 2350              	.LC35:
 2351 0518 7463705F 		.ascii	"tcp_enqueue_flags: invalid queue length\000"
 2351      656E7175 
 2351      6575655F 
 2351      666C6167 
 2351      733A2069 
 2352              		.section	.text.tcp_enqueue_flags,"ax",%progbits
 2353              		.align	1
 2354              		.global	tcp_enqueue_flags
 2355              		.syntax unified
ARM GAS  /tmp/cc6RPj0P.s 			page 63


 2356              		.thumb
 2357              		.thumb_func
 2358              		.fpu fpv4-sp-d16
 2360              	tcp_enqueue_flags:
 2361              	.LFB140:
1021:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1022:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1023:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Enqueue SYN or FIN for transmission.
1024:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by @ref tcp_connect, tcp_listen_input, and @ref tcp_close
1026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (via @ref tcp_send_fin)
1027:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1028:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection.
1029:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param flags TCP header flags to set in the outgoing segment.
1030:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1031:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1032:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_enqueue_flags(struct tcp_pcb *pcb, u8_t flags)
1033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2362              		.loc 1 1033 1
 2363              		.cfi_startproc
 2364              		@ args = 0, pretend = 0, frame = 32
 2365              		@ frame_needed = 1, uses_anonymous_args = 0
 2366 0000 80B5     		push	{r7, lr}
 2367              	.LCFI35:
 2368              		.cfi_def_cfa_offset 8
 2369              		.cfi_offset 7, -8
 2370              		.cfi_offset 14, -4
 2371 0002 8AB0     		sub	sp, sp, #40
 2372              	.LCFI36:
 2373              		.cfi_def_cfa_offset 48
 2374 0004 02AF     		add	r7, sp, #8
 2375              	.LCFI37:
 2376              		.cfi_def_cfa 7, 40
 2377 0006 7860     		str	r0, [r7, #4]
 2378 0008 0B46     		mov	r3, r1
 2379 000a FB70     		strb	r3, [r7, #3]
1034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1035:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1036:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optflags = 0;
 2380              		.loc 1 1036 8
 2381 000c 0023     		movs	r3, #0
 2382 000e FB77     		strb	r3, [r7, #31]
1037:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = 0;
 2383              		.loc 1 1037 8
 2384 0010 0023     		movs	r3, #0
 2385 0012 FB75     		strb	r3, [r7, #23]
1038:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1039:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: queuelen: %"U16_F"\n", (u16_t)pcb->snd_queuelen)
1040:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: need either TCP_SYN or TCP_FIN in flags (programmer violates API)
 2386              		.loc 1 1041 3
 2387 0014 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2388 0016 03F00303 		and	r3, r3, #3
 2389 001a 002B     		cmp	r3, #0
 2390 001c 06D1     		bne	.L136
 2391              		.loc 1 1041 3 is_stmt 0 discriminator 1
 2392 001e 674B     		ldr	r3, .L153
ARM GAS  /tmp/cc6RPj0P.s 			page 64


 2393 0020 40F21242 		movw	r2, #1042
 2394 0024 6649     		ldr	r1, .L153+4
 2395 0026 6748     		ldr	r0, .L153+8
 2396 0028 FFF7FEFF 		bl	printf
 2397              	.L136:
1042:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (flags & (TCP_SYN | TCP_FIN)) != 0);
1043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid pcb", pcb != NULL);
 2398              		.loc 1 1043 3 is_stmt 1
 2399 002c 7B68     		ldr	r3, [r7, #4]
 2400 002e 002B     		cmp	r3, #0
 2401 0030 06D1     		bne	.L137
 2402              		.loc 1 1043 3 is_stmt 0 discriminator 1
 2403 0032 624B     		ldr	r3, .L153
 2404 0034 40F21342 		movw	r2, #1043
 2405 0038 6349     		ldr	r1, .L153+12
 2406 003a 6248     		ldr	r0, .L153+8
 2407 003c FFF7FEFF 		bl	printf
 2408              	.L137:
1044:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* No need to check pcb->snd_queuelen if only SYN or FIN are allowed! */
1046:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1047:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Get options for this segment. This is a special case since this is the
1048:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      only place where a SYN can be sent. */
1049:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (flags & TCP_SYN) {
 2409              		.loc 1 1049 13 is_stmt 1
 2410 0040 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2411 0042 03F00203 		and	r3, r3, #2
 2412              		.loc 1 1049 6
 2413 0046 002B     		cmp	r3, #0
 2414 0048 01D0     		beq	.L138
1050:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_MSS;
 2415              		.loc 1 1050 14
 2416 004a 0123     		movs	r3, #1
 2417 004c FB77     		strb	r3, [r7, #31]
 2418              	.L138:
1051:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1052:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pcb->state != SYN_RCVD) || (pcb->flags & TF_WND_SCALE)) {
1053:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* In a <SYN,ACK> (sent in state SYN_RCVD), the window scale option may only
1054:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          be sent if we received a window scale option from the remote host. */
1055:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optflags |= TF_SEG_OPTS_WND_SCALE;
1056:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1057:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_WND_SCALE */
1058:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1059:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((pcb->state != SYN_RCVD) || (pcb->flags & TF_SACK)) {
1060:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* In a <SYN,ACK> (sent in state SYN_RCVD), the SACK_PERM option may only
1061:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          be sent if we received a SACK_PERM option from the remote host. */
1062:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optflags |= TF_SEG_OPTS_SACK_PERM;
1063:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1064:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_SACK_OUT */
1065:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1066:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1067:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((pcb->flags & TF_TIMESTAMP) || ((flags & TCP_SYN) && (pcb->state != SYN_RCVD))) {
1068:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Make sure the timestamp option is only included in data segments if we
1069:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        agreed about it with the remote host (and in active open SYN segments). */
1070:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags |= TF_SEG_OPTS_TS;
1071:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1072:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_TCP_TIMESTAMPS */
ARM GAS  /tmp/cc6RPj0P.s 			page 65


1073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(optflags, pcb);
 2419              		.loc 1 1073 12
 2420 004e FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2421 0050 9B00     		lsls	r3, r3, #2
 2422 0052 DBB2     		uxtb	r3, r3
 2423              		.loc 1 1073 10
 2424 0054 03F00403 		and	r3, r3, #4
 2425 0058 FB75     		strb	r3, [r7, #23]
1074:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1075:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Allocate pbuf with room for TCP header + options */
1076:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((p = pbuf_alloc(PBUF_TRANSPORT, optlen, PBUF_RAM)) == NULL) {
 2426              		.loc 1 1076 12
 2427 005a FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 2428 005c 9BB2     		uxth	r3, r3
 2429 005e 4FF42072 		mov	r2, #640
 2430 0062 1946     		mov	r1, r3
 2431 0064 3620     		movs	r0, #54
 2432 0066 FFF7FEFF 		bl	pbuf_alloc
 2433 006a 3861     		str	r0, [r7, #16]
 2434              		.loc 1 1076 6
 2435 006c 3B69     		ldr	r3, [r7, #16]
 2436 006e 002B     		cmp	r3, #0
 2437 0070 09D1     		bne	.L139
1077:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 2438              		.loc 1 1077 5
 2439 0072 7B68     		ldr	r3, [r7, #4]
 2440 0074 5B8B     		ldrh	r3, [r3, #26]
 2441 0076 43F08003 		orr	r3, r3, #128
 2442 007a 9AB2     		uxth	r2, r3
 2443 007c 7B68     		ldr	r3, [r7, #4]
 2444 007e 5A83     		strh	r2, [r3, #26]	@ movhi
1078:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
1079:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 2445              		.loc 1 1079 12
 2446 0080 4FF0FF33 		mov	r3, #-1
 2447 0084 95E0     		b	.L140
 2448              	.L139:
1080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: check that first pbuf can hold optlen",
 2449              		.loc 1 1081 3
 2450 0086 3B69     		ldr	r3, [r7, #16]
 2451 0088 5A89     		ldrh	r2, [r3, #10]
 2452 008a FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 2453 008c 9BB2     		uxth	r3, r3
 2454 008e 9A42     		cmp	r2, r3
 2455 0090 06D2     		bcs	.L141
 2456              		.loc 1 1081 3 is_stmt 0 discriminator 1
 2457 0092 4A4B     		ldr	r3, .L153
 2458 0094 40F23A42 		movw	r2, #1082
 2459 0098 4C49     		ldr	r1, .L153+16
 2460 009a 4A48     		ldr	r0, .L153+8
 2461 009c FFF7FEFF 		bl	printf
 2462              	.L141:
1082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               (p->len >= optlen));
1083:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Allocate memory for tcp_seg, and fill in fields. */
1085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((seg = tcp_create_segment(pcb, p, flags, pcb->snd_lbb, optflags)) == NULL) {
ARM GAS  /tmp/cc6RPj0P.s 			page 66


 2463              		.loc 1 1085 14 is_stmt 1
 2464 00a0 7B68     		ldr	r3, [r7, #4]
 2465 00a2 D96D     		ldr	r1, [r3, #92]
 2466 00a4 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 2467 00a6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2468 00a8 0093     		str	r3, [sp]
 2469 00aa 0B46     		mov	r3, r1
 2470 00ac 3969     		ldr	r1, [r7, #16]
 2471 00ae 7868     		ldr	r0, [r7, #4]
 2472 00b0 FFF7FEFF 		bl	tcp_create_segment
 2473 00b4 F860     		str	r0, [r7, #12]
 2474              		.loc 1 1085 6
 2475 00b6 FB68     		ldr	r3, [r7, #12]
 2476 00b8 002B     		cmp	r3, #0
 2477 00ba 09D1     		bne	.L142
1086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_NAGLEMEMERR);
 2478              		.loc 1 1086 5
 2479 00bc 7B68     		ldr	r3, [r7, #4]
 2480 00be 5B8B     		ldrh	r3, [r3, #26]
 2481 00c0 43F08003 		orr	r3, r3, #128
 2482 00c4 9AB2     		uxth	r2, r3
 2483 00c6 7B68     		ldr	r3, [r7, #4]
 2484 00c8 5A83     		strh	r2, [r3, #26]	@ movhi
1087:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.memerr);
1088:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 2485              		.loc 1 1088 12
 2486 00ca 4FF0FF33 		mov	r3, #-1
 2487 00ce 70E0     		b	.L140
 2488              	.L142:
1089:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("seg->tcphdr not aligned", ((mem_ptr_t)seg->tcphdr % LWIP_MIN(MEM_ALIGNMENT, 4)) == 0
 2489              		.loc 1 1090 3
 2490 00d0 FB68     		ldr	r3, [r7, #12]
 2491 00d2 DB68     		ldr	r3, [r3, #12]
 2492 00d4 03F00303 		and	r3, r3, #3
 2493 00d8 002B     		cmp	r3, #0
 2494 00da 06D0     		beq	.L143
 2495              		.loc 1 1090 3 is_stmt 0 discriminator 1
 2496 00dc 374B     		ldr	r3, .L153
 2497 00de 40F24242 		movw	r2, #1090
 2498 00e2 3B49     		ldr	r1, .L153+20
 2499 00e4 3748     		ldr	r0, .L153+8
 2500 00e6 FFF7FEFF 		bl	printf
 2501              	.L143:
1091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_enqueue_flags: invalid segment length", seg->len == 0);
 2502              		.loc 1 1091 3 is_stmt 1
 2503 00ea FB68     		ldr	r3, [r7, #12]
 2504 00ec 1B89     		ldrh	r3, [r3, #8]
 2505 00ee 002B     		cmp	r3, #0
 2506 00f0 06D0     		beq	.L144
 2507              		.loc 1 1091 3 is_stmt 0 discriminator 1
 2508 00f2 324B     		ldr	r3, .L153
 2509 00f4 40F24342 		movw	r2, #1091
 2510 00f8 3649     		ldr	r1, .L153+24
 2511 00fa 3248     		ldr	r0, .L153+8
 2512 00fc FFF7FEFF 		bl	printf
 2513              	.L144:
ARM GAS  /tmp/cc6RPj0P.s 			page 67


1092:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG | LWIP_DBG_TRACE,
1094:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_enqueue_flags: queueing %"U32_F":%"U32_F" (0x%"X16_F")\n",
1095:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                lwip_ntohl(seg->tcphdr->seqno),
1096:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg),
1097:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                (u16_t)flags));
1098:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1099:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Now append seg to pcb->unsent queue */
1100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
 2514              		.loc 1 1100 10 is_stmt 1
 2515 0100 7B68     		ldr	r3, [r7, #4]
 2516 0102 DB6E     		ldr	r3, [r3, #108]
 2517              		.loc 1 1100 6
 2518 0104 002B     		cmp	r3, #0
 2519 0106 03D1     		bne	.L145
1101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg;
 2520              		.loc 1 1101 17
 2521 0108 7B68     		ldr	r3, [r7, #4]
 2522 010a FA68     		ldr	r2, [r7, #12]
 2523 010c DA66     		str	r2, [r3, #108]
 2524 010e 0DE0     		b	.L146
 2525              	.L145:
 2526              	.LBB15:
1102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     struct tcp_seg *useg;
1104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (useg = pcb->unsent; useg->next != NULL; useg = useg->next);
 2527              		.loc 1 1104 15
 2528 0110 7B68     		ldr	r3, [r7, #4]
 2529 0112 DB6E     		ldr	r3, [r3, #108]
 2530 0114 BB61     		str	r3, [r7, #24]
 2531              		.loc 1 1104 5
 2532 0116 02E0     		b	.L147
 2533              	.L148:
 2534              		.loc 1 1104 55 discriminator 3
 2535 0118 BB69     		ldr	r3, [r7, #24]
 2536 011a 1B68     		ldr	r3, [r3]
 2537 011c BB61     		str	r3, [r7, #24]
 2538              	.L147:
 2539              		.loc 1 1104 34 discriminator 1
 2540 011e BB69     		ldr	r3, [r7, #24]
 2541 0120 1B68     		ldr	r3, [r3]
 2542              		.loc 1 1104 5 discriminator 1
 2543 0122 002B     		cmp	r3, #0
 2544 0124 F8D1     		bne	.L148
1105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     useg->next = seg;
 2545              		.loc 1 1105 16
 2546 0126 BB69     		ldr	r3, [r7, #24]
 2547 0128 FA68     		ldr	r2, [r7, #12]
 2548 012a 1A60     		str	r2, [r3]
 2549              	.L146:
 2550              	.LBE15:
1106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The new unsent tail has no space */
1109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent_oversize = 0;
 2551              		.loc 1 1109 24
 2552 012c 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6RPj0P.s 			page 68


 2553 012e 0022     		movs	r2, #0
 2554 0130 A3F86820 		strh	r2, [r3, #104]	@ movhi
1110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* SYN and FIN bump the sequence number */
1113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((flags & TCP_SYN) || (flags & TCP_FIN)) {
 2555              		.loc 1 1113 14
 2556 0134 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2557 0136 03F00203 		and	r3, r3, #2
 2558              		.loc 1 1113 6
 2559 013a 002B     		cmp	r3, #0
 2560 013c 04D1     		bne	.L149
 2561              		.loc 1 1113 35 discriminator 1
 2562 013e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2563 0140 03F00103 		and	r3, r3, #1
 2564              		.loc 1 1113 25 discriminator 1
 2565 0144 002B     		cmp	r3, #0
 2566 0146 04D0     		beq	.L150
 2567              	.L149:
1114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_lbb++;
 2568              		.loc 1 1114 8
 2569 0148 7B68     		ldr	r3, [r7, #4]
 2570 014a DB6D     		ldr	r3, [r3, #92]
 2571              		.loc 1 1114 17
 2572 014c 5A1C     		adds	r2, r3, #1
 2573 014e 7B68     		ldr	r3, [r7, #4]
 2574 0150 DA65     		str	r2, [r3, #92]
 2575              	.L150:
1115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* optlen does not influence snd_buf */
1116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (flags & TCP_FIN) {
 2576              		.loc 1 1117 13
 2577 0152 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2578 0154 03F00103 		and	r3, r3, #1
 2579              		.loc 1 1117 6
 2580 0158 002B     		cmp	r3, #0
 2581 015a 06D0     		beq	.L151
1118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_FIN);
 2582              		.loc 1 1118 5
 2583 015c 7B68     		ldr	r3, [r7, #4]
 2584 015e 5B8B     		ldrh	r3, [r3, #26]
 2585 0160 43F02003 		orr	r3, r3, #32
 2586 0164 9AB2     		uxth	r2, r3
 2587 0166 7B68     		ldr	r3, [r7, #4]
 2588 0168 5A83     		strh	r2, [r3, #26]	@ movhi
 2589              	.L151:
1119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* update number of segments on the queues */
1122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->snd_queuelen += pbuf_clen(seg->p);
 2590              		.loc 1 1122 37
 2591 016a FB68     		ldr	r3, [r7, #12]
 2592 016c 5B68     		ldr	r3, [r3, #4]
 2593              		.loc 1 1122 24
 2594 016e 1846     		mov	r0, r3
 2595 0170 FFF7FEFF 		bl	pbuf_clen
 2596 0174 0346     		mov	r3, r0
ARM GAS  /tmp/cc6RPj0P.s 			page 69


 2597 0176 1A46     		mov	r2, r3
 2598              		.loc 1 1122 21
 2599 0178 7B68     		ldr	r3, [r7, #4]
 2600 017a B3F86630 		ldrh	r3, [r3, #102]
 2601 017e 1344     		add	r3, r3, r2
 2602 0180 9AB2     		uxth	r2, r3
 2603 0182 7B68     		ldr	r3, [r7, #4]
 2604 0184 A3F86620 		strh	r2, [r3, #102]	@ movhi
1123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_QLEN_DEBUG, ("tcp_enqueue_flags: %"S16_F" (after enqueued)\n", pcb->snd_queuelen)
1124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->snd_queuelen != 0) {
 2605              		.loc 1 1124 10
 2606 0188 7B68     		ldr	r3, [r7, #4]
 2607 018a B3F86630 		ldrh	r3, [r3, #102]
 2608              		.loc 1 1124 6
 2609 018e 002B     		cmp	r3, #0
 2610 0190 0ED0     		beq	.L152
1125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("tcp_enqueue_flags: invalid queue length",
 2611              		.loc 1 1125 5
 2612 0192 7B68     		ldr	r3, [r7, #4]
 2613 0194 1B6F     		ldr	r3, [r3, #112]
 2614 0196 002B     		cmp	r3, #0
 2615 0198 0AD1     		bne	.L152
 2616              		.loc 1 1125 5 is_stmt 0 discriminator 1
 2617 019a 7B68     		ldr	r3, [r7, #4]
 2618 019c DB6E     		ldr	r3, [r3, #108]
 2619 019e 002B     		cmp	r3, #0
 2620 01a0 06D1     		bne	.L152
 2621              		.loc 1 1125 5 discriminator 2
 2622 01a2 064B     		ldr	r3, .L153
 2623 01a4 40F26642 		movw	r2, #1126
 2624 01a8 0B49     		ldr	r1, .L153+28
 2625 01aa 0648     		ldr	r0, .L153+8
 2626 01ac FFF7FEFF 		bl	printf
 2627              	.L152:
1126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 pcb->unacked != NULL || pcb->unsent != NULL);
1127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 2628              		.loc 1 1129 10 is_stmt 1
 2629 01b0 0023     		movs	r3, #0
 2630              	.L140:
1130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 2631              		.loc 1 1130 1
 2632 01b2 1846     		mov	r0, r3
 2633 01b4 2037     		adds	r7, r7, #32
 2634              	.LCFI38:
 2635              		.cfi_def_cfa_offset 8
 2636 01b6 BD46     		mov	sp, r7
 2637              	.LCFI39:
 2638              		.cfi_def_cfa_register 13
 2639              		@ sp needed
 2640 01b8 80BD     		pop	{r7, pc}
 2641              	.L154:
 2642 01ba 00BF     		.align	2
 2643              	.L153:
 2644 01bc 00000000 		.word	.LC0
 2645 01c0 20040000 		.word	.LC30
ARM GAS  /tmp/cc6RPj0P.s 			page 70


 2646 01c4 50000000 		.word	.LC2
 2647 01c8 78040000 		.word	.LC31
 2648 01cc 98040000 		.word	.LC32
 2649 01d0 D4040000 		.word	.LC33
 2650 01d4 EC040000 		.word	.LC34
 2651 01d8 18050000 		.word	.LC35
 2652              		.cfi_endproc
 2653              	.LFE140:
 2655              		.section	.rodata
 2656              		.align	2
 2657              	.LC36:
 2658 0540 7463705F 		.ascii	"tcp_output: invalid pcb\000"
 2658      6F757470 
 2658      75743A20 
 2658      696E7661 
 2658      6C696420 
 2659              		.align	2
 2660              	.LC37:
 2661 0558 646F6E27 		.ascii	"don't call tcp_output for listen-pcbs\000"
 2661      74206361 
 2661      6C6C2074 
 2661      63705F6F 
 2661      75747075 
 2662 057e 0000     		.align	2
 2663              	.LC38:
 2664 0580 52535420 		.ascii	"RST not expected here!\000"
 2664      6E6F7420 
 2664      65787065 
 2664      63746564 
 2664      20686572 
 2665              		.section	.text.tcp_output,"ax",%progbits
 2666              		.align	1
 2667              		.global	tcp_output
 2668              		.syntax unified
 2669              		.thumb
 2670              		.thumb_func
 2671              		.fpu fpv4-sp-d16
 2673              	tcp_output:
 2674              	.LFB141:
1131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Build a timestamp option (12 bytes long) at the specified options pointer)
1134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
1136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the timestamp option
1137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_timestamp_option(const struct tcp_pcb *pcb, u32_t *opts)
1140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_timestamp_option: invalid pcb", pcb != NULL);
1142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with two NOP options to make everything nicely aligned */
1144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[0] = PP_HTONL(0x0101080A);
1145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[1] = lwip_htonl(sys_now());
1146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[2] = lwip_htonl(pcb->ts_recent);
1147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
ARM GAS  /tmp/cc6RPj0P.s 			page 71


1149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Calculates the number of SACK entries that should be generated.
1153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * It takes into account whether TF_SACK flag is set,
1154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * the number of SACK entries in tcp_pcb that are valid,
1155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * as well as the available options size.
1156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
1158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optlen the length of other TCP options (in bytes)
1159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return the number of SACK ranges that can be used
1160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static u8_t
1162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_get_num_sacks(const struct tcp_pcb *pcb, u8_t optlen)
1163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t num_sacks = 0;
1165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_get_num_sacks: invalid pcb", pcb != NULL);
1167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_SACK) {
1169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t i;
1170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* The first SACK takes up 12 bytes (it includes SACK header and two NOP options),
1172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        each additional one - 8 bytes. */
1173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen += 12;
1174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Max options size = 40, number of SACK array entries = LWIP_TCP_MAX_SACK_NUM */
1176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (i = 0; (i < LWIP_TCP_MAX_SACK_NUM) && (optlen <= TCP_MAX_OPTION_BYTES) &&
1177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          LWIP_TCP_SACK_VALID(pcb, i); ++i) {
1178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ++num_sacks;
1179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       optlen += 8;
1180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return num_sacks;
1184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Build a SACK option (12 or more bytes long) at the specified options pointer)
1187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp_pcb
1189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the SACK option
1190:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param num_sacks the number of SACKs to store
1191:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1192:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1193:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_sack_option(const struct tcp_pcb *pcb, u32_t *opts, u8_t num_sacks)
1194:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1195:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t i;
1196:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1197:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_sack_option: invalid pcb", pcb != NULL);
1198:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_sack_option: invalid opts", opts != NULL);
1199:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1200:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with two NOP options to make everything nicely aligned.
1201:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      We add the length (of just the SACK option, not the NOPs in front of it),
1202:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      which is 2B of header, plus 8B for each SACK. */
1203:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *(opts++) = PP_HTONL(0x01010500 + 2 + num_sacks * 8);
1204:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1205:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (i = 0; i < num_sacks; ++i) {
ARM GAS  /tmp/cc6RPj0P.s 			page 72


1206:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *(opts++) = lwip_htonl(pcb->rcv_sacks[i].left);
1207:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *(opts++) = lwip_htonl(pcb->rcv_sacks[i].right);
1208:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1209:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1210:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1211:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1212:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1213:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1214:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Build a window scale option (3 bytes long) at the specified options pointer)
1215:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1216:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param opts option pointer where to store the window scale option
1217:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1218:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1219:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_build_wnd_scale_option(u32_t *opts)
1220:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
1221:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_build_wnd_scale_option: invalid opts", opts != NULL);
1222:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1223:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Pad with one NOP option to make everything nicely aligned */
1224:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts[0] = PP_HTONL(0x01030300 | TCP_RCV_SCALE);
1225:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
1226:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1227:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1228:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1229:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @ingroup tcp_raw
1230:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Find out what we can send and send it
1231:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1232:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to send data
1233:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return ERR_OK if data has been sent or nothing to send
1234:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *         another err_t on error
1235:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1236:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1237:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output(struct tcp_pcb *pcb)
1238:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 2675              		.loc 1 1238 1
 2676              		.cfi_startproc
 2677              		@ args = 0, pretend = 0, frame = 40
 2678              		@ frame_needed = 1, uses_anonymous_args = 0
 2679 0000 B0B5     		push	{r4, r5, r7, lr}
 2680              	.LCFI40:
 2681              		.cfi_def_cfa_offset 16
 2682              		.cfi_offset 4, -16
 2683              		.cfi_offset 5, -12
 2684              		.cfi_offset 7, -8
 2685              		.cfi_offset 14, -4
 2686 0002 8AB0     		sub	sp, sp, #40
 2687              	.LCFI41:
 2688              		.cfi_def_cfa_offset 56
 2689 0004 00AF     		add	r7, sp, #0
 2690              	.LCFI42:
 2691              		.cfi_def_cfa_register 7
 2692 0006 7860     		str	r0, [r7, #4]
1239:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg, *useg;
1240:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t wnd, snd_nxt;
1241:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1242:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1243:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1244:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   s16_t i = 0;
ARM GAS  /tmp/cc6RPj0P.s 			page 73


1245:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1246:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1247:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT_CORE_LOCKED();
1248:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1249:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output: invalid pcb", pcb != NULL);
 2693              		.loc 1 1249 3
 2694 0008 7B68     		ldr	r3, [r7, #4]
 2695 000a 002B     		cmp	r3, #0
 2696 000c 06D1     		bne	.L156
 2697              		.loc 1 1249 3 is_stmt 0 discriminator 1
 2698 000e 9E4B     		ldr	r3, .L204
 2699 0010 40F2E142 		movw	r2, #1249
 2700 0014 9D49     		ldr	r1, .L204+4
 2701 0016 9E48     		ldr	r0, .L204+8
 2702 0018 FFF7FEFF 		bl	printf
 2703              	.L156:
1250:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* pcb->state LISTEN not allowed here */
1251:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("don't call tcp_output for listen-pcbs",
 2704              		.loc 1 1251 3 is_stmt 1
 2705 001c 7B68     		ldr	r3, [r7, #4]
 2706 001e 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 2707 0020 012B     		cmp	r3, #1
 2708 0022 06D1     		bne	.L157
 2709              		.loc 1 1251 3 is_stmt 0 discriminator 1
 2710 0024 984B     		ldr	r3, .L204
 2711 0026 40F2E442 		movw	r2, #1252
 2712 002a 9A49     		ldr	r1, .L204+12
 2713 002c 9848     		ldr	r0, .L204+8
 2714 002e FFF7FEFF 		bl	printf
 2715              	.L157:
1252:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               pcb->state != LISTEN);
1253:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1254:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* First, check if we are invoked by the TCP input processing
1255:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      code. If so, we do not output anything. Instead, we rely on the
1256:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      input processing code to call us when input processing is done
1257:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      with. */
1258:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_input_pcb == pcb) {
 2716              		.loc 1 1258 21 is_stmt 1
 2717 0032 994B     		ldr	r3, .L204+16
 2718 0034 1B68     		ldr	r3, [r3]
 2719              		.loc 1 1258 6
 2720 0036 7A68     		ldr	r2, [r7, #4]
 2721 0038 9A42     		cmp	r2, r3
 2722 003a 01D1     		bne	.L158
1259:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 2723              		.loc 1 1259 12
 2724 003c 0023     		movs	r3, #0
 2725 003e CEE1     		b	.L159
 2726              	.L158:
1260:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1261:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1262:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = LWIP_MIN(pcb->snd_wnd, pcb->cwnd);
 2727              		.loc 1 1262 9
 2728 0040 7B68     		ldr	r3, [r7, #4]
 2729 0042 B3F84820 		ldrh	r2, [r3, #72]
 2730 0046 7B68     		ldr	r3, [r7, #4]
 2731 0048 B3F86030 		ldrh	r3, [r3, #96]
ARM GAS  /tmp/cc6RPj0P.s 			page 74


 2732 004c 9342     		cmp	r3, r2
 2733 004e 28BF     		it	cs
 2734 0050 1346     		movcs	r3, r2
 2735 0052 9BB2     		uxth	r3, r3
 2736              		.loc 1 1262 7
 2737 0054 BB61     		str	r3, [r7, #24]
1263:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1264:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unsent;
 2738              		.loc 1 1264 7
 2739 0056 7B68     		ldr	r3, [r7, #4]
 2740 0058 DB6E     		ldr	r3, [r3, #108]
 2741 005a 7B62     		str	r3, [r7, #36]
1265:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1266:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 2742              		.loc 1 1266 6
 2743 005c 7B6A     		ldr	r3, [r7, #36]
 2744 005e 002B     		cmp	r3, #0
 2745 0060 0BD1     		bne	.L160
1267:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: nothing to send (%p)\n",
1268:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                    (void *)pcb->unsent));
1269:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG, ("tcp_output: snd_wnd %"TCPWNDSIZE_F
1270:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  ", cwnd %"TCPWNDSIZE_F", wnd %"U32_F
1271:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  ", seg == NULL, ack %"U32_F"\n",
1272:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->snd_wnd, pcb->cwnd, wnd, pcb->lastack));
1273:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1274:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* If the TF_ACK_NOW flag is set and the ->unsent queue is empty, construct
1275:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * an empty ACK segment and send it. */
1276:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->flags & TF_ACK_NOW) {
 2746              		.loc 1 1276 12
 2747 0062 7B68     		ldr	r3, [r7, #4]
 2748 0064 5B8B     		ldrh	r3, [r3, #26]
 2749              		.loc 1 1276 20
 2750 0066 03F00203 		and	r3, r3, #2
 2751              		.loc 1 1276 8
 2752 006a 002B     		cmp	r3, #0
 2753 006c 00F0AA81 		beq	.L200
1277:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return tcp_send_empty_ack(pcb);
 2754              		.loc 1 1277 14
 2755 0070 7868     		ldr	r0, [r7, #4]
 2756 0072 FFF7FEFF 		bl	tcp_send_empty_ack
 2757 0076 0346     		mov	r3, r0
 2758 0078 B1E1     		b	.L159
 2759              	.L160:
1278:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1279:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* nothing to send: shortcut out of here */
1280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto output_done;
1281:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1282:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG,
1283:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_output: snd_wnd %"TCPWNDSIZE_F", cwnd %"TCPWNDSIZE_F", wnd %"U32_F
1284:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  ", effwnd %"U32_F", seq %"U32_F", ack %"U32_F"\n",
1285:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  pcb->snd_wnd, pcb->cwnd, wnd,
1286:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len,
1287:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(seg->tcphdr->seqno), pcb->lastack));
1288:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1289:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1290:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = tcp_route(pcb, &pcb->local_ip, &pcb->remote_ip);
 2760              		.loc 1 1290 26
ARM GAS  /tmp/cc6RPj0P.s 			page 75


 2761 007a 7968     		ldr	r1, [r7, #4]
 2762              		.loc 1 1290 42
 2763 007c 7B68     		ldr	r3, [r7, #4]
 2764 007e 0433     		adds	r3, r3, #4
 2765              		.loc 1 1290 11
 2766 0080 1A46     		mov	r2, r3
 2767 0082 7868     		ldr	r0, [r7, #4]
 2768 0084 FFF7FEFF 		bl	tcp_route
 2769 0088 7861     		str	r0, [r7, #20]
1291:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 2770              		.loc 1 1291 6
 2771 008a 7B69     		ldr	r3, [r7, #20]
 2772 008c 002B     		cmp	r3, #0
 2773 008e 02D1     		bne	.L163
1292:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_RTE;
 2774              		.loc 1 1292 12
 2775 0090 6FF00303 		mvn	r3, #3
 2776 0094 A3E1     		b	.L159
 2777              	.L163:
1293:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1294:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1295:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* If we don't have a local IP address, we get one from netif */
1296:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (ip_addr_isany(&pcb->local_ip)) {
 2778              		.loc 1 1296 7
 2779 0096 7B68     		ldr	r3, [r7, #4]
 2780              		.loc 1 1296 6
 2781 0098 002B     		cmp	r3, #0
 2782 009a 03D0     		beq	.L164
 2783              		.loc 1 1296 7 discriminator 1
 2784 009c 7B68     		ldr	r3, [r7, #4]
 2785 009e 1B68     		ldr	r3, [r3]
 2786 00a0 002B     		cmp	r3, #0
 2787 00a2 11D1     		bne	.L165
 2788              	.L164:
 2789              	.LBB16:
1297:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     const ip_addr_t *local_ip = ip_netif_get_local_ip(netif, &pcb->remote_ip);
 2790              		.loc 1 1297 33
 2791 00a4 7B69     		ldr	r3, [r7, #20]
 2792 00a6 002B     		cmp	r3, #0
 2793 00a8 02D0     		beq	.L166
 2794              		.loc 1 1297 33 is_stmt 0 discriminator 1
 2795 00aa 7B69     		ldr	r3, [r7, #20]
 2796 00ac 0433     		adds	r3, r3, #4
 2797 00ae 00E0     		b	.L167
 2798              	.L166:
 2799              		.loc 1 1297 33 discriminator 2
 2800 00b0 0023     		movs	r3, #0
 2801              	.L167:
 2802              		.loc 1 1297 22 is_stmt 1 discriminator 4
 2803 00b2 3B61     		str	r3, [r7, #16]
1298:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (local_ip == NULL) {
 2804              		.loc 1 1298 8 discriminator 4
 2805 00b4 3B69     		ldr	r3, [r7, #16]
 2806 00b6 002B     		cmp	r3, #0
 2807 00b8 02D1     		bne	.L168
1299:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_RTE;
 2808              		.loc 1 1299 14
ARM GAS  /tmp/cc6RPj0P.s 			page 76


 2809 00ba 6FF00303 		mvn	r3, #3
 2810 00be 8EE1     		b	.L159
 2811              	.L168:
1300:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1301:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ip_addr_copy(pcb->local_ip, *local_ip);
 2812              		.loc 1 1301 5
 2813 00c0 3B69     		ldr	r3, [r7, #16]
 2814 00c2 1A68     		ldr	r2, [r3]
 2815 00c4 7B68     		ldr	r3, [r7, #4]
 2816 00c6 1A60     		str	r2, [r3]
 2817              	.L165:
 2818              	.LBE16:
1302:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1303:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1304:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Handle the current segment not fitting within the window */
1305:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len > wnd) {
 2819              		.loc 1 1305 7
 2820 00c8 7B6A     		ldr	r3, [r7, #36]
 2821 00ca DB68     		ldr	r3, [r3, #12]
 2822 00cc 5B68     		ldr	r3, [r3, #4]	@ unaligned
 2823 00ce 1846     		mov	r0, r3
 2824 00d0 FFF7FEFF 		bl	lwip_htonl
 2825 00d4 0246     		mov	r2, r0
 2826              		.loc 1 1305 43
 2827 00d6 7B68     		ldr	r3, [r7, #4]
 2828 00d8 5B6C     		ldr	r3, [r3, #68]
 2829              		.loc 1 1305 38
 2830 00da D31A     		subs	r3, r2, r3
 2831              		.loc 1 1305 58
 2832 00dc 7A6A     		ldr	r2, [r7, #36]
 2833 00de 1289     		ldrh	r2, [r2, #8]
 2834              		.loc 1 1305 53
 2835 00e0 1344     		add	r3, r3, r2
 2836              		.loc 1 1305 6
 2837 00e2 BA69     		ldr	r2, [r7, #24]
 2838 00e4 9A42     		cmp	r2, r3
 2839 00e6 27D2     		bcs	.L169
1306:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* We need to start the persistent timer when the next unsent segment does not fit
1307:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * within the remaining (could be 0) send window and RTO timer is not running (we
1308:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * have no in-flight data). If window is still too small after persist timer fires,
1309:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * then we split the segment. We don't consider the congestion window since a cwnd
1310:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * smaller than 1 SMSS implies in-flight data
1311:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1312:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (wnd == pcb->snd_wnd && pcb->unacked == NULL && pcb->persist_backoff == 0) {
 2840              		.loc 1 1312 19
 2841 00e8 7B68     		ldr	r3, [r7, #4]
 2842 00ea B3F86030 		ldrh	r3, [r3, #96]
 2843 00ee 1A46     		mov	r2, r3
 2844              		.loc 1 1312 8
 2845 00f0 BB69     		ldr	r3, [r7, #24]
 2846 00f2 9342     		cmp	r3, r2
 2847 00f4 14D1     		bne	.L170
 2848              		.loc 1 1312 35 discriminator 1
 2849 00f6 7B68     		ldr	r3, [r7, #4]
 2850 00f8 1B6F     		ldr	r3, [r3, #112]
 2851              		.loc 1 1312 29 discriminator 1
 2852 00fa 002B     		cmp	r3, #0
ARM GAS  /tmp/cc6RPj0P.s 			page 77


 2853 00fc 10D1     		bne	.L170
 2854              		.loc 1 1312 59 discriminator 2
 2855 00fe 7B68     		ldr	r3, [r7, #4]
 2856 0100 93F89930 		ldrb	r3, [r3, #153]	@ zero_extendqisi2
 2857              		.loc 1 1312 53 discriminator 2
 2858 0104 002B     		cmp	r3, #0
 2859 0106 0BD1     		bne	.L170
1313:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_cnt = 0;
 2860              		.loc 1 1313 24
 2861 0108 7B68     		ldr	r3, [r7, #4]
 2862 010a 0022     		movs	r2, #0
 2863 010c 83F89820 		strb	r2, [r3, #152]
1314:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_backoff = 1;
 2864              		.loc 1 1314 28
 2865 0110 7B68     		ldr	r3, [r7, #4]
 2866 0112 0122     		movs	r2, #1
 2867 0114 83F89920 		strb	r2, [r3, #153]
1315:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->persist_probe = 0;
 2868              		.loc 1 1315 26
 2869 0118 7B68     		ldr	r3, [r7, #4]
 2870 011a 0022     		movs	r2, #0
 2871 011c 83F89A20 		strb	r2, [r3, #154]
 2872              	.L170:
1316:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1317:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* We need an ACK, but can't send data now, so send an empty ACK */
1318:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->flags & TF_ACK_NOW) {
 2873              		.loc 1 1318 12
 2874 0120 7B68     		ldr	r3, [r7, #4]
 2875 0122 5B8B     		ldrh	r3, [r3, #26]
 2876              		.loc 1 1318 20
 2877 0124 03F00203 		and	r3, r3, #2
 2878              		.loc 1 1318 8
 2879 0128 002B     		cmp	r3, #0
 2880 012a 00F04D81 		beq	.L201
1319:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return tcp_send_empty_ack(pcb);
 2881              		.loc 1 1319 14
 2882 012e 7868     		ldr	r0, [r7, #4]
 2883 0130 FFF7FEFF 		bl	tcp_send_empty_ack
 2884 0134 0346     		mov	r3, r0
 2885 0136 52E1     		b	.L159
 2886              	.L169:
1320:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     goto output_done;
1322:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1323:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Stop persist timer, above conditions are not active */
1324:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->persist_backoff = 0;
 2887              		.loc 1 1324 24
 2888 0138 7B68     		ldr	r3, [r7, #4]
 2889 013a 0022     		movs	r2, #0
 2890 013c 83F89920 		strb	r2, [r3, #153]
1325:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1326:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* useg should point to last segment on unacked queue */
1327:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   useg = pcb->unacked;
 2891              		.loc 1 1327 8
 2892 0140 7B68     		ldr	r3, [r7, #4]
 2893 0142 1B6F     		ldr	r3, [r3, #112]
 2894 0144 3B62     		str	r3, [r7, #32]
ARM GAS  /tmp/cc6RPj0P.s 			page 78


1328:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (useg != NULL) {
 2895              		.loc 1 1328 6
 2896 0146 3B6A     		ldr	r3, [r7, #32]
 2897 0148 002B     		cmp	r3, #0
 2898 014a 00F01C81 		beq	.L175
1329:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     for (; useg->next != NULL; useg = useg->next);
 2899              		.loc 1 1329 5
 2900 014e 02E0     		b	.L173
 2901              	.L174:
 2902              		.loc 1 1329 37 discriminator 2
 2903 0150 3B6A     		ldr	r3, [r7, #32]
 2904 0152 1B68     		ldr	r3, [r3]
 2905 0154 3B62     		str	r3, [r7, #32]
 2906              	.L173:
 2907              		.loc 1 1329 16 discriminator 1
 2908 0156 3B6A     		ldr	r3, [r7, #32]
 2909 0158 1B68     		ldr	r3, [r3]
 2910              		.loc 1 1329 5 discriminator 1
 2911 015a 002B     		cmp	r3, #0
 2912 015c F8D1     		bne	.L174
1330:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1331:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* data available and window allows it to be sent? */
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (seg != NULL &&
 2913              		.loc 1 1332 9
 2914 015e 12E1     		b	.L175
 2915              	.L199:
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
1334:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 2916              		.loc 1 1334 5
 2917 0160 7B6A     		ldr	r3, [r7, #36]
 2918 0162 DB68     		ldr	r3, [r3, #12]
 2919 0164 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2920 0166 9BB2     		uxth	r3, r3
 2921 0168 1846     		mov	r0, r3
 2922 016a FFF7FEFF 		bl	lwip_htons
 2923 016e 0346     		mov	r3, r0
 2924 0170 DBB2     		uxtb	r3, r3
 2925 0172 03F00403 		and	r3, r3, #4
 2926 0176 002B     		cmp	r3, #0
 2927 0178 06D0     		beq	.L176
 2928              		.loc 1 1334 5 is_stmt 0 discriminator 1
 2929 017a 434B     		ldr	r3, .L204
 2930 017c 40F23752 		movw	r2, #1335
 2931 0180 4649     		ldr	r1, .L204+20
 2932 0182 4348     		ldr	r0, .L204+8
 2933 0184 FFF7FEFF 		bl	printf
 2934              	.L176:
1335:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (TCPH_FLAGS(seg->tcphdr) & TCP_RST) == 0);
1336:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Stop sending if the nagle algorithm would prevent it
1337:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * Don't stop:
1338:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * - if tcp_write had a memory error before (prevent delayed ACK timeout) or
1339:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * - if FIN was already enqueued for this PCB (SYN is always alone in a segment -
1340:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *   either seg->next != NULL or pcb->unacked == NULL;
1341:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      *   RST is no sent using tcp_write/tcp_output.
1342:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((tcp_do_output_nagle(pcb) == 0) &&
 2935              		.loc 1 1343 10 is_stmt 1
ARM GAS  /tmp/cc6RPj0P.s 			page 79


 2936 0188 7B68     		ldr	r3, [r7, #4]
 2937 018a 1B6F     		ldr	r3, [r3, #112]
 2938 018c 002B     		cmp	r3, #0
 2939 018e 1FD0     		beq	.L177
 2940              		.loc 1 1343 10 is_stmt 0 discriminator 2
 2941 0190 7B68     		ldr	r3, [r7, #4]
 2942 0192 5B8B     		ldrh	r3, [r3, #26]
 2943 0194 03F04403 		and	r3, r3, #68
 2944 0198 002B     		cmp	r3, #0
 2945 019a 19D1     		bne	.L177
 2946              		.loc 1 1343 10 discriminator 4
 2947 019c 7B68     		ldr	r3, [r7, #4]
 2948 019e DB6E     		ldr	r3, [r3, #108]
 2949 01a0 002B     		cmp	r3, #0
 2950 01a2 0BD0     		beq	.L178
 2951              		.loc 1 1343 10 discriminator 5
 2952 01a4 7B68     		ldr	r3, [r7, #4]
 2953 01a6 DB6E     		ldr	r3, [r3, #108]
 2954 01a8 1B68     		ldr	r3, [r3]
 2955 01aa 002B     		cmp	r3, #0
 2956 01ac 10D1     		bne	.L177
 2957              		.loc 1 1343 10 discriminator 8
 2958 01ae 7B68     		ldr	r3, [r7, #4]
 2959 01b0 DB6E     		ldr	r3, [r3, #108]
 2960 01b2 1A89     		ldrh	r2, [r3, #8]
 2961 01b4 7B68     		ldr	r3, [r7, #4]
 2962 01b6 5B8E     		ldrh	r3, [r3, #50]
 2963 01b8 9A42     		cmp	r2, r3
 2964 01ba 09D2     		bcs	.L177
 2965              	.L178:
 2966              		.loc 1 1343 10 discriminator 10
 2967 01bc 7B68     		ldr	r3, [r7, #4]
 2968 01be B3F86430 		ldrh	r3, [r3, #100]
 2969 01c2 002B     		cmp	r3, #0
 2970 01c4 04D0     		beq	.L177
 2971              		.loc 1 1343 10 discriminator 12
 2972 01c6 7B68     		ldr	r3, [r7, #4]
 2973 01c8 B3F86630 		ldrh	r3, [r3, #102]
 2974 01cc 082B     		cmp	r3, #8
 2975 01ce 01D9     		bls	.L179
 2976              	.L177:
 2977              		.loc 1 1343 10 discriminator 13
 2978 01d0 0123     		movs	r3, #1
 2979 01d2 00E0     		b	.L180
 2980              	.L179:
 2981              		.loc 1 1343 10 discriminator 14
 2982 01d4 0023     		movs	r3, #0
 2983              	.L180:
 2984              		.loc 1 1343 8 is_stmt 1 discriminator 16
 2985 01d6 002B     		cmp	r3, #0
 2986 01d8 06D1     		bne	.L181
1344:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2987              		.loc 1 1344 14 discriminator 17
 2988 01da 7B68     		ldr	r3, [r7, #4]
 2989 01dc 5B8B     		ldrh	r3, [r3, #26]
 2990              		.loc 1 1344 22 discriminator 17
 2991 01de 03F0A003 		and	r3, r3, #160
ARM GAS  /tmp/cc6RPj0P.s 			page 80


1343:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ((pcb->flags & (TF_NAGLEMEMERR | TF_FIN)) == 0)) {
 2992              		.loc 1 1343 41 discriminator 17
 2993 01e2 002B     		cmp	r3, #0
 2994 01e4 00F0E480 		beq	.L202
 2995              	.L181:
1345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       break;
1346:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1347:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CWND_DEBUG
1348:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_CWND_DEBUG, ("tcp_output: snd_wnd %"TCPWNDSIZE_F", cwnd %"TCPWNDSIZE_F", wnd %"
1349:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->snd_wnd, pcb->cwnd, wnd,
1350:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  lwip_ntohl(seg->tcphdr->seqno) + seg->len -
1351:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  pcb->lastack,
1352:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  lwip_ntohl(seg->tcphdr->seqno), pcb->lastack, i));
1353:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++i;
1354:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CWND_DEBUG */
1355:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1356:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
 2996              		.loc 1 1356 12
 2997 01e8 7B68     		ldr	r3, [r7, #4]
 2998 01ea 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 2999              		.loc 1 1356 8
 3000 01ec 022B     		cmp	r3, #2
 3001 01ee 0DD0     		beq	.L183
1357:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCPH_SET_FLAG(seg->tcphdr, TCP_ACK);
 3002              		.loc 1 1357 7
 3003 01f0 7B6A     		ldr	r3, [r7, #36]
 3004 01f2 DB68     		ldr	r3, [r3, #12]
 3005 01f4 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 3006 01f6 9CB2     		uxth	r4, r3
 3007 01f8 1020     		movs	r0, #16
 3008 01fa FFF7FEFF 		bl	lwip_htons
 3009 01fe 0346     		mov	r3, r0
 3010 0200 1A46     		mov	r2, r3
 3011 0202 7B6A     		ldr	r3, [r7, #36]
 3012 0204 DB68     		ldr	r3, [r3, #12]
 3013 0206 2243     		orrs	r2, r2, r4
 3014 0208 92B2     		uxth	r2, r2
 3015 020a 9A81     		strh	r2, [r3, #12]	@ unaligned
 3016              	.L183:
1358:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1359:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1360:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = tcp_output_segment(seg, pcb, netif);
 3017              		.loc 1 1360 11
 3018 020c 7A69     		ldr	r2, [r7, #20]
 3019 020e 7968     		ldr	r1, [r7, #4]
 3020 0210 786A     		ldr	r0, [r7, #36]
 3021 0212 FFF7FEFF 		bl	tcp_output_segment
 3022 0216 0346     		mov	r3, r0
 3023 0218 FB73     		strb	r3, [r7, #15]
1361:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (err != ERR_OK) {
 3024              		.loc 1 1361 8
 3025 021a 97F90F30 		ldrsb	r3, [r7, #15]
 3026 021e 002B     		cmp	r3, #0
 3027 0220 09D0     		beq	.L184
1362:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* segment could not be sent, for whatever reason */
1363:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_NAGLEMEMERR);
 3028              		.loc 1 1363 7
ARM GAS  /tmp/cc6RPj0P.s 			page 81


 3029 0222 7B68     		ldr	r3, [r7, #4]
 3030 0224 5B8B     		ldrh	r3, [r3, #26]
 3031 0226 43F08003 		orr	r3, r3, #128
 3032 022a 9AB2     		uxth	r2, r3
 3033 022c 7B68     		ldr	r3, [r7, #4]
 3034 022e 5A83     		strh	r2, [r3, #26]	@ movhi
1364:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return err;
 3035              		.loc 1 1364 14
 3036 0230 97F90F30 		ldrsb	r3, [r7, #15]
 3037 0234 D3E0     		b	.L159
 3038              	.L184:
1365:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1366:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
1367:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->oversize_left = 0;
1368:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
1369:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent = seg->next;
 3039              		.loc 1 1369 22
 3040 0236 7B6A     		ldr	r3, [r7, #36]
 3041 0238 1A68     		ldr	r2, [r3]
 3042              		.loc 1 1369 17
 3043 023a 7B68     		ldr	r3, [r7, #4]
 3044 023c DA66     		str	r2, [r3, #108]
1370:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb->state != SYN_SENT) {
 3045              		.loc 1 1370 12
 3046 023e 7B68     		ldr	r3, [r7, #4]
 3047 0240 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3048              		.loc 1 1370 8
 3049 0242 022B     		cmp	r3, #2
 3050 0244 06D0     		beq	.L185
1371:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_clear_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
 3051              		.loc 1 1371 7
 3052 0246 7B68     		ldr	r3, [r7, #4]
 3053 0248 5B8B     		ldrh	r3, [r3, #26]
 3054 024a 23F00303 		bic	r3, r3, #3
 3055 024e 9AB2     		uxth	r2, r3
 3056 0250 7B68     		ldr	r3, [r7, #4]
 3057 0252 5A83     		strh	r2, [r3, #26]	@ movhi
 3058              	.L185:
1372:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1373:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     snd_nxt = lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg);
 3059              		.loc 1 1373 15
 3060 0254 7B6A     		ldr	r3, [r7, #36]
 3061 0256 DB68     		ldr	r3, [r3, #12]
 3062 0258 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3063 025a 1846     		mov	r0, r3
 3064 025c FFF7FEFF 		bl	lwip_htonl
 3065 0260 0446     		mov	r4, r0
 3066              		.loc 1 1373 48
 3067 0262 7B6A     		ldr	r3, [r7, #36]
 3068 0264 1B89     		ldrh	r3, [r3, #8]
 3069 0266 1D46     		mov	r5, r3
 3070 0268 7B6A     		ldr	r3, [r7, #36]
 3071 026a DB68     		ldr	r3, [r3, #12]
 3072 026c 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 3073 026e 9BB2     		uxth	r3, r3
 3074 0270 1846     		mov	r0, r3
 3075 0272 FFF7FEFF 		bl	lwip_htons
ARM GAS  /tmp/cc6RPj0P.s 			page 82


 3076 0276 0346     		mov	r3, r0
 3077 0278 DBB2     		uxtb	r3, r3
 3078 027a 03F00303 		and	r3, r3, #3
 3079 027e 002B     		cmp	r3, #0
 3080 0280 0ED0     		beq	.L186
 3081              		.loc 1 1373 48 is_stmt 0 discriminator 1
 3082 0282 0123     		movs	r3, #1
 3083 0284 0DE0     		b	.L187
 3084              	.L205:
 3085 0286 00BF     		.align	2
 3086              	.L204:
 3087 0288 00000000 		.word	.LC0
 3088 028c 40050000 		.word	.LC36
 3089 0290 50000000 		.word	.LC2
 3090 0294 58050000 		.word	.LC37
 3091 0298 00000000 		.word	tcp_input_pcb
 3092 029c 80050000 		.word	.LC38
 3093              	.L186:
 3094              		.loc 1 1373 48 discriminator 2
 3095 02a0 0023     		movs	r3, #0
 3096              	.L187:
 3097              		.loc 1 1373 48 discriminator 4
 3098 02a2 2B44     		add	r3, r3, r5
 3099              		.loc 1 1373 13 is_stmt 1 discriminator 4
 3100 02a4 2344     		add	r3, r3, r4
 3101 02a6 BB60     		str	r3, [r7, #8]
1374:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 3102              		.loc 1 1374 9 discriminator 4
 3103 02a8 7B68     		ldr	r3, [r7, #4]
 3104 02aa 1A6D     		ldr	r2, [r3, #80]
 3105 02ac BB68     		ldr	r3, [r7, #8]
 3106 02ae D31A     		subs	r3, r2, r3
 3107              		.loc 1 1374 8 discriminator 4
 3108 02b0 002B     		cmp	r3, #0
 3109 02b2 02DA     		bge	.L188
1375:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->snd_nxt = snd_nxt;
 3110              		.loc 1 1375 20
 3111 02b4 7B68     		ldr	r3, [r7, #4]
 3112 02b6 BA68     		ldr	r2, [r7, #8]
 3113 02b8 1A65     		str	r2, [r3, #80]
 3114              	.L188:
1376:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1377:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* put segment on unacknowledged list if length > 0 */
1378:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (TCP_TCPLEN(seg) > 0) {
 3115              		.loc 1 1378 9
 3116 02ba 7B6A     		ldr	r3, [r7, #36]
 3117 02bc 1B89     		ldrh	r3, [r3, #8]
 3118 02be 1C46     		mov	r4, r3
 3119 02c0 7B6A     		ldr	r3, [r7, #36]
 3120 02c2 DB68     		ldr	r3, [r3, #12]
 3121 02c4 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 3122 02c6 9BB2     		uxth	r3, r3
 3123 02c8 1846     		mov	r0, r3
 3124 02ca FFF7FEFF 		bl	lwip_htons
 3125 02ce 0346     		mov	r3, r0
 3126 02d0 DBB2     		uxtb	r3, r3
 3127 02d2 03F00303 		and	r3, r3, #3
ARM GAS  /tmp/cc6RPj0P.s 			page 83


 3128 02d6 002B     		cmp	r3, #0
 3129 02d8 01D0     		beq	.L189
 3130              		.loc 1 1378 9 is_stmt 0 discriminator 1
 3131 02da 0123     		movs	r3, #1
 3132 02dc 00E0     		b	.L190
 3133              	.L189:
 3134              		.loc 1 1378 9 discriminator 2
 3135 02de 0023     		movs	r3, #0
 3136              	.L190:
 3137              		.loc 1 1378 9 discriminator 4
 3138 02e0 2344     		add	r3, r3, r4
 3139              		.loc 1 1378 8 is_stmt 1 discriminator 4
 3140 02e2 002B     		cmp	r3, #0
 3141 02e4 49D0     		beq	.L191
1379:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->next = NULL;
 3142              		.loc 1 1379 17
 3143 02e6 7B6A     		ldr	r3, [r7, #36]
 3144 02e8 0022     		movs	r2, #0
 3145 02ea 1A60     		str	r2, [r3]
1380:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* unacked list is empty? */
1381:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (pcb->unacked == NULL) {
 3146              		.loc 1 1381 14
 3147 02ec 7B68     		ldr	r3, [r7, #4]
 3148 02ee 1B6F     		ldr	r3, [r3, #112]
 3149              		.loc 1 1381 10
 3150 02f0 002B     		cmp	r3, #0
 3151 02f2 05D1     		bne	.L192
1382:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->unacked = seg;
 3152              		.loc 1 1382 22
 3153 02f4 7B68     		ldr	r3, [r7, #4]
 3154 02f6 7A6A     		ldr	r2, [r7, #36]
 3155 02f8 1A67     		str	r2, [r3, #112]
1383:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         useg = seg;
 3156              		.loc 1 1383 14
 3157 02fa 7B6A     		ldr	r3, [r7, #36]
 3158 02fc 3B62     		str	r3, [r7, #32]
 3159 02fe 3FE0     		b	.L198
 3160              	.L192:
1384:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* unacked list is not empty? */
1385:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       } else {
1386:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         /* In the case of fast retransmit, the packet should not go to the tail
1387:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * of the unacked queue, but rather somewhere before it. We need to check for
1388:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          * this case. -STJ Jul 27, 2004 */
1389:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         if (TCP_SEQ_LT(lwip_ntohl(seg->tcphdr->seqno), lwip_ntohl(useg->tcphdr->seqno))) {
 3161              		.loc 1 1389 13
 3162 0300 7B6A     		ldr	r3, [r7, #36]
 3163 0302 DB68     		ldr	r3, [r3, #12]
 3164 0304 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3165 0306 1846     		mov	r0, r3
 3166 0308 FFF7FEFF 		bl	lwip_htonl
 3167 030c 0446     		mov	r4, r0
 3168 030e 3B6A     		ldr	r3, [r7, #32]
 3169 0310 DB68     		ldr	r3, [r3, #12]
 3170 0312 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3171 0314 1846     		mov	r0, r3
 3172 0316 FFF7FEFF 		bl	lwip_htonl
 3173 031a 0346     		mov	r3, r0
ARM GAS  /tmp/cc6RPj0P.s 			page 84


 3174 031c E31A     		subs	r3, r4, r3
 3175              		.loc 1 1389 12
 3176 031e 002B     		cmp	r3, #0
 3177 0320 24DA     		bge	.L194
 3178              	.LBB17:
1390:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to before tail of unacked list, keeping the list sorted */
1391:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           struct tcp_seg **cur_seg = &(pcb->unacked);
 3179              		.loc 1 1391 28
 3180 0322 7B68     		ldr	r3, [r7, #4]
 3181 0324 7033     		adds	r3, r3, #112
 3182 0326 FB61     		str	r3, [r7, #28]
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
 3183              		.loc 1 1392 17
 3184 0328 02E0     		b	.L195
 3185              	.L197:
1393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno)))
1394:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****             cur_seg = &((*cur_seg)->next );
 3186              		.loc 1 1394 26
 3187 032a FB69     		ldr	r3, [r7, #28]
 3188 032c 1B68     		ldr	r3, [r3]
 3189              		.loc 1 1394 21
 3190 032e FB61     		str	r3, [r7, #28]
 3191              	.L195:
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
 3192              		.loc 1 1392 18
 3193 0330 FB69     		ldr	r3, [r7, #28]
 3194 0332 1B68     		ldr	r3, [r3]
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
 3195              		.loc 1 1392 17
 3196 0334 002B     		cmp	r3, #0
 3197 0336 11D0     		beq	.L196
1393:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno)))
 3198              		.loc 1 1393 18 discriminator 1
 3199 0338 FB69     		ldr	r3, [r7, #28]
 3200 033a 1B68     		ldr	r3, [r3]
 3201 033c DB68     		ldr	r3, [r3, #12]
 3202 033e 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3203 0340 1846     		mov	r0, r3
 3204 0342 FFF7FEFF 		bl	lwip_htonl
 3205 0346 0446     		mov	r4, r0
 3206 0348 7B6A     		ldr	r3, [r7, #36]
 3207 034a DB68     		ldr	r3, [r3, #12]
 3208 034c 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3209 034e 1846     		mov	r0, r3
 3210 0350 FFF7FEFF 		bl	lwip_htonl
 3211 0354 0346     		mov	r3, r0
 3212 0356 E31A     		subs	r3, r4, r3
1392:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           while (*cur_seg &&
 3213              		.loc 1 1392 27 discriminator 1
 3214 0358 002B     		cmp	r3, #0
 3215 035a E6DB     		blt	.L197
 3216              	.L196:
1395:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           }
1396:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           seg->next = (*cur_seg);
 3217              		.loc 1 1396 24
 3218 035c FB69     		ldr	r3, [r7, #28]
 3219 035e 1A68     		ldr	r2, [r3]
ARM GAS  /tmp/cc6RPj0P.s 			page 85


 3220              		.loc 1 1396 21
 3221 0360 7B6A     		ldr	r3, [r7, #36]
 3222 0362 1A60     		str	r2, [r3]
1397:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           (*cur_seg) = seg;
 3223              		.loc 1 1397 22
 3224 0364 FB69     		ldr	r3, [r7, #28]
 3225 0366 7A6A     		ldr	r2, [r7, #36]
 3226 0368 1A60     		str	r2, [r3]
 3227              	.LBE17:
 3228 036a 09E0     		b	.L198
 3229              	.L194:
1398:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         } else {
1399:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           /* add segment to tail of unacked list */
1400:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg->next = seg;
 3230              		.loc 1 1400 22
 3231 036c 3B6A     		ldr	r3, [r7, #32]
 3232 036e 7A6A     		ldr	r2, [r7, #36]
 3233 0370 1A60     		str	r2, [r3]
1401:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****           useg = useg->next;
 3234              		.loc 1 1401 16
 3235 0372 3B6A     		ldr	r3, [r7, #32]
 3236 0374 1B68     		ldr	r3, [r3]
 3237 0376 3B62     		str	r3, [r7, #32]
 3238 0378 02E0     		b	.L198
 3239              	.L191:
1402:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         }
1403:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
1404:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* do not queue empty segments on the unacked list */
1405:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
1406:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_seg_free(seg);
 3240              		.loc 1 1406 7
 3241 037a 786A     		ldr	r0, [r7, #36]
 3242 037c FFF7FEFF 		bl	tcp_seg_free
 3243              	.L198:
1407:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1408:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg = pcb->unsent;
 3244              		.loc 1 1408 9
 3245 0380 7B68     		ldr	r3, [r7, #4]
 3246 0382 DB6E     		ldr	r3, [r3, #108]
 3247 0384 7B62     		str	r3, [r7, #36]
 3248              	.L175:
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
 3249              		.loc 1 1332 9
 3250 0386 7B6A     		ldr	r3, [r7, #36]
 3251 0388 002B     		cmp	r3, #0
 3252 038a 12D0     		beq	.L182
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 3253              		.loc 1 1333 10 discriminator 1
 3254 038c 7B6A     		ldr	r3, [r7, #36]
 3255 038e DB68     		ldr	r3, [r3, #12]
 3256 0390 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3257 0392 1846     		mov	r0, r3
 3258 0394 FFF7FEFF 		bl	lwip_htonl
 3259 0398 0246     		mov	r2, r0
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 3260              		.loc 1 1333 46 discriminator 1
 3261 039a 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6RPj0P.s 			page 86


 3262 039c 5B6C     		ldr	r3, [r3, #68]
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 3263              		.loc 1 1333 41 discriminator 1
 3264 039e D31A     		subs	r3, r2, r3
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 3265              		.loc 1 1333 61 discriminator 1
 3266 03a0 7A6A     		ldr	r2, [r7, #36]
 3267 03a2 1289     		ldrh	r2, [r2, #8]
1333:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("RST not expected here!",
 3268              		.loc 1 1333 56 discriminator 1
 3269 03a4 1344     		add	r3, r3, r2
1332:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          lwip_ntohl(seg->tcphdr->seqno) - pcb->lastack + seg->len <= wnd) {
 3270              		.loc 1 1332 22 discriminator 1
 3271 03a6 BA69     		ldr	r2, [r7, #24]
 3272 03a8 9A42     		cmp	r2, r3
 3273 03aa BFF4D9AE 		bcs	.L199
 3274 03ae 00E0     		b	.L182
 3275              	.L202:
1345:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
 3276              		.loc 1 1345 7
 3277 03b0 00BF     		nop
 3278              	.L182:
1409:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1410:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1411:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
 3279              		.loc 1 1411 10
 3280 03b2 7B68     		ldr	r3, [r7, #4]
 3281 03b4 DB6E     		ldr	r3, [r3, #108]
 3282              		.loc 1 1411 6
 3283 03b6 002B     		cmp	r3, #0
 3284 03b8 08D1     		bne	.L203
1412:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* last unsent has been removed, reset unsent_oversize */
1413:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
 3285              		.loc 1 1413 26
 3286 03ba 7B68     		ldr	r3, [r7, #4]
 3287 03bc 0022     		movs	r2, #0
 3288 03be A3F86820 		strh	r2, [r3, #104]	@ movhi
 3289 03c2 04E0     		b	.L162
 3290              	.L200:
1280:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
 3291              		.loc 1 1280 5
 3292 03c4 00BF     		nop
 3293 03c6 02E0     		b	.L162
 3294              	.L201:
1321:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 3295              		.loc 1 1321 5
 3296 03c8 00BF     		nop
 3297 03ca 00E0     		b	.L162
 3298              	.L203:
1414:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1415:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1416:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1417:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** output_done:
 3299              		.loc 1 1417 1
 3300 03cc 00BF     		nop
 3301              	.L162:
1418:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_clear_flags(pcb, TF_NAGLEMEMERR);
ARM GAS  /tmp/cc6RPj0P.s 			page 87


 3302              		.loc 1 1418 3
 3303 03ce 7B68     		ldr	r3, [r7, #4]
 3304 03d0 5B8B     		ldrh	r3, [r3, #26]
 3305 03d2 23F08003 		bic	r3, r3, #128
 3306 03d6 9AB2     		uxth	r2, r3
 3307 03d8 7B68     		ldr	r3, [r7, #4]
 3308 03da 5A83     		strh	r2, [r3, #26]	@ movhi
1419:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 3309              		.loc 1 1419 10
 3310 03dc 0023     		movs	r3, #0
 3311              	.L159:
1420:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3312              		.loc 1 1420 1
 3313 03de 1846     		mov	r0, r3
 3314 03e0 2837     		adds	r7, r7, #40
 3315              	.LCFI43:
 3316              		.cfi_def_cfa_offset 16
 3317 03e2 BD46     		mov	sp, r7
 3318              	.LCFI44:
 3319              		.cfi_def_cfa_register 13
 3320              		@ sp needed
 3321 03e4 B0BD     		pop	{r4, r5, r7, pc}
 3322              		.cfi_endproc
 3323              	.LFE141:
 3325 03e6 00BF     		.section	.rodata
 3326 0597 00       		.align	2
 3327              	.LC39:
 3328 0598 7463705F 		.ascii	"tcp_output_segment_busy: invalid seg\000"
 3328      6F757470 
 3328      75745F73 
 3328      65676D65 
 3328      6E745F62 
 3329              		.section	.text.tcp_output_segment_busy,"ax",%progbits
 3330              		.align	1
 3331              		.syntax unified
 3332              		.thumb
 3333              		.thumb_func
 3334              		.fpu fpv4-sp-d16
 3336              	tcp_output_segment_busy:
 3337              	.LFB142:
1421:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1422:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Check if a segment's pbufs are used by someone else than TCP.
1423:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This can happen on retransmission if the pbuf of this segment is still
1424:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * referenced by the netif driver due to deferred transmission.
1425:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * This is the case (only!) if someone down the TX call path called
1426:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * pbuf_ref() on one of the pbufs!
1427:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1428:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @arg seg the tcp segment to check
1429:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return 1 if ref != 1, 0 if ref == 1
1430:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1431:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static int
1432:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_segment_busy(const struct tcp_seg *seg)
1433:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3338              		.loc 1 1433 1
 3339              		.cfi_startproc
 3340              		@ args = 0, pretend = 0, frame = 8
 3341              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cc6RPj0P.s 			page 88


 3342 0000 80B5     		push	{r7, lr}
 3343              	.LCFI45:
 3344              		.cfi_def_cfa_offset 8
 3345              		.cfi_offset 7, -8
 3346              		.cfi_offset 14, -4
 3347 0002 82B0     		sub	sp, sp, #8
 3348              	.LCFI46:
 3349              		.cfi_def_cfa_offset 16
 3350 0004 00AF     		add	r7, sp, #0
 3351              	.LCFI47:
 3352              		.cfi_def_cfa_register 7
 3353 0006 7860     		str	r0, [r7, #4]
1434:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment_busy: invalid seg", seg != NULL);
 3354              		.loc 1 1434 3
 3355 0008 7B68     		ldr	r3, [r7, #4]
 3356 000a 002B     		cmp	r3, #0
 3357 000c 06D1     		bne	.L207
 3358              		.loc 1 1434 3 is_stmt 0 discriminator 1
 3359 000e 094B     		ldr	r3, .L210
 3360 0010 40F29A52 		movw	r2, #1434
 3361 0014 0849     		ldr	r1, .L210+4
 3362 0016 0948     		ldr	r0, .L210+8
 3363 0018 FFF7FEFF 		bl	printf
 3364              	.L207:
1435:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1436:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* We only need to check the first pbuf here:
1437:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      If a pbuf is queued for transmission, a driver calls pbuf_ref(),
1438:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      which only changes the ref count of the first pbuf */
1439:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->p->ref != 1) {
 3365              		.loc 1 1439 10 is_stmt 1
 3366 001c 7B68     		ldr	r3, [r7, #4]
 3367 001e 5B68     		ldr	r3, [r3, #4]
 3368              		.loc 1 1439 13
 3369 0020 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 3370              		.loc 1 1439 6
 3371 0022 012B     		cmp	r3, #1
 3372 0024 01D0     		beq	.L208
1440:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* other reference found */
1441:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return 1;
 3373              		.loc 1 1441 12
 3374 0026 0123     		movs	r3, #1
 3375 0028 00E0     		b	.L209
 3376              	.L208:
1442:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1443:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* no other references found */
1444:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return 0;
 3377              		.loc 1 1444 10
 3378 002a 0023     		movs	r3, #0
 3379              	.L209:
1445:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3380              		.loc 1 1445 1
 3381 002c 1846     		mov	r0, r3
 3382 002e 0837     		adds	r7, r7, #8
 3383              	.LCFI48:
 3384              		.cfi_def_cfa_offset 8
 3385 0030 BD46     		mov	sp, r7
 3386              	.LCFI49:
ARM GAS  /tmp/cc6RPj0P.s 			page 89


 3387              		.cfi_def_cfa_register 13
 3388              		@ sp needed
 3389 0032 80BD     		pop	{r7, pc}
 3390              	.L211:
 3391              		.align	2
 3392              	.L210:
 3393 0034 00000000 		.word	.LC0
 3394 0038 98050000 		.word	.LC39
 3395 003c 50000000 		.word	.LC2
 3396              		.cfi_endproc
 3397              	.LFE142:
 3399              		.section	.rodata
 3400 05bd 000000   		.align	2
 3401              	.LC40:
 3402 05c0 7463705F 		.ascii	"tcp_output_segment: invalid seg\000"
 3402      6F757470 
 3402      75745F73 
 3402      65676D65 
 3402      6E743A20 
 3403              		.align	2
 3404              	.LC41:
 3405 05e0 7463705F 		.ascii	"tcp_output_segment: invalid pcb\000"
 3405      6F757470 
 3405      75745F73 
 3405      65676D65 
 3405      6E743A20 
 3406              		.align	2
 3407              	.LC42:
 3408 0600 7463705F 		.ascii	"tcp_output_segment: invalid netif\000"
 3408      6F757470 
 3408      75745F73 
 3408      65676D65 
 3408      6E743A20 
 3409 0622 0000     		.align	2
 3410              	.LC43:
 3411 0624 6F707469 		.ascii	"options not filled\000"
 3411      6F6E7320 
 3411      6E6F7420 
 3411      66696C6C 
 3411      656400
 3412              		.section	.text.tcp_output_segment,"ax",%progbits
 3413              		.align	1
 3414              		.syntax unified
 3415              		.thumb
 3416              		.thumb_func
 3417              		.fpu fpv4-sp-d16
 3419              	tcp_output_segment:
 3420              	.LFB143:
1446:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1447:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1448:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_output() to actually send a TCP segment over IP.
1449:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1450:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seg the tcp_seg to send
1451:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for the TCP connection used to send the segment
1452:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param netif the netif used to send the segment
1453:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1454:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
ARM GAS  /tmp/cc6RPj0P.s 			page 90


1455:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_segment(struct tcp_seg *seg, struct tcp_pcb *pcb, struct netif *netif)
1456:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3421              		.loc 1 1456 1
 3422              		.cfi_startproc
 3423              		@ args = 0, pretend = 0, frame = 32
 3424              		@ frame_needed = 1, uses_anonymous_args = 0
 3425 0000 B0B5     		push	{r4, r5, r7, lr}
 3426              	.LCFI50:
 3427              		.cfi_def_cfa_offset 16
 3428              		.cfi_offset 4, -16
 3429              		.cfi_offset 5, -12
 3430              		.cfi_offset 7, -8
 3431              		.cfi_offset 14, -4
 3432 0002 8CB0     		sub	sp, sp, #48
 3433              	.LCFI51:
 3434              		.cfi_def_cfa_offset 64
 3435 0004 04AF     		add	r7, sp, #16
 3436              	.LCFI52:
 3437              		.cfi_def_cfa 7, 48
 3438 0006 F860     		str	r0, [r7, #12]
 3439 0008 B960     		str	r1, [r7, #8]
 3440 000a 7A60     		str	r2, [r7, #4]
1457:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1458:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t len;
1459:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t *opts;
1460:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1461:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   int seg_chksum_was_swapped = 0;
1462:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1463:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1464:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid seg", seg != NULL);
 3441              		.loc 1 1464 3
 3442 000c FB68     		ldr	r3, [r7, #12]
 3443 000e 002B     		cmp	r3, #0
 3444 0010 06D1     		bne	.L213
 3445              		.loc 1 1464 3 is_stmt 0 discriminator 1
 3446 0012 634B     		ldr	r3, .L222
 3447 0014 4FF4B762 		mov	r2, #1464
 3448 0018 6249     		ldr	r1, .L222+4
 3449 001a 6348     		ldr	r0, .L222+8
 3450 001c FFF7FEFF 		bl	printf
 3451              	.L213:
1465:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid pcb", pcb != NULL);
 3452              		.loc 1 1465 3 is_stmt 1
 3453 0020 BB68     		ldr	r3, [r7, #8]
 3454 0022 002B     		cmp	r3, #0
 3455 0024 06D1     		bne	.L214
 3456              		.loc 1 1465 3 is_stmt 0 discriminator 1
 3457 0026 5E4B     		ldr	r3, .L222
 3458 0028 40F2B952 		movw	r2, #1465
 3459 002c 5F49     		ldr	r1, .L222+12
 3460 002e 5E48     		ldr	r0, .L222+8
 3461 0030 FFF7FEFF 		bl	printf
 3462              	.L214:
1466:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_segment: invalid netif", netif != NULL);
 3463              		.loc 1 1466 3 is_stmt 1
 3464 0034 7B68     		ldr	r3, [r7, #4]
 3465 0036 002B     		cmp	r3, #0
ARM GAS  /tmp/cc6RPj0P.s 			page 91


 3466 0038 06D1     		bne	.L215
 3467              		.loc 1 1466 3 is_stmt 0 discriminator 1
 3468 003a 594B     		ldr	r3, .L222
 3469 003c 40F2BA52 		movw	r2, #1466
 3470 0040 5B49     		ldr	r1, .L222+16
 3471 0042 5948     		ldr	r0, .L222+8
 3472 0044 FFF7FEFF 		bl	printf
 3473              	.L215:
1467:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1468:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_output_segment_busy(seg)) {
 3474              		.loc 1 1468 7 is_stmt 1
 3475 0048 F868     		ldr	r0, [r7, #12]
 3476 004a FFF7FEFF 		bl	tcp_output_segment_busy
 3477 004e 0346     		mov	r3, r0
 3478              		.loc 1 1468 6
 3479 0050 002B     		cmp	r3, #0
 3480 0052 01D0     		beq	.L216
1469:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This should not happen: rexmit functions should have checked this.
1470:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        However, since this function modifies p->len, we must not continue in this case. */
1471:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("tcp_output_segment: segment busy\n"));
1472:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 3481              		.loc 1 1472 12
 3482 0054 0023     		movs	r3, #0
 3483 0056 9FE0     		b	.L217
 3484              	.L216:
1473:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1474:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1475:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The TCP header has already been constructed, but the ackno and
1476:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****    wnd fields remain. */
1477:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->ackno = lwip_htonl(pcb->rcv_nxt);
 3485              		.loc 1 1477 24
 3486 0058 BB68     		ldr	r3, [r7, #8]
 3487 005a 5A6A     		ldr	r2, [r3, #36]
 3488              		.loc 1 1477 6
 3489 005c FB68     		ldr	r3, [r7, #12]
 3490 005e DC68     		ldr	r4, [r3, #12]
 3491              		.loc 1 1477 24
 3492 0060 1046     		mov	r0, r2
 3493 0062 FFF7FEFF 		bl	lwip_htonl
 3494 0066 0346     		mov	r3, r0
 3495              		.loc 1 1477 22
 3496 0068 A360     		str	r3, [r4, #8]	@ unaligned
1478:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1479:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* advertise our receive window size in this TCP segment */
1480:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1481:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_WND_SCALE) {
1482:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* The Window field in a SYN segment itself (the only type where we send
1483:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        the window scale option) is never scaled. */
1484:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->wnd = lwip_htons(TCPWND_MIN16(pcb->rcv_ann_wnd));
1485:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else
1486:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* LWIP_WND_SCALE */
1487:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   {
1488:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->wnd = lwip_htons(TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
 3497              		.loc 1 1488 24
 3498 006a BB68     		ldr	r3, [r7, #8]
 3499 006c 5A8D     		ldrh	r2, [r3, #42]
 3500              		.loc 1 1488 8
ARM GAS  /tmp/cc6RPj0P.s 			page 92


 3501 006e FB68     		ldr	r3, [r7, #12]
 3502 0070 DC68     		ldr	r4, [r3, #12]
 3503              		.loc 1 1488 24
 3504 0072 1046     		mov	r0, r2
 3505 0074 FFF7FEFF 		bl	lwip_htons
 3506 0078 0346     		mov	r3, r0
 3507              		.loc 1 1488 22
 3508 007a E381     		strh	r3, [r4, #14]	@ unaligned
1489:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1490:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1491:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rcv_ann_right_edge = pcb->rcv_nxt + pcb->rcv_ann_wnd;
 3509              		.loc 1 1491 32
 3510 007c BB68     		ldr	r3, [r7, #8]
 3511 007e 5B6A     		ldr	r3, [r3, #36]
 3512              		.loc 1 1491 47
 3513 0080 BA68     		ldr	r2, [r7, #8]
 3514 0082 528D     		ldrh	r2, [r2, #42]
 3515              		.loc 1 1491 42
 3516 0084 1A44     		add	r2, r2, r3
 3517              		.loc 1 1491 27
 3518 0086 BB68     		ldr	r3, [r7, #8]
 3519 0088 DA62     		str	r2, [r3, #44]
1492:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1493:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Add any requested options.  NB MSS option is only set on SYN
1494:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      packets, so ignore it here */
1495:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* cast through void* to get rid of alignment warnings */
1496:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = (u32_t *)(void *)(seg->tcphdr + 1);
 3520              		.loc 1 1496 31
 3521 008a FB68     		ldr	r3, [r7, #12]
 3522 008c DB68     		ldr	r3, [r3, #12]
 3523              		.loc 1 1496 8
 3524 008e 1433     		adds	r3, r3, #20
 3525 0090 FB61     		str	r3, [r7, #28]
1497:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_MSS) {
 3526              		.loc 1 1497 10
 3527 0092 FB68     		ldr	r3, [r7, #12]
 3528 0094 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 3529              		.loc 1 1497 18
 3530 0096 03F00103 		and	r3, r3, #1
 3531              		.loc 1 1497 6
 3532 009a 002B     		cmp	r3, #0
 3533 009c 15D0     		beq	.L218
 3534              	.LBB18:
1498:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t mss;
1499:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CALCULATE_EFF_SEND_MSS
1500:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss = tcp_eff_send_mss_netif(TCP_MSS, netif, &pcb->remote_ip);
 3535              		.loc 1 1500 50
 3536 009e BB68     		ldr	r3, [r7, #8]
 3537 00a0 0433     		adds	r3, r3, #4
 3538              		.loc 1 1500 11
 3539 00a2 1A46     		mov	r2, r3
 3540 00a4 7968     		ldr	r1, [r7, #4]
 3541 00a6 4FF40670 		mov	r0, #536
 3542 00aa FFF7FEFF 		bl	tcp_eff_send_mss_netif
 3543 00ae 0346     		mov	r3, r0
 3544 00b0 7B83     		strh	r3, [r7, #26]	@ movhi
1501:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CALCULATE_EFF_SEND_MSS */
ARM GAS  /tmp/cc6RPj0P.s 			page 93


1502:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     mss = TCP_MSS;
1503:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CALCULATE_EFF_SEND_MSS */
1504:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *opts = TCP_BUILD_MSS_OPTION(mss);
 3545              		.loc 1 1504 13
 3546 00b2 7B8B     		ldrh	r3, [r7, #26]
 3547 00b4 43F00173 		orr	r3, r3, #33816576
 3548 00b8 1846     		mov	r0, r3
 3549 00ba FFF7FEFF 		bl	lwip_htonl
 3550 00be 0246     		mov	r2, r0
 3551              		.loc 1 1504 11
 3552 00c0 FB69     		ldr	r3, [r7, #28]
 3553 00c2 1A60     		str	r2, [r3]
1505:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
 3554              		.loc 1 1505 10
 3555 00c4 FB69     		ldr	r3, [r7, #28]
 3556 00c6 0433     		adds	r3, r3, #4
 3557 00c8 FB61     		str	r3, [r7, #28]
 3558              	.L218:
 3559              	.LBE18:
1506:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1507:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1508:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->ts_lastacksent = pcb->rcv_nxt;
1509:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1510:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_TS) {
1511:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_timestamp_option(pcb, opts);
1512:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 3;
1513:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1514:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1515:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1516:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_WND_SCALE) {
1517:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_wnd_scale_option(opts);
1518:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 1;
1519:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1520:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1521:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1522:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->flags & TF_SEG_OPTS_SACK_PERM) {
1523:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Pad with two NOP options to make everything nicely aligned
1524:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * NOTE: When we send both timestamp and SACK_PERM options,
1525:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * we could use the first two NOPs before the timestamp to store SACK_PERM option,
1526:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      * but that would complicate the code.
1527:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      */
1528:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     *(opts++) = PP_HTONL(0x01010402);
1529:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1530:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1531:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1532:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Set retransmission timer running if it is not currently enabled
1533:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      This must be set before checking the route. */
1534:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->rtime < 0) {
 3560              		.loc 1 1534 10
 3561 00ca BB68     		ldr	r3, [r7, #8]
 3562 00cc B3F93030 		ldrsh	r3, [r3, #48]
 3563              		.loc 1 1534 6
 3564 00d0 002B     		cmp	r3, #0
 3565 00d2 02DA     		bge	.L219
1535:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtime = 0;
 3566              		.loc 1 1535 16
 3567 00d4 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/cc6RPj0P.s 			page 94


 3568 00d6 0022     		movs	r2, #0
 3569 00d8 1A86     		strh	r2, [r3, #48]	@ movhi
 3570              	.L219:
1536:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1537:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1538:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->rttest == 0) {
 3571              		.loc 1 1538 10
 3572 00da BB68     		ldr	r3, [r7, #8]
 3573 00dc 5B6B     		ldr	r3, [r3, #52]
 3574              		.loc 1 1538 6
 3575 00de 002B     		cmp	r3, #0
 3576 00e0 0CD1     		bne	.L220
1539:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rttest = tcp_ticks;
 3577              		.loc 1 1539 17
 3578 00e2 344B     		ldr	r3, .L222+20
 3579 00e4 1A68     		ldr	r2, [r3]
 3580 00e6 BB68     		ldr	r3, [r7, #8]
 3581 00e8 5A63     		str	r2, [r3, #52]
1540:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rtseq = lwip_ntohl(seg->tcphdr->seqno);
 3582              		.loc 1 1540 18
 3583 00ea FB68     		ldr	r3, [r7, #12]
 3584 00ec DB68     		ldr	r3, [r3, #12]
 3585 00ee 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3586 00f0 1846     		mov	r0, r3
 3587 00f2 FFF7FEFF 		bl	lwip_htonl
 3588 00f6 0246     		mov	r2, r0
 3589              		.loc 1 1540 16
 3590 00f8 BB68     		ldr	r3, [r7, #8]
 3591 00fa 9A63     		str	r2, [r3, #56]
 3592              	.L220:
1541:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1542:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_output_segment: rtseq %"U32_F"\n", pcb->rtseq));
1543:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1544:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output_segment: %"U32_F":%"U32_F"\n",
1545:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  lwip_htonl(seg->tcphdr->seqno), lwip_htonl(seg->tcphdr->seqno) +
1546:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                  seg->len));
1547:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1548:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   len = (u16_t)((u8_t *)seg->tcphdr - (u8_t *)seg->p->payload);
 3593              		.loc 1 1548 28
 3594 00fc FB68     		ldr	r3, [r7, #12]
 3595 00fe DA68     		ldr	r2, [r3, #12]
 3596              		.loc 1 1548 50
 3597 0100 FB68     		ldr	r3, [r7, #12]
 3598 0102 5B68     		ldr	r3, [r3, #4]
 3599              		.loc 1 1548 53
 3600 0104 5B68     		ldr	r3, [r3, #4]
 3601              		.loc 1 1548 37
 3602 0106 D31A     		subs	r3, r2, r3
 3603              		.loc 1 1548 7
 3604 0108 3B83     		strh	r3, [r7, #24]	@ movhi
1549:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (len == 0) {
1550:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /** Exclude retransmitted segments from this count. */
1551:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     MIB2_STATS_INC(mib2.tcpoutsegs);
1552:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1553:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1554:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->len -= len;
 3605              		.loc 1 1554 6
ARM GAS  /tmp/cc6RPj0P.s 			page 95


 3606 010a FB68     		ldr	r3, [r7, #12]
 3607 010c 5B68     		ldr	r3, [r3, #4]
 3608              		.loc 1 1554 15
 3609 010e 5989     		ldrh	r1, [r3, #10]
 3610              		.loc 1 1554 6
 3611 0110 FB68     		ldr	r3, [r7, #12]
 3612 0112 5B68     		ldr	r3, [r3, #4]
 3613              		.loc 1 1554 15
 3614 0114 3A8B     		ldrh	r2, [r7, #24]	@ movhi
 3615 0116 8A1A     		subs	r2, r1, r2
 3616 0118 92B2     		uxth	r2, r2
 3617 011a 5A81     		strh	r2, [r3, #10]	@ movhi
1555:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->tot_len -= len;
 3618              		.loc 1 1555 6
 3619 011c FB68     		ldr	r3, [r7, #12]
 3620 011e 5B68     		ldr	r3, [r3, #4]
 3621              		.loc 1 1555 19
 3622 0120 1989     		ldrh	r1, [r3, #8]
 3623              		.loc 1 1555 6
 3624 0122 FB68     		ldr	r3, [r7, #12]
 3625 0124 5B68     		ldr	r3, [r3, #4]
 3626              		.loc 1 1555 19
 3627 0126 3A8B     		ldrh	r2, [r7, #24]	@ movhi
 3628 0128 8A1A     		subs	r2, r1, r2
 3629 012a 92B2     		uxth	r2, r2
 3630 012c 1A81     		strh	r2, [r3, #8]	@ movhi
1556:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1557:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->p->payload = seg->tcphdr;
 3631              		.loc 1 1557 6
 3632 012e FB68     		ldr	r3, [r7, #12]
 3633 0130 5B68     		ldr	r3, [r3, #4]
 3634              		.loc 1 1557 24
 3635 0132 FA68     		ldr	r2, [r7, #12]
 3636 0134 D268     		ldr	r2, [r2, #12]
 3637              		.loc 1 1557 19
 3638 0136 5A60     		str	r2, [r3, #4]
1558:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1559:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->tcphdr->chksum = 0;
 3639              		.loc 1 1559 6
 3640 0138 FB68     		ldr	r3, [r7, #12]
 3641 013a DB68     		ldr	r3, [r3, #12]
 3642              		.loc 1 1559 23
 3643 013c 0022     		movs	r2, #0
 3644 013e 1A74     		strb	r2, [r3, #16]
 3645 0140 0022     		movs	r2, #0
 3646 0142 5A74     		strb	r2, [r3, #17]
1560:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1561:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_TCP_OUT_ADD_TCPOPTS
1562:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = LWIP_HOOK_TCP_OUT_ADD_TCPOPTS(seg->p, seg->tcphdr, pcb, opts);
1563:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1564:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("options not filled", (u8_t *)opts == ((u8_t *)(seg->tcphdr + 1)) + LWIP_TCP_OPT_LENG
 3647              		.loc 1 1564 3
 3648 0144 FB68     		ldr	r3, [r7, #12]
 3649 0146 DB68     		ldr	r3, [r3, #12]
 3650 0148 03F11402 		add	r2, r3, #20
 3651 014c FB68     		ldr	r3, [r7, #12]
 3652 014e 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
ARM GAS  /tmp/cc6RPj0P.s 			page 96


 3653 0150 9B00     		lsls	r3, r3, #2
 3654 0152 03F00403 		and	r3, r3, #4
 3655 0156 1344     		add	r3, r3, r2
 3656 0158 FA69     		ldr	r2, [r7, #28]
 3657 015a 9A42     		cmp	r2, r3
 3658 015c 06D0     		beq	.L221
 3659              		.loc 1 1564 3 is_stmt 0 discriminator 1
 3660 015e 104B     		ldr	r3, .L222
 3661 0160 40F21C62 		movw	r2, #1564
 3662 0164 1449     		ldr	r1, .L222+24
 3663 0166 1048     		ldr	r0, .L222+8
 3664 0168 FFF7FEFF 		bl	printf
 3665              	.L221:
1565:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1566:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1567:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1568:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1569:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u32_t acc;
1570:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
1571:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u16_t chksum_slow = ip_chksum_pseudo(seg->p, IP_PROTO_TCP,
1572:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                          seg->p->tot_len, &pcb->local_ip, &pcb->remote_ip);
1573:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY_SANITY_CHECK */
1574:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if ((seg->flags & TF_SEG_DATA_CHECKSUMMED) == 0) {
1575:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_ASSERT("data included but not checksummed",
1576:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                   seg->p->tot_len == TCPH_HDRLEN_BYTES(seg->tcphdr));
1577:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1578:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1579:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* rebuild TCP header checksum (TCP header changes for retransmissions!) */
1580:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     acc = ip_chksum_pseudo_partial(seg->p, IP_PROTO_TCP,
1581:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                    seg->p->tot_len, TCPH_HDRLEN_BYTES(seg->tcphdr), &pcb->local_ip,
1582:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* add payload checksum */
1583:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (seg->chksum_swapped) {
1584:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg_chksum_was_swapped = 1;
1585:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->chksum = SWAP_BYTES_IN_WORD(seg->chksum);
1586:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->chksum_swapped = 0;
1587:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1588:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     acc = (u16_t)~acc + seg->chksum;
1589:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->chksum = (u16_t)~FOLD_U32T(acc);
1590:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY_SANITY_CHECK
1591:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (chksum_slow != seg->tcphdr->chksum) {
1592:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       TCP_CHECKSUM_ON_COPY_SANITY_CHECK_FAIL(
1593:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         ("tcp_output_segment: calculated checksum is %"X16_F" instead of %"X16_F"\n",
1594:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          seg->tcphdr->chksum, chksum_slow));
1595:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       seg->tcphdr->chksum = chksum_slow;
1596:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1597:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY_SANITY_CHECK */
1598:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else /* TCP_CHECKSUM_ON_COPY */
1599:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->tcphdr->chksum = ip_chksum_pseudo(seg->p, IP_PROTO_TCP,
1600:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                            seg->p->tot_len, &pcb->local_ip, &pcb->remote_ip);
1601:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_CHECKSUM_ON_COPY */
1602:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1603:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* CHECKSUM_GEN_TCP */
1604:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   TCP_STATS_INC(tcp.xmit);
1605:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1606:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   NETIF_SET_HINTS(netif, &(pcb->netif_hints));
1607:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = ip_output_if(seg->p, &pcb->local_ip, &pcb->remote_ip, pcb->ttl,
 3666              		.loc 1 1607 9 is_stmt 1
ARM GAS  /tmp/cc6RPj0P.s 			page 97


 3667 016c FB68     		ldr	r3, [r7, #12]
 3668 016e 5868     		ldr	r0, [r3, #4]
 3669 0170 B968     		ldr	r1, [r7, #8]
 3670 0172 BB68     		ldr	r3, [r7, #8]
 3671 0174 1C1D     		adds	r4, r3, #4
 3672 0176 BB68     		ldr	r3, [r7, #8]
 3673 0178 DD7A     		ldrb	r5, [r3, #11]	@ zero_extendqisi2
 3674 017a BB68     		ldr	r3, [r7, #8]
 3675 017c 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 3676 017e 7A68     		ldr	r2, [r7, #4]
 3677 0180 0292     		str	r2, [sp, #8]
 3678 0182 0622     		movs	r2, #6
 3679 0184 0192     		str	r2, [sp, #4]
 3680 0186 0093     		str	r3, [sp]
 3681 0188 2B46     		mov	r3, r5
 3682 018a 2246     		mov	r2, r4
 3683 018c FFF7FEFF 		bl	ip4_output_if
 3684 0190 0346     		mov	r3, r0
 3685 0192 FB75     		strb	r3, [r7, #23]
1608:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      pcb->tos, IP_PROTO_TCP, netif);
1609:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   NETIF_RESET_HINTS(netif);
1610:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1611:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_CHECKSUM_ON_COPY
1612:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg_chksum_was_swapped) {
1613:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* if data is added to this segment later, chksum needs to be swapped,
1614:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        so restore this now */
1615:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum = SWAP_BYTES_IN_WORD(seg->chksum);
1616:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seg->chksum_swapped = 1;
1617:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1618:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1619:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1620:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 3686              		.loc 1 1620 10
 3687 0194 97F91730 		ldrsb	r3, [r7, #23]
 3688              	.L217:
1621:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3689              		.loc 1 1621 1
 3690 0198 1846     		mov	r0, r3
 3691 019a 2037     		adds	r7, r7, #32
 3692              	.LCFI53:
 3693              		.cfi_def_cfa_offset 16
 3694 019c BD46     		mov	sp, r7
 3695              	.LCFI54:
 3696              		.cfi_def_cfa_register 13
 3697              		@ sp needed
 3698 019e B0BD     		pop	{r4, r5, r7, pc}
 3699              	.L223:
 3700              		.align	2
 3701              	.L222:
 3702 01a0 00000000 		.word	.LC0
 3703 01a4 C0050000 		.word	.LC40
 3704 01a8 50000000 		.word	.LC2
 3705 01ac E0050000 		.word	.LC41
 3706 01b0 00060000 		.word	.LC42
 3707 01b4 00000000 		.word	tcp_ticks
 3708 01b8 24060000 		.word	.LC43
 3709              		.cfi_endproc
ARM GAS  /tmp/cc6RPj0P.s 			page 98


 3710              	.LFE143:
 3712              		.section	.rodata
 3713 0637 00       		.align	2
 3714              	.LC44:
 3715 0638 7463705F 		.ascii	"tcp_rexmit_rto_prepare: invalid pcb\000"
 3715      7265786D 
 3715      69745F72 
 3715      746F5F70 
 3715      72657061 
 3716              		.section	.text.tcp_rexmit_rto_prepare,"ax",%progbits
 3717              		.align	1
 3718              		.global	tcp_rexmit_rto_prepare
 3719              		.syntax unified
 3720              		.thumb
 3721              		.thumb_func
 3722              		.fpu fpv4-sp-d16
 3724              	tcp_rexmit_rto_prepare:
 3725              	.LFB144:
1622:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1623:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1624:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1625:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1626:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr() for slow retransmission.
1627:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1628:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1629:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1630:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
1631:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto_prepare(struct tcp_pcb *pcb)
1632:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3726              		.loc 1 1632 1
 3727              		.cfi_startproc
 3728              		@ args = 0, pretend = 0, frame = 16
 3729              		@ frame_needed = 1, uses_anonymous_args = 0
 3730 0000 B0B5     		push	{r4, r5, r7, lr}
 3731              	.LCFI55:
 3732              		.cfi_def_cfa_offset 16
 3733              		.cfi_offset 4, -16
 3734              		.cfi_offset 5, -12
 3735              		.cfi_offset 7, -8
 3736              		.cfi_offset 14, -4
 3737 0002 84B0     		sub	sp, sp, #16
 3738              	.LCFI56:
 3739              		.cfi_def_cfa_offset 32
 3740 0004 00AF     		add	r7, sp, #0
 3741              	.LCFI57:
 3742              		.cfi_def_cfa_register 7
 3743 0006 7860     		str	r0, [r7, #4]
1633:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1634:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1635:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto_prepare: invalid pcb", pcb != NULL);
 3744              		.loc 1 1635 3
 3745 0008 7B68     		ldr	r3, [r7, #4]
 3746 000a 002B     		cmp	r3, #0
 3747 000c 06D1     		bne	.L225
 3748              		.loc 1 1635 3 is_stmt 0 discriminator 1
 3749 000e 314B     		ldr	r3, .L234
 3750 0010 40F26362 		movw	r2, #1635
ARM GAS  /tmp/cc6RPj0P.s 			page 99


 3751 0014 3049     		ldr	r1, .L234+4
 3752 0016 3148     		ldr	r0, .L234+8
 3753 0018 FFF7FEFF 		bl	printf
 3754              	.L225:
1636:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1637:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked == NULL) {
 3755              		.loc 1 1637 10 is_stmt 1
 3756 001c 7B68     		ldr	r3, [r7, #4]
 3757 001e 1B6F     		ldr	r3, [r3, #112]
 3758              		.loc 1 1637 6
 3759 0020 002B     		cmp	r3, #0
 3760 0022 02D1     		bne	.L226
1638:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 3761              		.loc 1 1638 12
 3762 0024 6FF00503 		mvn	r3, #5
 3763 0028 50E0     		b	.L227
 3764              	.L226:
1639:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1640:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1641:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Move all unacked segments to the head of the unsent queue.
1642:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      However, give up if any of the unsent pbufs are still referenced by the
1643:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      netif driver due to deferred transmission. No point loading the link further
1644:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      if it is struggling to flush its buffered writes. */
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   for (seg = pcb->unacked; seg->next != NULL; seg = seg->next) {
 3765              		.loc 1 1645 12
 3766 002a 7B68     		ldr	r3, [r7, #4]
 3767 002c 1B6F     		ldr	r3, [r3, #112]
 3768 002e FB60     		str	r3, [r7, #12]
 3769              		.loc 1 1645 3
 3770 0030 0BE0     		b	.L228
 3771              	.L230:
1646:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
 3772              		.loc 1 1646 9
 3773 0032 F868     		ldr	r0, [r7, #12]
 3774 0034 FFF7FEFF 		bl	tcp_output_segment_busy
 3775 0038 0346     		mov	r3, r0
 3776              		.loc 1 1646 8
 3777 003a 002B     		cmp	r3, #0
 3778 003c 02D0     		beq	.L229
1647:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit_rto: segment busy\n"));
1648:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       return ERR_VAL;
 3779              		.loc 1 1648 14
 3780 003e 6FF00503 		mvn	r3, #5
 3781 0042 43E0     		b	.L227
 3782              	.L229:
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
 3783              		.loc 1 1645 51 discriminator 2
 3784 0044 FB68     		ldr	r3, [r7, #12]
 3785 0046 1B68     		ldr	r3, [r3]
 3786 0048 FB60     		str	r3, [r7, #12]
 3787              	.L228:
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
 3788              		.loc 1 1645 31 discriminator 1
 3789 004a FB68     		ldr	r3, [r7, #12]
 3790 004c 1B68     		ldr	r3, [r3]
1645:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_output_segment_busy(seg)) {
 3791              		.loc 1 1645 3 discriminator 1
ARM GAS  /tmp/cc6RPj0P.s 			page 100


 3792 004e 002B     		cmp	r3, #0
 3793 0050 EFD1     		bne	.L230
1649:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1650:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1651:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_output_segment_busy(seg)) {
 3794              		.loc 1 1651 7
 3795 0052 F868     		ldr	r0, [r7, #12]
 3796 0054 FFF7FEFF 		bl	tcp_output_segment_busy
 3797 0058 0346     		mov	r3, r0
 3798              		.loc 1 1651 6
 3799 005a 002B     		cmp	r3, #0
 3800 005c 02D0     		beq	.L231
1652:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit_rto: segment busy\n"));
1653:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 3801              		.loc 1 1653 12
 3802 005e 6FF00503 		mvn	r3, #5
 3803 0062 33E0     		b	.L227
 3804              	.L231:
1654:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1655:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* concatenate unsent queue after unacked queue */
1656:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = pcb->unsent;
 3805              		.loc 1 1656 18
 3806 0064 7B68     		ldr	r3, [r7, #4]
 3807 0066 DA6E     		ldr	r2, [r3, #108]
 3808              		.loc 1 1656 13
 3809 0068 FB68     		ldr	r3, [r7, #12]
 3810 006a 1A60     		str	r2, [r3]
1657:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE_DBGCHECK
1658:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* if last unsent changed, we need to update unsent_oversize */
1659:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unsent == NULL) {
1660:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = seg->oversize_left;
1661:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1662:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE_DBGCHECK */
1663:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unsent queue is the concatenated queue (of unacked, unsent) */
1664:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unsent = pcb->unacked;
 3811              		.loc 1 1664 20
 3812 006c 7B68     		ldr	r3, [r7, #4]
 3813 006e 1A6F     		ldr	r2, [r3, #112]
 3814              		.loc 1 1664 15
 3815 0070 7B68     		ldr	r3, [r7, #4]
 3816 0072 DA66     		str	r2, [r3, #108]
1665:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* unacked queue is now empty */
1666:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unacked = NULL;
 3817              		.loc 1 1666 16
 3818 0074 7B68     		ldr	r3, [r7, #4]
 3819 0076 0022     		movs	r2, #0
 3820 0078 1A67     		str	r2, [r3, #112]
1667:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1668:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Mark RTO in-progress */
1669:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_set_flags(pcb, TF_RTO);
 3821              		.loc 1 1669 3
 3822 007a 7B68     		ldr	r3, [r7, #4]
 3823 007c 5B8B     		ldrh	r3, [r3, #26]
 3824 007e 43F40063 		orr	r3, r3, #2048
 3825 0082 9AB2     		uxth	r2, r3
 3826 0084 7B68     		ldr	r3, [r7, #4]
 3827 0086 5A83     		strh	r2, [r3, #26]	@ movhi
ARM GAS  /tmp/cc6RPj0P.s 			page 101


1670:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Record the next byte following retransmit */
1671:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rto_end = lwip_ntohl(seg->tcphdr->seqno) + TCP_TCPLEN(seg);
 3828              		.loc 1 1671 18
 3829 0088 FB68     		ldr	r3, [r7, #12]
 3830 008a DB68     		ldr	r3, [r3, #12]
 3831 008c 5B68     		ldr	r3, [r3, #4]	@ unaligned
 3832 008e 1846     		mov	r0, r3
 3833 0090 FFF7FEFF 		bl	lwip_htonl
 3834 0094 0446     		mov	r4, r0
 3835              		.loc 1 1671 51
 3836 0096 FB68     		ldr	r3, [r7, #12]
 3837 0098 1B89     		ldrh	r3, [r3, #8]
 3838 009a 1D46     		mov	r5, r3
 3839 009c FB68     		ldr	r3, [r7, #12]
 3840 009e DB68     		ldr	r3, [r3, #12]
 3841 00a0 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 3842 00a2 9BB2     		uxth	r3, r3
 3843 00a4 1846     		mov	r0, r3
 3844 00a6 FFF7FEFF 		bl	lwip_htons
 3845 00aa 0346     		mov	r3, r0
 3846 00ac DBB2     		uxtb	r3, r3
 3847 00ae 03F00303 		and	r3, r3, #3
 3848 00b2 002B     		cmp	r3, #0
 3849 00b4 01D0     		beq	.L232
 3850              		.loc 1 1671 51 is_stmt 0 discriminator 1
 3851 00b6 0123     		movs	r3, #1
 3852 00b8 00E0     		b	.L233
 3853              	.L232:
 3854              		.loc 1 1671 51 discriminator 2
 3855 00ba 0023     		movs	r3, #0
 3856              	.L233:
 3857              		.loc 1 1671 51 discriminator 4
 3858 00bc 2B44     		add	r3, r3, r5
 3859              		.loc 1 1671 49 is_stmt 1 discriminator 4
 3860 00be E218     		adds	r2, r4, r3
 3861              		.loc 1 1671 16 discriminator 4
 3862 00c0 7B68     		ldr	r3, [r7, #4]
 3863 00c2 DA64     		str	r2, [r3, #76]
1672:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any RTT measurements after retransmitting. */
1673:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rttest = 0;
 3864              		.loc 1 1673 15 discriminator 4
 3865 00c4 7B68     		ldr	r3, [r7, #4]
 3866 00c6 0022     		movs	r2, #0
 3867 00c8 5A63     		str	r2, [r3, #52]
1674:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1675:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 3868              		.loc 1 1675 10 discriminator 4
 3869 00ca 0023     		movs	r3, #0
 3870              	.L227:
1676:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3871              		.loc 1 1676 1
 3872 00cc 1846     		mov	r0, r3
 3873 00ce 1037     		adds	r7, r7, #16
 3874              	.LCFI58:
 3875              		.cfi_def_cfa_offset 16
 3876 00d0 BD46     		mov	sp, r7
 3877              	.LCFI59:
ARM GAS  /tmp/cc6RPj0P.s 			page 102


 3878              		.cfi_def_cfa_register 13
 3879              		@ sp needed
 3880 00d2 B0BD     		pop	{r4, r5, r7, pc}
 3881              	.L235:
 3882              		.align	2
 3883              	.L234:
 3884 00d4 00000000 		.word	.LC0
 3885 00d8 38060000 		.word	.LC44
 3886 00dc 50000000 		.word	.LC2
 3887              		.cfi_endproc
 3888              	.LFE144:
 3890              		.section	.rodata
 3891              		.align	2
 3892              	.LC45:
 3893 065c 7463705F 		.ascii	"tcp_rexmit_rto_commit: invalid pcb\000"
 3893      7265786D 
 3893      69745F72 
 3893      746F5F63 
 3893      6F6D6D69 
 3894              		.section	.text.tcp_rexmit_rto_commit,"ax",%progbits
 3895              		.align	1
 3896              		.global	tcp_rexmit_rto_commit
 3897              		.syntax unified
 3898              		.thumb
 3899              		.thumb_func
 3900              		.fpu fpv4-sp-d16
 3902              	tcp_rexmit_rto_commit:
 3903              	.LFB145:
1677:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1678:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1679:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1680:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1681:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr() for slow retransmission.
1682:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1683:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1684:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1685:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1686:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto_commit(struct tcp_pcb *pcb)
1687:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3904              		.loc 1 1687 1
 3905              		.cfi_startproc
 3906              		@ args = 0, pretend = 0, frame = 8
 3907              		@ frame_needed = 1, uses_anonymous_args = 0
 3908 0000 80B5     		push	{r7, lr}
 3909              	.LCFI60:
 3910              		.cfi_def_cfa_offset 8
 3911              		.cfi_offset 7, -8
 3912              		.cfi_offset 14, -4
 3913 0002 82B0     		sub	sp, sp, #8
 3914              	.LCFI61:
 3915              		.cfi_def_cfa_offset 16
 3916 0004 00AF     		add	r7, sp, #0
 3917              	.LCFI62:
 3918              		.cfi_def_cfa_register 7
 3919 0006 7860     		str	r0, [r7, #4]
1688:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto_commit: invalid pcb", pcb != NULL);
 3920              		.loc 1 1688 3
ARM GAS  /tmp/cc6RPj0P.s 			page 103


 3921 0008 7B68     		ldr	r3, [r7, #4]
 3922 000a 002B     		cmp	r3, #0
 3923 000c 06D1     		bne	.L237
 3924              		.loc 1 1688 3 is_stmt 0 discriminator 1
 3925 000e 0D4B     		ldr	r3, .L239
 3926 0010 4FF4D362 		mov	r2, #1688
 3927 0014 0C49     		ldr	r1, .L239+4
 3928 0016 0D48     		ldr	r0, .L239+8
 3929 0018 FFF7FEFF 		bl	printf
 3930              	.L237:
1689:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1690:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* increment number of retransmissions */
1691:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->nrtx < 0xFF) {
 3931              		.loc 1 1691 10 is_stmt 1
 3932 001c 7B68     		ldr	r3, [r7, #4]
 3933 001e 93F84230 		ldrb	r3, [r3, #66]	@ zero_extendqisi2
 3934              		.loc 1 1691 6
 3935 0022 FF2B     		cmp	r3, #255
 3936 0024 07D0     		beq	.L238
1692:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
 3937              		.loc 1 1692 10
 3938 0026 7B68     		ldr	r3, [r7, #4]
 3939 0028 93F84230 		ldrb	r3, [r3, #66]	@ zero_extendqisi2
 3940              		.loc 1 1692 5
 3941 002c 0133     		adds	r3, r3, #1
 3942 002e DAB2     		uxtb	r2, r3
 3943 0030 7B68     		ldr	r3, [r7, #4]
 3944 0032 83F84220 		strb	r2, [r3, #66]
 3945              	.L238:
1693:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1694:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Do the actual retransmission */
1695:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output(pcb);
 3946              		.loc 1 1695 3
 3947 0036 7868     		ldr	r0, [r7, #4]
 3948 0038 FFF7FEFF 		bl	tcp_output
1696:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 3949              		.loc 1 1696 1
 3950 003c 00BF     		nop
 3951 003e 0837     		adds	r7, r7, #8
 3952              	.LCFI63:
 3953              		.cfi_def_cfa_offset 8
 3954 0040 BD46     		mov	sp, r7
 3955              	.LCFI64:
 3956              		.cfi_def_cfa_register 13
 3957              		@ sp needed
 3958 0042 80BD     		pop	{r7, pc}
 3959              	.L240:
 3960              		.align	2
 3961              	.L239:
 3962 0044 00000000 		.word	.LC0
 3963 0048 5C060000 		.word	.LC45
 3964 004c 50000000 		.word	.LC2
 3965              		.cfi_endproc
 3966              	.LFE145:
 3968              		.section	.rodata
 3969 067f 00       		.align	2
 3970              	.LC46:
ARM GAS  /tmp/cc6RPj0P.s 			page 104


 3971 0680 7463705F 		.ascii	"tcp_rexmit_rto: invalid pcb\000"
 3971      7265786D 
 3971      69745F72 
 3971      746F3A20 
 3971      696E7661 
 3972              		.section	.text.tcp_rexmit_rto,"ax",%progbits
 3973              		.align	1
 3974              		.global	tcp_rexmit_rto
 3975              		.syntax unified
 3976              		.thumb
 3977              		.thumb_func
 3978              		.fpu fpv4-sp-d16
 3980              	tcp_rexmit_rto:
 3981              	.LFB146:
1697:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1698:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1699:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue all unacked segments for retransmission
1700:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1701:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_process() only, tcp_slowtmr() needs to do some things between
1702:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * "prepare" and "commit".
1703:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1704:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to re-enqueue all unacked segments
1705:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1706:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1707:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_rto(struct tcp_pcb *pcb)
1708:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 3982              		.loc 1 1708 1
 3983              		.cfi_startproc
 3984              		@ args = 0, pretend = 0, frame = 8
 3985              		@ frame_needed = 1, uses_anonymous_args = 0
 3986 0000 80B5     		push	{r7, lr}
 3987              	.LCFI65:
 3988              		.cfi_def_cfa_offset 8
 3989              		.cfi_offset 7, -8
 3990              		.cfi_offset 14, -4
 3991 0002 82B0     		sub	sp, sp, #8
 3992              	.LCFI66:
 3993              		.cfi_def_cfa_offset 16
 3994 0004 00AF     		add	r7, sp, #0
 3995              	.LCFI67:
 3996              		.cfi_def_cfa_register 7
 3997 0006 7860     		str	r0, [r7, #4]
1709:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_rto: invalid pcb", pcb != NULL);
 3998              		.loc 1 1709 3
 3999 0008 7B68     		ldr	r3, [r7, #4]
 4000 000a 002B     		cmp	r3, #0
 4001 000c 06D1     		bne	.L242
 4002              		.loc 1 1709 3 is_stmt 0 discriminator 1
 4003 000e 0A4B     		ldr	r3, .L245
 4004 0010 40F2AD62 		movw	r2, #1709
 4005 0014 0949     		ldr	r1, .L245+4
 4006 0016 0A48     		ldr	r0, .L245+8
 4007 0018 FFF7FEFF 		bl	printf
 4008              	.L242:
1710:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1711:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_rexmit_rto_prepare(pcb) == ERR_OK) {
 4009              		.loc 1 1711 7 is_stmt 1
ARM GAS  /tmp/cc6RPj0P.s 			page 105


 4010 001c 7868     		ldr	r0, [r7, #4]
 4011 001e FFF7FEFF 		bl	tcp_rexmit_rto_prepare
 4012 0022 0346     		mov	r3, r0
 4013              		.loc 1 1711 6
 4014 0024 002B     		cmp	r3, #0
 4015 0026 02D1     		bne	.L244
1712:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_rexmit_rto_commit(pcb);
 4016              		.loc 1 1712 5
 4017 0028 7868     		ldr	r0, [r7, #4]
 4018 002a FFF7FEFF 		bl	tcp_rexmit_rto_commit
 4019              	.L244:
1713:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1714:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4020              		.loc 1 1714 1
 4021 002e 00BF     		nop
 4022 0030 0837     		adds	r7, r7, #8
 4023              	.LCFI68:
 4024              		.cfi_def_cfa_offset 8
 4025 0032 BD46     		mov	sp, r7
 4026              	.LCFI69:
 4027              		.cfi_def_cfa_register 13
 4028              		@ sp needed
 4029 0034 80BD     		pop	{r7, pc}
 4030              	.L246:
 4031 0036 00BF     		.align	2
 4032              	.L245:
 4033 0038 00000000 		.word	.LC0
 4034 003c 80060000 		.word	.LC46
 4035 0040 50000000 		.word	.LC2
 4036              		.cfi_endproc
 4037              	.LFE146:
 4039              		.section	.rodata
 4040              		.align	2
 4041              	.LC47:
 4042 069c 7463705F 		.ascii	"tcp_rexmit: invalid pcb\000"
 4042      7265786D 
 4042      69743A20 
 4042      696E7661 
 4042      6C696420 
 4043              		.section	.text.tcp_rexmit,"ax",%progbits
 4044              		.align	1
 4045              		.global	tcp_rexmit
 4046              		.syntax unified
 4047              		.thumb
 4048              		.thumb_func
 4049              		.fpu fpv4-sp-d16
 4051              	tcp_rexmit:
 4052              	.LFB147:
1715:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1716:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1717:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Requeue the first unacked segment for retransmission
1718:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1719:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_receive() for fast retransmit.
1720:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1721:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to retransmit the first unacked segment
1722:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1723:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
ARM GAS  /tmp/cc6RPj0P.s 			page 106


1724:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit(struct tcp_pcb *pcb)
1725:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4053              		.loc 1 1725 1
 4054              		.cfi_startproc
 4055              		@ args = 0, pretend = 0, frame = 16
 4056              		@ frame_needed = 1, uses_anonymous_args = 0
 4057 0000 90B5     		push	{r4, r7, lr}
 4058              	.LCFI70:
 4059              		.cfi_def_cfa_offset 12
 4060              		.cfi_offset 4, -12
 4061              		.cfi_offset 7, -8
 4062              		.cfi_offset 14, -4
 4063 0002 85B0     		sub	sp, sp, #20
 4064              	.LCFI71:
 4065              		.cfi_def_cfa_offset 32
 4066 0004 00AF     		add	r7, sp, #0
 4067              	.LCFI72:
 4068              		.cfi_def_cfa_register 7
 4069 0006 7860     		str	r0, [r7, #4]
1726:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
1727:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg **cur_seg;
1728:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1729:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit: invalid pcb", pcb != NULL);
 4070              		.loc 1 1729 3
 4071 0008 7B68     		ldr	r3, [r7, #4]
 4072 000a 002B     		cmp	r3, #0
 4073 000c 06D1     		bne	.L248
 4074              		.loc 1 1729 3 is_stmt 0 discriminator 1
 4075 000e 2F4B     		ldr	r3, .L257
 4076 0010 40F2C162 		movw	r2, #1729
 4077 0014 2E49     		ldr	r1, .L257+4
 4078 0016 2F48     		ldr	r0, .L257+8
 4079 0018 FFF7FEFF 		bl	printf
 4080              	.L248:
1730:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1731:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked == NULL) {
 4081              		.loc 1 1731 10 is_stmt 1
 4082 001c 7B68     		ldr	r3, [r7, #4]
 4083 001e 1B6F     		ldr	r3, [r3, #112]
 4084              		.loc 1 1731 6
 4085 0020 002B     		cmp	r3, #0
 4086 0022 02D1     		bne	.L249
1732:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 4087              		.loc 1 1732 12
 4088 0024 6FF00503 		mvn	r3, #5
 4089 0028 4CE0     		b	.L250
 4090              	.L249:
1733:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1734:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1735:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unacked;
 4091              		.loc 1 1735 7
 4092 002a 7B68     		ldr	r3, [r7, #4]
 4093 002c 1B6F     		ldr	r3, [r3, #112]
 4094 002e BB60     		str	r3, [r7, #8]
1736:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1737:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Give up if the segment is still referenced by the netif driver
1738:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      due to deferred transmission. */
ARM GAS  /tmp/cc6RPj0P.s 			page 107


1739:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (tcp_output_segment_busy(seg)) {
 4095              		.loc 1 1739 7
 4096 0030 B868     		ldr	r0, [r7, #8]
 4097 0032 FFF7FEFF 		bl	tcp_output_segment_busy
 4098 0036 0346     		mov	r3, r0
 4099              		.loc 1 1739 6
 4100 0038 002B     		cmp	r3, #0
 4101 003a 02D0     		beq	.L251
1740:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_RTO_DEBUG, ("tcp_rexmit busy\n"));
1741:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_VAL;
 4102              		.loc 1 1741 12
 4103 003c 6FF00503 		mvn	r3, #5
 4104 0040 40E0     		b	.L250
 4105              	.L251:
1742:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1743:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1744:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Move the first unacked segment to the unsent queue */
1745:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Keep the unsent queue sorted. */
1746:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->unacked = seg->next;
 4106              		.loc 1 1746 21
 4107 0042 BB68     		ldr	r3, [r7, #8]
 4108 0044 1A68     		ldr	r2, [r3]
 4109              		.loc 1 1746 16
 4110 0046 7B68     		ldr	r3, [r7, #4]
 4111 0048 1A67     		str	r2, [r3, #112]
1747:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1748:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   cur_seg = &(pcb->unsent);
 4112              		.loc 1 1748 11
 4113 004a 7B68     		ldr	r3, [r7, #4]
 4114 004c 6C33     		adds	r3, r3, #108
 4115 004e FB60     		str	r3, [r7, #12]
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 4116              		.loc 1 1749 9
 4117 0050 02E0     		b	.L252
 4118              	.L254:
1750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
1751:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     cur_seg = &((*cur_seg)->next );
 4119              		.loc 1 1751 18
 4120 0052 FB68     		ldr	r3, [r7, #12]
 4121 0054 1B68     		ldr	r3, [r3]
 4122              		.loc 1 1751 13
 4123 0056 FB60     		str	r3, [r7, #12]
 4124              	.L252:
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 4125              		.loc 1 1749 10
 4126 0058 FB68     		ldr	r3, [r7, #12]
 4127 005a 1B68     		ldr	r3, [r3]
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 4128              		.loc 1 1749 9
 4129 005c 002B     		cmp	r3, #0
 4130 005e 11D0     		beq	.L253
1750:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****          TCP_SEQ_LT(lwip_ntohl((*cur_seg)->tcphdr->seqno), lwip_ntohl(seg->tcphdr->seqno))) {
 4131              		.loc 1 1750 10 discriminator 1
 4132 0060 FB68     		ldr	r3, [r7, #12]
 4133 0062 1B68     		ldr	r3, [r3]
 4134 0064 DB68     		ldr	r3, [r3, #12]
 4135 0066 5B68     		ldr	r3, [r3, #4]	@ unaligned
ARM GAS  /tmp/cc6RPj0P.s 			page 108


 4136 0068 1846     		mov	r0, r3
 4137 006a FFF7FEFF 		bl	lwip_htonl
 4138 006e 0446     		mov	r4, r0
 4139 0070 BB68     		ldr	r3, [r7, #8]
 4140 0072 DB68     		ldr	r3, [r3, #12]
 4141 0074 5B68     		ldr	r3, [r3, #4]	@ unaligned
 4142 0076 1846     		mov	r0, r3
 4143 0078 FFF7FEFF 		bl	lwip_htonl
 4144 007c 0346     		mov	r3, r0
 4145 007e E31A     		subs	r3, r4, r3
1749:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   while (*cur_seg &&
 4146              		.loc 1 1749 19 discriminator 1
 4147 0080 002B     		cmp	r3, #0
 4148 0082 E6DB     		blt	.L254
 4149              	.L253:
1752:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1753:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg->next = *cur_seg;
 4150              		.loc 1 1753 15
 4151 0084 FB68     		ldr	r3, [r7, #12]
 4152 0086 1A68     		ldr	r2, [r3]
 4153              		.loc 1 1753 13
 4154 0088 BB68     		ldr	r3, [r7, #8]
 4155 008a 1A60     		str	r2, [r3]
1754:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   *cur_seg = seg;
 4156              		.loc 1 1754 12
 4157 008c FB68     		ldr	r3, [r7, #12]
 4158 008e BA68     		ldr	r2, [r7, #8]
 4159 0090 1A60     		str	r2, [r3]
1755:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if TCP_OVERSIZE
1756:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg->next == NULL) {
 4160              		.loc 1 1756 10
 4161 0092 BB68     		ldr	r3, [r7, #8]
 4162 0094 1B68     		ldr	r3, [r3]
 4163              		.loc 1 1756 6
 4164 0096 002B     		cmp	r3, #0
 4165 0098 03D1     		bne	.L255
1757:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* the retransmitted segment is last in unsent, so reset unsent_oversize */
1758:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->unsent_oversize = 0;
 4166              		.loc 1 1758 26
 4167 009a 7B68     		ldr	r3, [r7, #4]
 4168 009c 0022     		movs	r2, #0
 4169 009e A3F86820 		strh	r2, [r3, #104]	@ movhi
 4170              	.L255:
1759:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1760:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif /* TCP_OVERSIZE */
1761:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1762:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->nrtx < 0xFF) {
 4171              		.loc 1 1762 10
 4172 00a2 7B68     		ldr	r3, [r7, #4]
 4173 00a4 93F84230 		ldrb	r3, [r3, #66]	@ zero_extendqisi2
 4174              		.loc 1 1762 6
 4175 00a8 FF2B     		cmp	r3, #255
 4176 00aa 07D0     		beq	.L256
1763:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->nrtx;
 4177              		.loc 1 1763 10
 4178 00ac 7B68     		ldr	r3, [r7, #4]
 4179 00ae 93F84230 		ldrb	r3, [r3, #66]	@ zero_extendqisi2
ARM GAS  /tmp/cc6RPj0P.s 			page 109


 4180              		.loc 1 1763 5
 4181 00b2 0133     		adds	r3, r3, #1
 4182 00b4 DAB2     		uxtb	r2, r3
 4183 00b6 7B68     		ldr	r3, [r7, #4]
 4184 00b8 83F84220 		strb	r2, [r3, #66]
 4185              	.L256:
1764:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1765:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1766:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Don't take any rtt measurements after retransmitting. */
1767:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->rttest = 0;
 4186              		.loc 1 1767 15
 4187 00bc 7B68     		ldr	r3, [r7, #4]
 4188 00be 0022     		movs	r2, #0
 4189 00c0 5A63     		str	r2, [r3, #52]
1768:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1769:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Do the actual retransmission. */
1770:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   MIB2_STATS_INC(mib2.tcpretranssegs);
1771:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* No need to call tcp_output: we are always called from tcp_input()
1772:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      and thus tcp_output directly returns. */
1773:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return ERR_OK;
 4190              		.loc 1 1773 10
 4191 00c2 0023     		movs	r3, #0
 4192              	.L250:
1774:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4193              		.loc 1 1774 1
 4194 00c4 1846     		mov	r0, r3
 4195 00c6 1437     		adds	r7, r7, #20
 4196              	.LCFI73:
 4197              		.cfi_def_cfa_offset 12
 4198 00c8 BD46     		mov	sp, r7
 4199              	.LCFI74:
 4200              		.cfi_def_cfa_register 13
 4201              		@ sp needed
 4202 00ca 90BD     		pop	{r4, r7, pc}
 4203              	.L258:
 4204              		.align	2
 4205              	.L257:
 4206 00cc 00000000 		.word	.LC0
 4207 00d0 9C060000 		.word	.LC47
 4208 00d4 50000000 		.word	.LC2
 4209              		.cfi_endproc
 4210              	.LFE147:
 4212              		.section	.rodata
 4213              		.align	2
 4214              	.LC48:
 4215 06b4 7463705F 		.ascii	"tcp_rexmit_fast: invalid pcb\000"
 4215      7265786D 
 4215      69745F66 
 4215      6173743A 
 4215      20696E76 
 4216              		.section	.text.tcp_rexmit_fast,"ax",%progbits
 4217              		.align	1
 4218              		.global	tcp_rexmit_fast
 4219              		.syntax unified
 4220              		.thumb
 4221              		.thumb_func
 4222              		.fpu fpv4-sp-d16
ARM GAS  /tmp/cc6RPj0P.s 			page 110


 4224              	tcp_rexmit_fast:
 4225              	.LFB148:
1775:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1776:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1777:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1778:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Handle retransmission after three dupacks received
1779:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1780:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to retransmit the first unacked segment
1781:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1782:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
1783:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rexmit_fast(struct tcp_pcb *pcb)
1784:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4226              		.loc 1 1784 1
 4227              		.cfi_startproc
 4228              		@ args = 0, pretend = 0, frame = 8
 4229              		@ frame_needed = 1, uses_anonymous_args = 0
 4230 0000 80B5     		push	{r7, lr}
 4231              	.LCFI75:
 4232              		.cfi_def_cfa_offset 8
 4233              		.cfi_offset 7, -8
 4234              		.cfi_offset 14, -4
 4235 0002 82B0     		sub	sp, sp, #8
 4236              	.LCFI76:
 4237              		.cfi_def_cfa_offset 16
 4238 0004 00AF     		add	r7, sp, #0
 4239              	.LCFI77:
 4240              		.cfi_def_cfa_register 7
 4241 0006 7860     		str	r0, [r7, #4]
1785:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rexmit_fast: invalid pcb", pcb != NULL);
 4242              		.loc 1 1785 3
 4243 0008 7B68     		ldr	r3, [r7, #4]
 4244 000a 002B     		cmp	r3, #0
 4245 000c 06D1     		bne	.L260
 4246              		.loc 1 1785 3 is_stmt 0 discriminator 1
 4247 000e 2A4B     		ldr	r3, .L264
 4248 0010 40F2F962 		movw	r2, #1785
 4249 0014 2949     		ldr	r1, .L264+4
 4250 0016 2A48     		ldr	r0, .L264+8
 4251 0018 FFF7FEFF 		bl	printf
 4252              	.L260:
1786:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1787:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->unacked != NULL && !(pcb->flags & TF_INFR)) {
 4253              		.loc 1 1787 10 is_stmt 1
 4254 001c 7B68     		ldr	r3, [r7, #4]
 4255 001e 1B6F     		ldr	r3, [r3, #112]
 4256              		.loc 1 1787 6
 4257 0020 002B     		cmp	r3, #0
 4258 0022 44D0     		beq	.L263
 4259              		.loc 1 1787 36 discriminator 1
 4260 0024 7B68     		ldr	r3, [r7, #4]
 4261 0026 5B8B     		ldrh	r3, [r3, #26]
 4262              		.loc 1 1787 44 discriminator 1
 4263 0028 03F00403 		and	r3, r3, #4
 4264              		.loc 1 1787 28 discriminator 1
 4265 002c 002B     		cmp	r3, #0
 4266 002e 3ED1     		bne	.L263
1788:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* This is fast retransmit. Retransmit the first unacked segment. */
ARM GAS  /tmp/cc6RPj0P.s 			page 111


1789:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_FR_DEBUG,
1790:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_receive: dupacks %"U16_F" (%"U32_F
1791:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  "), fast retransmit %"U32_F"\n",
1792:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  (u16_t)pcb->dupacks, pcb->lastack,
1793:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                  lwip_ntohl(pcb->unacked->tcphdr->seqno)));
1794:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (tcp_rexmit(pcb) == ERR_OK) {
 4267              		.loc 1 1794 9
 4268 0030 7868     		ldr	r0, [r7, #4]
 4269 0032 FFF7FEFF 		bl	tcp_rexmit
 4270 0036 0346     		mov	r3, r0
 4271              		.loc 1 1794 8
 4272 0038 002B     		cmp	r3, #0
 4273 003a 38D1     		bne	.L263
1795:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Set ssthresh to half of the minimum of the current
1796:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        * cwnd and the advertised window */
1797:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->ssthresh = LWIP_MIN(pcb->cwnd, pcb->snd_wnd) / 2;
 4274              		.loc 1 1797 23
 4275 003c 7B68     		ldr	r3, [r7, #4]
 4276 003e B3F86020 		ldrh	r2, [r3, #96]
 4277 0042 7B68     		ldr	r3, [r7, #4]
 4278 0044 B3F84830 		ldrh	r3, [r3, #72]
 4279 0048 9342     		cmp	r3, r2
 4280 004a 28BF     		it	cs
 4281 004c 1346     		movcs	r3, r2
 4282 004e 9BB2     		uxth	r3, r3
 4283              		.loc 1 1797 57
 4284 0050 DA0F     		lsrs	r2, r3, #31
 4285 0052 1344     		add	r3, r3, r2
 4286 0054 5B10     		asrs	r3, r3, #1
 4287              		.loc 1 1797 21
 4288 0056 9AB2     		uxth	r2, r3
 4289 0058 7B68     		ldr	r3, [r7, #4]
 4290 005a A3F84A20 		strh	r2, [r3, #74]	@ movhi
1798:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1799:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* The minimum value for ssthresh should be 2 MSS */
1800:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       if (pcb->ssthresh < (2U * pcb->mss)) {
 4291              		.loc 1 1800 14
 4292 005e 7B68     		ldr	r3, [r7, #4]
 4293 0060 B3F84A30 		ldrh	r3, [r3, #74]
 4294 0064 1A46     		mov	r2, r3
 4295              		.loc 1 1800 36
 4296 0066 7B68     		ldr	r3, [r7, #4]
 4297 0068 5B8E     		ldrh	r3, [r3, #50]
 4298              		.loc 1 1800 31
 4299 006a 5B00     		lsls	r3, r3, #1
 4300              		.loc 1 1800 10
 4301 006c 9A42     		cmp	r2, r3
 4302 006e 06D2     		bcs	.L262
1801:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         LWIP_DEBUGF(TCP_FR_DEBUG,
1802:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                     ("tcp_receive: The minimum value for ssthresh %"TCPWNDSIZE_F
1803:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      " should be min 2 mss %"U16_F"...\n",
1804:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                      pcb->ssthresh, (u16_t)(2 * pcb->mss)));
1805:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         pcb->ssthresh = 2 * pcb->mss;
 4303              		.loc 1 1805 32
 4304 0070 7B68     		ldr	r3, [r7, #4]
 4305 0072 5B8E     		ldrh	r3, [r3, #50]
 4306              		.loc 1 1805 23
ARM GAS  /tmp/cc6RPj0P.s 			page 112


 4307 0074 5B00     		lsls	r3, r3, #1
 4308 0076 9AB2     		uxth	r2, r3
 4309 0078 7B68     		ldr	r3, [r7, #4]
 4310 007a A3F84A20 		strh	r2, [r3, #74]	@ movhi
 4311              	.L262:
1806:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       }
1807:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1808:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->cwnd = pcb->ssthresh + 3 * pcb->mss;
 4312              		.loc 1 1808 22
 4313 007e 7B68     		ldr	r3, [r7, #4]
 4314 0080 B3F84A20 		ldrh	r2, [r3, #74]
 4315              		.loc 1 1808 42
 4316 0084 7B68     		ldr	r3, [r7, #4]
 4317 0086 5B8E     		ldrh	r3, [r3, #50]
 4318              		.loc 1 1808 33
 4319 0088 1946     		mov	r1, r3	@ movhi
 4320 008a 4900     		lsls	r1, r1, #1
 4321 008c 0B44     		add	r3, r3, r1
 4322 008e 9BB2     		uxth	r3, r3
 4323 0090 1344     		add	r3, r3, r2
 4324 0092 9AB2     		uxth	r2, r3
 4325              		.loc 1 1808 17
 4326 0094 7B68     		ldr	r3, [r7, #4]
 4327 0096 A3F84820 		strh	r2, [r3, #72]	@ movhi
1809:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcp_set_flags(pcb, TF_INFR);
 4328              		.loc 1 1809 7
 4329 009a 7B68     		ldr	r3, [r7, #4]
 4330 009c 5B8B     		ldrh	r3, [r3, #26]
 4331 009e 43F00403 		orr	r3, r3, #4
 4332 00a2 9AB2     		uxth	r2, r3
 4333 00a4 7B68     		ldr	r3, [r7, #4]
 4334 00a6 5A83     		strh	r2, [r3, #26]	@ movhi
1810:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1811:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Reset the retransmission timer to prevent immediate rto retransmissions */
1812:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       pcb->rtime = 0;
 4335              		.loc 1 1812 18
 4336 00a8 7B68     		ldr	r3, [r7, #4]
 4337 00aa 0022     		movs	r2, #0
 4338 00ac 1A86     		strh	r2, [r3, #48]	@ movhi
 4339              	.L263:
1813:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1814:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1815:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4340              		.loc 1 1815 1
 4341 00ae 00BF     		nop
 4342 00b0 0837     		adds	r7, r7, #8
 4343              	.LCFI78:
 4344              		.cfi_def_cfa_offset 8
 4345 00b2 BD46     		mov	sp, r7
 4346              	.LCFI79:
 4347              		.cfi_def_cfa_register 13
 4348              		@ sp needed
 4349 00b4 80BD     		pop	{r7, pc}
 4350              	.L265:
 4351 00b6 00BF     		.align	2
 4352              	.L264:
 4353 00b8 00000000 		.word	.LC0
ARM GAS  /tmp/cc6RPj0P.s 			page 113


 4354 00bc B4060000 		.word	.LC48
 4355 00c0 50000000 		.word	.LC2
 4356              		.cfi_endproc
 4357              	.LFE148:
 4359              		.section	.rodata
 4360 06d1 000000   		.align	2
 4361              	.LC49:
 4362 06d4 63686563 		.ascii	"check that first pbuf can hold struct tcp_hdr\000"
 4362      6B207468 
 4362      61742066 
 4362      69727374 
 4362      20706275 
 4363              		.section	.text.tcp_output_alloc_header_common,"ax",%progbits
 4364              		.align	1
 4365              		.syntax unified
 4366              		.thumb
 4367              		.thumb_func
 4368              		.fpu fpv4-sp-d16
 4370              	tcp_output_alloc_header_common:
 4371              	.LFB149:
1816:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1817:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
1818:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_alloc_header_common(u32_t ackno, u16_t optlen, u16_t datalen,
1819:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         u32_t seqno_be /* already in network byte order */,
1820:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         u16_t src_port, u16_t dst_port, u8_t flags, u16_t wnd)
1821:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4372              		.loc 1 1821 1
 4373              		.cfi_startproc
 4374              		@ args = 16, pretend = 0, frame = 24
 4375              		@ frame_needed = 1, uses_anonymous_args = 0
 4376 0000 80B5     		push	{r7, lr}
 4377              	.LCFI80:
 4378              		.cfi_def_cfa_offset 8
 4379              		.cfi_offset 7, -8
 4380              		.cfi_offset 14, -4
 4381 0002 86B0     		sub	sp, sp, #24
 4382              	.LCFI81:
 4383              		.cfi_def_cfa_offset 32
 4384 0004 00AF     		add	r7, sp, #0
 4385              	.LCFI82:
 4386              		.cfi_def_cfa_register 7
 4387 0006 F860     		str	r0, [r7, #12]
 4388 0008 7B60     		str	r3, [r7, #4]
 4389 000a 0B46     		mov	r3, r1	@ movhi
 4390 000c 7B81     		strh	r3, [r7, #10]	@ movhi
 4391 000e 1346     		mov	r3, r2	@ movhi
 4392 0010 3B81     		strh	r3, [r7, #8]	@ movhi
1822:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
1823:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1824:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1825:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = pbuf_alloc(PBUF_IP, TCP_HLEN + optlen + datalen, PBUF_RAM);
 4393              		.loc 1 1825 45
 4394 0012 7A89     		ldrh	r2, [r7, #10]	@ movhi
 4395 0014 3B89     		ldrh	r3, [r7, #8]	@ movhi
 4396 0016 1344     		add	r3, r3, r2
 4397 0018 9BB2     		uxth	r3, r3
 4398              		.loc 1 1825 7
ARM GAS  /tmp/cc6RPj0P.s 			page 114


 4399 001a 1433     		adds	r3, r3, #20
 4400 001c 9BB2     		uxth	r3, r3
 4401 001e 4FF42072 		mov	r2, #640
 4402 0022 1946     		mov	r1, r3
 4403 0024 2220     		movs	r0, #34
 4404 0026 FFF7FEFF 		bl	pbuf_alloc
 4405 002a 7861     		str	r0, [r7, #20]
1826:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 4406              		.loc 1 1826 6
 4407 002c 7B69     		ldr	r3, [r7, #20]
 4408 002e 002B     		cmp	r3, #0
 4409 0030 4DD0     		beq	.L267
1827:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_ASSERT("check that first pbuf can hold struct tcp_hdr",
 4410              		.loc 1 1827 5
 4411 0032 7B89     		ldrh	r3, [r7, #10]
 4412 0034 1333     		adds	r3, r3, #19
 4413 0036 7A69     		ldr	r2, [r7, #20]
 4414 0038 5289     		ldrh	r2, [r2, #10]
 4415 003a 9342     		cmp	r3, r2
 4416 003c 06DB     		blt	.L268
 4417              		.loc 1 1827 5 is_stmt 0 discriminator 1
 4418 003e 264B     		ldr	r3, .L270
 4419 0040 40F22472 		movw	r2, #1828
 4420 0044 2549     		ldr	r1, .L270+4
 4421 0046 2648     		ldr	r0, .L270+8
 4422 0048 FFF7FEFF 		bl	printf
 4423              	.L268:
1828:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 (p->len >= TCP_HLEN + optlen));
1829:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr = (struct tcp_hdr *)p->payload;
 4424              		.loc 1 1829 12 is_stmt 1
 4425 004c 7B69     		ldr	r3, [r7, #20]
 4426 004e 5B68     		ldr	r3, [r3, #4]
 4427 0050 3B61     		str	r3, [r7, #16]
1830:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->src = lwip_htons(src_port);
 4428              		.loc 1 1830 19
 4429 0052 3B8C     		ldrh	r3, [r7, #32]
 4430 0054 1846     		mov	r0, r3
 4431 0056 FFF7FEFF 		bl	lwip_htons
 4432 005a 0346     		mov	r3, r0
 4433 005c 1A46     		mov	r2, r3
 4434              		.loc 1 1830 17
 4435 005e 3B69     		ldr	r3, [r7, #16]
 4436 0060 1A80     		strh	r2, [r3]	@ unaligned
1831:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->dest = lwip_htons(dst_port);
 4437              		.loc 1 1831 20
 4438 0062 BB8C     		ldrh	r3, [r7, #36]
 4439 0064 1846     		mov	r0, r3
 4440 0066 FFF7FEFF 		bl	lwip_htons
 4441 006a 0346     		mov	r3, r0
 4442 006c 1A46     		mov	r2, r3
 4443              		.loc 1 1831 18
 4444 006e 3B69     		ldr	r3, [r7, #16]
 4445 0070 5A80     		strh	r2, [r3, #2]	@ unaligned
1832:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->seqno = seqno_be;
 4446              		.loc 1 1832 19
 4447 0072 3B69     		ldr	r3, [r7, #16]
 4448 0074 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/cc6RPj0P.s 			page 115


 4449 0076 5A60     		str	r2, [r3, #4]	@ unaligned
1833:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->ackno = lwip_htonl(ackno);
 4450              		.loc 1 1833 21
 4451 0078 F868     		ldr	r0, [r7, #12]
 4452 007a FFF7FEFF 		bl	lwip_htonl
 4453 007e 0246     		mov	r2, r0
 4454              		.loc 1 1833 19
 4455 0080 3B69     		ldr	r3, [r7, #16]
 4456 0082 9A60     		str	r2, [r3, #8]	@ unaligned
1834:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_HDRLEN_FLAGS_SET(tcphdr, (5 + optlen / 4), flags);
 4457              		.loc 1 1834 5
 4458 0084 7B89     		ldrh	r3, [r7, #10]
 4459 0086 9B08     		lsrs	r3, r3, #2
 4460 0088 9BB2     		uxth	r3, r3
 4461 008a 0533     		adds	r3, r3, #5
 4462 008c 9BB2     		uxth	r3, r3
 4463 008e 1B03     		lsls	r3, r3, #12
 4464 0090 9AB2     		uxth	r2, r3
 4465 0092 97F82830 		ldrb	r3, [r7, #40]	@ zero_extendqisi2
 4466 0096 9BB2     		uxth	r3, r3
 4467 0098 1343     		orrs	r3, r3, r2
 4468 009a 9BB2     		uxth	r3, r3
 4469 009c 1846     		mov	r0, r3
 4470 009e FFF7FEFF 		bl	lwip_htons
 4471 00a2 0346     		mov	r3, r0
 4472 00a4 1A46     		mov	r2, r3
 4473 00a6 3B69     		ldr	r3, [r7, #16]
 4474 00a8 9A81     		strh	r2, [r3, #12]	@ unaligned
1835:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->wnd = lwip_htons(wnd);
 4475              		.loc 1 1835 19
 4476 00aa BB8D     		ldrh	r3, [r7, #44]
 4477 00ac 1846     		mov	r0, r3
 4478 00ae FFF7FEFF 		bl	lwip_htons
 4479 00b2 0346     		mov	r3, r0
 4480 00b4 1A46     		mov	r2, r3
 4481              		.loc 1 1835 17
 4482 00b6 3B69     		ldr	r3, [r7, #16]
 4483 00b8 DA81     		strh	r2, [r3, #14]	@ unaligned
1836:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->chksum = 0;
 4484              		.loc 1 1836 20
 4485 00ba 3B69     		ldr	r3, [r7, #16]
 4486 00bc 0022     		movs	r2, #0
 4487 00be 1A74     		strb	r2, [r3, #16]
 4488 00c0 0022     		movs	r2, #0
 4489 00c2 5A74     		strb	r2, [r3, #17]
1837:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcphdr->urgp = 0;
 4490              		.loc 1 1837 18
 4491 00c4 3B69     		ldr	r3, [r7, #16]
 4492 00c6 0022     		movs	r2, #0
 4493 00c8 9A74     		strb	r2, [r3, #18]
 4494 00ca 0022     		movs	r2, #0
 4495 00cc DA74     		strb	r2, [r3, #19]
 4496              	.L267:
1838:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1839:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 4497              		.loc 1 1839 10
 4498 00ce 7B69     		ldr	r3, [r7, #20]
ARM GAS  /tmp/cc6RPj0P.s 			page 116


1840:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4499              		.loc 1 1840 1
 4500 00d0 1846     		mov	r0, r3
 4501 00d2 1837     		adds	r7, r7, #24
 4502              	.LCFI83:
 4503              		.cfi_def_cfa_offset 8
 4504 00d4 BD46     		mov	sp, r7
 4505              	.LCFI84:
 4506              		.cfi_def_cfa_register 13
 4507              		@ sp needed
 4508 00d6 80BD     		pop	{r7, pc}
 4509              	.L271:
 4510              		.align	2
 4511              	.L270:
 4512 00d8 00000000 		.word	.LC0
 4513 00dc D4060000 		.word	.LC49
 4514 00e0 50000000 		.word	.LC2
 4515              		.cfi_endproc
 4516              	.LFE149:
 4518              		.section	.rodata
 4519 0702 0000     		.align	2
 4520              	.LC50:
 4521 0704 7463705F 		.ascii	"tcp_output_alloc_header: invalid pcb\000"
 4521      6F757470 
 4521      75745F61 
 4521      6C6C6F63 
 4521      5F686561 
 4522              		.section	.text.tcp_output_alloc_header,"ax",%progbits
 4523              		.align	1
 4524              		.syntax unified
 4525              		.thumb
 4526              		.thumb_func
 4527              		.fpu fpv4-sp-d16
 4529              	tcp_output_alloc_header:
 4530              	.LFB150:
1841:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1842:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Allocate a pbuf and create a tcphdr at p->payload, used for output
1843:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * functions other than the default tcp_output -> tcp_output_segment
1844:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * (e.g. tcp_send_empty_ack, etc.)
1845:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1846:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb tcp pcb for which to send a packet (used to initialize tcp_hdr)
1847:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param optlen length of header-options
1848:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param datalen length of tcp data to reserve in pbuf
1849:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno_be seqno in network byte order (big-endian)
1850:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @return pbuf with p->payload being the tcp_hdr
1851:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1852:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static struct pbuf *
1853:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_alloc_header(struct tcp_pcb *pcb, u16_t optlen, u16_t datalen,
1854:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                         u32_t seqno_be /* already in network byte order */)
1855:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4531              		.loc 1 1855 1
 4532              		.cfi_startproc
 4533              		@ args = 0, pretend = 0, frame = 24
 4534              		@ frame_needed = 1, uses_anonymous_args = 0
 4535 0000 B0B5     		push	{r4, r5, r7, lr}
 4536              	.LCFI85:
 4537              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/cc6RPj0P.s 			page 117


 4538              		.cfi_offset 4, -16
 4539              		.cfi_offset 5, -12
 4540              		.cfi_offset 7, -8
 4541              		.cfi_offset 14, -4
 4542 0002 8AB0     		sub	sp, sp, #40
 4543              	.LCFI86:
 4544              		.cfi_def_cfa_offset 56
 4545 0004 04AF     		add	r7, sp, #16
 4546              	.LCFI87:
 4547              		.cfi_def_cfa 7, 40
 4548 0006 F860     		str	r0, [r7, #12]
 4549 0008 7B60     		str	r3, [r7, #4]
 4550 000a 0B46     		mov	r3, r1	@ movhi
 4551 000c 7B81     		strh	r3, [r7, #10]	@ movhi
 4552 000e 1346     		mov	r3, r2	@ movhi
 4553 0010 3B81     		strh	r3, [r7, #8]	@ movhi
1856:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1857:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1858:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_alloc_header: invalid pcb", pcb != NULL);
 4554              		.loc 1 1858 3
 4555 0012 FB68     		ldr	r3, [r7, #12]
 4556 0014 002B     		cmp	r3, #0
 4557 0016 06D1     		bne	.L273
 4558              		.loc 1 1858 3 is_stmt 0 discriminator 1
 4559 0018 154B     		ldr	r3, .L276
 4560 001a 40F24272 		movw	r2, #1858
 4561 001e 1549     		ldr	r1, .L276+4
 4562 0020 1548     		ldr	r0, .L276+8
 4563 0022 FFF7FEFF 		bl	printf
 4564              	.L273:
1859:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1860:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header_common(pcb->rcv_nxt, optlen, datalen,
 4565              		.loc 1 1860 7 is_stmt 1
 4566 0026 FB68     		ldr	r3, [r7, #12]
 4567 0028 586A     		ldr	r0, [r3, #36]
 4568 002a FB68     		ldr	r3, [r7, #12]
 4569 002c DB8A     		ldrh	r3, [r3, #22]
 4570 002e FA68     		ldr	r2, [r7, #12]
 4571 0030 128B     		ldrh	r2, [r2, #24]
 4572 0032 F968     		ldr	r1, [r7, #12]
 4573 0034 498D     		ldrh	r1, [r1, #42]
 4574 0036 3D89     		ldrh	r5, [r7, #8]
 4575 0038 7C89     		ldrh	r4, [r7, #10]
 4576 003a 0391     		str	r1, [sp, #12]
 4577 003c 1021     		movs	r1, #16
 4578 003e 0291     		str	r1, [sp, #8]
 4579 0040 0192     		str	r2, [sp, #4]
 4580 0042 0093     		str	r3, [sp]
 4581 0044 7B68     		ldr	r3, [r7, #4]
 4582 0046 2A46     		mov	r2, r5
 4583 0048 2146     		mov	r1, r4
 4584 004a FFF7FEFF 		bl	tcp_output_alloc_header_common
 4585 004e 7861     		str	r0, [r7, #20]
1861:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     seqno_be, pcb->local_port, pcb->remote_port, TCP_ACK,
1862:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPWND_MIN16(RCV_WND_SCALE(pcb, pcb->rcv_ann_wnd)));
1863:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p != NULL) {
 4586              		.loc 1 1863 6
ARM GAS  /tmp/cc6RPj0P.s 			page 118


 4587 0050 7B69     		ldr	r3, [r7, #20]
 4588 0052 002B     		cmp	r3, #0
 4589 0054 06D0     		beq	.L274
1864:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* If we're sending a packet, update the announced right window edge */
1865:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->rcv_ann_right_edge = pcb->rcv_nxt + pcb->rcv_ann_wnd;
 4590              		.loc 1 1865 34
 4591 0056 FB68     		ldr	r3, [r7, #12]
 4592 0058 5B6A     		ldr	r3, [r3, #36]
 4593              		.loc 1 1865 49
 4594 005a FA68     		ldr	r2, [r7, #12]
 4595 005c 528D     		ldrh	r2, [r2, #42]
 4596              		.loc 1 1865 44
 4597 005e 1A44     		add	r2, r2, r3
 4598              		.loc 1 1865 29
 4599 0060 FB68     		ldr	r3, [r7, #12]
 4600 0062 DA62     		str	r2, [r3, #44]
 4601              	.L274:
1866:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1867:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return p;
 4602              		.loc 1 1867 10
 4603 0064 7B69     		ldr	r3, [r7, #20]
1868:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4604              		.loc 1 1868 1
 4605 0066 1846     		mov	r0, r3
 4606 0068 1837     		adds	r7, r7, #24
 4607              	.LCFI88:
 4608              		.cfi_def_cfa_offset 16
 4609 006a BD46     		mov	sp, r7
 4610              	.LCFI89:
 4611              		.cfi_def_cfa_register 13
 4612              		@ sp needed
 4613 006c B0BD     		pop	{r4, r5, r7, pc}
 4614              	.L277:
 4615 006e 00BF     		.align	2
 4616              	.L276:
 4617 0070 00000000 		.word	.LC0
 4618 0074 04070000 		.word	.LC50
 4619 0078 50000000 		.word	.LC2
 4620              		.cfi_endproc
 4621              	.LFE150:
 4623              		.section	.rodata
 4624 0729 000000   		.align	2
 4625              	.LC51:
 4626 072c 7463705F 		.ascii	"tcp_output_fill_options: invalid pbuf\000"
 4626      6F757470 
 4626      75745F66 
 4626      696C6C5F 
 4626      6F707469 
 4627              		.section	.text.tcp_output_fill_options,"ax",%progbits
 4628              		.align	1
 4629              		.syntax unified
 4630              		.thumb
 4631              		.thumb_func
 4632              		.fpu fpv4-sp-d16
 4634              	tcp_output_fill_options:
 4635              	.LFB151:
1869:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cc6RPj0P.s 			page 119


1870:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /* Fill in options for control segments */
1871:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static void
1872:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_fill_options(const struct tcp_pcb *pcb, struct pbuf *p, u8_t optflags, u8_t num_sacks)
1873:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4636              		.loc 1 1873 1
 4637              		.cfi_startproc
 4638              		@ args = 0, pretend = 0, frame = 32
 4639              		@ frame_needed = 1, uses_anonymous_args = 0
 4640 0000 80B5     		push	{r7, lr}
 4641              	.LCFI90:
 4642              		.cfi_def_cfa_offset 8
 4643              		.cfi_offset 7, -8
 4644              		.cfi_offset 14, -4
 4645 0002 88B0     		sub	sp, sp, #32
 4646              	.LCFI91:
 4647              		.cfi_def_cfa_offset 40
 4648 0004 00AF     		add	r7, sp, #0
 4649              	.LCFI92:
 4650              		.cfi_def_cfa_register 7
 4651 0006 F860     		str	r0, [r7, #12]
 4652 0008 B960     		str	r1, [r7, #8]
 4653 000a 1146     		mov	r1, r2
 4654 000c 1A46     		mov	r2, r3
 4655 000e 0B46     		mov	r3, r1
 4656 0010 FB71     		strb	r3, [r7, #7]
 4657 0012 1346     		mov	r3, r2
 4658 0014 BB71     		strb	r3, [r7, #6]
1874:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
1875:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t *opts;
1876:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t sacks_len = 0;
 4659              		.loc 1 1876 9
 4660 0016 0023     		movs	r3, #0
 4661 0018 FB83     		strh	r3, [r7, #30]	@ movhi
1877:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1878:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_fill_options: invalid pbuf", p != NULL);
 4662              		.loc 1 1878 3
 4663 001a BB68     		ldr	r3, [r7, #8]
 4664 001c 002B     		cmp	r3, #0
 4665 001e 06D1     		bne	.L279
 4666              		.loc 1 1878 3 is_stmt 0 discriminator 1
 4667 0020 134B     		ldr	r3, .L282
 4668 0022 40F25672 		movw	r2, #1878
 4669 0026 1349     		ldr	r1, .L282+4
 4670 0028 1348     		ldr	r0, .L282+8
 4671 002a FFF7FEFF 		bl	printf
 4672              	.L279:
1879:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1880:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 4673              		.loc 1 1880 10 is_stmt 1
 4674 002e BB68     		ldr	r3, [r7, #8]
 4675 0030 5B68     		ldr	r3, [r3, #4]
 4676 0032 BB61     		str	r3, [r7, #24]
1881:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = (u32_t *)(void *)(tcphdr + 1);
 4677              		.loc 1 1881 8
 4678 0034 BB69     		ldr	r3, [r7, #24]
 4679 0036 1433     		adds	r3, r3, #20
 4680 0038 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/cc6RPj0P.s 			page 120


1882:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1883:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* NB. MSS and window scale options are only sent on SYNs, so ignore them here */
1884:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1885:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
1886:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (optflags & TF_SEG_OPTS_TS) {
1887:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_timestamp_option(pcb, opts);
1888:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += 3;
1889:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1890:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1891:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1892:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
1893:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb && (num_sacks > 0)) {
1894:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_build_sack_option(pcb, opts, num_sacks);
1895:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* 1 word for SACKs header (including 2xNOP), and 2 words for each SACK */
1896:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     sacks_len = 1 + num_sacks * 2;
1897:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     opts += sacks_len;
1898:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1899:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
1900:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(num_sacks);
1901:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1902:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1903:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #ifdef LWIP_HOOK_TCP_OUT_ADD_TCPOPTS
1904:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   opts = LWIP_HOOK_TCP_OUT_ADD_TCPOPTS(p, tcphdr, pcb, opts);
1905:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1906:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1907:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(pcb);
1908:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(sacks_len);
1909:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("options not filled", (u8_t *)opts == ((u8_t *)(tcphdr + 1)) + sacks_len * 4 + LWIP_T
 4681              		.loc 1 1909 3
 4682 003a BB69     		ldr	r3, [r7, #24]
 4683 003c 03F11402 		add	r2, r3, #20
 4684 0040 FB8B     		ldrh	r3, [r7, #30]
 4685 0042 9B00     		lsls	r3, r3, #2
 4686 0044 1946     		mov	r1, r3
 4687 0046 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 4688 0048 9B00     		lsls	r3, r3, #2
 4689 004a 03F00403 		and	r3, r3, #4
 4690 004e 0B44     		add	r3, r3, r1
 4691 0050 1344     		add	r3, r3, r2
 4692 0052 7A69     		ldr	r2, [r7, #20]
 4693 0054 9A42     		cmp	r2, r3
 4694 0056 06D0     		beq	.L281
 4695              		.loc 1 1909 3 is_stmt 0 discriminator 1
 4696 0058 054B     		ldr	r3, .L282
 4697 005a 40F27572 		movw	r2, #1909
 4698 005e 0749     		ldr	r1, .L282+12
 4699 0060 0548     		ldr	r0, .L282+8
 4700 0062 FFF7FEFF 		bl	printf
 4701              	.L281:
1910:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(optflags); /* for LWIP_NOASSERT */
1911:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_UNUSED_ARG(opts); /* for LWIP_NOASSERT */
1912:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4702              		.loc 1 1912 1 is_stmt 1
 4703 0066 00BF     		nop
 4704 0068 2037     		adds	r7, r7, #32
 4705              	.LCFI93:
 4706              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc6RPj0P.s 			page 121


 4707 006a BD46     		mov	sp, r7
 4708              	.LCFI94:
 4709              		.cfi_def_cfa_register 13
 4710              		@ sp needed
 4711 006c 80BD     		pop	{r7, pc}
 4712              	.L283:
 4713 006e 00BF     		.align	2
 4714              	.L282:
 4715 0070 00000000 		.word	.LC0
 4716 0074 2C070000 		.word	.LC51
 4717 0078 50000000 		.word	.LC2
 4718 007c 24060000 		.word	.LC43
 4719              		.cfi_endproc
 4720              	.LFE151:
 4722              		.section	.rodata
 4723 0752 0000     		.align	2
 4724              	.LC52:
 4725 0754 7463705F 		.ascii	"tcp_output_control_segment: invalid pbuf\000"
 4725      6F757470 
 4725      75745F63 
 4725      6F6E7472 
 4725      6F6C5F73 
 4726              		.section	.text.tcp_output_control_segment,"ax",%progbits
 4727              		.align	1
 4728              		.syntax unified
 4729              		.thumb
 4730              		.thumb_func
 4731              		.fpu fpv4-sp-d16
 4733              	tcp_output_control_segment:
 4734              	.LFB152:
1913:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1914:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /** Output a control segment pbuf to IP.
1915:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1916:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called from tcp_rst, tcp_send_empty_ack, tcp_keepalive and tcp_zero_window_probe,
1917:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * this function combines selecting a netif for transmission, generating the tcp
1918:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * header checksum and calling ip_output_if while handling netif hints and stats.
1919:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1920:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** static err_t
1921:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_output_control_segment(const struct tcp_pcb *pcb, struct pbuf *p,
1922:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                            const ip_addr_t *src, const ip_addr_t *dst)
1923:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4735              		.loc 1 1923 1
 4736              		.cfi_startproc
 4737              		@ args = 0, pretend = 0, frame = 24
 4738              		@ frame_needed = 1, uses_anonymous_args = 0
 4739 0000 80B5     		push	{r7, lr}
 4740              	.LCFI95:
 4741              		.cfi_def_cfa_offset 8
 4742              		.cfi_offset 7, -8
 4743              		.cfi_offset 14, -4
 4744 0002 8AB0     		sub	sp, sp, #40
 4745              	.LCFI96:
 4746              		.cfi_def_cfa_offset 48
 4747 0004 04AF     		add	r7, sp, #16
 4748              	.LCFI97:
 4749              		.cfi_def_cfa 7, 32
 4750 0006 F860     		str	r0, [r7, #12]
ARM GAS  /tmp/cc6RPj0P.s 			page 122


 4751 0008 B960     		str	r1, [r7, #8]
 4752 000a 7A60     		str	r2, [r7, #4]
 4753 000c 3B60     		str	r3, [r7]
1924:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
1925:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct netif *netif;
1926:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1927:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_output_control_segment: invalid pbuf", p != NULL);
 4754              		.loc 1 1927 3
 4755 000e BB68     		ldr	r3, [r7, #8]
 4756 0010 002B     		cmp	r3, #0
 4757 0012 06D1     		bne	.L285
 4758              		.loc 1 1927 3 is_stmt 0 discriminator 1
 4759 0014 1C4B     		ldr	r3, .L291
 4760 0016 40F28772 		movw	r2, #1927
 4761 001a 1C49     		ldr	r1, .L291+4
 4762 001c 1C48     		ldr	r0, .L291+8
 4763 001e FFF7FEFF 		bl	printf
 4764              	.L285:
1928:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1929:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   netif = tcp_route(pcb, src, dst);
 4765              		.loc 1 1929 11 is_stmt 1
 4766 0022 3A68     		ldr	r2, [r7]
 4767 0024 7968     		ldr	r1, [r7, #4]
 4768 0026 F868     		ldr	r0, [r7, #12]
 4769 0028 FFF7FEFF 		bl	tcp_route
 4770 002c 3861     		str	r0, [r7, #16]
1930:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (netif == NULL) {
 4771              		.loc 1 1930 6
 4772 002e 3B69     		ldr	r3, [r7, #16]
 4773 0030 002B     		cmp	r3, #0
 4774 0032 02D1     		bne	.L286
1931:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ERR_RTE;
 4775              		.loc 1 1931 9
 4776 0034 FC23     		movs	r3, #252
 4777 0036 FB75     		strb	r3, [r7, #23]
 4778 0038 1CE0     		b	.L287
 4779              	.L286:
 4780              	.LBB19:
1932:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
1933:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     u8_t ttl, tos;
1934:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if CHECKSUM_GEN_TCP
1935:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_TCP) {
1936:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       struct tcp_hdr *tcphdr = (struct tcp_hdr *)p->payload;
1937:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tcphdr->chksum = ip_chksum_pseudo(p, IP_PROTO_TCP, p->tot_len,
1938:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                                         src, dst);
1939:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1940:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1941:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     if (pcb != NULL) {
 4781              		.loc 1 1941 8
 4782 003a FB68     		ldr	r3, [r7, #12]
 4783 003c 002B     		cmp	r3, #0
 4784 003e 06D0     		beq	.L288
1942:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       NETIF_SET_HINTS(netif, LWIP_CONST_CAST(struct netif_hint*, &(pcb->netif_hints)));
1943:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ttl = pcb->ttl;
 4785              		.loc 1 1943 11
 4786 0040 FB68     		ldr	r3, [r7, #12]
 4787 0042 DB7A     		ldrb	r3, [r3, #11]
ARM GAS  /tmp/cc6RPj0P.s 			page 123


 4788 0044 BB75     		strb	r3, [r7, #22]
1944:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tos = pcb->tos;
 4789              		.loc 1 1944 11
 4790 0046 FB68     		ldr	r3, [r7, #12]
 4791 0048 9B7A     		ldrb	r3, [r3, #10]
 4792 004a 7B75     		strb	r3, [r7, #21]
 4793 004c 03E0     		b	.L289
 4794              	.L288:
1945:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     } else {
1946:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       /* Send output with hardcoded TTL/HL since we have no access to the pcb */
1947:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       ttl = TCP_TTL;
 4795              		.loc 1 1947 11
 4796 004e FF23     		movs	r3, #255
 4797 0050 BB75     		strb	r3, [r7, #22]
1948:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****       tos = 0;
 4798              		.loc 1 1948 11
 4799 0052 0023     		movs	r3, #0
 4800 0054 7B75     		strb	r3, [r7, #21]
 4801              	.L289:
1949:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     }
1950:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCP_STATS_INC(tcp.xmit);
1951:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     err = ip_output_if(p, src, dst, ttl, tos, IP_PROTO_TCP, netif);
 4802              		.loc 1 1951 11
 4803 0056 BA7D     		ldrb	r2, [r7, #22]	@ zero_extendqisi2
 4804 0058 3B69     		ldr	r3, [r7, #16]
 4805 005a 0293     		str	r3, [sp, #8]
 4806 005c 0623     		movs	r3, #6
 4807 005e 0193     		str	r3, [sp, #4]
 4808 0060 7B7D     		ldrb	r3, [r7, #21]	@ zero_extendqisi2
 4809 0062 0093     		str	r3, [sp]
 4810 0064 1346     		mov	r3, r2
 4811 0066 3A68     		ldr	r2, [r7]
 4812 0068 7968     		ldr	r1, [r7, #4]
 4813 006a B868     		ldr	r0, [r7, #8]
 4814 006c FFF7FEFF 		bl	ip4_output_if
 4815 0070 0346     		mov	r3, r0
 4816 0072 FB75     		strb	r3, [r7, #23]
 4817              	.L287:
 4818              	.LBE19:
1952:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     NETIF_RESET_HINTS(netif);
1953:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
1954:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pbuf_free(p);
 4819              		.loc 1 1954 3
 4820 0074 B868     		ldr	r0, [r7, #8]
 4821 0076 FFF7FEFF 		bl	pbuf_free
1955:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 4822              		.loc 1 1955 10
 4823 007a 97F91730 		ldrsb	r3, [r7, #23]
1956:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4824              		.loc 1 1956 1
 4825 007e 1846     		mov	r0, r3
 4826 0080 1837     		adds	r7, r7, #24
 4827              	.LCFI98:
 4828              		.cfi_def_cfa_offset 8
 4829 0082 BD46     		mov	sp, r7
 4830              	.LCFI99:
 4831              		.cfi_def_cfa_register 13
ARM GAS  /tmp/cc6RPj0P.s 			page 124


 4832              		@ sp needed
 4833 0084 80BD     		pop	{r7, pc}
 4834              	.L292:
 4835 0086 00BF     		.align	2
 4836              	.L291:
 4837 0088 00000000 		.word	.LC0
 4838 008c 54070000 		.word	.LC52
 4839 0090 50000000 		.word	.LC2
 4840              		.cfi_endproc
 4841              	.LFE152:
 4843              		.section	.rodata
 4844 077d 000000   		.align	2
 4845              	.LC53:
 4846 0780 7463705F 		.ascii	"tcp_rst: invalid local_ip\000"
 4846      7273743A 
 4846      20696E76 
 4846      616C6964 
 4846      206C6F63 
 4847 079a 0000     		.align	2
 4848              	.LC54:
 4849 079c 7463705F 		.ascii	"tcp_rst: invalid remote_ip\000"
 4849      7273743A 
 4849      20696E76 
 4849      616C6964 
 4849      2072656D 
 4850              		.section	.text.tcp_rst,"ax",%progbits
 4851              		.align	1
 4852              		.global	tcp_rst
 4853              		.syntax unified
 4854              		.thumb
 4855              		.thumb_func
 4856              		.fpu fpv4-sp-d16
 4858              	tcp_rst:
 4859              	.LFB153:
1957:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1958:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
1959:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send a TCP RESET packet (empty segment with RST flag set) either to
1960:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * abort a connection or to show that there is no matching local connection
1961:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * for a received segment.
1962:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1963:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_abort() (to abort a local connection), tcp_input() (if no
1964:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * matching local pcb was found), tcp_listen_input() (if incoming segment
1965:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * has ACK flag set) and tcp_process() (received segment in the wrong state)
1966:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1967:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Since a RST segment is in most cases not sent for an active connection,
1968:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * tcp_rst() has a number of arguments that are taken from a tcp_pcb for
1969:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * most other segment output functions.
1970:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
1971:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb TCP pcb (may be NULL if no pcb is available)
1972:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param seqno the sequence number to use for the outgoing segment
1973:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param ackno the acknowledge number to use for the outgoing segment
1974:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param local_ip the local IP address to send the segment from
1975:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param remote_ip the remote IP address to send the segment to
1976:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param local_port the local TCP port to send the segment from
1977:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param remote_port the remote TCP port to send the segment to
1978:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
1979:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** void
ARM GAS  /tmp/cc6RPj0P.s 			page 125


1980:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_rst(const struct tcp_pcb *pcb, u32_t seqno, u32_t ackno,
1981:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         const ip_addr_t *local_ip, const ip_addr_t *remote_ip,
1982:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****         u16_t local_port, u16_t remote_port)
1983:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4860              		.loc 1 1983 1
 4861              		.cfi_startproc
 4862              		@ args = 12, pretend = 0, frame = 24
 4863              		@ frame_needed = 1, uses_anonymous_args = 0
 4864 0000 90B5     		push	{r4, r7, lr}
 4865              	.LCFI100:
 4866              		.cfi_def_cfa_offset 12
 4867              		.cfi_offset 4, -12
 4868              		.cfi_offset 7, -8
 4869              		.cfi_offset 14, -4
 4870 0002 8BB0     		sub	sp, sp, #44
 4871              	.LCFI101:
 4872              		.cfi_def_cfa_offset 56
 4873 0004 04AF     		add	r7, sp, #16
 4874              	.LCFI102:
 4875              		.cfi_def_cfa 7, 40
 4876 0006 F860     		str	r0, [r7, #12]
 4877 0008 B960     		str	r1, [r7, #8]
 4878 000a 7A60     		str	r2, [r7, #4]
 4879 000c 3B60     		str	r3, [r7]
1984:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
1985:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t wnd;
1986:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen;
1987:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1988:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rst: invalid local_ip", local_ip != NULL);
 4880              		.loc 1 1988 3
 4881 000e 3B68     		ldr	r3, [r7]
 4882 0010 002B     		cmp	r3, #0
 4883 0012 06D1     		bne	.L294
 4884              		.loc 1 1988 3 is_stmt 0 discriminator 1
 4885 0014 1F4B     		ldr	r3, .L299
 4886 0016 40F2C472 		movw	r2, #1988
 4887 001a 1F49     		ldr	r1, .L299+4
 4888 001c 1F48     		ldr	r0, .L299+8
 4889 001e FFF7FEFF 		bl	printf
 4890              	.L294:
1989:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_rst: invalid remote_ip", remote_ip != NULL);
 4891              		.loc 1 1989 3 is_stmt 1
 4892 0022 BB6A     		ldr	r3, [r7, #40]
 4893 0024 002B     		cmp	r3, #0
 4894 0026 06D1     		bne	.L295
 4895              		.loc 1 1989 3 is_stmt 0 discriminator 1
 4896 0028 1A4B     		ldr	r3, .L299
 4897 002a 40F2C572 		movw	r2, #1989
 4898 002e 1C49     		ldr	r1, .L299+12
 4899 0030 1A48     		ldr	r0, .L299+8
 4900 0032 FFF7FEFF 		bl	printf
 4901              	.L295:
1990:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1991:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
 4902              		.loc 1 1991 10 is_stmt 1
 4903 0036 0023     		movs	r3, #0
 4904 0038 FB75     		strb	r3, [r7, #23]
ARM GAS  /tmp/cc6RPj0P.s 			page 126


1992:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1993:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_WND_SCALE
1994:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = PP_HTONS(((TCP_WND >> TCP_RCV_SCALE) & 0xFFFF));
1995:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #else
1996:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   wnd = PP_HTONS(TCP_WND);
 4905              		.loc 1 1996 7
 4906 003a 46F20803 		movw	r3, #24584
 4907 003e BB82     		strh	r3, [r7, #20]	@ movhi
1997:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
1998:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
1999:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header_common(ackno, optlen, 0, lwip_htonl(seqno), local_port,
 4908              		.loc 1 1999 7
 4909 0040 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 4910 0042 9CB2     		uxth	r4, r3
 4911 0044 B868     		ldr	r0, [r7, #8]
 4912 0046 FFF7FEFF 		bl	lwip_htonl
 4913 004a 0246     		mov	r2, r0
 4914 004c BB8A     		ldrh	r3, [r7, #20]
 4915 004e 0393     		str	r3, [sp, #12]
 4916 0050 1423     		movs	r3, #20
 4917 0052 0293     		str	r3, [sp, #8]
 4918 0054 3B8E     		ldrh	r3, [r7, #48]
 4919 0056 0193     		str	r3, [sp, #4]
 4920 0058 BB8D     		ldrh	r3, [r7, #44]
 4921 005a 0093     		str	r3, [sp]
 4922 005c 1346     		mov	r3, r2
 4923 005e 0022     		movs	r2, #0
 4924 0060 2146     		mov	r1, r4
 4925 0062 7868     		ldr	r0, [r7, #4]
 4926 0064 FFF7FEFF 		bl	tcp_output_alloc_header_common
 4927 0068 3861     		str	r0, [r7, #16]
2000:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     remote_port, TCP_RST | TCP_ACK, wnd);
2001:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 4928              		.loc 1 2001 6
 4929 006a 3B69     		ldr	r3, [r7, #16]
 4930 006c 002B     		cmp	r3, #0
 4931 006e 0CD0     		beq	.L298
2002:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG, ("tcp_rst: could not allocate memory for pbuf\n"));
2003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return;
2004:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2005:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, 0, optlen);
 4932              		.loc 1 2005 3
 4933 0070 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 4934 0072 0022     		movs	r2, #0
 4935 0074 3969     		ldr	r1, [r7, #16]
 4936 0076 F868     		ldr	r0, [r7, #12]
 4937 0078 FFF7FEFF 		bl	tcp_output_fill_options
2006:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2007:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   MIB2_STATS_INC(mib2.tcpoutrsts);
2008:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2009:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_control_segment(pcb, p, local_ip, remote_ip);
 4938              		.loc 1 2009 3
 4939 007c BB6A     		ldr	r3, [r7, #40]
 4940 007e 3A68     		ldr	r2, [r7]
 4941 0080 3969     		ldr	r1, [r7, #16]
 4942 0082 F868     		ldr	r0, [r7, #12]
 4943 0084 FFF7FEFF 		bl	tcp_output_control_segment
ARM GAS  /tmp/cc6RPj0P.s 			page 127


 4944 0088 00E0     		b	.L293
 4945              	.L298:
2003:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
 4946              		.loc 1 2003 5
 4947 008a 00BF     		nop
 4948              	.L293:
2010:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_RST_DEBUG, ("tcp_rst: seqno %"U32_F" ackno %"U32_F".\n", seqno, ackno));
2011:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 4949              		.loc 1 2011 1
 4950 008c 1C37     		adds	r7, r7, #28
 4951              	.LCFI103:
 4952              		.cfi_def_cfa_offset 12
 4953 008e BD46     		mov	sp, r7
 4954              	.LCFI104:
 4955              		.cfi_def_cfa_register 13
 4956              		@ sp needed
 4957 0090 90BD     		pop	{r4, r7, pc}
 4958              	.L300:
 4959 0092 00BF     		.align	2
 4960              	.L299:
 4961 0094 00000000 		.word	.LC0
 4962 0098 80070000 		.word	.LC53
 4963 009c 50000000 		.word	.LC2
 4964 00a0 9C070000 		.word	.LC54
 4965              		.cfi_endproc
 4966              	.LFE153:
 4968              		.section	.rodata
 4969 07b7 00       		.align	2
 4970              	.LC55:
 4971 07b8 7463705F 		.ascii	"tcp_send_empty_ack: invalid pcb\000"
 4971      73656E64 
 4971      5F656D70 
 4971      74795F61 
 4971      636B3A20 
 4972              		.section	.text.tcp_send_empty_ack,"ax",%progbits
 4973              		.align	1
 4974              		.global	tcp_send_empty_ack
 4975              		.syntax unified
 4976              		.thumb
 4977              		.thumb_func
 4978              		.fpu fpv4-sp-d16
 4980              	tcp_send_empty_ack:
 4981              	.LFB154:
2012:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2013:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
2014:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send an ACK without data.
2015:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2016:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb Protocol control block for the TCP connection to send the ACK
2017:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
2018:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
2019:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_send_empty_ack(struct tcp_pcb *pcb)
2020:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 4982              		.loc 1 2020 1
 4983              		.cfi_startproc
 4984              		@ args = 0, pretend = 0, frame = 24
 4985              		@ frame_needed = 1, uses_anonymous_args = 0
 4986 0000 90B5     		push	{r4, r7, lr}
ARM GAS  /tmp/cc6RPj0P.s 			page 128


 4987              	.LCFI105:
 4988              		.cfi_def_cfa_offset 12
 4989              		.cfi_offset 4, -12
 4990              		.cfi_offset 7, -8
 4991              		.cfi_offset 14, -4
 4992 0002 87B0     		sub	sp, sp, #28
 4993              	.LCFI106:
 4994              		.cfi_def_cfa_offset 40
 4995 0004 00AF     		add	r7, sp, #0
 4996              	.LCFI107:
 4997              		.cfi_def_cfa_register 7
 4998 0006 7860     		str	r0, [r7, #4]
2021:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
2022:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
2023:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen, optflags = 0;
 4999              		.loc 1 2023 16
 5000 0008 0023     		movs	r3, #0
 5001 000a FB75     		strb	r3, [r7, #23]
2024:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t num_sacks = 0;
 5002              		.loc 1 2024 8
 5003 000c 0023     		movs	r3, #0
 5004 000e BB75     		strb	r3, [r7, #22]
2025:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2026:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_send_empty_ack: invalid pcb", pcb != NULL);
 5005              		.loc 1 2026 3
 5006 0010 7B68     		ldr	r3, [r7, #4]
 5007 0012 002B     		cmp	r3, #0
 5008 0014 06D1     		bne	.L302
 5009              		.loc 1 2026 3 is_stmt 0 discriminator 1
 5010 0016 284B     		ldr	r3, .L307
 5011 0018 40F2EA72 		movw	r2, #2026
 5012 001c 2749     		ldr	r1, .L307+4
 5013 001e 2848     		ldr	r0, .L307+8
 5014 0020 FFF7FEFF 		bl	printf
 5015              	.L302:
2027:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2028:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
2029:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->flags & TF_TIMESTAMP) {
2030:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optflags = TF_SEG_OPTS_TS;
2031:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2032:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
2033:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(optflags, pcb);
 5016              		.loc 1 2033 12 is_stmt 1
 5017 0024 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 5018 0026 9B00     		lsls	r3, r3, #2
 5019 0028 DBB2     		uxtb	r3, r3
 5020              		.loc 1 2033 10
 5021 002a 03F00403 		and	r3, r3, #4
 5022 002e 7B75     		strb	r3, [r7, #21]
2034:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2035:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_SACK_OUT
2036:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* For now, SACKs are only sent with empty ACKs */
2037:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if ((num_sacks = tcp_get_num_sacks(pcb, optlen)) > 0) {
2038:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     optlen += 4 + num_sacks * 8; /* 4 bytes for header (including 2*NOP), plus 8B for each SACK */
2039:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2040:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
2041:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cc6RPj0P.s 			page 129


2042:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, 0, lwip_htonl(pcb->snd_nxt));
 5023              		.loc 1 2042 7
 5024 0030 7B7D     		ldrb	r3, [r7, #21]	@ zero_extendqisi2
 5025 0032 9CB2     		uxth	r4, r3
 5026 0034 7B68     		ldr	r3, [r7, #4]
 5027 0036 1B6D     		ldr	r3, [r3, #80]
 5028 0038 1846     		mov	r0, r3
 5029 003a FFF7FEFF 		bl	lwip_htonl
 5030 003e 0346     		mov	r3, r0
 5031 0040 0022     		movs	r2, #0
 5032 0042 2146     		mov	r1, r4
 5033 0044 7868     		ldr	r0, [r7, #4]
 5034 0046 FFF7FEFF 		bl	tcp_output_alloc_header
 5035 004a 3861     		str	r0, [r7, #16]
2043:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 5036              		.loc 1 2043 6
 5037 004c 3B69     		ldr	r3, [r7, #16]
 5038 004e 002B     		cmp	r3, #0
 5039 0050 09D1     		bne	.L303
2044:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
2045:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
 5040              		.loc 1 2045 5
 5041 0052 7B68     		ldr	r3, [r7, #4]
 5042 0054 5B8B     		ldrh	r3, [r3, #26]
 5043 0056 43F00303 		orr	r3, r3, #3
 5044 005a 9AB2     		uxth	r2, r3
 5045 005c 7B68     		ldr	r3, [r7, #4]
 5046 005e 5A83     		strh	r2, [r3, #26]	@ movhi
2046:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_OUTPUT_DEBUG, ("tcp_output: (ACK) could not allocate pbuf\n"));
2047:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_BUF;
 5047              		.loc 1 2047 12
 5048 0060 6FF00103 		mvn	r3, #1
 5049 0064 23E0     		b	.L304
 5050              	.L303:
2048:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2049:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, optflags, num_sacks);
 5051              		.loc 1 2049 3
 5052 0066 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 5053 0068 FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 5054 006a 3969     		ldr	r1, [r7, #16]
 5055 006c 7868     		ldr	r0, [r7, #4]
 5056 006e FFF7FEFF 		bl	tcp_output_fill_options
2050:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2051:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #if LWIP_TCP_TIMESTAMPS
2052:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   pcb->ts_lastacksent = pcb->rcv_nxt;
2053:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** #endif
2054:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2055:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_OUTPUT_DEBUG,
2056:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_output: sending ACK for %"U32_F"\n", pcb->rcv_nxt));
2057:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_output_control_segment(pcb, p, &pcb->local_ip, &pcb->remote_ip);
 5057              		.loc 1 2057 44
 5058 0072 7A68     		ldr	r2, [r7, #4]
 5059              		.loc 1 2057 60
 5060 0074 7B68     		ldr	r3, [r7, #4]
 5061 0076 0433     		adds	r3, r3, #4
 5062              		.loc 1 2057 9
 5063 0078 3969     		ldr	r1, [r7, #16]
ARM GAS  /tmp/cc6RPj0P.s 			page 130


 5064 007a 7868     		ldr	r0, [r7, #4]
 5065 007c FFF7FEFF 		bl	tcp_output_control_segment
 5066 0080 0346     		mov	r3, r0
 5067 0082 FB73     		strb	r3, [r7, #15]
2058:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (err != ERR_OK) {
 5068              		.loc 1 2058 6
 5069 0084 97F90F30 		ldrsb	r3, [r7, #15]
 5070 0088 002B     		cmp	r3, #0
 5071 008a 07D0     		beq	.L305
2059:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* let tcp_fasttmr retry sending this ACK */
2060:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_set_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
 5072              		.loc 1 2060 5
 5073 008c 7B68     		ldr	r3, [r7, #4]
 5074 008e 5B8B     		ldrh	r3, [r3, #26]
 5075 0090 43F00303 		orr	r3, r3, #3
 5076 0094 9AB2     		uxth	r2, r3
 5077 0096 7B68     		ldr	r3, [r7, #4]
 5078 0098 5A83     		strh	r2, [r3, #26]	@ movhi
 5079 009a 06E0     		b	.L306
 5080              	.L305:
2061:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
2062:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* remove ACK flags from the PCB, as we sent an empty ACK now */
2063:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     tcp_clear_flags(pcb, TF_ACK_DELAY | TF_ACK_NOW);
 5081              		.loc 1 2063 5
 5082 009c 7B68     		ldr	r3, [r7, #4]
 5083 009e 5B8B     		ldrh	r3, [r3, #26]
 5084 00a0 23F00303 		bic	r3, r3, #3
 5085 00a4 9AB2     		uxth	r2, r3
 5086 00a6 7B68     		ldr	r3, [r7, #4]
 5087 00a8 5A83     		strh	r2, [r3, #26]	@ movhi
 5088              	.L306:
2064:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2065:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2066:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 5089              		.loc 1 2066 10
 5090 00aa 97F90F30 		ldrsb	r3, [r7, #15]
 5091              	.L304:
2067:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 5092              		.loc 1 2067 1
 5093 00ae 1846     		mov	r0, r3
 5094 00b0 1C37     		adds	r7, r7, #28
 5095              	.LCFI108:
 5096              		.cfi_def_cfa_offset 12
 5097 00b2 BD46     		mov	sp, r7
 5098              	.LCFI109:
 5099              		.cfi_def_cfa_register 13
 5100              		@ sp needed
 5101 00b4 90BD     		pop	{r4, r7, pc}
 5102              	.L308:
 5103 00b6 00BF     		.align	2
 5104              	.L307:
 5105 00b8 00000000 		.word	.LC0
 5106 00bc B8070000 		.word	.LC55
 5107 00c0 50000000 		.word	.LC2
 5108              		.cfi_endproc
 5109              	.LFE154:
 5111              		.section	.rodata
ARM GAS  /tmp/cc6RPj0P.s 			page 131


 5112              		.align	2
 5113              	.LC56:
 5114 07d8 7463705F 		.ascii	"tcp_keepalive: invalid pcb\000"
 5114      6B656570 
 5114      616C6976 
 5114      653A2069 
 5114      6E76616C 
 5115              		.section	.text.tcp_keepalive,"ax",%progbits
 5116              		.align	1
 5117              		.global	tcp_keepalive
 5118              		.syntax unified
 5119              		.thumb
 5120              		.thumb_func
 5121              		.fpu fpv4-sp-d16
 5123              	tcp_keepalive:
 5124              	.LFB155:
2068:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2069:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
2070:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send keepalive packets to keep a connection active although
2071:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * no data is sent over it.
2072:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2073:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr()
2074:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2075:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to send a keepalive packet
2076:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
2077:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
2078:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_keepalive(struct tcp_pcb *pcb)
2079:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 5125              		.loc 1 2079 1
 5126              		.cfi_startproc
 5127              		@ args = 0, pretend = 0, frame = 24
 5128              		@ frame_needed = 1, uses_anonymous_args = 0
 5129 0000 90B5     		push	{r4, r7, lr}
 5130              	.LCFI110:
 5131              		.cfi_def_cfa_offset 12
 5132              		.cfi_offset 4, -12
 5133              		.cfi_offset 7, -8
 5134              		.cfi_offset 14, -4
 5135 0002 87B0     		sub	sp, sp, #28
 5136              	.LCFI111:
 5137              		.cfi_def_cfa_offset 40
 5138 0004 00AF     		add	r7, sp, #0
 5139              	.LCFI112:
 5140              		.cfi_def_cfa_register 7
 5141 0006 7860     		str	r0, [r7, #4]
2080:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
2081:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
2082:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
 5142              		.loc 1 2082 8
 5143 0008 0023     		movs	r3, #0
 5144 000a FB75     		strb	r3, [r7, #23]
2083:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2084:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_keepalive: invalid pcb", pcb != NULL);
 5145              		.loc 1 2084 3
 5146 000c 7B68     		ldr	r3, [r7, #4]
 5147 000e 002B     		cmp	r3, #0
 5148 0010 06D1     		bne	.L310
ARM GAS  /tmp/cc6RPj0P.s 			page 132


 5149              		.loc 1 2084 3 is_stmt 0 discriminator 1
 5150 0012 184B     		ldr	r3, .L313
 5151 0014 40F62402 		movw	r2, #2084
 5152 0018 1749     		ldr	r1, .L313+4
 5153 001a 1848     		ldr	r0, .L313+8
 5154 001c FFF7FEFF 		bl	printf
 5155              	.L310:
2085:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2086:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: sending KEEPALIVE probe to "));
2087:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   ip_addr_debug_print_val(TCP_DEBUG, pcb->remote_ip);
2088:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("\n"));
2089:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2090:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: tcp_ticks %"U32_F"   pcb->tmr %"U32_F" pcb->keep_cnt_sent
2091:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           tcp_ticks, pcb->tmr, (u16_t)pcb->keep_cnt_sent));
2092:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2093:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, 0, lwip_htonl(pcb->snd_nxt - 1));
 5156              		.loc 1 2093 7 is_stmt 1
 5157 0020 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 5158 0022 9CB2     		uxth	r4, r3
 5159              		.loc 1 2093 61
 5160 0024 7B68     		ldr	r3, [r7, #4]
 5161 0026 1B6D     		ldr	r3, [r3, #80]
 5162              		.loc 1 2093 7
 5163 0028 013B     		subs	r3, r3, #1
 5164 002a 1846     		mov	r0, r3
 5165 002c FFF7FEFF 		bl	lwip_htonl
 5166 0030 0346     		mov	r3, r0
 5167 0032 0022     		movs	r2, #0
 5168 0034 2146     		mov	r1, r4
 5169 0036 7868     		ldr	r0, [r7, #4]
 5170 0038 FFF7FEFF 		bl	tcp_output_alloc_header
 5171 003c 3861     		str	r0, [r7, #16]
2094:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 5172              		.loc 1 2094 6
 5173 003e 3B69     		ldr	r3, [r7, #16]
 5174 0040 002B     		cmp	r3, #0
 5175 0042 02D1     		bne	.L311
2095:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG,
2096:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                 ("tcp_keepalive: could not allocate memory for pbuf\n"));
2097:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 5176              		.loc 1 2097 12
 5177 0044 4FF0FF33 		mov	r3, #-1
 5178 0048 10E0     		b	.L312
 5179              	.L311:
2098:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2099:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, 0, optlen);
 5180              		.loc 1 2099 3
 5181 004a FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 5182 004c 0022     		movs	r2, #0
 5183 004e 3969     		ldr	r1, [r7, #16]
 5184 0050 7868     		ldr	r0, [r7, #4]
 5185 0052 FFF7FEFF 		bl	tcp_output_fill_options
2100:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_output_control_segment(pcb, p, &pcb->local_ip, &pcb->remote_ip);
 5186              		.loc 1 2100 44
 5187 0056 7A68     		ldr	r2, [r7, #4]
 5188              		.loc 1 2100 60
 5189 0058 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6RPj0P.s 			page 133


 5190 005a 0433     		adds	r3, r3, #4
 5191              		.loc 1 2100 9
 5192 005c 3969     		ldr	r1, [r7, #16]
 5193 005e 7868     		ldr	r0, [r7, #4]
 5194 0060 FFF7FEFF 		bl	tcp_output_control_segment
 5195 0064 0346     		mov	r3, r0
 5196 0066 FB73     		strb	r3, [r7, #15]
2101:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2102:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_keepalive: seqno %"U32_F" ackno %"U32_F" err %d.\n",
2103:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           pcb->snd_nxt - 1, pcb->rcv_nxt, (int)err));
2104:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 5197              		.loc 1 2104 10
 5198 0068 97F90F30 		ldrsb	r3, [r7, #15]
 5199              	.L312:
2105:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 5200              		.loc 1 2105 1
 5201 006c 1846     		mov	r0, r3
 5202 006e 1C37     		adds	r7, r7, #28
 5203              	.LCFI113:
 5204              		.cfi_def_cfa_offset 12
 5205 0070 BD46     		mov	sp, r7
 5206              	.LCFI114:
 5207              		.cfi_def_cfa_register 13
 5208              		@ sp needed
 5209 0072 90BD     		pop	{r4, r7, pc}
 5210              	.L314:
 5211              		.align	2
 5212              	.L313:
 5213 0074 00000000 		.word	.LC0
 5214 0078 D8070000 		.word	.LC56
 5215 007c 50000000 		.word	.LC2
 5216              		.cfi_endproc
 5217              	.LFE155:
 5219              		.section	.rodata
 5220 07f3 00       		.align	2
 5221              	.LC57:
 5222 07f4 7463705F 		.ascii	"tcp_zero_window_probe: invalid pcb\000"
 5222      7A65726F 
 5222      5F77696E 
 5222      646F775F 
 5222      70726F62 
 5223              		.section	.text.tcp_zero_window_probe,"ax",%progbits
 5224              		.align	1
 5225              		.global	tcp_zero_window_probe
 5226              		.syntax unified
 5227              		.thumb
 5228              		.thumb_func
 5229              		.fpu fpv4-sp-d16
 5231              	tcp_zero_window_probe:
 5232              	.LFB156:
2106:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2107:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** /**
2108:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Send persist timer zero-window probes to keep a connection active
2109:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * when a window update is lost.
2110:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
2111:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * Called by tcp_slowtmr()
2112:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  *
ARM GAS  /tmp/cc6RPj0P.s 			page 134


2113:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  * @param pcb the tcp_pcb for which to send a zero-window probe packet
2114:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****  */
2115:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** err_t
2116:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** tcp_zero_window_probe(struct tcp_pcb *pcb)
2117:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** {
 5233              		.loc 1 2117 1
 5234              		.cfi_startproc
 5235              		@ args = 0, pretend = 0, frame = 40
 5236              		@ frame_needed = 1, uses_anonymous_args = 0
 5237 0000 90B5     		push	{r4, r7, lr}
 5238              	.LCFI115:
 5239              		.cfi_def_cfa_offset 12
 5240              		.cfi_offset 4, -12
 5241              		.cfi_offset 7, -8
 5242              		.cfi_offset 14, -4
 5243 0002 8BB0     		sub	sp, sp, #44
 5244              	.LCFI116:
 5245              		.cfi_def_cfa_offset 56
 5246 0004 00AF     		add	r7, sp, #0
 5247              	.LCFI117:
 5248              		.cfi_def_cfa_register 7
 5249 0006 7860     		str	r0, [r7, #4]
2118:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err_t err;
2119:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct pbuf *p;
2120:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_hdr *tcphdr;
2121:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   struct tcp_seg *seg;
2122:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u16_t len;
2123:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t is_fin;
2124:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u32_t snd_nxt;
2125:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   u8_t optlen = LWIP_TCP_OPT_LENGTH_SEGMENT(0, pcb);
 5250              		.loc 1 2125 8
 5251 0008 0023     		movs	r3, #0
 5252 000a 87F82730 		strb	r3, [r7, #39]
2126:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2127:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_ASSERT("tcp_zero_window_probe: invalid pcb", pcb != NULL);
 5253              		.loc 1 2127 3
 5254 000e 7B68     		ldr	r3, [r7, #4]
 5255 0010 002B     		cmp	r3, #0
 5256 0012 06D1     		bne	.L316
 5257              		.loc 1 2127 3 is_stmt 0 discriminator 1
 5258 0014 4C4B     		ldr	r3, .L326
 5259 0016 40F64F02 		movw	r2, #2127
 5260 001a 4C49     		ldr	r1, .L326+4
 5261 001c 4C48     		ldr	r0, .L326+8
 5262 001e FFF7FEFF 		bl	printf
 5263              	.L316:
2128:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2129:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: sending ZERO WINDOW probe to "));
2130:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   ip_addr_debug_print_val(TCP_DEBUG, pcb->remote_ip);
2131:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("\n"));
2132:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2133:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG,
2134:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****               ("tcp_zero_window_probe: tcp_ticks %"U32_F
2135:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                "   pcb->tmr %"U32_F" pcb->keep_cnt_sent %"U16_F"\n",
2136:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                tcp_ticks, pcb->tmr, (u16_t)pcb->keep_cnt_sent));
2137:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2138:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* Only consider unsent, persist timer should be off when there is data in-flight */
ARM GAS  /tmp/cc6RPj0P.s 			page 135


2139:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   seg = pcb->unsent;
 5264              		.loc 1 2139 7 is_stmt 1
 5265 0022 7B68     		ldr	r3, [r7, #4]
 5266 0024 DB6E     		ldr	r3, [r3, #108]
 5267 0026 3B62     		str	r3, [r7, #32]
2140:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (seg == NULL) {
 5268              		.loc 1 2140 6
 5269 0028 3B6A     		ldr	r3, [r7, #32]
 5270 002a 002B     		cmp	r3, #0
 5271 002c 01D1     		bne	.L317
2141:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Not expected, persist timer should be off when the send buffer is empty */
2142:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_OK;
 5272              		.loc 1 2142 12
 5273 002e 0023     		movs	r3, #0
 5274 0030 86E0     		b	.L318
 5275              	.L317:
2143:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2144:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2145:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* increment probe count. NOTE: we record probe even if it fails
2146:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      to actually transmit due to an error. This ensures memory exhaustion/
2147:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      routing problem doesn't leave a zero-window pcb as an indefinite zombie.
2148:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****      RTO mechanism has similar behavior, see pcb->nrtx */
2149:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (pcb->persist_probe < 0xFF) {
 5276              		.loc 1 2149 10
 5277 0032 7B68     		ldr	r3, [r7, #4]
 5278 0034 93F89A30 		ldrb	r3, [r3, #154]	@ zero_extendqisi2
 5279              		.loc 1 2149 6
 5280 0038 FF2B     		cmp	r3, #255
 5281 003a 07D0     		beq	.L319
2150:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     ++pcb->persist_probe;
 5282              		.loc 1 2150 10
 5283 003c 7B68     		ldr	r3, [r7, #4]
 5284 003e 93F89A30 		ldrb	r3, [r3, #154]	@ zero_extendqisi2
 5285              		.loc 1 2150 5
 5286 0042 0133     		adds	r3, r3, #1
 5287 0044 DAB2     		uxtb	r2, r3
 5288 0046 7B68     		ldr	r3, [r7, #4]
 5289 0048 83F89A20 		strb	r2, [r3, #154]
 5290              	.L319:
2151:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2152:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2153:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   is_fin = ((TCPH_FLAGS(seg->tcphdr) & TCP_FIN) != 0) && (seg->len == 0);
 5291              		.loc 1 2153 14
 5292 004c 3B6A     		ldr	r3, [r7, #32]
 5293 004e DB68     		ldr	r3, [r3, #12]
 5294 0050 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 5295 0052 9BB2     		uxth	r3, r3
 5296 0054 1846     		mov	r0, r3
 5297 0056 FFF7FEFF 		bl	lwip_htons
 5298 005a 0346     		mov	r3, r0
 5299 005c DBB2     		uxtb	r3, r3
 5300              		.loc 1 2153 38
 5301 005e 03F00103 		and	r3, r3, #1
 5302              		.loc 1 2153 55
 5303 0062 002B     		cmp	r3, #0
 5304 0064 05D0     		beq	.L320
 5305              		.loc 1 2153 62 discriminator 1
ARM GAS  /tmp/cc6RPj0P.s 			page 136


 5306 0066 3B6A     		ldr	r3, [r7, #32]
 5307 0068 1B89     		ldrh	r3, [r3, #8]
 5308              		.loc 1 2153 55 discriminator 1
 5309 006a 002B     		cmp	r3, #0
 5310 006c 01D1     		bne	.L320
 5311              		.loc 1 2153 55 is_stmt 0 discriminator 3
 5312 006e 0123     		movs	r3, #1
 5313 0070 00E0     		b	.L321
 5314              	.L320:
 5315              		.loc 1 2153 55 discriminator 4
 5316 0072 0023     		movs	r3, #0
 5317              	.L321:
 5318              		.loc 1 2153 10 is_stmt 1 discriminator 6
 5319 0074 FB77     		strb	r3, [r7, #31]
2154:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* we want to send one seqno: either FIN or data (no options) */
2155:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   len = is_fin ? 0 : 1;
 5320              		.loc 1 2155 20 discriminator 6
 5321 0076 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 5322 0078 002B     		cmp	r3, #0
 5323 007a 0CBF     		ite	eq
 5324 007c 0123     		moveq	r3, #1
 5325 007e 0023     		movne	r3, #0
 5326 0080 DBB2     		uxtb	r3, r3
 5327              		.loc 1 2155 7 discriminator 6
 5328 0082 BB83     		strh	r3, [r7, #28]	@ movhi
2156:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2157:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   p = tcp_output_alloc_header(pcb, optlen, len, seg->tcphdr->seqno);
 5329              		.loc 1 2157 7 discriminator 6
 5330 0084 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 5331 0088 99B2     		uxth	r1, r3
 5332              		.loc 1 2157 52 discriminator 6
 5333 008a 3B6A     		ldr	r3, [r7, #32]
 5334 008c DB68     		ldr	r3, [r3, #12]
 5335              		.loc 1 2157 7 discriminator 6
 5336 008e 5B68     		ldr	r3, [r3, #4]	@ unaligned
 5337 0090 BA8B     		ldrh	r2, [r7, #28]
 5338 0092 7868     		ldr	r0, [r7, #4]
 5339 0094 FFF7FEFF 		bl	tcp_output_alloc_header
 5340 0098 B861     		str	r0, [r7, #24]
2158:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (p == NULL) {
 5341              		.loc 1 2158 6 discriminator 6
 5342 009a BB69     		ldr	r3, [r7, #24]
 5343 009c 002B     		cmp	r3, #0
 5344 009e 02D1     		bne	.L322
2159:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: no memory for pbuf\n"));
2160:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     return ERR_MEM;
 5345              		.loc 1 2160 12
 5346 00a0 4FF0FF33 		mov	r3, #-1
 5347 00a4 4CE0     		b	.L318
 5348              	.L322:
2161:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2162:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcphdr = (struct tcp_hdr *)p->payload;
 5349              		.loc 1 2162 10
 5350 00a6 BB69     		ldr	r3, [r7, #24]
 5351 00a8 5B68     		ldr	r3, [r3, #4]
 5352 00aa 7B61     		str	r3, [r7, #20]
2163:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
ARM GAS  /tmp/cc6RPj0P.s 			page 137


2164:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (is_fin) {
 5353              		.loc 1 2164 6
 5354 00ac FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 5355 00ae 002B     		cmp	r3, #0
 5356 00b0 11D0     		beq	.L323
2165:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* FIN segment, no data */
2166:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     TCPH_FLAGS_SET(tcphdr, TCP_ACK | TCP_FIN);
 5357              		.loc 1 2166 5
 5358 00b2 7B69     		ldr	r3, [r7, #20]
 5359 00b4 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 5360 00b6 9BB2     		uxth	r3, r3
 5361 00b8 1BB2     		sxth	r3, r3
 5362 00ba 23F47C53 		bic	r3, r3, #16128
 5363 00be 1CB2     		sxth	r4, r3
 5364 00c0 1120     		movs	r0, #17
 5365 00c2 FFF7FEFF 		bl	lwip_htons
 5366 00c6 0346     		mov	r3, r0
 5367 00c8 1BB2     		sxth	r3, r3
 5368 00ca 2343     		orrs	r3, r3, r4
 5369 00cc 1BB2     		sxth	r3, r3
 5370 00ce 9AB2     		uxth	r2, r3
 5371 00d0 7B69     		ldr	r3, [r7, #20]
 5372 00d2 9A81     		strh	r2, [r3, #12]	@ unaligned
 5373 00d4 10E0     		b	.L324
 5374              	.L323:
 5375              	.LBB20:
2167:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   } else {
2168:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Data segment, copy in one byte from the head of the unacked queue */
2169:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     char *d = ((char *)p->payload + TCP_HLEN);
 5376              		.loc 1 2169 25
 5377 00d6 BB69     		ldr	r3, [r7, #24]
 5378 00d8 5B68     		ldr	r3, [r3, #4]
 5379              		.loc 1 2169 11
 5380 00da 1433     		adds	r3, r3, #20
 5381 00dc 3B61     		str	r3, [r7, #16]
2170:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     /* Depending on whether the segment has already been sent (unacked) or not
2171:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        (unsent), seg->p->payload points to the IP header or TCP header.
2172:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****        Ensure we copy the first TCP data byte: */
2173:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pbuf_copy_partial(seg->p, d, 1, seg->p->tot_len - seg->len);
 5382              		.loc 1 2173 26
 5383 00de 3B6A     		ldr	r3, [r7, #32]
 5384 00e0 5868     		ldr	r0, [r3, #4]
 5385              		.loc 1 2173 40
 5386 00e2 3B6A     		ldr	r3, [r7, #32]
 5387 00e4 5B68     		ldr	r3, [r3, #4]
 5388              		.loc 1 2173 43
 5389 00e6 1A89     		ldrh	r2, [r3, #8]
 5390              		.loc 1 2173 58
 5391 00e8 3B6A     		ldr	r3, [r7, #32]
 5392 00ea 1B89     		ldrh	r3, [r3, #8]
 5393              		.loc 1 2173 5
 5394 00ec D31A     		subs	r3, r2, r3
 5395 00ee 9BB2     		uxth	r3, r3
 5396 00f0 0122     		movs	r2, #1
 5397 00f2 3969     		ldr	r1, [r7, #16]
 5398 00f4 FFF7FEFF 		bl	pbuf_copy_partial
 5399              	.L324:
ARM GAS  /tmp/cc6RPj0P.s 			page 138


 5400              	.LBE20:
2174:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2175:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2176:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   /* The byte may be acknowledged without the window being opened. */
2177:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   snd_nxt = lwip_ntohl(seg->tcphdr->seqno) + 1;
 5401              		.loc 1 2177 13
 5402 00f8 3B6A     		ldr	r3, [r7, #32]
 5403 00fa DB68     		ldr	r3, [r3, #12]
 5404 00fc 5B68     		ldr	r3, [r3, #4]	@ unaligned
 5405 00fe 1846     		mov	r0, r3
 5406 0100 FFF7FEFF 		bl	lwip_htonl
 5407 0104 0346     		mov	r3, r0
 5408              		.loc 1 2177 11
 5409 0106 0133     		adds	r3, r3, #1
 5410 0108 FB60     		str	r3, [r7, #12]
2178:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   if (TCP_SEQ_LT(pcb->snd_nxt, snd_nxt)) {
 5411              		.loc 1 2178 7
 5412 010a 7B68     		ldr	r3, [r7, #4]
 5413 010c 1A6D     		ldr	r2, [r3, #80]
 5414 010e FB68     		ldr	r3, [r7, #12]
 5415 0110 D31A     		subs	r3, r2, r3
 5416              		.loc 1 2178 6
 5417 0112 002B     		cmp	r3, #0
 5418 0114 02DA     		bge	.L325
2179:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****     pcb->snd_nxt = snd_nxt;
 5419              		.loc 1 2179 18
 5420 0116 7B68     		ldr	r3, [r7, #4]
 5421 0118 FA68     		ldr	r2, [r7, #12]
 5422 011a 1A65     		str	r2, [r3, #80]
 5423              	.L325:
2180:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   }
2181:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   tcp_output_fill_options(pcb, p, 0, optlen);
 5424              		.loc 1 2181 3
 5425 011c 97F82730 		ldrb	r3, [r7, #39]	@ zero_extendqisi2
 5426 0120 0022     		movs	r2, #0
 5427 0122 B969     		ldr	r1, [r7, #24]
 5428 0124 7868     		ldr	r0, [r7, #4]
 5429 0126 FFF7FEFF 		bl	tcp_output_fill_options
2182:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2183:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   err = tcp_output_control_segment(pcb, p, &pcb->local_ip, &pcb->remote_ip);
 5430              		.loc 1 2183 44
 5431 012a 7A68     		ldr	r2, [r7, #4]
 5432              		.loc 1 2183 60
 5433 012c 7B68     		ldr	r3, [r7, #4]
 5434 012e 0433     		adds	r3, r3, #4
 5435              		.loc 1 2183 9
 5436 0130 B969     		ldr	r1, [r7, #24]
 5437 0132 7868     		ldr	r0, [r7, #4]
 5438 0134 FFF7FEFF 		bl	tcp_output_control_segment
 5439 0138 0346     		mov	r3, r0
 5440 013a FB72     		strb	r3, [r7, #11]
2184:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** 
2185:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   LWIP_DEBUGF(TCP_DEBUG, ("tcp_zero_window_probe: seqno %"U32_F
2186:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           " ackno %"U32_F" err %d.\n",
2187:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****                           pcb->snd_nxt - 1, pcb->rcv_nxt, (int)err));
2188:Middlewares/Third_Party/LwIP/src/core/tcp_out.c ****   return err;
 5441              		.loc 1 2188 10
ARM GAS  /tmp/cc6RPj0P.s 			page 139


 5442 013c 97F90B30 		ldrsb	r3, [r7, #11]
 5443              	.L318:
2189:Middlewares/Third_Party/LwIP/src/core/tcp_out.c **** }
 5444              		.loc 1 2189 1
 5445 0140 1846     		mov	r0, r3
 5446 0142 2C37     		adds	r7, r7, #44
 5447              	.LCFI118:
 5448              		.cfi_def_cfa_offset 12
 5449 0144 BD46     		mov	sp, r7
 5450              	.LCFI119:
 5451              		.cfi_def_cfa_register 13
 5452              		@ sp needed
 5453 0146 90BD     		pop	{r4, r7, pc}
 5454              	.L327:
 5455              		.align	2
 5456              	.L326:
 5457 0148 00000000 		.word	.LC0
 5458 014c F4070000 		.word	.LC57
 5459 0150 50000000 		.word	.LC2
 5460              		.cfi_endproc
 5461              	.LFE156:
 5463              		.text
 5464              	.Letext0:
 5465              		.file 2 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/machine/_default_typ
 5466              		.file 3 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_stdint.h"
 5467              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 5468              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 5469              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 5470              		.file 7 "/home/mego-ros2/microros_ws/firmware/toolchain/lib/gcc/arm-none-eabi/8.3.1/include/stddef
 5471              		.file 8 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/_types.h"
 5472              		.file 9 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/reent.h"
 5473              		.file 10 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/sys/lock.h"
 5474              		.file 11 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/stdlib.h"
 5475              		.file 12 "Middlewares/Third_Party/LwIP/src/include/lwip/arch.h"
 5476              		.file 13 "/home/mego-ros2/microros_ws/firmware/toolchain/arm-none-eabi/include/ctype.h"
 5477              		.file 14 "Middlewares/Third_Party/LwIP/src/include/lwip/tcpbase.h"
 5478              		.file 15 "Middlewares/Third_Party/LwIP/src/include/lwip/err.h"
 5479              		.file 16 "Middlewares/Third_Party/LwIP/src/include/lwip/pbuf.h"
 5480              		.file 17 "Middlewares/Third_Party/LwIP/src/include/lwip/ip4_addr.h"
 5481              		.file 18 "Middlewares/Third_Party/LwIP/src/include/lwip/ip_addr.h"
 5482              		.file 19 "Middlewares/Third_Party/LwIP/src/include/lwip/memp.h"
 5483              		.file 20 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/memp_priv.h"
 5484              		.file 21 "Middlewares/Third_Party/LwIP/src/include/lwip/netif.h"
 5485              		.file 22 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/ip4.h"
 5486              		.file 23 "Middlewares/Third_Party/LwIP/src/include/lwip/ip.h"
 5487              		.file 24 "Middlewares/Third_Party/LwIP/src/include/lwip/tcp.h"
 5488              		.file 25 "Middlewares/Third_Party/LwIP/src/include/lwip/priv/tcp_priv.h"
 5489              		.file 26 "Middlewares/Third_Party/LwIP/src/include/lwip/prot/tcp.h"
ARM GAS  /tmp/cc6RPj0P.s 			page 140


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tcp_out.c
     /tmp/cc6RPj0P.s:18     .text.tcp_route:0000000000000000 $t
     /tmp/cc6RPj0P.s:25     .text.tcp_route:0000000000000000 tcp_route
     /tmp/cc6RPj0P.s:83     .rodata:0000000000000000 $d
     /tmp/cc6RPj0P.s:99     .text.tcp_create_segment:0000000000000000 $t
     /tmp/cc6RPj0P.s:105    .text.tcp_create_segment:0000000000000000 tcp_create_segment
     /tmp/cc6RPj0P.s:308    .text.tcp_create_segment:0000000000000128 $d
     /tmp/cc6RPj0P.s:327    .text.tcp_pbuf_prealloc:0000000000000000 $t
     /tmp/cc6RPj0P.s:333    .text.tcp_pbuf_prealloc:0000000000000000 tcp_pbuf_prealloc
     /tmp/cc6RPj0P.s:492    .text.tcp_pbuf_prealloc:00000000000000e0 $d
     /tmp/cc6RPj0P.s:512    .text.tcp_write_checks:0000000000000000 $t
     /tmp/cc6RPj0P.s:518    .text.tcp_write_checks:0000000000000000 tcp_write_checks
     /tmp/cc6RPj0P.s:678    .text.tcp_write_checks:00000000000000e0 $d
     /tmp/cc6RPj0P.s:730    .text.tcp_write:0000000000000000 $t
     /tmp/cc6RPj0P.s:737    .text.tcp_write:0000000000000000 tcp_write
     /tmp/cc6RPj0P.s:1180   .text.tcp_write:00000000000002dc $d
     /tmp/cc6RPj0P.s:1192   .text.tcp_write:0000000000000300 $t
     /tmp/cc6RPj0P.s:1588   .text.tcp_write:00000000000005a4 $d
     /tmp/cc6RPj0P.s:1597   .text.tcp_write:00000000000005c0 $t
     /tmp/cc6RPj0P.s:1769   .text.tcp_write:00000000000006bc $d
     /tmp/cc6RPj0P.s:1792   .text.tcp_split_unsent_seg:0000000000000000 $t
     /tmp/cc6RPj0P.s:1799   .text.tcp_split_unsent_seg:0000000000000000 tcp_split_unsent_seg
     /tmp/cc6RPj0P.s:2189   .text.tcp_split_unsent_seg:0000000000000274 $d
     /tmp/cc6RPj0P.s:2204   .text.tcp_send_fin:0000000000000000 $t
     /tmp/cc6RPj0P.s:2211   .text.tcp_send_fin:0000000000000000 tcp_send_fin
     /tmp/cc6RPj0P.s:2360   .text.tcp_enqueue_flags:0000000000000000 tcp_enqueue_flags
     /tmp/cc6RPj0P.s:2325   .text.tcp_send_fin:0000000000000094 $d
     /tmp/cc6RPj0P.s:2353   .text.tcp_enqueue_flags:0000000000000000 $t
     /tmp/cc6RPj0P.s:2644   .text.tcp_enqueue_flags:00000000000001bc $d
     /tmp/cc6RPj0P.s:2666   .text.tcp_output:0000000000000000 $t
     /tmp/cc6RPj0P.s:2673   .text.tcp_output:0000000000000000 tcp_output
     /tmp/cc6RPj0P.s:4980   .text.tcp_send_empty_ack:0000000000000000 tcp_send_empty_ack
     /tmp/cc6RPj0P.s:3419   .text.tcp_output_segment:0000000000000000 tcp_output_segment
     /tmp/cc6RPj0P.s:3087   .text.tcp_output:0000000000000288 $d
     /tmp/cc6RPj0P.s:3095   .text.tcp_output:00000000000002a0 $t
     /tmp/cc6RPj0P.s:3330   .text.tcp_output_segment_busy:0000000000000000 $t
     /tmp/cc6RPj0P.s:3336   .text.tcp_output_segment_busy:0000000000000000 tcp_output_segment_busy
     /tmp/cc6RPj0P.s:3393   .text.tcp_output_segment_busy:0000000000000034 $d
     /tmp/cc6RPj0P.s:3413   .text.tcp_output_segment:0000000000000000 $t
     /tmp/cc6RPj0P.s:3702   .text.tcp_output_segment:00000000000001a0 $d
     /tmp/cc6RPj0P.s:3717   .text.tcp_rexmit_rto_prepare:0000000000000000 $t
     /tmp/cc6RPj0P.s:3724   .text.tcp_rexmit_rto_prepare:0000000000000000 tcp_rexmit_rto_prepare
     /tmp/cc6RPj0P.s:3884   .text.tcp_rexmit_rto_prepare:00000000000000d4 $d
     /tmp/cc6RPj0P.s:3895   .text.tcp_rexmit_rto_commit:0000000000000000 $t
     /tmp/cc6RPj0P.s:3902   .text.tcp_rexmit_rto_commit:0000000000000000 tcp_rexmit_rto_commit
     /tmp/cc6RPj0P.s:3962   .text.tcp_rexmit_rto_commit:0000000000000044 $d
     /tmp/cc6RPj0P.s:3973   .text.tcp_rexmit_rto:0000000000000000 $t
     /tmp/cc6RPj0P.s:3980   .text.tcp_rexmit_rto:0000000000000000 tcp_rexmit_rto
     /tmp/cc6RPj0P.s:4033   .text.tcp_rexmit_rto:0000000000000038 $d
     /tmp/cc6RPj0P.s:4044   .text.tcp_rexmit:0000000000000000 $t
     /tmp/cc6RPj0P.s:4051   .text.tcp_rexmit:0000000000000000 tcp_rexmit
     /tmp/cc6RPj0P.s:4206   .text.tcp_rexmit:00000000000000cc $d
     /tmp/cc6RPj0P.s:4217   .text.tcp_rexmit_fast:0000000000000000 $t
     /tmp/cc6RPj0P.s:4224   .text.tcp_rexmit_fast:0000000000000000 tcp_rexmit_fast
     /tmp/cc6RPj0P.s:4353   .text.tcp_rexmit_fast:00000000000000b8 $d
     /tmp/cc6RPj0P.s:4364   .text.tcp_output_alloc_header_common:0000000000000000 $t
ARM GAS  /tmp/cc6RPj0P.s 			page 141


     /tmp/cc6RPj0P.s:4370   .text.tcp_output_alloc_header_common:0000000000000000 tcp_output_alloc_header_common
     /tmp/cc6RPj0P.s:4512   .text.tcp_output_alloc_header_common:00000000000000d8 $d
     /tmp/cc6RPj0P.s:4523   .text.tcp_output_alloc_header:0000000000000000 $t
     /tmp/cc6RPj0P.s:4529   .text.tcp_output_alloc_header:0000000000000000 tcp_output_alloc_header
     /tmp/cc6RPj0P.s:4617   .text.tcp_output_alloc_header:0000000000000070 $d
     /tmp/cc6RPj0P.s:4628   .text.tcp_output_fill_options:0000000000000000 $t
     /tmp/cc6RPj0P.s:4634   .text.tcp_output_fill_options:0000000000000000 tcp_output_fill_options
     /tmp/cc6RPj0P.s:4715   .text.tcp_output_fill_options:0000000000000070 $d
     /tmp/cc6RPj0P.s:4727   .text.tcp_output_control_segment:0000000000000000 $t
     /tmp/cc6RPj0P.s:4733   .text.tcp_output_control_segment:0000000000000000 tcp_output_control_segment
     /tmp/cc6RPj0P.s:4837   .text.tcp_output_control_segment:0000000000000088 $d
     /tmp/cc6RPj0P.s:4851   .text.tcp_rst:0000000000000000 $t
     /tmp/cc6RPj0P.s:4858   .text.tcp_rst:0000000000000000 tcp_rst
     /tmp/cc6RPj0P.s:4961   .text.tcp_rst:0000000000000094 $d
     /tmp/cc6RPj0P.s:4973   .text.tcp_send_empty_ack:0000000000000000 $t
     /tmp/cc6RPj0P.s:5105   .text.tcp_send_empty_ack:00000000000000b8 $d
     /tmp/cc6RPj0P.s:5116   .text.tcp_keepalive:0000000000000000 $t
     /tmp/cc6RPj0P.s:5123   .text.tcp_keepalive:0000000000000000 tcp_keepalive
     /tmp/cc6RPj0P.s:5213   .text.tcp_keepalive:0000000000000074 $d
     /tmp/cc6RPj0P.s:5224   .text.tcp_zero_window_probe:0000000000000000 $t
     /tmp/cc6RPj0P.s:5231   .text.tcp_zero_window_probe:0000000000000000 tcp_zero_window_probe
     /tmp/cc6RPj0P.s:5457   .text.tcp_zero_window_probe:0000000000000148 $d

UNDEFINED SYMBOLS
netif_get_by_index
ip4_route
printf
memp_malloc
pbuf_free
pbuf_add_header
tcp_seg_free
lwip_htons
lwip_htonl
pbuf_alloc
memcpy
pbuf_clen
pbuf_cat
tcp_segs_free
pbuf_copy_partial
pbuf_realloc
tcp_input_pcb
tcp_eff_send_mss_netif
ip4_output_if
tcp_ticks
